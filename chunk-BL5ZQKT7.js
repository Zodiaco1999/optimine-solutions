import{g as Vn,h as zn,i as Gn,j as Qn}from"./chunk-I4UZQ3JC.js";import{$a as He,Ca as jn,Da as Xt,Db as $n,Eb as Hn,Ha as gr,Ia as Dn,Ja as Zt,Ma as er,T as Bn,U as Nn,Va as Fn,a as Ie,ab as Ot,b as et,bb as ut,c as qr,cb as tr,d as Me,e as Ke,f as lt,g as vt,gb as Ht,h as Ye,hb as Vt,ma as Ln,nb as rr,ob as Wn,pa as Un,pb as ir,qb as nr,rb as mr,sb as Et,tb as St,vb as $r,wb as qn,ya as Fe,yb as At,zb as or}from"./chunk-KXW2KUTA.js";var _a=["canvas"],wa=["rLabel"],va=["reading"],Ea=[[["ngx-gauge-prepend"]],[["ngx-gauge-value"]],[["ngx-gauge-append"]],[["ngx-gauge-label"]]],Sa=["ngx-gauge-prepend","ngx-gauge-value","ngx-gauge-append","ngx-gauge-label"];function Aa(s,c){s&1&&ir(0,0,["*ngSwitchCase","true"])}function Ia(s,c){if(s&1&&(Ht(0),At(1),Vt()),s&2){let o=rr();Fe(),or(o.prepend)}}function ka(s,c){s&1&&ir(0,1,["*ngSwitchCase","true"])}function Ta(s,c){if(s&1&&(Ht(0),At(1),$n(2,"number"),Vt()),s&2){let o=rr();Fe(),or(Hn(2,1,o.value))}}function Ca(s,c){s&1&&ir(0,2,["*ngSwitchCase","true"])}function Pa(s,c){if(s&1&&(Ht(0),At(1),Vt()),s&2){let o=rr();Fe(),or(o.append)}}function Ra(s,c){s&1&&ir(0,3,["*ngSwitchCase","true"])}function Oa(s,c){if(s&1&&(Ht(0),At(1),Vt()),s&2){let o=rr();Fe(),or(o.label)}}function Kn(s,c,o){return Math.max(c,Math.min(o,s))}function xa(s){return s!=null&&`${s}`!="false"}function sr(s,c=0){return isNaN(parseFloat(s))||isNaN(Number(s))?c:Number(s)}function Yn(s){return`${s}px`}function Jn(s){return s!=null&&!isNaN(parseFloat(s))&&!isNaN(Number(s))}var Ma=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Zt({type:c,selectors:[["ngx-gauge-append"]],exportAs:["ngxGaugeAppend"],standalone:!1});let s=c;return s})(),Ba=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Zt({type:c,selectors:[["ngx-gauge-prepend"]],exportAs:["ngxGaugePrepend"],standalone:!1});let s=c;return s})(),Na=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Zt({type:c,selectors:[["ngx-gauge-value"]],exportAs:["ngxGaugeValue"],standalone:!1});let s=c;return s})(),La=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Zt({type:c,selectors:[["ngx-gauge-label"]],exportAs:["ngxGaugeLabel"],standalone:!1});let s=c;return s})(),it={MIN:0,MAX:100,TYPE:"arch",THICK:4,FOREGROUND_COLOR:"rgba(0, 150, 136, 1)",BACKGROUND_COLOR:"rgba(0, 0, 0, 0.1)",CAP:"butt",SIZE:200},Zn=(()=>{let c=class c{get size(){return this._size}set size(a){this._size=sr(a)}get margin(){return this._margin}set margin(a){this._margin=sr(a)}get min(){return this._min}set min(a){this._min=sr(a,it.MIN)}get animate(){return this._animate}set animate(a){this._animate=xa(a)}get max(){return this._max}set max(a){this._max=sr(a,it.MAX)}get value(){return this._value}set value(a){this._value=sr(a)}constructor(a,h){this._elementRef=a,this._renderer=h,this._size=it.SIZE,this._min=it.MIN,this._max=it.MAX,this._animate=!0,this._margin=0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=it.TYPE,this.cap=it.CAP,this.thick=it.THICK,this.foregroundColor=it.FOREGROUND_COLOR,this.backgroundColor=it.BACKGROUND_COLOR,this.thresholds=Object.create(null),this.markers=Object.create(null),this._value=0,this.duration=1200}ngOnInit(){this.markers&&Object.keys(this.markers).length>0&&!this._margin&&(this._margin=10)}ngOnChanges(a){let h=a.thick||a.type||a.cap||a.size,t=a.value||a.min||a.max;if(this._initialized){if(t){let e;if(a.value){e=Number(a.value.currentValue),e=isNaN(e)?0:e;let i=Number(a.value.previousValue);this._oldChangeVal=isNaN(i)?this._oldChangeVal:i}this._update(e,this._oldChangeVal)}h&&(this._destroy(),this._init())}}_updateSize(){this._renderer.setStyle(this._elementRef.nativeElement,"width",Yn(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",Yn(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-this.size*.22/2)+"px)")}ngAfterViewInit(){this._canvas&&this._init()}ngOnDestroy(){this._destroy()}_getBounds(a){let h,t,e,i;return a=="semi"?(h=Math.PI,t=2*Math.PI,e=180,i=360):a=="full"?(h=1.5*Math.PI,t=3.5*Math.PI,e=270,i=e+360):a==="arch"&&(h=.8*Math.PI,t=2.2*Math.PI,e=180-.2*180,i=360+.2*180),{head:h,tail:t,start:e,end:i}}_drawShell(a,h,t,e){let i=this._getCenter(),r=this._getRadius();if(this._initialized){this._clear(),this._drawMarkersAndTicks();let n=this._getBackgroundColorRanges();if(this._context.lineWidth=this.thick,n&&n.length>0){this._context.lineCap="butt";for(let l=0;l<n.length;++l){let f=n[l];this._context.beginPath(),this._context.strokeStyle=f.backgroundColor?f.backgroundColor:f.bgOpacity?f.color:this.backgroundColor,f.bgOpacity!==void 0&&f.bgOpacity!==null&&(this._context.globalAlpha=f.bgOpacity),this._context.arc(i.x,i.y,r,this._getDisplacement(f.start),this._getDisplacement(f.end),!1),this._context.stroke(),this._context.globalAlpha=1}}else this._context.lineCap=this.cap,this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(i.x,i.y,r,a,t,!1),this._context.stroke();this._drawFill(a,h,t,e)}}_drawFill(a,h,t,e){let i=this._getCenter(),r=this._getRadius();this._context.lineCap=this.cap,this._context.lineWidth=this.thick,h=Math.max(h,a),h=Math.min(h,t),this._context.lineCap=this.cap,this._context.lineWidth=this.thick,this._context.beginPath(),this._context.strokeStyle=e,this._context.arc(i.x,i.y,r,a,h,!1),this._context.stroke()}_addMarker(a,h,t,e,i,r){var n=a*Math.PI/180;let l=2;i||(i=8),e||(e="line");let f=this._getCenter(),d=this._getRadius(),g=(d+this.thick/2+l)*Math.cos(n)+f.x,_=(d+this.thick/2+l)*Math.sin(n)+f.y,p=(d+this.thick/2+l+i)*Math.cos(n)+f.x,m=(d+this.thick/2+l+i)*Math.sin(n)+f.y;if(e=="triangle"){this._context.beginPath(),this._context.strokeStyle=h,this._context.moveTo(g,_),this._context.lineWidth=1;let E=a-45,b=a+45;E<0&&(E+=360),E>360&&(E-=360),b<0&&(b+=360),b>360&&(b-=360);let w=E*Math.PI/180,k=i*Math.cos(w)+g,T=i*Math.sin(w)+_;this._context.lineTo(k,T);let S=b*Math.PI/180,I=i*Math.cos(S)+g,P=i*Math.sin(S)+_;this._context.lineTo(I,P),this._context.lineTo(g,_),this._context.closePath(),this._context.stroke(),this._context.fillStyle=h,this._context.fill()}else this._context.beginPath(),this._context.lineWidth=.5,this._context.strokeStyle=h,this._context.moveTo(g,_),this._context.lineTo(p,m),this._context.closePath(),this._context.stroke();t&&(this._context.save(),this._context.translate(p,m),this._context.rotate((a+90)*(Math.PI/180)),this._context.textAlign="center",this._context.font=r||"13px Arial",this._context.fillText(t,0,-3),this._context.restore())}_clear(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())}_getWidth(){return this.size}_getHeight(){return this.size}_getCanvasHeight(){return this.type=="arch"||this.type=="semi"?.85*this._getHeight():this._getHeight()}_getRadius(){var h=this._getCenter().x-this.thick;return this._margin>0&&(h-=this._margin),h}_getCenter(){var a=this._getWidth()/2,h=this._getHeight()/2;return{x:a,y:h}}_init(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._create()}_destroy(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1}_getForegroundColorByRange(a){let h=this._getThresholdMatchForValue(a);return h&&h.color?h.color:this.foregroundColor}_getThresholdMatchForValue(a){let h=Object.keys(this.thresholds).filter(function(t){return Jn(t)&&Number(t)<=a}).sort((t,e)=>Number(t)-Number(e)).reverse()[0];if(h!==void 0){let t=this.thresholds[h];return{color:t.color,backgroundColor:t.backgroundColor,bgOpacity:t.bgOpacity,start:Number(h),end:this._getNextThreshold(Number(h))}}}_getNextThreshold(a){let h=Object.keys(this.thresholds).filter(function(t){return Jn(t)&&Number(t)>a}).sort((t,e)=>Number(t)-Number(e));return h&&h[0]!==void 0?Number(h[0]):this.max}_getBackgroundColorRanges(){let a=0,h=[];do{let t=this._getThresholdMatchForValue(a);if(t){if(h.push({start:t.start,end:t.end,color:t.color,backgroundColor:t.backgroundColor,bgOpacity:t.bgOpacity}),a=t.end,a>=this.max)break}else break}while(!0);return h}_getDisplacement(a){let h=this.type,t=this._getBounds(h),e=this.min,i=this.max,r=t.head,n=Kn(a,this.min,this.max),l=(t.tail-t.head)/(i-e),f=l*(n-e);return r+f}_create(a,h){let t=this,e=this.type,i=this._getBounds(e),r=this.duration,n=this.min,l=this.max,f=Kn(this.value,n,l),d=i.head,g=(i.tail-i.head)/(l-n),_=g*(f-n),p=i.tail,m=this._getForegroundColorByRange(f),E;t._animationRequestID&&window.cancelAnimationFrame(t._animationRequestID);let b=w=>{w=w||new Date().getTime();let k=w-E,T=Math.min(k/r,1),S=h?(h-n)*g:0,I=d+S+_*T;t._drawShell(d,I,p,m),t._animationRequestID&&k<r?t._animationRequestID=window.requestAnimationFrame(P=>b(P)):window.cancelAnimationFrame(t._animationRequestID)};this._animate?(a!==void 0&&h!==void 0&&h!==0&&(_=g*a-g*h),t._animationRequestID=window.requestAnimationFrame(w=>{E=w||new Date().getTime(),b(E)})):t._drawShell(d,d+_,p,m)}_drawMarkersAndTicks(){if(this.markers){let a=this._getBounds(this.type),t=(a.end-a.start)/(this.max-this.min);for(let e in this.markers){let i=Number(e)-this.min,r=a.start+i*t,n=this.markers[e];this._addMarker(r,n.color,n.label,n.type,n.size,n.font)}}}_update(a,h){this._clear(),this._create(a,h)}};c.\u0275fac=function(h){return new(h||c)(Xt(Un),Xt(jn))},c.\u0275cmp=gr({type:c,selectors:[["ngx-gauge"]],contentQueries:function(h,t,e){if(h&1&&(nr(e,La,5),nr(e,Ba,5),nr(e,Ma,5),nr(e,Na,5)),h&2){let i;Et(i=St())&&(t._labelChild=i.first),Et(i=St())&&(t._prependChild=i.first),Et(i=St())&&(t._appendChild=i.first),Et(i=St())&&(t._valueDisplayChild=i.first)}},viewQuery:function(h,t){if(h&1&&(mr(_a,7),mr(wa,7),mr(va,7)),h&2){let e;Et(e=St())&&(t._canvas=e.first),Et(e=St())&&(t._label=e.first),Et(e=St())&&(t._reading=e.first)}},hostAttrs:["role","slider","aria-readonly","true"],hostVars:7,hostBindings:function(h,t){h&2&&(Fn("aria-valuemin",t.min)("aria-valuemax",t.max)("aria-valuenow",t.value)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),qn("ngx-gauge-meter",!0))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],size:"size",margin:"margin",min:"min",animate:"animate",max:"max",type:"type",cap:"cap",thick:"thick",label:"label",append:"append",prepend:"prepend",foregroundColor:"foregroundColor",backgroundColor:"backgroundColor",thresholds:"thresholds",markers:"markers",value:"value",duration:"duration"},standalone:!1,features:[Ln],ngContentSelectors:Sa,decls:17,vars:16,consts:[["reading",""],["rLabel",""],["canvas",""],[1,"reading-block"],[1,"reading-affix",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch"],[1,"reading-label",3,"ngSwitch"]],template:function(h,t){h&1&&(Wn(Ea),Ot(0,"div",3,0)(2,"u",4),er(3,Aa,1,0,"ng-content",5)(4,Ia,2,1,"ng-container",5),ut(),Ht(5,6),er(6,ka,1,0,"ng-content",5)(7,Ta,3,3,"ng-container",5),Vt(),Ot(8,"u",4),er(9,Ca,1,0,"ng-content",5)(10,Pa,2,1,"ng-container",5),ut()(),Ot(11,"div",7,1),er(13,Ra,1,0,"ng-content",5)(14,Oa,2,1,"ng-container",5),ut(),tr(15,"canvas",null,2)),h&2&&($r("font-size",(t.size-t.margin*2)*.22+"px"),Fe(2),He("ngSwitch",t._prependChild!=null),Fe(),He("ngSwitchCase",!0),Fe(),He("ngSwitchCase",!1),Fe(),He("ngSwitch",t._valueDisplayChild!=null),Fe(),He("ngSwitchCase",!0),Fe(),He("ngSwitchCase",!1),Fe(),He("ngSwitch",t._appendChild!=null),Fe(),He("ngSwitchCase",!0),Fe(),He("ngSwitchCase",!1),Fe(),$r("font-size",(t.size-t.margin*2)/13+"px"),He("ngSwitch",t._labelChild!=null),Fe(2),He("ngSwitchCase",!0),Fe(),He("ngSwitchCase",!1))},dependencies:[Vn,zn,Gn],styles:[`.ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}
`],encapsulation:2});let s=c;return s})(),eo=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275mod=Dn({type:c}),c.\u0275inj=Nn({imports:[Qn]});let s=c;return s})();var yn=Object.defineProperty,ja=Object.getOwnPropertyDescriptor,Da=Object.getOwnPropertyNames,Fa=Object.prototype.hasOwnProperty,ze=(s,c)=>()=>(s&&(c=s(s=0)),c),de=(s,c)=>()=>(c||s((c={exports:{}}).exports,c),c.exports),Qt=(s,c)=>{for(var o in c)yn(s,o,{get:c[o],enumerable:!0})},Wa=(s,c,o,a)=>{if(c&&typeof c=="object"||typeof c=="function")for(let h of Da(c))!Fa.call(s,h)&&h!==o&&yn(s,h,{get:()=>c[h],enumerable:!(a=ja(c,h))||a.enumerable});return s},Re=s=>Wa(yn({},"__esModule",{value:!0}),s),ne=ze(()=>{}),xe={};Qt(xe,{_debugEnd:()=>Mi,_debugProcess:()=>xi,_events:()=>Qi,_eventsCount:()=>Ki,_exiting:()=>yi,_fatalExceptions:()=>Pi,_getActiveHandles:()=>Uo,_getActiveRequests:()=>Lo,_kill:()=>vi,_linkedBinding:()=>Bo,_maxListeners:()=>Gi,_preload_modules:()=>Vi,_rawDebug:()=>gi,_startProfilerIdleNotifier:()=>Bi,_stopProfilerIdleNotifier:()=>Ni,_tickCallback:()=>Oi,abort:()=>Di,addListener:()=>Yi,allowedNodeEnvironmentFlags:()=>Ti,arch:()=>ri,argv:()=>oi,argv0:()=>Hi,assert:()=>jo,binding:()=>hi,chdir:()=>di,config:()=>_i,cpuUsage:()=>lr,cwd:()=>fi,debugPort:()=>$i,default:()=>wn,dlopen:()=>No,domain:()=>bi,emit:()=>tn,emitWarning:()=>ui,env:()=>ni,execArgv:()=>si,execPath:()=>qi,exit:()=>Ii,features:()=>Ci,hasUncaughtExceptionCaptureCallback:()=>Do,hrtime:()=>Er,kill:()=>Ai,listeners:()=>Wo,memoryUsage:()=>Si,moduleLoadList:()=>mi,nextTick:()=>xo,off:()=>Xi,on:()=>ct,once:()=>Ji,openStdin:()=>ki,pid:()=>Fi,platform:()=>ii,ppid:()=>Wi,prependListener:()=>rn,prependOnceListener:()=>nn,reallyExit:()=>wi,release:()=>pi,removeAllListeners:()=>en,removeListener:()=>Zi,resourceUsage:()=>Ei,setSourceMapsEnabled:()=>zi,setUncaughtExceptionCaptureCallback:()=>Ri,stderr:()=>Ui,stdin:()=>ji,stdout:()=>Li,title:()=>ti,umask:()=>ci,uptime:()=>Fo,version:()=>ai,versions:()=>li});function _n(s){throw new Error("Node.js process "+s+" is not supported by JSPM core outside of Node.js")}function qa(){!jt||!Lt||(jt=!1,Lt.length?ot=Lt.concat(ot):cr=-1,ot.length&&Oo())}function Oo(){if(!jt){var s=setTimeout(qa,0);jt=!0;for(var c=ot.length;c;){for(Lt=ot,ot=[];++cr<c;)Lt&&Lt[cr].run();cr=-1,c=ot.length}Lt=null,jt=!1,clearTimeout(s)}}function xo(s){var c=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)c[o-1]=arguments[o];ot.push(new Mo(s,c)),ot.length===1&&!jt&&setTimeout(Oo,0)}function Mo(s,c){this.fun=s,this.array=c}function Ve(){}function Bo(s){_n("_linkedBinding")}function No(s){_n("dlopen")}function Lo(){return[]}function Uo(){return[]}function jo(s,c){if(!s)throw new Error(c||"assertion error")}function Do(){return!1}function Fo(){return gt.now()/1e3}function Er(s){var c=Math.floor((Date.now()-gt.now())*.001),o=gt.now()*.001,a=Math.floor(o)+c,h=Math.floor(o%1*1e9);return s&&(a=a-s[0],h=h-s[1],h<0&&(a--,h+=Sr)),[a,h]}function ct(){return wn}function Wo(s){return[]}var ot,jt,Lt,cr,ti,ri,ii,ni,oi,si,ai,li,ui,hi,ci,fi,di,pi,gi,mi,bi,yi,_i,wi,vi,lr,Ei,Si,Ai,Ii,ki,Ti,Ci,Pi,Ri,Oi,xi,Mi,Bi,Ni,Li,Ui,ji,Di,Fi,Wi,qi,$i,Hi,Vi,zi,gt,Hr,Sr,Gi,Qi,Ki,Yi,Ji,Xi,Zi,en,tn,rn,nn,wn,$a=ze(()=>{ne(),se(),oe(),ot=[],jt=!1,cr=-1,Mo.prototype.run=function(){this.fun.apply(null,this.array)},ti="browser",ri="x64",ii="browser",ni={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},oi=["/usr/bin/node"],si=[],ai="v16.8.0",li={},ui=function(s,c){console.warn((c?c+": ":"")+s)},hi=function(s){_n("binding")},ci=function(s){return 0},fi=function(){return"/"},di=function(s){},pi={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},gi=Ve,mi=[],bi={},yi=!1,_i={},wi=Ve,vi=Ve,lr=function(){return{}},Ei=lr,Si=lr,Ai=Ve,Ii=Ve,ki=Ve,Ti={},Ci={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Pi=Ve,Ri=Ve,Oi=Ve,xi=Ve,Mi=Ve,Bi=Ve,Ni=Ve,Li=void 0,Ui=void 0,ji=void 0,Di=Ve,Fi=2,Wi=1,qi="/bin/usr/node",$i=9229,Hi="node",Vi=[],zi=Ve,gt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},gt.now===void 0&&(Hr=Date.now(),gt.timing&&gt.timing.navigationStart&&(Hr=gt.timing.navigationStart),gt.now=()=>Date.now()-Hr),Sr=1e9,Er.bigint=function(s){var c=Er(s);return typeof BigInt>"u"?c[0]*Sr+c[1]:BigInt(c[0]*Sr)+BigInt(c[1])},Gi=10,Qi={},Ki=0,Yi=ct,Ji=ct,Xi=ct,Zi=ct,en=ct,tn=Ve,rn=ct,nn=ct,wn={version:ai,versions:li,arch:ri,platform:ii,release:pi,_rawDebug:gi,moduleLoadList:mi,binding:hi,_linkedBinding:Bo,_events:Qi,_eventsCount:Ki,_maxListeners:Gi,on:ct,addListener:Yi,once:Ji,off:Xi,removeListener:Zi,removeAllListeners:en,emit:tn,prependListener:rn,prependOnceListener:nn,listeners:Wo,domain:bi,_exiting:yi,config:_i,dlopen:No,uptime:Fo,_getActiveRequests:Lo,_getActiveHandles:Uo,reallyExit:wi,_kill:vi,cpuUsage:lr,resourceUsage:Ei,memoryUsage:Si,kill:Ai,exit:Ii,openStdin:ki,allowedNodeEnvironmentFlags:Ti,assert:jo,features:Ci,_fatalExceptions:Pi,setUncaughtExceptionCaptureCallback:Ri,hasUncaughtExceptionCaptureCallback:Do,emitWarning:ui,nextTick:xo,_tickCallback:Oi,_debugProcess:xi,_debugEnd:Mi,_startProfilerIdleNotifier:Bi,_stopProfilerIdleNotifier:Ni,stdout:Li,stdin:ji,stderr:Ui,abort:Di,umask:ci,chdir:di,cwd:fi,env:ni,title:ti,argv:oi,execArgv:si,pid:Fi,ppid:Wi,execPath:qi,debugPort:$i,hrtime:Er,argv0:Hi,_preload_modules:Vi,setSourceMapsEnabled:zi}}),oe=ze(()=>{$a()}),We={};Qt(We,{Buffer:()=>Cr,INSPECT_MAX_BYTES:()=>qo,default:()=>ft,kMaxLength:()=>$o});function Ha(){if(on)return Gt;on=!0,Gt.byteLength=i,Gt.toByteArray=n,Gt.fromByteArray=d;for(var s=[],c=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,t=a.length;h<t;++h)s[h]=a[h],c[a.charCodeAt(h)]=h;c[45]=62,c[95]=63;function e(g){var _=g.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=g.indexOf("=");p===-1&&(p=_);var m=p===_?0:4-p%4;return[p,m]}function i(g){var _=e(g),p=_[0],m=_[1];return(p+m)*3/4-m}function r(g,_,p){return(_+p)*3/4-p}function n(g){var _,p=e(g),m=p[0],E=p[1],b=new o(r(g,m,E)),w=0,k=E>0?m-4:m,T;for(T=0;T<k;T+=4)_=c[g.charCodeAt(T)]<<18|c[g.charCodeAt(T+1)]<<12|c[g.charCodeAt(T+2)]<<6|c[g.charCodeAt(T+3)],b[w++]=_>>16&255,b[w++]=_>>8&255,b[w++]=_&255;return E===2&&(_=c[g.charCodeAt(T)]<<2|c[g.charCodeAt(T+1)]>>4,b[w++]=_&255),E===1&&(_=c[g.charCodeAt(T)]<<10|c[g.charCodeAt(T+1)]<<4|c[g.charCodeAt(T+2)]>>2,b[w++]=_>>8&255,b[w++]=_&255),b}function l(g){return s[g>>18&63]+s[g>>12&63]+s[g>>6&63]+s[g&63]}function f(g,_,p){for(var m,E=[],b=_;b<p;b+=3)m=(g[b]<<16&16711680)+(g[b+1]<<8&65280)+(g[b+2]&255),E.push(l(m));return E.join("")}function d(g){for(var _,p=g.length,m=p%3,E=[],b=16383,w=0,k=p-m;w<k;w+=b)E.push(f(g,w,w+b>k?k:w+b));return m===1?(_=g[p-1],E.push(s[_>>2]+s[_<<4&63]+"==")):m===2&&(_=(g[p-2]<<8)+g[p-1],E.push(s[_>>10]+s[_>>4&63]+s[_<<2&63]+"=")),E.join("")}return Gt}function Va(){return sn?ur:(sn=!0,ur.read=function(s,c,o,a,h){var t,e,i=h*8-a-1,r=(1<<i)-1,n=r>>1,l=-7,f=o?h-1:0,d=o?-1:1,g=s[c+f];for(f+=d,t=g&(1<<-l)-1,g>>=-l,l+=i;l>0;t=t*256+s[c+f],f+=d,l-=8);for(e=t&(1<<-l)-1,t>>=-l,l+=a;l>0;e=e*256+s[c+f],f+=d,l-=8);if(t===0)t=1-n;else{if(t===r)return e?NaN:(g?-1:1)*(1/0);e=e+Math.pow(2,a),t=t-n}return(g?-1:1)*e*Math.pow(2,t-a)},ur.write=function(s,c,o,a,h,t){var e,i,r,n=t*8-h-1,l=(1<<n)-1,f=l>>1,d=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=a?0:t-1,_=a?1:-1,p=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(i=isNaN(c)?1:0,e=l):(e=Math.floor(Math.log(c)/Math.LN2),c*(r=Math.pow(2,-e))<1&&(e--,r*=2),e+f>=1?c+=d/r:c+=d*Math.pow(2,1-f),c*r>=2&&(e++,r/=2),e+f>=l?(i=0,e=l):e+f>=1?(i=(c*r-1)*Math.pow(2,h),e=e+f):(i=c*Math.pow(2,f-1)*Math.pow(2,h),e=0));h>=8;s[o+g]=i&255,g+=_,i/=256,h-=8);for(e=e<<h|i,n+=h;n>0;s[o+g]=e&255,g+=_,e/=256,n-=8);s[o+g-_]|=p*128},ur)}function za(){if(an)return It;an=!0;let s=Ha(),c=Va(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;It.Buffer=e,It.SlowBuffer=E,It.INSPECT_MAX_BYTES=50;let a=2147483647;It.kMaxLength=a,e.TYPED_ARRAY_SUPPORT=h(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{let u=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(u,y),u.foo()===42}catch{return!1}}Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}});function t(u){if(u>a)throw new RangeError('The value "'+u+'" is invalid for option "size"');let y=new Uint8Array(u);return Object.setPrototypeOf(y,e.prototype),y}function e(u,y,v){if(typeof u=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(u)}return i(u,y,v)}e.poolSize=8192;function i(u,y,v){if(typeof u=="string")return f(u,y);if(ArrayBuffer.isView(u))return g(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(L(u,ArrayBuffer)||u&&L(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(L(u,SharedArrayBuffer)||u&&L(u.buffer,SharedArrayBuffer)))return _(u,y,v);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let B=u.valueOf&&u.valueOf();if(B!=null&&B!==u)return e.from(B,y,v);let U=p(u);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return e.from(u[Symbol.toPrimitive]("string"),y,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}e.from=function(u,y,v){return i(u,y,v)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array);function r(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function n(u,y,v){return r(u),u<=0?t(u):y!==void 0?typeof v=="string"?t(u).fill(y,v):t(u).fill(y):t(u)}e.alloc=function(u,y,v){return n(u,y,v)};function l(u){return r(u),t(u<0?0:m(u)|0)}e.allocUnsafe=function(u){return l(u)},e.allocUnsafeSlow=function(u){return l(u)};function f(u,y){if((typeof y!="string"||y==="")&&(y="utf8"),!e.isEncoding(y))throw new TypeError("Unknown encoding: "+y);let v=b(u,y)|0,B=t(v),U=B.write(u,y);return U!==v&&(B=B.slice(0,U)),B}function d(u){let y=u.length<0?0:m(u.length)|0,v=t(y);for(let B=0;B<y;B+=1)v[B]=u[B]&255;return v}function g(u){if(L(u,Uint8Array)){let y=new Uint8Array(u);return _(y.buffer,y.byteOffset,y.byteLength)}return d(u)}function _(u,y,v){if(y<0||u.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<y+(v||0))throw new RangeError('"length" is outside of buffer bounds');let B;return y===void 0&&v===void 0?B=new Uint8Array(u):v===void 0?B=new Uint8Array(u,y):B=new Uint8Array(u,y,v),Object.setPrototypeOf(B,e.prototype),B}function p(u){if(e.isBuffer(u)){let y=m(u.length)|0,v=t(y);return v.length===0||u.copy(v,0,0,y),v}if(u.length!==void 0)return typeof u.length!="number"||X(u.length)?t(0):d(u);if(u.type==="Buffer"&&Array.isArray(u.data))return d(u.data)}function m(u){if(u>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return u|0}function E(u){return+u!=u&&(u=0),e.alloc(+u)}e.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==e.prototype},e.compare=function(u,y){if(L(u,Uint8Array)&&(u=e.from(u,u.offset,u.byteLength)),L(y,Uint8Array)&&(y=e.from(y,y.offset,y.byteLength)),!e.isBuffer(u)||!e.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===y)return 0;let v=u.length,B=y.length;for(let U=0,Q=Math.min(v,B);U<Q;++U)if(u[U]!==y[U]){v=u[U],B=y[U];break}return v<B?-1:B<v?1:0},e.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(u,y){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return e.alloc(0);let v;if(y===void 0)for(y=0,v=0;v<u.length;++v)y+=u[v].length;let B=e.allocUnsafe(y),U=0;for(v=0;v<u.length;++v){let Q=u[v];if(L(Q,Uint8Array))U+Q.length>B.length?(e.isBuffer(Q)||(Q=e.from(Q)),Q.copy(B,U)):Uint8Array.prototype.set.call(B,Q,U);else if(e.isBuffer(Q))Q.copy(B,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=Q.length}return B};function b(u,y){if(e.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||L(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);let v=u.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&v===0)return 0;let U=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return M(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return Z(u).length;default:if(U)return B?-1:M(u).length;y=(""+y).toLowerCase(),U=!0}}e.byteLength=b;function w(u,y,v){let B=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,y>>>=0,v<=y))return"";for(u||(u="utf8");;)switch(u){case"hex":return pe(this,y,v);case"utf8":case"utf-8":return $(this,y,v);case"ascii":return ue(this,y,v);case"latin1":case"binary":return fe(this,y,v);case"base64":return N(this,y,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,y,v);default:if(B)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),B=!0}}e.prototype._isBuffer=!0;function k(u,y,v){let B=u[y];u[y]=u[v],u[v]=B}e.prototype.swap16=function(){let u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<u;y+=2)k(this,y,y+1);return this},e.prototype.swap32=function(){let u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<u;y+=4)k(this,y,y+3),k(this,y+1,y+2);return this},e.prototype.swap64=function(){let u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<u;y+=8)k(this,y,y+7),k(this,y+1,y+6),k(this,y+2,y+5),k(this,y+3,y+4);return this},e.prototype.toString=function(){let u=this.length;return u===0?"":arguments.length===0?$(this,0,u):w.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(u){if(!e.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:e.compare(this,u)===0},e.prototype.inspect=function(){let u="",y=It.INSPECT_MAX_BYTES;return u=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(u+=" ... "),"<Buffer "+u+">"},o&&(e.prototype[o]=e.prototype.inspect),e.prototype.compare=function(u,y,v,B,U){if(L(u,Uint8Array)&&(u=e.from(u,u.offset,u.byteLength)),!e.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(y===void 0&&(y=0),v===void 0&&(v=u?u.length:0),B===void 0&&(B=0),U===void 0&&(U=this.length),y<0||v>u.length||B<0||U>this.length)throw new RangeError("out of range index");if(B>=U&&y>=v)return 0;if(B>=U)return-1;if(y>=v)return 1;if(y>>>=0,v>>>=0,B>>>=0,U>>>=0,this===u)return 0;let Q=U-B,ge=v-y,Ae=Math.min(Q,ge),Te=this.slice(B,U),Oe=u.slice(y,v);for(let ke=0;ke<Ae;++ke)if(Te[ke]!==Oe[ke]){Q=Te[ke],ge=Oe[ke];break}return Q<ge?-1:ge<Q?1:0};function T(u,y,v,B,U){if(u.length===0)return-1;if(typeof v=="string"?(B=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,X(v)&&(v=U?0:u.length-1),v<0&&(v=u.length+v),v>=u.length){if(U)return-1;v=u.length-1}else if(v<0)if(U)v=0;else return-1;if(typeof y=="string"&&(y=e.from(y,B)),e.isBuffer(y))return y.length===0?-1:S(u,y,v,B,U);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(u,y,v):Uint8Array.prototype.lastIndexOf.call(u,y,v):S(u,[y],v,B,U);throw new TypeError("val must be string, number or Buffer")}function S(u,y,v,B,U){let Q=1,ge=u.length,Ae=y.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(u.length<2||y.length<2)return-1;Q=2,ge/=2,Ae/=2,v/=2}function Te(ke,je){return Q===1?ke[je]:ke.readUInt16BE(je*Q)}let Oe;if(U){let ke=-1;for(Oe=v;Oe<ge;Oe++)if(Te(u,Oe)===Te(y,ke===-1?0:Oe-ke)){if(ke===-1&&(ke=Oe),Oe-ke+1===Ae)return ke*Q}else ke!==-1&&(Oe-=Oe-ke),ke=-1}else for(v+Ae>ge&&(v=ge-Ae),Oe=v;Oe>=0;Oe--){let ke=!0;for(let je=0;je<Ae;je++)if(Te(u,Oe+je)!==Te(y,je)){ke=!1;break}if(ke)return Oe}return-1}e.prototype.includes=function(u,y,v){return this.indexOf(u,y,v)!==-1},e.prototype.indexOf=function(u,y,v){return T(this,u,y,v,!0)},e.prototype.lastIndexOf=function(u,y,v){return T(this,u,y,v,!1)};function I(u,y,v,B){v=Number(v)||0;let U=u.length-v;B?(B=Number(B),B>U&&(B=U)):B=U;let Q=y.length;B>Q/2&&(B=Q/2);let ge;for(ge=0;ge<B;++ge){let Ae=parseInt(y.substr(ge*2,2),16);if(X(Ae))return ge;u[v+ge]=Ae}return ge}function P(u,y,v,B){return re(M(y,u.length-v),u,v,B)}function H(u,y,v,B){return re(j(y),u,v,B)}function Y(u,y,v,B){return re(Z(y),u,v,B)}function le(u,y,v,B){return re(K(y,u.length-v),u,v,B)}e.prototype.write=function(u,y,v,B){if(y===void 0)B="utf8",v=this.length,y=0;else if(v===void 0&&typeof y=="string")B=y,v=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(v)?(v=v>>>0,B===void 0&&(B="utf8")):(B=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let U=this.length-y;if((v===void 0||v>U)&&(v=U),u.length>0&&(v<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let Q=!1;for(;;)switch(B){case"hex":return I(this,u,y,v);case"utf8":case"utf-8":return P(this,u,y,v);case"ascii":case"latin1":case"binary":return H(this,u,y,v);case"base64":return Y(this,u,y,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,u,y,v);default:if(Q)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),Q=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(u,y,v){return y===0&&v===u.length?s.fromByteArray(u):s.fromByteArray(u.slice(y,v))}function $(u,y,v){v=Math.min(u.length,v);let B=[],U=y;for(;U<v;){let Q=u[U],ge=null,Ae=Q>239?4:Q>223?3:Q>191?2:1;if(U+Ae<=v){let Te,Oe,ke,je;switch(Ae){case 1:Q<128&&(ge=Q);break;case 2:Te=u[U+1],(Te&192)===128&&(je=(Q&31)<<6|Te&63,je>127&&(ge=je));break;case 3:Te=u[U+1],Oe=u[U+2],(Te&192)===128&&(Oe&192)===128&&(je=(Q&15)<<12|(Te&63)<<6|Oe&63,je>2047&&(je<55296||je>57343)&&(ge=je));break;case 4:Te=u[U+1],Oe=u[U+2],ke=u[U+3],(Te&192)===128&&(Oe&192)===128&&(ke&192)===128&&(je=(Q&15)<<18|(Te&63)<<12|(Oe&63)<<6|ke&63,je>65535&&je<1114112&&(ge=je))}}ge===null?(ge=65533,Ae=1):ge>65535&&(ge-=65536,B.push(ge>>>10&1023|55296),ge=56320|ge&1023),B.push(ge),U+=Ae}return V(B)}let G=4096;function V(u){let y=u.length;if(y<=G)return String.fromCharCode.apply(String,u);let v="",B=0;for(;B<y;)v+=String.fromCharCode.apply(String,u.slice(B,B+=G));return v}function ue(u,y,v){let B="";v=Math.min(u.length,v);for(let U=y;U<v;++U)B+=String.fromCharCode(u[U]&127);return B}function fe(u,y,v){let B="";v=Math.min(u.length,v);for(let U=y;U<v;++U)B+=String.fromCharCode(u[U]);return B}function pe(u,y,v){let B=u.length;(!y||y<0)&&(y=0),(!v||v<0||v>B)&&(v=B);let U="";for(let Q=y;Q<v;++Q)U+=be[u[Q]];return U}function ye(u,y,v){let B=u.slice(y,v),U="";for(let Q=0;Q<B.length-1;Q+=2)U+=String.fromCharCode(B[Q]+B[Q+1]*256);return U}e.prototype.slice=function(u,y){let v=this.length;u=~~u,y=y===void 0?v:~~y,u<0?(u+=v,u<0&&(u=0)):u>v&&(u=v),y<0?(y+=v,y<0&&(y=0)):y>v&&(y=v),y<u&&(y=u);let B=this.subarray(u,y);return Object.setPrototypeOf(B,e.prototype),B};function D(u,y,v){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+y>v)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUintLE=e.prototype.readUIntLE=function(u,y,v){u=u>>>0,y=y>>>0,v||D(u,y,this.length);let B=this[u],U=1,Q=0;for(;++Q<y&&(U*=256);)B+=this[u+Q]*U;return B},e.prototype.readUintBE=e.prototype.readUIntBE=function(u,y,v){u=u>>>0,y=y>>>0,v||D(u,y,this.length);let B=this[u+--y],U=1;for(;y>0&&(U*=256);)B+=this[u+--y]*U;return B},e.prototype.readUint8=e.prototype.readUInt8=function(u,y){return u=u>>>0,y||D(u,1,this.length),this[u]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(u,y){return u=u>>>0,y||D(u,2,this.length),this[u]|this[u+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(u,y){return u=u>>>0,y||D(u,2,this.length),this[u]<<8|this[u+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(u,y){return u=u>>>0,y||D(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(u,y){return u=u>>>0,y||D(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},e.prototype.readBigUInt64LE=te(function(u){u=u>>>0,W(u,"offset");let y=this[u],v=this[u+7];(y===void 0||v===void 0)&&ae(u,this.length-8);let B=y+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,U=this[++u]+this[++u]*2**8+this[++u]*2**16+v*2**24;return BigInt(B)+(BigInt(U)<<BigInt(32))}),e.prototype.readBigUInt64BE=te(function(u){u=u>>>0,W(u,"offset");let y=this[u],v=this[u+7];(y===void 0||v===void 0)&&ae(u,this.length-8);let B=y*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],U=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v;return(BigInt(B)<<BigInt(32))+BigInt(U)}),e.prototype.readIntLE=function(u,y,v){u=u>>>0,y=y>>>0,v||D(u,y,this.length);let B=this[u],U=1,Q=0;for(;++Q<y&&(U*=256);)B+=this[u+Q]*U;return U*=128,B>=U&&(B-=Math.pow(2,8*y)),B},e.prototype.readIntBE=function(u,y,v){u=u>>>0,y=y>>>0,v||D(u,y,this.length);let B=y,U=1,Q=this[u+--B];for(;B>0&&(U*=256);)Q+=this[u+--B]*U;return U*=128,Q>=U&&(Q-=Math.pow(2,8*y)),Q},e.prototype.readInt8=function(u,y){return u=u>>>0,y||D(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},e.prototype.readInt16LE=function(u,y){u=u>>>0,y||D(u,2,this.length);let v=this[u]|this[u+1]<<8;return v&32768?v|4294901760:v},e.prototype.readInt16BE=function(u,y){u=u>>>0,y||D(u,2,this.length);let v=this[u+1]|this[u]<<8;return v&32768?v|4294901760:v},e.prototype.readInt32LE=function(u,y){return u=u>>>0,y||D(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},e.prototype.readInt32BE=function(u,y){return u=u>>>0,y||D(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},e.prototype.readBigInt64LE=te(function(u){u=u>>>0,W(u,"offset");let y=this[u],v=this[u+7];(y===void 0||v===void 0)&&ae(u,this.length-8);let B=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(v<<24);return(BigInt(B)<<BigInt(32))+BigInt(y+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),e.prototype.readBigInt64BE=te(function(u){u=u>>>0,W(u,"offset");let y=this[u],v=this[u+7];(y===void 0||v===void 0)&&ae(u,this.length-8);let B=(y<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(B)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v)}),e.prototype.readFloatLE=function(u,y){return u=u>>>0,y||D(u,4,this.length),c.read(this,u,!0,23,4)},e.prototype.readFloatBE=function(u,y){return u=u>>>0,y||D(u,4,this.length),c.read(this,u,!1,23,4)},e.prototype.readDoubleLE=function(u,y){return u=u>>>0,y||D(u,8,this.length),c.read(this,u,!0,52,8)},e.prototype.readDoubleBE=function(u,y){return u=u>>>0,y||D(u,8,this.length),c.read(this,u,!1,52,8)};function ie(u,y,v,B,U,Q){if(!e.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>U||y<Q)throw new RangeError('"value" argument is out of bounds');if(v+B>u.length)throw new RangeError("Index out of range")}e.prototype.writeUintLE=e.prototype.writeUIntLE=function(u,y,v,B){if(u=+u,y=y>>>0,v=v>>>0,!B){let ge=Math.pow(2,8*v)-1;ie(this,u,y,v,ge,0)}let U=1,Q=0;for(this[y]=u&255;++Q<v&&(U*=256);)this[y+Q]=u/U&255;return y+v},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(u,y,v,B){if(u=+u,y=y>>>0,v=v>>>0,!B){let ge=Math.pow(2,8*v)-1;ie(this,u,y,v,ge,0)}let U=v-1,Q=1;for(this[y+U]=u&255;--U>=0&&(Q*=256);)this[y+U]=u/Q&255;return y+v},e.prototype.writeUint8=e.prototype.writeUInt8=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,1,255,0),this[y]=u&255,y+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,2,65535,0),this[y]=u&255,this[y+1]=u>>>8,y+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,2,65535,0),this[y]=u>>>8,this[y+1]=u&255,y+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,4,4294967295,0),this[y+3]=u>>>24,this[y+2]=u>>>16,this[y+1]=u>>>8,this[y]=u&255,y+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,4,4294967295,0),this[y]=u>>>24,this[y+1]=u>>>16,this[y+2]=u>>>8,this[y+3]=u&255,y+4};function R(u,y,v,B,U){F(y,B,U,u,v,7);let Q=Number(y&BigInt(4294967295));u[v++]=Q,Q=Q>>8,u[v++]=Q,Q=Q>>8,u[v++]=Q,Q=Q>>8,u[v++]=Q;let ge=Number(y>>BigInt(32)&BigInt(4294967295));return u[v++]=ge,ge=ge>>8,u[v++]=ge,ge=ge>>8,u[v++]=ge,ge=ge>>8,u[v++]=ge,v}function he(u,y,v,B,U){F(y,B,U,u,v,7);let Q=Number(y&BigInt(4294967295));u[v+7]=Q,Q=Q>>8,u[v+6]=Q,Q=Q>>8,u[v+5]=Q,Q=Q>>8,u[v+4]=Q;let ge=Number(y>>BigInt(32)&BigInt(4294967295));return u[v+3]=ge,ge=ge>>8,u[v+2]=ge,ge=ge>>8,u[v+1]=ge,ge=ge>>8,u[v]=ge,v+8}e.prototype.writeBigUInt64LE=te(function(u,y=0){return R(this,u,y,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeBigUInt64BE=te(function(u,y=0){return he(this,u,y,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeIntLE=function(u,y,v,B){if(u=+u,y=y>>>0,!B){let Ae=Math.pow(2,8*v-1);ie(this,u,y,v,Ae-1,-Ae)}let U=0,Q=1,ge=0;for(this[y]=u&255;++U<v&&(Q*=256);)u<0&&ge===0&&this[y+U-1]!==0&&(ge=1),this[y+U]=(u/Q>>0)-ge&255;return y+v},e.prototype.writeIntBE=function(u,y,v,B){if(u=+u,y=y>>>0,!B){let Ae=Math.pow(2,8*v-1);ie(this,u,y,v,Ae-1,-Ae)}let U=v-1,Q=1,ge=0;for(this[y+U]=u&255;--U>=0&&(Q*=256);)u<0&&ge===0&&this[y+U+1]!==0&&(ge=1),this[y+U]=(u/Q>>0)-ge&255;return y+v},e.prototype.writeInt8=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,1,127,-128),u<0&&(u=255+u+1),this[y]=u&255,y+1},e.prototype.writeInt16LE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,2,32767,-32768),this[y]=u&255,this[y+1]=u>>>8,y+2},e.prototype.writeInt16BE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,2,32767,-32768),this[y]=u>>>8,this[y+1]=u&255,y+2},e.prototype.writeInt32LE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,4,2147483647,-2147483648),this[y]=u&255,this[y+1]=u>>>8,this[y+2]=u>>>16,this[y+3]=u>>>24,y+4},e.prototype.writeInt32BE=function(u,y,v){return u=+u,y=y>>>0,v||ie(this,u,y,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[y]=u>>>24,this[y+1]=u>>>16,this[y+2]=u>>>8,this[y+3]=u&255,y+4},e.prototype.writeBigInt64LE=te(function(u,y=0){return R(this,u,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e.prototype.writeBigInt64BE=te(function(u,y=0){return he(this,u,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _e(u,y,v,B,U,Q){if(v+B>u.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function J(u,y,v,B,U){return y=+y,v=v>>>0,U||_e(u,y,v,4),c.write(u,y,v,B,23,4),v+4}e.prototype.writeFloatLE=function(u,y,v){return J(this,u,y,!0,v)},e.prototype.writeFloatBE=function(u,y,v){return J(this,u,y,!1,v)};function ve(u,y,v,B,U){return y=+y,v=v>>>0,U||_e(u,y,v,8),c.write(u,y,v,B,52,8),v+8}e.prototype.writeDoubleLE=function(u,y,v){return ve(this,u,y,!0,v)},e.prototype.writeDoubleBE=function(u,y,v){return ve(this,u,y,!1,v)},e.prototype.copy=function(u,y,v,B){if(!e.isBuffer(u))throw new TypeError("argument should be a Buffer");if(v||(v=0),!B&&B!==0&&(B=this.length),y>=u.length&&(y=u.length),y||(y=0),B>0&&B<v&&(B=v),B===v||u.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),u.length-y<B-v&&(B=u.length-y+v);let U=B-v;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,v,B):Uint8Array.prototype.set.call(u,this.subarray(v,B),y),U},e.prototype.fill=function(u,y,v,B){if(typeof u=="string"){if(typeof y=="string"?(B=y,y=0,v=this.length):typeof v=="string"&&(B=v,v=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!e.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(u.length===1){let Q=u.charCodeAt(0);(B==="utf8"&&Q<128||B==="latin1")&&(u=Q)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(y<0||this.length<y||this.length<v)throw new RangeError("Out of range index");if(v<=y)return this;y=y>>>0,v=v===void 0?this.length:v>>>0,u||(u=0);let U;if(typeof u=="number")for(U=y;U<v;++U)this[U]=u;else{let Q=e.isBuffer(u)?u:e.from(u,B),ge=Q.length;if(ge===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(U=0;U<v-y;++U)this[U+y]=Q[U%ge]}return this};let q={};function x(u,y,v){q[u]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}x("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),x("ERR_INVALID_ARG_TYPE",function(u,y){return`The "${u}" argument must be of type number. Received type ${typeof y}`},TypeError),x("ERR_OUT_OF_RANGE",function(u,y,v){let B=`The value of "${u}" is out of range.`,U=v;return Number.isInteger(v)&&Math.abs(v)>2**32?U=ee(String(v)):typeof v=="bigint"&&(U=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(U=ee(U)),U+="n"),B+=` It must be ${y}. Received ${U}`,B},RangeError);function ee(u){let y="",v=u.length,B=u[0]==="-"?1:0;for(;v>=B+4;v-=3)y=`_${u.slice(v-3,v)}${y}`;return`${u.slice(0,v)}${y}`}function z(u,y,v){W(y,"offset"),(u[y]===void 0||u[y+v]===void 0)&&ae(y,u.length-(v+1))}function F(u,y,v,B,U,Q){if(u>v||u<y){let ge=typeof y=="bigint"?"n":"",Ae;throw Q>3?y===0||y===BigInt(0)?Ae=`>= 0${ge} and < 2${ge} ** ${(Q+1)*8}${ge}`:Ae=`>= -(2${ge} ** ${(Q+1)*8-1}${ge}) and < 2 ** ${(Q+1)*8-1}${ge}`:Ae=`>= ${y}${ge} and <= ${v}${ge}`,new q.ERR_OUT_OF_RANGE("value",Ae,u)}z(B,U,Q)}function W(u,y){if(typeof u!="number")throw new q.ERR_INVALID_ARG_TYPE(y,"number",u)}function ae(u,y,v){throw Math.floor(u)!==u?(W(u,v),new q.ERR_OUT_OF_RANGE(v||"offset","an integer",u)):y<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${y}`,u)}let ce=/[^+/0-9A-Za-z-_]/g;function O(u){if(u=u.split("=")[0],u=u.trim().replace(ce,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function M(u,y){y=y||1/0;let v,B=u.length,U=null,Q=[];for(let ge=0;ge<B;++ge){if(v=u.charCodeAt(ge),v>55295&&v<57344){if(!U){if(v>56319){(y-=3)>-1&&Q.push(239,191,189);continue}else if(ge+1===B){(y-=3)>-1&&Q.push(239,191,189);continue}U=v;continue}if(v<56320){(y-=3)>-1&&Q.push(239,191,189),U=v;continue}v=(U-55296<<10|v-56320)+65536}else U&&(y-=3)>-1&&Q.push(239,191,189);if(U=null,v<128){if((y-=1)<0)break;Q.push(v)}else if(v<2048){if((y-=2)<0)break;Q.push(v>>6|192,v&63|128)}else if(v<65536){if((y-=3)<0)break;Q.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((y-=4)<0)break;Q.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return Q}function j(u){let y=[];for(let v=0;v<u.length;++v)y.push(u.charCodeAt(v)&255);return y}function K(u,y){let v,B,U,Q=[];for(let ge=0;ge<u.length&&!((y-=2)<0);++ge)v=u.charCodeAt(ge),B=v>>8,U=v%256,Q.push(U),Q.push(B);return Q}function Z(u){return s.toByteArray(O(u))}function re(u,y,v,B){let U;for(U=0;U<B&&!(U+v>=y.length||U>=u.length);++U)y[U+v]=u[U];return U}function L(u,y){return u instanceof y||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===y.name}function X(u){return u!==u}let be=function(){let u="0123456789abcdef",y=new Array(256);for(let v=0;v<16;++v){let B=v*16;for(let U=0;U<16;++U)y[B+U]=u[v]+u[U]}return y}();function te(u){return typeof BigInt>"u"?Ee:u}function Ee(){throw new Error("BigInt not supported")}return It}var Gt,on,ur,sn,It,an,ft,Cr,qo,$o,qe=ze(()=>{ne(),se(),oe(),Gt={},on=!1,ur={},sn=!1,It={},an=!1,ft=za(),ft.Buffer,ft.SlowBuffer,ft.INSPECT_MAX_BYTES,ft.kMaxLength,Cr=ft.Buffer,qo=ft.INSPECT_MAX_BYTES,$o=ft.kMaxLength}),se=ze(()=>{qe()}),Ue=de((s,c)=>{"use strict";ne(),se(),oe();var o=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let h="";for(let t=0;t<a.length;t++)h+=`    ${a[t].stack}
`;super(h),this.name="AggregateError",this.errors=a}};c.exports={AggregateError:o,ArrayIsArray(a){return Array.isArray(a)},ArrayPrototypeIncludes(a,h){return a.includes(h)},ArrayPrototypeIndexOf(a,h){return a.indexOf(h)},ArrayPrototypeJoin(a,h){return a.join(h)},ArrayPrototypeMap(a,h){return a.map(h)},ArrayPrototypePop(a,h){return a.pop(h)},ArrayPrototypePush(a,h){return a.push(h)},ArrayPrototypeSlice(a,h,t){return a.slice(h,t)},Error,FunctionPrototypeCall(a,h,...t){return a.call(h,...t)},FunctionPrototypeSymbolHasInstance(a,h){return Function.prototype[Symbol.hasInstance].call(a,h)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(a,h){return Object.defineProperties(a,h)},ObjectDefineProperty(a,h,t){return Object.defineProperty(a,h,t)},ObjectGetOwnPropertyDescriptor(a,h){return Object.getOwnPropertyDescriptor(a,h)},ObjectKeys(a){return Object.keys(a)},ObjectSetPrototypeOf(a,h){return Object.setPrototypeOf(a,h)},Promise,PromisePrototypeCatch(a,h){return a.catch(h)},PromisePrototypeThen(a,h,t){return a.then(h,t)},PromiseReject(a){return Promise.reject(a)},PromiseResolve(a){return Promise.resolve(a)},ReflectApply:Reflect.apply,RegExpPrototypeTest(a,h){return a.test(h)},SafeSet:Set,String,StringPrototypeSlice(a,h,t){return a.slice(h,t)},StringPrototypeToLowerCase(a){return a.toLowerCase()},StringPrototypeToUpperCase(a){return a.toUpperCase()},StringPrototypeTrim(a){return a.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(a,h,t){return a.set(h,t)},Boolean,Uint8Array}}),Ho=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports={format(o,...a){return o.replace(/%([sdifj])/g,function(...[h,t]){let e=a.shift();return t==="f"?e.toFixed(6):t==="j"?JSON.stringify(e):t==="s"&&typeof e=="object"?`${e.constructor!==Object?e.constructor.name:""} {}`.trim():e.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),Ge=de((s,c)=>{"use strict";ne(),se(),oe();var{format:o,inspect:a}=Ho(),{AggregateError:h}=Ue(),t=globalThis.AggregateError||h,e=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],r=/^([A-Z][a-z0-9]*)+$/,n="__node_internal_",l={};function f(b,w){if(!b)throw new l.ERR_INTERNAL_ASSERTION(w)}function d(b){let w="",k=b.length,T=b[0]==="-"?1:0;for(;k>=T+4;k-=3)w=`_${b.slice(k-3,k)}${w}`;return`${b.slice(0,k)}${w}`}function g(b,w,k){if(typeof w=="function")return f(w.length<=k.length,`Code: ${b}; The provided arguments length (${k.length}) does not match the required ones (${w.length}).`),w(...k);let T=(w.match(/%[dfijoOs]/g)||[]).length;return f(T===k.length,`Code: ${b}; The provided arguments length (${k.length}) does not match the required ones (${T}).`),k.length===0?w:o(w,...k)}function _(b,w,k){k||(k=Error);class T extends k{constructor(...I){super(g(b,w,I))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(T.prototype,{name:{value:k.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),T.prototype.code=b,T.prototype[e]=!0,l[b]=T}function p(b){let w=n+b.name;return Object.defineProperty(b,"name",{value:w}),b}function m(b,w){if(b&&w&&b!==w){if(Array.isArray(w.errors))return w.errors.push(b),w;let k=new t([w,b],w.message);return k.code=w.code,k}return b||w}var E=class extends Error{constructor(b="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",w);super(b,w),this.code="ABORT_ERR",this.name="AbortError"}};_("ERR_ASSERTION","%s",Error),_("ERR_INVALID_ARG_TYPE",(b,w,k)=>{f(typeof b=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let T="The ";b.endsWith(" argument")?T+=`${b} `:T+=`"${b}" ${b.includes(".")?"property":"argument"} `,T+="must be ";let S=[],I=[],P=[];for(let Y of w)f(typeof Y=="string","All expected entries have to be of type string"),i.includes(Y)?S.push(Y.toLowerCase()):r.test(Y)?I.push(Y):(f(Y!=="object",'The value "object" should be written as "Object"'),P.push(Y));if(I.length>0){let Y=S.indexOf("object");Y!==-1&&(S.splice(S,Y,1),I.push("Object"))}if(S.length>0){switch(S.length){case 1:T+=`of type ${S[0]}`;break;case 2:T+=`one of type ${S[0]} or ${S[1]}`;break;default:{let Y=S.pop();T+=`one of type ${S.join(", ")}, or ${Y}`}}(I.length>0||P.length>0)&&(T+=" or ")}if(I.length>0){switch(I.length){case 1:T+=`an instance of ${I[0]}`;break;case 2:T+=`an instance of ${I[0]} or ${I[1]}`;break;default:{let Y=I.pop();T+=`an instance of ${I.join(", ")}, or ${Y}`}}P.length>0&&(T+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(T+="an "),T+=`${P[0]}`;break;case 2:T+=`one of ${P[0]} or ${P[1]}`;break;default:{let Y=P.pop();T+=`one of ${P.join(", ")}, or ${Y}`}}if(k==null)T+=`. Received ${k}`;else if(typeof k=="function"&&k.name)T+=`. Received function ${k.name}`;else if(typeof k=="object"){var H;if((H=k.constructor)!==null&&H!==void 0&&H.name)T+=`. Received an instance of ${k.constructor.name}`;else{let Y=a(k,{depth:-1});T+=`. Received ${Y}`}}else{let Y=a(k,{colors:!1});Y.length>25&&(Y=`${Y.slice(0,25)}...`),T+=`. Received type ${typeof k} (${Y})`}return T},TypeError),_("ERR_INVALID_ARG_VALUE",(b,w,k="is invalid")=>{let T=a(w);return T.length>128&&(T=T.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${k}. Received ${T}`},TypeError),_("ERR_INVALID_RETURN_VALUE",(b,w,k)=>{var T;let S=k!=null&&(T=k.constructor)!==null&&T!==void 0&&T.name?`instance of ${k.constructor.name}`:`type ${typeof k}`;return`Expected ${b} to be returned from the "${w}" function but got ${S}.`},TypeError),_("ERR_MISSING_ARGS",(...b)=>{f(b.length>0,"At least one arg needs to be specified");let w,k=b.length;switch(b=(Array.isArray(b)?b:[b]).map(T=>`"${T}"`).join(" or "),k){case 1:w+=`The ${b[0]} argument`;break;case 2:w+=`The ${b[0]} and ${b[1]} arguments`;break;default:{let T=b.pop();w+=`The ${b.join(", ")}, and ${T} arguments`}break}return`${w} must be specified`},TypeError),_("ERR_OUT_OF_RANGE",(b,w,k)=>{f(w,'Missing "range" argument');let T;if(Number.isInteger(k)&&Math.abs(k)>2**32)T=d(String(k));else if(typeof k=="bigint"){T=String(k);let S=BigInt(2)**BigInt(32);(k>S||k<-S)&&(T=d(T)),T+="n"}else T=a(k);return`The value of "${b}" is out of range. It must be ${w}. Received ${T}`},RangeError),_("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),_("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),_("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),_("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),_("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),_("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),_("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),_("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),_("ERR_STREAM_WRITE_AFTER_END","write after end",Error),_("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),c.exports={AbortError:E,aggregateTwoErrors:p(m),hideStackFrames:p,codes:l}}),dr=de((s,c)=>{"use strict";ne(),se(),oe();var{AbortController:o,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;c.exports=o,c.exports.AbortSignal=a,c.exports.default=o});function Pe(){Pe.init.call(this)}function Ar(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}function Vo(s){return s._maxListeners===void 0?Pe.defaultMaxListeners:s._maxListeners}function to(s,c,o,a){var h,t,e,i;if(Ar(o),(t=s._events)===void 0?(t=s._events=Object.create(null),s._eventsCount=0):(t.newListener!==void 0&&(s.emit("newListener",c,o.listener?o.listener:o),t=s._events),e=t[c]),e===void 0)e=t[c]=o,++s._eventsCount;else if(typeof e=="function"?e=t[c]=a?[o,e]:[e,o]:a?e.unshift(o):e.push(o),(h=Vo(s))>0&&e.length>h&&!e.warned){e.warned=!0;var r=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");r.name="MaxListenersExceededWarning",r.emitter=s,r.type=c,r.count=e.length,i=r,console&&console.warn&&console.warn(i)}return s}function Ga(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ro(s,c,o){var a={fired:!1,wrapFn:void 0,target:s,type:c,listener:o},h=Ga.bind(a);return h.listener=o,a.wrapFn=h,h}function io(s,c,o){var a=s._events;if(a===void 0)return[];var h=a[c];return h===void 0?[]:typeof h=="function"?o?[h.listener||h]:[h]:o?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(h):zo(h,h.length)}function no(s){var c=this._events;if(c!==void 0){var o=c[s];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}function zo(s,c){for(var o=new Array(c),a=0;a<c;++a)o[a]=s[a];return o}var oo,so,xt,Vr,zr,Gr,Je,ao=ze(()=>{ne(),se(),oe(),xt=typeof Reflect=="object"?Reflect:null,Vr=xt&&typeof xt.apply=="function"?xt.apply:function(s,c,o){return Function.prototype.apply.call(s,c,o)},so=xt&&typeof xt.ownKeys=="function"?xt.ownKeys:Object.getOwnPropertySymbols?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:function(s){return Object.getOwnPropertyNames(s)},zr=Number.isNaN||function(s){return s!=s},oo=Pe,Pe.EventEmitter=Pe,Pe.prototype._events=void 0,Pe.prototype._eventsCount=0,Pe.prototype._maxListeners=void 0,Gr=10,Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return Gr},set:function(s){if(typeof s!="number"||s<0||zr(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");Gr=s}}),Pe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Pe.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||zr(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this},Pe.prototype.getMaxListeners=function(){return Vo(this)},Pe.prototype.emit=function(s){for(var c=[],o=1;o<arguments.length;o++)c.push(arguments[o]);var a=s==="error",h=this._events;if(h!==void 0)a=a&&h.error===void 0;else if(!a)return!1;if(a){var t;if(c.length>0&&(t=c[0]),t instanceof Error)throw t;var e=new Error("Unhandled error."+(t?" ("+t.message+")":""));throw e.context=t,e}var i=h[s];if(i===void 0)return!1;if(typeof i=="function")Vr(i,this,c);else{var r=i.length,n=zo(i,r);for(o=0;o<r;++o)Vr(n[o],this,c)}return!0},Pe.prototype.addListener=function(s,c){return to(this,s,c,!1)},Pe.prototype.on=Pe.prototype.addListener,Pe.prototype.prependListener=function(s,c){return to(this,s,c,!0)},Pe.prototype.once=function(s,c){return Ar(c),this.on(s,ro(this,s,c)),this},Pe.prototype.prependOnceListener=function(s,c){return Ar(c),this.prependListener(s,ro(this,s,c)),this},Pe.prototype.removeListener=function(s,c){var o,a,h,t,e;if(Ar(c),(a=this._events)===void 0)return this;if((o=a[s])===void 0)return this;if(o===c||o.listener===c)--this._eventsCount==0?this._events=Object.create(null):(delete a[s],a.removeListener&&this.emit("removeListener",s,o.listener||c));else if(typeof o!="function"){for(h=-1,t=o.length-1;t>=0;t--)if(o[t]===c||o[t].listener===c){e=o[t].listener,h=t;break}if(h<0)return this;h===0?o.shift():function(i,r){for(;r+1<i.length;r++)i[r]=i[r+1];i.pop()}(o,h),o.length===1&&(a[s]=o[0]),a.removeListener!==void 0&&this.emit("removeListener",s,e||c)}return this},Pe.prototype.off=Pe.prototype.removeListener,Pe.prototype.removeAllListeners=function(s){var c,o,a;if((o=this._events)===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[s]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[s]),this;if(arguments.length===0){var h,t=Object.keys(o);for(a=0;a<t.length;++a)(h=t[a])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(c=o[s])=="function")this.removeListener(s,c);else if(c!==void 0)for(a=c.length-1;a>=0;a--)this.removeListener(s,c[a]);return this},Pe.prototype.listeners=function(s){return io(this,s,!0)},Pe.prototype.rawListeners=function(s){return io(this,s,!1)},Pe.listenerCount=function(s,c){return typeof s.listenerCount=="function"?s.listenerCount(c):no.call(s,c)},Pe.prototype.listenerCount=no,Pe.prototype.eventNames=function(){return this._eventsCount>0?so(this._events):[]},Je=oo,Je.EventEmitter,Je.defaultMaxListeners,Je.init,Je.listenerCount,Je.EventEmitter,Je.defaultMaxListeners,Je.init,Je.listenerCount}),Tt={};Qt(Tt,{EventEmitter:()=>Go,default:()=>Je,defaultMaxListeners:()=>Qo,init:()=>Ko,listenerCount:()=>Yo,on:()=>Jo,once:()=>Xo});var Go,Qo,Ko,Yo,Jo,Xo,Wt=ze(()=>{ne(),se(),oe(),ao(),ao(),Je.once=function(s,c){return new Promise((o,a)=>{function h(...e){t!==void 0&&s.removeListener("error",t),o(e)}let t;c!=="error"&&(t=e=>{s.removeListener(name,h),a(e)},s.once("error",t)),s.once(c,h)})},Je.on=function(s,c){let o=[],a=[],h=null,t=!1,e={next(){return Me(this,null,function*(){let l=o.shift();if(l)return createIterResult(l,!1);if(h){let f=Promise.reject(h);return h=null,f}return t?createIterResult(void 0,!0):new Promise((f,d)=>a.push({resolve:f,reject:d}))})},return(){return Me(this,null,function*(){s.removeListener(c,i),s.removeListener("error",r),t=!0;for(let l of a)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)})},throw(l){h=l,s.removeListener(c,i),s.removeListener("error",r)},[Symbol.asyncIterator](){return this}};return s.on(c,i),s.on("error",r),e;function i(...l){let f=a.shift();f?f.resolve(createIterResult(l,!1)):o.push(l)}function r(l){t=!0;let f=a.shift();f?f.reject(l):h=l,e.return()}},{EventEmitter:Go,defaultMaxListeners:Qo,init:Ko,listenerCount:Yo,on:Jo,once:Xo}=Je}),Qe=de((s,c)=>{"use strict";ne(),se(),oe();var o=(qe(),Re(We)),{format:a,inspect:h}=Ho(),{codes:{ERR_INVALID_ARG_TYPE:t}}=Ge(),{kResistStopPropagation:e,AggregateError:i,SymbolDispose:r}=Ue(),n=globalThis.AbortSignal||dr().AbortSignal,l=globalThis.AbortController||dr().AbortController,f=Object.getPrototypeOf(function(){return Me(this,null,function*(){})}).constructor,d=globalThis.Blob||o.Blob,g=typeof d<"u"?function(m){return m instanceof d}:function(m){return!1},_=(m,E)=>{if(m!==void 0&&(m===null||typeof m!="object"||!("aborted"in m)))throw new t(E,"AbortSignal",m)},p=(m,E)=>{if(typeof m!="function")throw new t(E,"Function",m)};c.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(m){let E=!1;return function(...b){E||(E=!0,m.apply(this,b))}},createDeferredPromise:function(){let m,E;return{promise:new Promise((b,w)=>{m=b,E=w}),resolve:m,reject:E}},promisify(m){return new Promise((E,b)=>{m((w,...k)=>w?b(w):E(...k))})},debuglog(){return function(){}},format:a,inspect:h,types:{isAsyncFunction(m){return m instanceof f},isArrayBufferView(m){return ArrayBuffer.isView(m)}},isBlob:g,deprecate(m,E){return m},addAbortListener:(Wt(),Re(Tt)).addAbortListener||function(m,E){if(m===void 0)throw new t("signal","AbortSignal",m);_(m,"signal"),p(E,"listener");let b;return m.aborted?queueMicrotask(()=>E()):(m.addEventListener("abort",E,{__proto__:null,once:!0,[e]:!0}),b=()=>{m.removeEventListener("abort",E)}),{__proto__:null,[r](){var w;(w=b)===null||w===void 0||w()}}},AbortSignalAny:n.any||function(m){if(m.length===1)return m[0];let E=new l,b=()=>E.abort();return m.forEach(w=>{_(w,"signals"),w.addEventListener("abort",b,{once:!0})}),E.signal.addEventListener("abort",()=>{m.forEach(w=>w.removeEventListener("abort",b))},{once:!0}),E.signal}},c.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),pr=de((s,c)=>{"use strict";ne(),se(),oe();var{ArrayIsArray:o,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:h,ArrayPrototypeMap:t,NumberIsInteger:e,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:r,NumberMIN_SAFE_INTEGER:n,NumberParseInt:l,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:d,String:g,StringPrototypeToUpperCase:_,StringPrototypeTrim:p}=Ue(),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:k,ERR_UNKNOWN_SIGNAL:T}}=Ge(),{normalizeEncoding:S}=Qe(),{isAsyncFunction:I,isArrayBufferView:P}=Qe().types,H={};function Y(L){return L===(L|0)}function le(L){return L===L>>>0}var N=/^[0-7]+$/,$="must be a 32-bit unsigned integer or an octal string";function G(L,X,be){if(typeof L>"u"&&(L=be),typeof L=="string"){if(d(N,L)===null)throw new w(X,L,$);L=l(L,8)}return fe(L,X),L}var V=m((L,X,be=n,te=r)=>{if(typeof L!="number")throw new b(X,"number",L);if(!e(L))throw new k(X,"an integer",L);if(L<be||L>te)throw new k(X,`>= ${be} && <= ${te}`,L)}),ue=m((L,X,be=-2147483648,te=2147483647)=>{if(typeof L!="number")throw new b(X,"number",L);if(!e(L))throw new k(X,"an integer",L);if(L<be||L>te)throw new k(X,`>= ${be} && <= ${te}`,L)}),fe=m((L,X,be=!1)=>{if(typeof L!="number")throw new b(X,"number",L);if(!e(L))throw new k(X,"an integer",L);let te=be?1:0,Ee=4294967295;if(L<te||L>Ee)throw new k(X,`>= ${te} && <= ${Ee}`,L)});function pe(L,X){if(typeof L!="string")throw new b(X,"string",L)}function ye(L,X,be=void 0,te){if(typeof L!="number")throw new b(X,"number",L);if(be!=null&&L<be||te!=null&&L>te||(be!=null||te!=null)&&i(L))throw new k(X,`${be!=null?`>= ${be}`:""}${be!=null&&te!=null?" && ":""}${te!=null?`<= ${te}`:""}`,L)}var D=m((L,X,be)=>{if(!a(be,L)){let te="must be one of: "+h(t(be,Ee=>typeof Ee=="string"?`'${Ee}'`:g(Ee)),", ");throw new w(X,L,te)}});function ie(L,X){if(typeof L!="boolean")throw new b(X,"boolean",L)}function R(L,X,be){return L==null||!f(L,X)?be:L[X]}var he=m((L,X,be=null)=>{let te=R(be,"allowArray",!1),Ee=R(be,"allowFunction",!1);if(!R(be,"nullable",!1)&&L===null||!te&&o(L)||typeof L!="object"&&(!Ee||typeof L!="function"))throw new b(X,"Object",L)}),_e=m((L,X)=>{if(L!=null&&typeof L!="object"&&typeof L!="function")throw new b(X,"a dictionary",L)}),J=m((L,X,be=0)=>{if(!o(L))throw new b(X,"Array",L);if(L.length<be){let te=`must be longer than ${be}`;throw new w(X,L,te)}});function ve(L,X){J(L,X);for(let be=0;be<L.length;be++)pe(L[be],`${X}[${be}]`)}function q(L,X){J(L,X);for(let be=0;be<L.length;be++)ie(L[be],`${X}[${be}]`)}function x(L,X){J(L,X);for(let be=0;be<L.length;be++){let te=L[be],Ee=`${X}[${be}]`;if(te==null)throw new b(Ee,"AbortSignal",te);ae(te,Ee)}}function ee(L,X="signal"){if(pe(L,X),H[L]===void 0)throw H[_(L)]!==void 0?new T(L+" (signals must use all capital letters)"):new T(L)}var z=m((L,X="buffer")=>{if(!P(L))throw new b(X,["Buffer","TypedArray","DataView"],L)});function F(L,X){let be=S(X),te=L.length;if(be==="hex"&&te%2!==0)throw new w("encoding",X,`is invalid for data of length ${te}`)}function W(L,X="Port",be=!0){if(typeof L!="number"&&typeof L!="string"||typeof L=="string"&&p(L).length===0||+L!==+L>>>0||L>65535||L===0&&!be)throw new E(X,L,be);return L|0}var ae=m((L,X)=>{if(L!==void 0&&(L===null||typeof L!="object"||!("aborted"in L)))throw new b(X,"AbortSignal",L)}),ce=m((L,X)=>{if(typeof L!="function")throw new b(X,"Function",L)}),O=m((L,X)=>{if(typeof L!="function"||I(L))throw new b(X,"Function",L)}),M=m((L,X)=>{if(L!==void 0)throw new b(X,"undefined",L)});function j(L,X,be){if(!a(be,L))throw new b(X,`('${h(be,"|")}')`,L)}var K=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Z(L,X){if(typeof L>"u"||!d(K,L))throw new w(X,L,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function re(L){if(typeof L=="string")return Z(L,"hints"),L;if(o(L)){let X=L.length,be="";if(X===0)return be;for(let te=0;te<X;te++){let Ee=L[te];Z(Ee,"hints"),be+=Ee,te!==X-1&&(be+=", ")}return be}throw new w("hints",L,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}c.exports={isInt32:Y,isUint32:le,parseFileMode:G,validateArray:J,validateStringArray:ve,validateBooleanArray:q,validateAbortSignalArray:x,validateBoolean:ie,validateBuffer:z,validateDictionary:_e,validateEncoding:F,validateFunction:ce,validateInt32:ue,validateInteger:V,validateNumber:ye,validateObject:he,validateOneOf:D,validatePlainFunction:O,validatePort:W,validateSignalName:ee,validateString:pe,validateUint32:fe,validateUndefined:M,validateUnion:j,validateAbortSignal:ae,validateLinkHeaderValue:re}}),qt=de((s,c)=>{ne(),se(),oe();var o=c.exports={},a,h;function t(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=t}catch{a=t}try{typeof clearTimeout=="function"?h=clearTimeout:h=e}catch{h=e}})();function i(E){if(a===setTimeout)return setTimeout(E,0);if((a===t||!a)&&setTimeout)return a=setTimeout,setTimeout(E,0);try{return a(E,0)}catch{try{return a.call(null,E,0)}catch{return a.call(this,E,0)}}}function r(E){if(h===clearTimeout)return clearTimeout(E);if((h===e||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(E);try{return h(E)}catch{try{return h.call(null,E)}catch{return h.call(this,E)}}}var n=[],l=!1,f,d=-1;function g(){!l||!f||(l=!1,f.length?n=f.concat(n):d=-1,n.length&&_())}function _(){if(!l){var E=i(g);l=!0;for(var b=n.length;b;){for(f=n,n=[];++d<b;)f&&f[d].run();d=-1,b=n.length}f=null,l=!1,r(E)}}o.nextTick=function(E){var b=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)b[w-1]=arguments[w];n.push(new p(E,b)),n.length===1&&!l&&i(_)};function p(E,b){this.fun=E,this.array=b}p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function m(){}o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(E){return[]},o.binding=function(E){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(E){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),yt=de((s,c)=>{"use strict";ne(),se(),oe();var{SymbolAsyncIterator:o,SymbolIterator:a,SymbolFor:h}=Ue(),t=h("nodejs.stream.destroyed"),e=h("nodejs.stream.errored"),i=h("nodejs.stream.readable"),r=h("nodejs.stream.writable"),n=h("nodejs.stream.disturbed"),l=h("nodejs.webstream.isClosedPromise"),f=h("nodejs.webstream.controllerErrorFunction");function d(R,he=!1){var _e;return!!(R&&typeof R.pipe=="function"&&typeof R.on=="function"&&(!he||typeof R.pause=="function"&&typeof R.resume=="function")&&(!R._writableState||((_e=R._readableState)===null||_e===void 0?void 0:_e.readable)!==!1)&&(!R._writableState||R._readableState))}function g(R){var he;return!!(R&&typeof R.write=="function"&&typeof R.on=="function"&&(!R._readableState||((he=R._writableState)===null||he===void 0?void 0:he.writable)!==!1))}function _(R){return!!(R&&typeof R.pipe=="function"&&R._readableState&&typeof R.on=="function"&&typeof R.write=="function")}function p(R){return R&&(R._readableState||R._writableState||typeof R.write=="function"&&typeof R.on=="function"||typeof R.pipe=="function"&&typeof R.on=="function")}function m(R){return!!(R&&!p(R)&&typeof R.pipeThrough=="function"&&typeof R.getReader=="function"&&typeof R.cancel=="function")}function E(R){return!!(R&&!p(R)&&typeof R.getWriter=="function"&&typeof R.abort=="function")}function b(R){return!!(R&&!p(R)&&typeof R.readable=="object"&&typeof R.writable=="object")}function w(R){return m(R)||E(R)||b(R)}function k(R,he){return R==null?!1:he===!0?typeof R[o]=="function":he===!1?typeof R[a]=="function":typeof R[o]=="function"||typeof R[a]=="function"}function T(R){if(!p(R))return null;let he=R._writableState,_e=R._readableState,J=he||_e;return!!(R.destroyed||R[t]||J!=null&&J.destroyed)}function S(R){if(!g(R))return null;if(R.writableEnded===!0)return!0;let he=R._writableState;return he!=null&&he.errored?!1:typeof he?.ended!="boolean"?null:he.ended}function I(R,he){if(!g(R))return null;if(R.writableFinished===!0)return!0;let _e=R._writableState;return _e!=null&&_e.errored?!1:typeof _e?.finished!="boolean"?null:!!(_e.finished||he===!1&&_e.ended===!0&&_e.length===0)}function P(R){if(!d(R))return null;if(R.readableEnded===!0)return!0;let he=R._readableState;return!he||he.errored?!1:typeof he?.ended!="boolean"?null:he.ended}function H(R,he){if(!d(R))return null;let _e=R._readableState;return _e!=null&&_e.errored?!1:typeof _e?.endEmitted!="boolean"?null:!!(_e.endEmitted||he===!1&&_e.ended===!0&&_e.length===0)}function Y(R){return R&&R[i]!=null?R[i]:typeof R?.readable!="boolean"?null:T(R)?!1:d(R)&&R.readable&&!H(R)}function le(R){return R&&R[r]!=null?R[r]:typeof R?.writable!="boolean"?null:T(R)?!1:g(R)&&R.writable&&!S(R)}function N(R,he){return p(R)?T(R)?!0:!(he?.readable!==!1&&Y(R)||he?.writable!==!1&&le(R)):null}function $(R){var he,_e;return p(R)?R.writableErrored?R.writableErrored:(he=(_e=R._writableState)===null||_e===void 0?void 0:_e.errored)!==null&&he!==void 0?he:null:null}function G(R){var he,_e;return p(R)?R.readableErrored?R.readableErrored:(he=(_e=R._readableState)===null||_e===void 0?void 0:_e.errored)!==null&&he!==void 0?he:null:null}function V(R){if(!p(R))return null;if(typeof R.closed=="boolean")return R.closed;let he=R._writableState,_e=R._readableState;return typeof he?.closed=="boolean"||typeof _e?.closed=="boolean"?he?.closed||_e?.closed:typeof R._closed=="boolean"&&ue(R)?R._closed:null}function ue(R){return typeof R._closed=="boolean"&&typeof R._defaultKeepAlive=="boolean"&&typeof R._removedConnection=="boolean"&&typeof R._removedContLen=="boolean"}function fe(R){return typeof R._sent100=="boolean"&&ue(R)}function pe(R){var he;return typeof R._consuming=="boolean"&&typeof R._dumped=="boolean"&&((he=R.req)===null||he===void 0?void 0:he.upgradeOrConnect)===void 0}function ye(R){if(!p(R))return null;let he=R._writableState,_e=R._readableState,J=he||_e;return!J&&fe(R)||!!(J&&J.autoDestroy&&J.emitClose&&J.closed===!1)}function D(R){var he;return!!(R&&((he=R[n])!==null&&he!==void 0?he:R.readableDidRead||R.readableAborted))}function ie(R){var he,_e,J,ve,q,x,ee,z,F,W;return!!(R&&((he=(_e=(J=(ve=(q=(x=R[e])!==null&&x!==void 0?x:R.readableErrored)!==null&&q!==void 0?q:R.writableErrored)!==null&&ve!==void 0?ve:(ee=R._readableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&J!==void 0?J:(z=R._writableState)===null||z===void 0?void 0:z.errorEmitted)!==null&&_e!==void 0?_e:(F=R._readableState)===null||F===void 0?void 0:F.errored)!==null&&he!==void 0?he:!((W=R._writableState)===null||W===void 0)&&W.errored))}c.exports={isDestroyed:T,kIsDestroyed:t,isDisturbed:D,kIsDisturbed:n,isErrored:ie,kIsErrored:e,isReadable:Y,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:f,kIsWritable:r,isClosed:V,isDuplexNodeStream:_,isFinished:N,isIterable:k,isReadableNodeStream:d,isReadableStream:m,isReadableEnded:P,isReadableFinished:H,isReadableErrored:G,isNodeStream:p,isWebStream:w,isWritable:le,isWritableNodeStream:g,isWritableStream:E,isWritableEnded:S,isWritableFinished:I,isWritableErrored:$,isServerRequest:pe,isServerResponse:fe,willEmitClose:ye,isTransformStream:b}}),Ct=de((s,c)=>{"use strict";ne(),se(),oe();var o=qt(),{AbortError:a,codes:h}=Ge(),{ERR_INVALID_ARG_TYPE:t,ERR_STREAM_PREMATURE_CLOSE:e}=h,{kEmptyObject:i,once:r}=Qe(),{validateAbortSignal:n,validateFunction:l,validateObject:f,validateBoolean:d}=pr(),{Promise:g,PromisePrototypeThen:_,SymbolDispose:p}=Ue(),{isClosed:m,isReadable:E,isReadableNodeStream:b,isReadableStream:w,isReadableFinished:k,isReadableErrored:T,isWritable:S,isWritableNodeStream:I,isWritableStream:P,isWritableFinished:H,isWritableErrored:Y,isNodeStream:le,willEmitClose:N,kIsClosedPromise:$}=yt(),G;function V(D){return D.setHeader&&typeof D.abort=="function"}var ue=()=>{};function fe(D,ie,R){var he,_e;if(arguments.length===2?(R=ie,ie=i):ie==null?ie=i:f(ie,"options"),l(R,"callback"),n(ie.signal,"options.signal"),R=r(R),w(D)||P(D))return pe(D,ie,R);if(!le(D))throw new t("stream",["ReadableStream","WritableStream","Stream"],D);let J=(he=ie.readable)!==null&&he!==void 0?he:b(D),ve=(_e=ie.writable)!==null&&_e!==void 0?_e:I(D),q=D._writableState,x=D._readableState,ee=()=>{D.writable||W()},z=N(D)&&b(D)===J&&I(D)===ve,F=H(D,!1),W=()=>{F=!0,D.destroyed&&(z=!1),!(z&&(!D.readable||J))&&(!J||ae)&&R.call(D)},ae=k(D,!1),ce=()=>{ae=!0,D.destroyed&&(z=!1),!(z&&(!D.writable||ve))&&(!ve||F)&&R.call(D)},O=L=>{R.call(D,L)},M=m(D),j=()=>{M=!0;let L=Y(D)||T(D);if(L&&typeof L!="boolean")return R.call(D,L);if(J&&!ae&&b(D,!0)&&!k(D,!1))return R.call(D,new e);if(ve&&!F&&!H(D,!1))return R.call(D,new e);R.call(D)},K=()=>{M=!0;let L=Y(D)||T(D);if(L&&typeof L!="boolean")return R.call(D,L);R.call(D)},Z=()=>{D.req.on("finish",W)};V(D)?(D.on("complete",W),z||D.on("abort",j),D.req?Z():D.on("request",Z)):ve&&!q&&(D.on("end",ee),D.on("close",ee)),!z&&typeof D.aborted=="boolean"&&D.on("aborted",j),D.on("end",ce),D.on("finish",W),ie.error!==!1&&D.on("error",O),D.on("close",j),M?o.nextTick(j):q!=null&&q.errorEmitted||x!=null&&x.errorEmitted?z||o.nextTick(K):(!J&&(!z||E(D))&&(F||S(D)===!1)||!ve&&(!z||S(D))&&(ae||E(D)===!1)||x&&D.req&&D.aborted)&&o.nextTick(K);let re=()=>{R=ue,D.removeListener("aborted",j),D.removeListener("complete",W),D.removeListener("abort",j),D.removeListener("request",Z),D.req&&D.req.removeListener("finish",W),D.removeListener("end",ee),D.removeListener("close",ee),D.removeListener("finish",W),D.removeListener("end",ce),D.removeListener("error",O),D.removeListener("close",j)};if(ie.signal&&!M){let L=()=>{let X=R;re(),X.call(D,new a(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)o.nextTick(L);else{G=G||Qe().addAbortListener;let X=G(ie.signal,L),be=R;R=r((...te)=>{X[p](),be.apply(D,te)})}}return re}function pe(D,ie,R){let he=!1,_e=ue;if(ie.signal)if(_e=()=>{he=!0,R.call(D,new a(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)o.nextTick(_e);else{G=G||Qe().addAbortListener;let ve=G(ie.signal,_e),q=R;R=r((...x)=>{ve[p](),q.apply(D,x)})}let J=(...ve)=>{he||o.nextTick(()=>R.apply(D,ve))};return _(D[$].promise,J,J),ue}function ye(D,ie){var R;let he=!1;return ie===null&&(ie=i),(R=ie)!==null&&R!==void 0&&R.cleanup&&(d(ie.cleanup,"cleanup"),he=ie.cleanup),new g((_e,J)=>{let ve=fe(D,ie,q=>{he&&ve(),q?J(q):_e()})})}c.exports=fe,c.exports.finished=ye}),Kt=de((s,c)=>{"use strict";ne(),se(),oe();var o=qt(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:h},AbortError:t}=Ge(),{Symbol:e}=Ue(),{kIsDestroyed:i,isDestroyed:r,isFinished:n,isServerRequest:l}=yt(),f=e("kDestroy"),d=e("kConstruct");function g(N,$,G){N&&(N.stack,$&&!$.errored&&($.errored=N),G&&!G.errored&&(G.errored=N))}function _(N,$){let G=this._readableState,V=this._writableState,ue=V||G;return V!=null&&V.destroyed||G!=null&&G.destroyed?(typeof $=="function"&&$(),this):(g(N,V,G),V&&(V.destroyed=!0),G&&(G.destroyed=!0),ue.constructed?p(this,N,$):this.once(f,function(fe){p(this,a(fe,N),$)}),this)}function p(N,$,G){let V=!1;function ue(fe){if(V)return;V=!0;let pe=N._readableState,ye=N._writableState;g(fe,ye,pe),ye&&(ye.closed=!0),pe&&(pe.closed=!0),typeof G=="function"&&G(fe),fe?o.nextTick(m,N,fe):o.nextTick(E,N)}try{N._destroy($||null,ue)}catch(fe){ue(fe)}}function m(N,$){b(N,$),E(N)}function E(N){let $=N._readableState,G=N._writableState;G&&(G.closeEmitted=!0),$&&($.closeEmitted=!0),(G!=null&&G.emitClose||$!=null&&$.emitClose)&&N.emit("close")}function b(N,$){let G=N._readableState,V=N._writableState;V!=null&&V.errorEmitted||G!=null&&G.errorEmitted||(V&&(V.errorEmitted=!0),G&&(G.errorEmitted=!0),N.emit("error",$))}function w(){let N=this._readableState,$=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),$&&($.constructed=!0,$.destroyed=!1,$.closed=!1,$.closeEmitted=!1,$.errored=null,$.errorEmitted=!1,$.finalCalled=!1,$.prefinished=!1,$.ended=$.writable===!1,$.ending=$.writable===!1,$.finished=$.writable===!1)}function k(N,$,G){let V=N._readableState,ue=N._writableState;if(ue!=null&&ue.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||ue!=null&&ue.autoDestroy?N.destroy($):$&&($.stack,ue&&!ue.errored&&(ue.errored=$),V&&!V.errored&&(V.errored=$),G?o.nextTick(b,N,$):b(N,$))}function T(N,$){if(typeof N._construct!="function")return;let G=N._readableState,V=N._writableState;G&&(G.constructed=!1),V&&(V.constructed=!1),N.once(d,$),!(N.listenerCount(d)>1)&&o.nextTick(S,N)}function S(N){let $=!1;function G(V){if($){k(N,V??new h);return}$=!0;let ue=N._readableState,fe=N._writableState,pe=fe||ue;ue&&(ue.constructed=!0),fe&&(fe.constructed=!0),pe.destroyed?N.emit(f,V):V?k(N,V,!0):o.nextTick(I,N)}try{N._construct(V=>{o.nextTick(G,V)})}catch(V){o.nextTick(G,V)}}function I(N){N.emit(d)}function P(N){return N?.setHeader&&typeof N.abort=="function"}function H(N){N.emit("close")}function Y(N,$){N.emit("error",$),o.nextTick(H,N)}function le(N,$){!N||r(N)||(!$&&!n(N)&&($=new t),l(N)?(N.socket=null,N.destroy($)):P(N)?N.abort():P(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy($):typeof N.close=="function"?N.close():$?o.nextTick(Y,N,$):o.nextTick(H,N),N.destroyed||(N[i]=!0))}c.exports={construct:T,destroyer:le,destroy:_,undestroy:w,errorOrDestroy:k}}),vn=de((s,c)=>{"use strict";ne(),se(),oe();var{ArrayIsArray:o,ObjectSetPrototypeOf:a}=Ue(),{EventEmitter:h}=(Wt(),Re(Tt));function t(i){h.call(this,i)}a(t.prototype,h.prototype),a(t,h),t.prototype.pipe=function(i,r){let n=this;function l(E){i.writable&&i.write(E)===!1&&n.pause&&n.pause()}n.on("data",l);function f(){n.readable&&n.resume&&n.resume()}i.on("drain",f),!i._isStdio&&(!r||r.end!==!1)&&(n.on("end",g),n.on("close",_));let d=!1;function g(){d||(d=!0,i.end())}function _(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function p(E){m(),h.listenerCount(this,"error")===0&&this.emit("error",E)}e(n,"error",p),e(i,"error",p);function m(){n.removeListener("data",l),i.removeListener("drain",f),n.removeListener("end",g),n.removeListener("close",_),n.removeListener("error",p),i.removeListener("error",p),n.removeListener("end",m),n.removeListener("close",m),i.removeListener("close",m)}return n.on("end",m),n.on("close",m),i.on("close",m),i.emit("pipe",n),i};function e(i,r,n){if(typeof i.prependListener=="function")return i.prependListener(r,n);!i._events||!i._events[r]?i.on(r,n):o(i._events[r])?i._events[r].unshift(n):i._events[r]=[n,i._events[r]]}c.exports={Stream:t,prependListener:e}}),Or=de((s,c)=>{"use strict";ne(),se(),oe();var{SymbolDispose:o}=Ue(),{AbortError:a,codes:h}=Ge(),{isNodeStream:t,isWebStream:e,kControllerErrorFunction:i}=yt(),r=Ct(),{ERR_INVALID_ARG_TYPE:n}=h,l,f=(d,g)=>{if(typeof d!="object"||!("aborted"in d))throw new n(g,"AbortSignal",d)};c.exports.addAbortSignal=function(d,g){if(f(d,"signal"),!t(g)&&!e(g))throw new n("stream",["ReadableStream","WritableStream","Stream"],g);return c.exports.addAbortSignalNoValidate(d,g)},c.exports.addAbortSignalNoValidate=function(d,g){if(typeof d!="object"||!("aborted"in d))return g;let _=t(g)?()=>{g.destroy(new a(void 0,{cause:d.reason}))}:()=>{g[i](new a(void 0,{cause:d.reason}))};if(d.aborted)_();else{l=l||Qe().addAbortListener;let p=l(d,_);r(g,p[o])}return g}}),Qa=de((s,c)=>{"use strict";ne(),se(),oe();var{StringPrototypeSlice:o,SymbolIterator:a,TypedArrayPrototypeSet:h,Uint8Array:t}=Ue(),{Buffer:e}=(qe(),Re(We)),{inspect:i}=Qe();c.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(r){let n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(r){let n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}clear(){this.head=this.tail=null,this.length=0}join(r){if(this.length===0)return"";let n=this.head,l=""+n.data;for(;(n=n.next)!==null;)l+=r+n.data;return l}concat(r){if(this.length===0)return e.alloc(0);let n=e.allocUnsafe(r>>>0),l=this.head,f=0;for(;l;)h(n,l.data,f),f+=l.data.length,l=l.next;return n}consume(r,n){let l=this.head.data;if(r<l.length){let f=l.slice(0,r);return this.head.data=l.slice(r),f}return r===l.length?this.shift():n?this._getString(r):this._getBuffer(r)}first(){return this.head.data}*[a](){for(let r=this.head;r;r=r.next)yield r.data}_getString(r){let n="",l=this.head,f=0;do{let d=l.data;if(r>d.length)n+=d,r-=d.length;else{r===d.length?(n+=d,++f,l.next?this.head=l.next:this.head=this.tail=null):(n+=o(d,0,r),this.head=l,l.data=o(d,r));break}++f}while((l=l.next)!==null);return this.length-=f,n}_getBuffer(r){let n=e.allocUnsafe(r),l=r,f=this.head,d=0;do{let g=f.data;if(r>g.length)h(n,g,l-r),r-=g.length;else{r===g.length?(h(n,g,l-r),++d,f.next?this.head=f.next:this.head=this.tail=null):(h(n,new t(g.buffer,g.byteOffset,r),l-r),this.head=f,f.data=g.slice(r));break}++d}while((f=f.next)!==null);return this.length-=d,n}[Symbol.for("nodejs.util.inspect.custom")](r,n){return i(this,et(Ie({},n),{depth:0,customInspect:!1}))}}}),xr=de((s,c)=>{"use strict";ne(),se(),oe();var{MathFloor:o,NumberIsInteger:a}=Ue(),{validateInteger:h}=pr(),{ERR_INVALID_ARG_VALUE:t}=Ge().codes,e=16*1024,i=16;function r(d,g,_){return d.highWaterMark!=null?d.highWaterMark:g?d[_]:null}function n(d){return d?i:e}function l(d,g){h(g,"value",0),d?i=g:e=g}function f(d,g,_,p){let m=r(g,p,_);if(m!=null){if(!a(m)||m<0){let E=p?`options.${_}`:"options.highWaterMark";throw new t(E,m)}return o(m)}return n(d.objectMode)}c.exports={getHighWaterMark:f,getDefaultHighWaterMark:n,setDefaultHighWaterMark:l}}),Ka=de((s,c)=>{ne(),se(),oe();var o=(qe(),Re(We)),a=o.Buffer;function h(e,i){for(var r in e)i[r]=e[r]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?c.exports=o:(h(o,s),s.Buffer=t);function t(e,i,r){return a(e,i,r)}t.prototype=Object.create(a.prototype),h(a,t),t.from=function(e,i,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return a(e,i,r)},t.alloc=function(e,i,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=a(e);return i!==void 0?typeof r=="string"?n.fill(i,r):n.fill(i):n.fill(0),n},t.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return a(e)},t.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}}),Ya=de(s=>{"use strict";ne(),se(),oe();var c=Ka().Buffer,o=c.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(b){if(!b)return"utf8";for(var w;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(w)return;b=(""+b).toLowerCase(),w=!0}}function h(b){var w=a(b);if(typeof w!="string"&&(c.isEncoding===o||!o(b)))throw new Error("Unknown encoding: "+b);return w||b}s.StringDecoder=t;function t(b){this.encoding=h(b);var w;switch(this.encoding){case"utf16le":this.text=d,this.end=g,w=4;break;case"utf8":this.fillLast=n,w=4;break;case"base64":this.text=_,this.end=p,w=3;break;default:this.write=m,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(w)}t.prototype.write=function(b){if(b.length===0)return"";var w,k;if(this.lastNeed){if(w=this.fillLast(b),w===void 0)return"";k=this.lastNeed,this.lastNeed=0}else k=0;return k<b.length?w?w+this.text(b,k):this.text(b,k):w||""},t.prototype.end=f,t.prototype.text=l,t.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function e(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function i(b,w,k){var T=w.length-1;if(T<k)return 0;var S=e(w[T]);return S>=0?(S>0&&(b.lastNeed=S-1),S):--T<k||S===-2?0:(S=e(w[T]),S>=0?(S>0&&(b.lastNeed=S-2),S):--T<k||S===-2?0:(S=e(w[T]),S>=0?(S>0&&(S===2?S=0:b.lastNeed=S-3),S):0))}function r(b,w,k){if((w[0]&192)!==128)return b.lastNeed=0,"\uFFFD";if(b.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return b.lastNeed=1,"\uFFFD";if(b.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return b.lastNeed=2,"\uFFFD"}}function n(b){var w=this.lastTotal-this.lastNeed,k=r(this,b,w);if(k!==void 0)return k;if(this.lastNeed<=b.length)return b.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,w,0,b.length),this.lastNeed-=b.length}function l(b,w){var k=i(this,b,w);if(!this.lastNeed)return b.toString("utf8",w);this.lastTotal=k;var T=b.length-(k-this.lastNeed);return b.copy(this.lastChar,0,T),b.toString("utf8",w,T)}function f(b){var w=b&&b.length?this.write(b):"";return this.lastNeed?w+"\uFFFD":w}function d(b,w){if((b.length-w)%2===0){var k=b.toString("utf16le",w);if(k){var T=k.charCodeAt(k.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],k.slice(0,-1)}return k}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",w,b.length-1)}function g(b){var w=b&&b.length?this.write(b):"";if(this.lastNeed){var k=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,k)}return w}function _(b,w){var k=(b.length-w)%3;return k===0?b.toString("base64",w):(this.lastNeed=3-k,this.lastTotal=3,k===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",w,b.length-k))}function p(b){var w=b&&b.length?this.write(b):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function m(b){return b.toString(this.encoding)}function E(b){return b&&b.length?this.write(b):""}}),Zo=de((s,c)=>{"use strict";ne(),se(),oe();var o=qt(),{PromisePrototypeThen:a,SymbolAsyncIterator:h,SymbolIterator:t}=Ue(),{Buffer:e}=(qe(),Re(We)),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:r}=Ge().codes;function n(l,f,d){let g;if(typeof f=="string"||f instanceof e)return new l(et(Ie({objectMode:!0},d),{read(){this.push(f),this.push(null)}}));let _;if(f&&f[h])_=!0,g=f[h]();else if(f&&f[t])_=!1,g=f[t]();else throw new i("iterable",["Iterable"],f);let p=new l(Ie({objectMode:!0,highWaterMark:1},d)),m=!1;p._read=function(){m||(m=!0,b())},p._destroy=function(w,k){a(E(w),()=>o.nextTick(k,w),T=>o.nextTick(k,T||w))};function E(w){return Me(this,null,function*(){let k=w!=null,T=typeof g.throw=="function";if(k&&T){let{value:S,done:I}=yield g.throw(w);if(yield S,I)return}if(typeof g.return=="function"){let{value:S}=yield g.return();yield S}})}function b(){return Me(this,null,function*(){for(;;){try{let{value:w,done:k}=_?yield g.next():g.next();if(k)p.push(null);else{let T=w&&typeof w.then=="function"?yield w:w;if(T===null)throw m=!1,new r;if(p.push(T))continue;m=!1}}catch(w){p.destroy(w)}break}})}return p}c.exports=n}),Mr=de((s,c)=>{"use strict";ne(),se(),oe();var o=qt(),{ArrayPrototypeIndexOf:a,NumberIsInteger:h,NumberIsNaN:t,NumberParseInt:e,ObjectDefineProperties:i,ObjectKeys:r,ObjectSetPrototypeOf:n,Promise:l,SafeSet:f,SymbolAsyncDispose:d,SymbolAsyncIterator:g,Symbol:_}=Ue();c.exports=te,te.ReadableState=be;var{EventEmitter:p}=(Wt(),Re(Tt)),{Stream:m,prependListener:E}=vn(),{Buffer:b}=(qe(),Re(We)),{addAbortSignal:w}=Or(),k=Ct(),T=Qe().debuglog("stream",A=>{T=A}),S=Qa(),I=Kt(),{getHighWaterMark:P,getDefaultHighWaterMark:H}=xr(),{aggregateTwoErrors:Y,codes:{ERR_INVALID_ARG_TYPE:le,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:$,ERR_STREAM_PUSH_AFTER_EOF:G,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:V},AbortError:ue}=Ge(),{validateObject:fe}=pr(),pe=_("kPaused"),{StringDecoder:ye}=Ya(),D=Zo();n(te.prototype,m.prototype),n(te,m);var ie=()=>{},{errorOrDestroy:R}=I,he=1,_e=2,J=4,ve=8,q=16,x=32,ee=64,z=128,F=256,W=512,ae=1024,ce=2048,O=4096,M=8192,j=16384,K=32768,Z=65536,re=1<<17,L=1<<18;function X(A){return{enumerable:!1,get(){return(this.state&A)!==0},set(C){C?this.state|=A:this.state&=~A}}}i(be.prototype,{objectMode:X(he),ended:X(_e),endEmitted:X(J),reading:X(ve),constructed:X(q),sync:X(x),needReadable:X(ee),emittedReadable:X(z),readableListening:X(F),resumeScheduled:X(W),errorEmitted:X(ae),emitClose:X(ce),autoDestroy:X(O),destroyed:X(M),closed:X(j),closeEmitted:X(K),multiAwaitDrain:X(Z),readingMore:X(re),dataEmitted:X(L)});function be(A,C,me){typeof me!="boolean"&&(me=C instanceof mt()),this.state=ce|O|q|x,A&&A.objectMode&&(this.state|=he),me&&A&&A.readableObjectMode&&(this.state|=he),this.highWaterMark=A?P(this,A,"readableHighWaterMark",me):H(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[pe]=null,A&&A.emitClose===!1&&(this.state&=~ce),A&&A.autoDestroy===!1&&(this.state&=~O),this.errored=null,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,A&&A.encoding&&(this.decoder=new ye(A.encoding),this.encoding=A.encoding)}function te(A){if(!(this instanceof te))return new te(A);let C=this instanceof mt();this._readableState=new be(A,this,C),A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&!C&&w(A.signal,this)),m.call(this,A),I.construct(this,()=>{this._readableState.needReadable&&Ae(this,this._readableState)})}te.prototype.destroy=I.destroy,te.prototype._undestroy=I.undestroy,te.prototype._destroy=function(A,C){C(A)},te.prototype[p.captureRejectionSymbol]=function(A){this.destroy(A)},te.prototype[d]=function(){let A;return this.destroyed||(A=this.readableEnded?null:new ue,this.destroy(A)),new l((C,me)=>k(this,we=>we&&we!==A?me(we):C(null)))},te.prototype.push=function(A,C){return Ee(this,A,C,!1)},te.prototype.unshift=function(A,C){return Ee(this,A,C,!0)};function Ee(A,C,me,we){T("readableAddChunk",C);let Se=A._readableState,$e;if((Se.state&he)===0&&(typeof C=="string"?(me=me||Se.defaultEncoding,Se.encoding!==me&&(we&&Se.encoding?C=b.from(C,me).toString(Se.encoding):(C=b.from(C,me),me=""))):C instanceof b?me="":m._isUint8Array(C)?(C=m._uint8ArrayToBuffer(C),me=""):C!=null&&($e=new le("chunk",["string","Buffer","Uint8Array"],C))),$e)R(A,$e);else if(C===null)Se.state&=~ve,U(A,Se);else if((Se.state&he)!==0||C&&C.length>0)if(we)if((Se.state&J)!==0)R(A,new V);else{if(Se.destroyed||Se.errored)return!1;u(A,Se,C,!0)}else if(Se.ended)R(A,new G);else{if(Se.destroyed||Se.errored)return!1;Se.state&=~ve,Se.decoder&&!me?(C=Se.decoder.write(C),Se.objectMode||C.length!==0?u(A,Se,C,!1):Ae(A,Se)):u(A,Se,C,!1)}else we||(Se.state&=~ve,Ae(A,Se));return!Se.ended&&(Se.length<Se.highWaterMark||Se.length===0)}function u(A,C,me,we){C.flowing&&C.length===0&&!C.sync&&A.listenerCount("data")>0?((C.state&Z)!==0?C.awaitDrainWriters.clear():C.awaitDrainWriters=null,C.dataEmitted=!0,A.emit("data",me)):(C.length+=C.objectMode?1:me.length,we?C.buffer.unshift(me):C.buffer.push(me),(C.state&ee)!==0&&Q(A)),Ae(A,C)}te.prototype.isPaused=function(){let A=this._readableState;return A[pe]===!0||A.flowing===!1},te.prototype.setEncoding=function(A){let C=new ye(A);this._readableState.decoder=C,this._readableState.encoding=this._readableState.decoder.encoding;let me=this._readableState.buffer,we="";for(let Se of me)we+=C.write(Se);return me.clear(),we!==""&&me.push(we),this._readableState.length=we.length,this};var y=1073741824;function v(A){if(A>y)throw new $("size","<= 1GiB",A);return A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++,A}function B(A,C){return A<=0||C.length===0&&C.ended?0:(C.state&he)!==0?1:t(A)?C.flowing&&C.length?C.buffer.first().length:C.length:A<=C.length?A:C.ended?C.length:0}te.prototype.read=function(A){T("read",A),A===void 0?A=NaN:h(A)||(A=e(A,10));let C=this._readableState,me=A;if(A>C.highWaterMark&&(C.highWaterMark=v(A)),A!==0&&(C.state&=~z),A===0&&C.needReadable&&((C.highWaterMark!==0?C.length>=C.highWaterMark:C.length>0)||C.ended))return T("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?Ur(this):Q(this),null;if(A=B(A,C),A===0&&C.ended)return C.length===0&&Ur(this),null;let we=(C.state&ee)!==0;if(T("need readable",we),(C.length===0||C.length-A<C.highWaterMark)&&(we=!0,T("length less than watermark",we)),C.ended||C.reading||C.destroyed||C.errored||!C.constructed)we=!1,T("reading, ended or constructing",we);else if(we){T("do read"),C.state|=ve|x,C.length===0&&(C.state|=ee);try{this._read(C.highWaterMark)}catch($e){R(this,$e)}C.state&=~x,C.reading||(A=B(me,C))}let Se;return A>0?Se=Pn(A,C):Se=null,Se===null?(C.needReadable=C.length<=C.highWaterMark,A=0):(C.length-=A,C.multiAwaitDrain?C.awaitDrainWriters.clear():C.awaitDrainWriters=null),C.length===0&&(C.ended||(C.needReadable=!0),me!==A&&C.ended&&Ur(this)),Se!==null&&!C.errorEmitted&&!C.closeEmitted&&(C.dataEmitted=!0,this.emit("data",Se)),Se};function U(A,C){if(T("onEofChunk"),!C.ended){if(C.decoder){let me=C.decoder.end();me&&me.length&&(C.buffer.push(me),C.length+=C.objectMode?1:me.length)}C.ended=!0,C.sync?Q(A):(C.needReadable=!1,C.emittedReadable=!0,ge(A))}}function Q(A){let C=A._readableState;T("emitReadable",C.needReadable,C.emittedReadable),C.needReadable=!1,C.emittedReadable||(T("emitReadable",C.flowing),C.emittedReadable=!0,o.nextTick(ge,A))}function ge(A){let C=A._readableState;T("emitReadable_",C.destroyed,C.length,C.ended),!C.destroyed&&!C.errored&&(C.length||C.ended)&&(A.emit("readable"),C.emittedReadable=!1),C.needReadable=!C.flowing&&!C.ended&&C.length<=C.highWaterMark,Tn(A)}function Ae(A,C){!C.readingMore&&C.constructed&&(C.readingMore=!0,o.nextTick(Te,A,C))}function Te(A,C){for(;!C.reading&&!C.ended&&(C.length<C.highWaterMark||C.flowing&&C.length===0);){let me=C.length;if(T("maybeReadMore read 0"),A.read(0),me===C.length)break}C.readingMore=!1}te.prototype._read=function(A){throw new N("_read()")},te.prototype.pipe=function(A,C){let me=this,we=this._readableState;we.pipes.length===1&&(we.multiAwaitDrain||(we.multiAwaitDrain=!0,we.awaitDrainWriters=new f(we.awaitDrainWriters?[we.awaitDrainWriters]:[]))),we.pipes.push(A),T("pipe count=%d opts=%j",we.pipes.length,C);let Se=(!C||C.end!==!1)&&A!==o.stdout&&A!==o.stderr?Xe:Jt;we.endEmitted?o.nextTick(Se):me.once("end",Se),A.on("unpipe",$e);function $e(Rt,at){T("onunpipe"),Rt===me&&at&&at.hasUnpiped===!1&&(at.hasUnpiped=!0,ya())}function Xe(){T("onend"),A.end()}let Pt,On=!1;function ya(){T("cleanup"),A.removeListener("close",Fr),A.removeListener("finish",Wr),Pt&&A.removeListener("drain",Pt),A.removeListener("error",Dr),A.removeListener("unpipe",$e),me.removeListener("end",Xe),me.removeListener("end",Jt),me.removeListener("data",Mn),On=!0,Pt&&we.awaitDrainWriters&&(!A._writableState||A._writableState.needDrain)&&Pt()}function xn(){On||(we.pipes.length===1&&we.pipes[0]===A?(T("false write response, pause",0),we.awaitDrainWriters=A,we.multiAwaitDrain=!1):we.pipes.length>1&&we.pipes.includes(A)&&(T("false write response, pause",we.awaitDrainWriters.size),we.awaitDrainWriters.add(A)),me.pause()),Pt||(Pt=Oe(me,A),A.on("drain",Pt))}me.on("data",Mn);function Mn(Rt){T("ondata");let at=A.write(Rt);T("dest.write",at),at===!1&&xn()}function Dr(Rt){if(T("onerror",Rt),Jt(),A.removeListener("error",Dr),A.listenerCount("error")===0){let at=A._writableState||A._readableState;at&&!at.errorEmitted?R(A,Rt):A.emit("error",Rt)}}E(A,"error",Dr);function Fr(){A.removeListener("finish",Wr),Jt()}A.once("close",Fr);function Wr(){T("onfinish"),A.removeListener("close",Fr),Jt()}A.once("finish",Wr);function Jt(){T("unpipe"),me.unpipe(A)}return A.emit("pipe",me),A.writableNeedDrain===!0?xn():we.flowing||(T("pipe resume"),me.resume()),A};function Oe(A,C){return function(){let me=A._readableState;me.awaitDrainWriters===C?(T("pipeOnDrain",1),me.awaitDrainWriters=null):me.multiAwaitDrain&&(T("pipeOnDrain",me.awaitDrainWriters.size),me.awaitDrainWriters.delete(C)),(!me.awaitDrainWriters||me.awaitDrainWriters.size===0)&&A.listenerCount("data")&&A.resume()}}te.prototype.unpipe=function(A){let C=this._readableState,me={hasUnpiped:!1};if(C.pipes.length===0)return this;if(!A){let Se=C.pipes;C.pipes=[],this.pause();for(let $e=0;$e<Se.length;$e++)Se[$e].emit("unpipe",this,{hasUnpiped:!1});return this}let we=a(C.pipes,A);return we===-1?this:(C.pipes.splice(we,1),C.pipes.length===0&&this.pause(),A.emit("unpipe",this,me),this)},te.prototype.on=function(A,C){let me=m.prototype.on.call(this,A,C),we=this._readableState;return A==="data"?(we.readableListening=this.listenerCount("readable")>0,we.flowing!==!1&&this.resume()):A==="readable"&&!we.endEmitted&&!we.readableListening&&(we.readableListening=we.needReadable=!0,we.flowing=!1,we.emittedReadable=!1,T("on readable",we.length,we.reading),we.length?Q(this):we.reading||o.nextTick(je,this)),me},te.prototype.addListener=te.prototype.on,te.prototype.removeListener=function(A,C){let me=m.prototype.removeListener.call(this,A,C);return A==="readable"&&o.nextTick(ke,this),me},te.prototype.off=te.prototype.removeListener,te.prototype.removeAllListeners=function(A){let C=m.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&o.nextTick(ke,this),C};function ke(A){let C=A._readableState;C.readableListening=A.listenerCount("readable")>0,C.resumeScheduled&&C[pe]===!1?C.flowing=!0:A.listenerCount("data")>0?A.resume():C.readableListening||(C.flowing=null)}function je(A){T("readable nexttick read 0"),A.read(0)}te.prototype.resume=function(){let A=this._readableState;return A.flowing||(T("resume"),A.flowing=!A.readableListening,da(this,A)),A[pe]=!1,this};function da(A,C){C.resumeScheduled||(C.resumeScheduled=!0,o.nextTick(pa,A,C))}function pa(A,C){T("resume",C.reading),C.reading||A.read(0),C.resumeScheduled=!1,A.emit("resume"),Tn(A),C.flowing&&!C.reading&&A.read(0)}te.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[pe]=!0,this};function Tn(A){let C=A._readableState;for(T("flow",C.flowing);C.flowing&&A.read()!==null;);}te.prototype.wrap=function(A){let C=!1;A.on("data",we=>{!this.push(we)&&A.pause&&(C=!0,A.pause())}),A.on("end",()=>{this.push(null)}),A.on("error",we=>{R(this,we)}),A.on("close",()=>{this.destroy()}),A.on("destroy",()=>{this.destroy()}),this._read=()=>{C&&A.resume&&(C=!1,A.resume())};let me=r(A);for(let we=1;we<me.length;we++){let Se=me[we];this[Se]===void 0&&typeof A[Se]=="function"&&(this[Se]=A[Se].bind(A))}return this},te.prototype[g]=function(){return Cn(this)},te.prototype.iterator=function(A){return A!==void 0&&fe(A,"options"),Cn(this,A)};function Cn(A,C){typeof A.read!="function"&&(A=te.wrap(A,{objectMode:!0}));let me=ga(A,C);return me.stream=A,me}function ga(A,C){return lt(this,null,function*(){let me=ie;function we(Xe){this===A?(me(),me=ie):me=Xe}A.on("readable",we);let Se,$e=k(A,{writable:!1},Xe=>{Se=Xe?Y(Se,Xe):null,me(),me=ie});try{for(;;){let Xe=A.destroyed?null:A.read();if(Xe!==null)yield Xe;else{if(Se)throw Se;if(Se===null)return;yield new Ke(new l(we))}}}catch(Xe){throw Se=Y(Se,Xe),Se}finally{(Se||C?.destroyOnReturn!==!1)&&(Se===void 0||A._readableState.autoDestroy)?I.destroyer(A,null):(A.off("readable",we),$e())}})}i(te.prototype,{readable:{__proto__:null,get(){let A=this._readableState;return!!A&&A.readable!==!1&&!A.destroyed&&!A.errorEmitted&&!A.endEmitted},set(A){this._readableState&&(this._readableState.readable=!!A)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(A){this._readableState&&(this._readableState.destroyed=A)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[pe]!==!1},set(A){this[pe]=!!A}}}),te._fromList=Pn;function Pn(A,C){if(C.length===0)return null;let me;return C.objectMode?me=C.buffer.shift():!A||A>=C.length?(C.decoder?me=C.buffer.join(""):C.buffer.length===1?me=C.buffer.first():me=C.buffer.concat(C.length),C.buffer.clear()):me=C.buffer.consume(A,C.decoder),me}function Ur(A){let C=A._readableState;T("endReadable",C.endEmitted),C.endEmitted||(C.ended=!0,o.nextTick(ma,C,A))}function ma(A,C){if(T("endReadableNT",A.endEmitted,A.length),!A.errored&&!A.closeEmitted&&!A.endEmitted&&A.length===0){if(A.endEmitted=!0,C.emit("end"),C.writable&&C.allowHalfOpen===!1)o.nextTick(ba,C);else if(A.autoDestroy){let me=C._writableState;(!me||me.autoDestroy&&(me.finished||me.writable===!1))&&C.destroy()}}}function ba(A){A.writable&&!A.writableEnded&&!A.destroyed&&A.end()}te.from=function(A,C){return D(te,A,C)};var jr;function Rn(){return jr===void 0&&(jr={}),jr}te.fromWeb=function(A,C){return Rn().newStreamReadableFromReadableStream(A,C)},te.toWeb=function(A,C){return Rn().newReadableStreamFromStreamReadable(A,C)},te.wrap=function(A,C){var me,we;return new te(et(Ie({objectMode:(me=(we=A.readableObjectMode)!==null&&we!==void 0?we:A.objectMode)!==null&&me!==void 0?me:!0},C),{destroy(Se,$e){I.destroyer(A,Se),$e(Se)}})).wrap(A)}}),En=de((s,c)=>{"use strict";ne(),se(),oe();var o=qt(),{ArrayPrototypeSlice:a,Error:h,FunctionPrototypeSymbolHasInstance:t,ObjectDefineProperty:e,ObjectDefineProperties:i,ObjectSetPrototypeOf:r,StringPrototypeToLowerCase:n,Symbol:l,SymbolHasInstance:f}=Ue();c.exports=fe,fe.WritableState=V;var{EventEmitter:d}=(Wt(),Re(Tt)),g=vn().Stream,{Buffer:_}=(qe(),Re(We)),p=Kt(),{addAbortSignal:m}=Or(),{getHighWaterMark:E,getDefaultHighWaterMark:b}=xr(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:H,ERR_STREAM_WRITE_AFTER_END:Y,ERR_UNKNOWN_ENCODING:le}=Ge().codes,{errorOrDestroy:N}=p;r(fe.prototype,g.prototype),r(fe,g);function $(){}var G=l("kOnFinished");function V(O,M,j){typeof j!="boolean"&&(j=M instanceof mt()),this.objectMode=!!(O&&O.objectMode),j&&(this.objectMode=this.objectMode||!!(O&&O.writableObjectMode)),this.highWaterMark=O?E(this,O,"writableHighWaterMark",j):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let K=!!(O&&O.decodeStrings===!1);this.decodeStrings=!K,this.defaultEncoding=O&&O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=R.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ue(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!O||O.emitClose!==!1,this.autoDestroy=!O||O.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[G]=[]}function ue(O){O.buffered=[],O.bufferedIndex=0,O.allBuffers=!0,O.allNoop=!0}V.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},e(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function fe(O){let M=this instanceof mt();if(!M&&!t(fe,this))return new fe(O);this._writableState=new V(O,this,M),O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final),typeof O.construct=="function"&&(this._construct=O.construct),O.signal&&m(O.signal,this)),g.call(this,O),p.construct(this,()=>{let j=this._writableState;j.writing||ve(this,j),z(this,j)})}e(fe,f,{__proto__:null,value:function(O){return t(this,O)?!0:this!==fe?!1:O&&O._writableState instanceof V}}),fe.prototype.pipe=function(){N(this,new S)};function pe(O,M,j,K){let Z=O._writableState;if(typeof j=="function")K=j,j=Z.defaultEncoding;else{if(!j)j=Z.defaultEncoding;else if(j!=="buffer"&&!_.isEncoding(j))throw new le(j);typeof K!="function"&&(K=$)}if(M===null)throw new H;if(!Z.objectMode)if(typeof M=="string")Z.decodeStrings!==!1&&(M=_.from(M,j),j="buffer");else if(M instanceof _)j="buffer";else if(g._isUint8Array(M))M=g._uint8ArrayToBuffer(M),j="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],M);let re;return Z.ending?re=new Y:Z.destroyed&&(re=new I("write")),re?(o.nextTick(K,re),N(O,re,!0),re):(Z.pendingcb++,ye(O,Z,M,j,K))}fe.prototype.write=function(O,M,j){return pe(this,O,M,j)===!0},fe.prototype.cork=function(){this._writableState.corked++},fe.prototype.uncork=function(){let O=this._writableState;O.corked&&(O.corked--,O.writing||ve(this,O))},fe.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=n(O)),!_.isEncoding(O))throw new le(O);return this._writableState.defaultEncoding=O,this};function ye(O,M,j,K,Z){let re=M.objectMode?1:j.length;M.length+=re;let L=M.length<M.highWaterMark;return L||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:j,encoding:K,callback:Z}),M.allBuffers&&K!=="buffer"&&(M.allBuffers=!1),M.allNoop&&Z!==$&&(M.allNoop=!1)):(M.writelen=re,M.writecb=Z,M.writing=!0,M.sync=!0,O._write(j,K,M.onwrite),M.sync=!1),L&&!M.errored&&!M.destroyed}function D(O,M,j,K,Z,re,L){M.writelen=K,M.writecb=L,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new I("write")):j?O._writev(Z,M.onwrite):O._write(Z,re,M.onwrite),M.sync=!1}function ie(O,M,j,K){--M.pendingcb,K(j),J(M),N(O,j)}function R(O,M){let j=O._writableState,K=j.sync,Z=j.writecb;if(typeof Z!="function"){N(O,new T);return}j.writing=!1,j.writecb=null,j.length-=j.writelen,j.writelen=0,M?(M.stack,j.errored||(j.errored=M),O._readableState&&!O._readableState.errored&&(O._readableState.errored=M),K?o.nextTick(ie,O,j,M,Z):ie(O,j,M,Z)):(j.buffered.length>j.bufferedIndex&&ve(O,j),K?j.afterWriteTickInfo!==null&&j.afterWriteTickInfo.cb===Z?j.afterWriteTickInfo.count++:(j.afterWriteTickInfo={count:1,cb:Z,stream:O,state:j},o.nextTick(he,j.afterWriteTickInfo)):_e(O,j,1,Z))}function he({stream:O,state:M,count:j,cb:K}){return M.afterWriteTickInfo=null,_e(O,M,j,K)}function _e(O,M,j,K){for(!M.ending&&!O.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,O.emit("drain"));j-- >0;)M.pendingcb--,K();M.destroyed&&J(M),z(O,M)}function J(O){if(O.writing)return;for(let Z=O.bufferedIndex;Z<O.buffered.length;++Z){var M;let{chunk:re,callback:L}=O.buffered[Z],X=O.objectMode?1:re.length;O.length-=X,L((M=O.errored)!==null&&M!==void 0?M:new I("write"))}let j=O[G].splice(0);for(let Z=0;Z<j.length;Z++){var K;j[Z]((K=O.errored)!==null&&K!==void 0?K:new I("end"))}ue(O)}function ve(O,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;let{buffered:j,bufferedIndex:K,objectMode:Z}=M,re=j.length-K;if(!re)return;let L=K;if(M.bufferProcessing=!0,re>1&&O._writev){M.pendingcb-=re-1;let X=M.allNoop?$:te=>{for(let Ee=L;Ee<j.length;++Ee)j[Ee].callback(te)},be=M.allNoop&&L===0?j:a(j,L);be.allBuffers=M.allBuffers,D(O,M,!0,M.length,be,"",X),ue(M)}else{do{let{chunk:X,encoding:be,callback:te}=j[L];j[L++]=null;let Ee=Z?1:X.length;D(O,M,!1,Ee,X,be,te)}while(L<j.length&&!M.writing);L===j.length?ue(M):L>256?(j.splice(0,L),M.bufferedIndex=0):M.bufferedIndex=L}M.bufferProcessing=!1}fe.prototype._write=function(O,M,j){if(this._writev)this._writev([{chunk:O,encoding:M}],j);else throw new k("_write()")},fe.prototype._writev=null,fe.prototype.end=function(O,M,j){let K=this._writableState;typeof O=="function"?(j=O,O=null,M=null):typeof M=="function"&&(j=M,M=null);let Z;if(O!=null){let re=pe(this,O,M);re instanceof h&&(Z=re)}return K.corked&&(K.corked=1,this.uncork()),Z||(!K.errored&&!K.ending?(K.ending=!0,z(this,K,!0),K.ended=!0):K.finished?Z=new P("end"):K.destroyed&&(Z=new I("end"))),typeof j=="function"&&(Z||K.finished?o.nextTick(j,Z):K[G].push(j)),this};function q(O){return O.ending&&!O.destroyed&&O.constructed&&O.length===0&&!O.errored&&O.buffered.length===0&&!O.finished&&!O.writing&&!O.errorEmitted&&!O.closeEmitted}function x(O,M){let j=!1;function K(Z){if(j){N(O,Z??T());return}if(j=!0,M.pendingcb--,Z){let re=M[G].splice(0);for(let L=0;L<re.length;L++)re[L](Z);N(O,Z,M.sync)}else q(M)&&(M.prefinished=!0,O.emit("prefinish"),M.pendingcb++,o.nextTick(F,O,M))}M.sync=!0,M.pendingcb++;try{O._final(K)}catch(Z){K(Z)}M.sync=!1}function ee(O,M){!M.prefinished&&!M.finalCalled&&(typeof O._final=="function"&&!M.destroyed?(M.finalCalled=!0,x(O,M)):(M.prefinished=!0,O.emit("prefinish")))}function z(O,M,j){q(M)&&(ee(O,M),M.pendingcb===0&&(j?(M.pendingcb++,o.nextTick((K,Z)=>{q(Z)?F(K,Z):Z.pendingcb--},O,M)):q(M)&&(M.pendingcb++,F(O,M))))}function F(O,M){M.pendingcb--,M.finished=!0;let j=M[G].splice(0);for(let K=0;K<j.length;K++)j[K]();if(O.emit("finish"),M.autoDestroy){let K=O._readableState;(!K||K.autoDestroy&&(K.endEmitted||K.readable===!1))&&O.destroy()}}i(fe.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(O){this._writableState&&(this._writableState.destroyed=O)}},writable:{__proto__:null,get(){let O=this._writableState;return!!O&&O.writable!==!1&&!O.destroyed&&!O.errored&&!O.ending&&!O.ended},set(O){this._writableState&&(this._writableState.writable=!!O)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let O=this._writableState;return O?!O.destroyed&&!O.ending&&O.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var W=p.destroy;fe.prototype.destroy=function(O,M){let j=this._writableState;return!j.destroyed&&(j.bufferedIndex<j.buffered.length||j[G].length)&&o.nextTick(J,j),W.call(this,O,M),this},fe.prototype._undestroy=p.undestroy,fe.prototype._destroy=function(O,M){M(O)},fe.prototype[d.captureRejectionSymbol]=function(O){this.destroy(O)};var ae;function ce(){return ae===void 0&&(ae={}),ae}fe.fromWeb=function(O,M){return ce().newStreamWritableFromWritableStream(O,M)},fe.toWeb=function(O){return ce().newWritableStreamFromStreamWritable(O)}}),Ja=de((s,c)=>{ne(),se(),oe();var o=qt(),a=(qe(),Re(We)),{isReadable:h,isWritable:t,isIterable:e,isNodeStream:i,isReadableNodeStream:r,isWritableNodeStream:n,isDuplexNodeStream:l,isReadableStream:f,isWritableStream:d}=yt(),g=Ct(),{AbortError:_,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:m}}=Ge(),{destroyer:E}=Kt(),b=mt(),w=Mr(),k=En(),{createDeferredPromise:T}=Qe(),S=Zo(),I=globalThis.Blob||a.Blob,P=typeof I<"u"?function(G){return G instanceof I}:function(G){return!1},H=globalThis.AbortController||dr().AbortController,{FunctionPrototypeCall:Y}=Ue(),le=class extends b{constructor(G){super(G),G?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),G?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};c.exports=function G(V,ue){if(l(V))return V;if(r(V))return $({readable:V});if(n(V))return $({writable:V});if(i(V))return $({writable:!1,readable:!1});if(f(V))return $({readable:w.fromWeb(V)});if(d(V))return $({writable:k.fromWeb(V)});if(typeof V=="function"){let{value:pe,write:ye,final:D,destroy:ie}=N(V);if(e(pe))return S(le,pe,{objectMode:!0,write:ye,final:D,destroy:ie});let R=pe?.then;if(typeof R=="function"){let he,_e=Y(R,pe,J=>{if(J!=null)throw new m("nully","body",J)},J=>{E(he,J)});return he=new le({objectMode:!0,readable:!1,write:ye,final(J){D(()=>Me(null,null,function*(){try{yield _e,o.nextTick(J,null)}catch(ve){o.nextTick(J,ve)}}))},destroy:ie})}throw new m("Iterable, AsyncIterable or AsyncFunction",ue,pe)}if(P(V))return G(V.arrayBuffer());if(e(V))return S(le,V,{objectMode:!0,writable:!1});if(f(V?.readable)&&d(V?.writable))return le.fromWeb(V);if(typeof V?.writable=="object"||typeof V?.readable=="object"){let pe=V!=null&&V.readable?r(V?.readable)?V?.readable:G(V.readable):void 0,ye=V!=null&&V.writable?n(V?.writable)?V?.writable:G(V.writable):void 0;return $({readable:pe,writable:ye})}let fe=V?.then;if(typeof fe=="function"){let pe;return Y(fe,V,ye=>{ye!=null&&pe.push(ye),pe.push(null)},ye=>{E(pe,ye)}),pe=new le({objectMode:!0,writable:!1,read(){}})}throw new p(ue,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],V)};function N(G){let{promise:V,resolve:ue}=T(),fe=new H,pe=fe.signal;return{value:G(function(){return lt(this,null,function*(){for(;;){let ye=V;V=null;let{chunk:D,done:ie,cb:R}=yield new Ke(ye);if(o.nextTick(R),ie)return;if(pe.aborted)throw new _(void 0,{cause:pe.reason});({promise:V,resolve:ue}=T()),yield D}})}(),{signal:pe}),write(ye,D,ie){let R=ue;ue=null,R({chunk:ye,done:!1,cb:ie})},final(ye){let D=ue;ue=null,D({done:!0,cb:ye})},destroy(ye,D){fe.abort(),D(ye)}}}function $(G){let V=G.readable&&typeof G.readable.read!="function"?w.wrap(G.readable):G.readable,ue=G.writable,fe=!!h(V),pe=!!t(ue),ye,D,ie,R,he;function _e(J){let ve=R;R=null,ve?ve(J):J&&he.destroy(J)}return he=new le({readableObjectMode:!!(V!=null&&V.readableObjectMode),writableObjectMode:!!(ue!=null&&ue.writableObjectMode),readable:fe,writable:pe}),pe&&(g(ue,J=>{pe=!1,J&&E(V,J),_e(J)}),he._write=function(J,ve,q){ue.write(J,ve)?q():ye=q},he._final=function(J){ue.end(),D=J},ue.on("drain",function(){if(ye){let J=ye;ye=null,J()}}),ue.on("finish",function(){if(D){let J=D;D=null,J()}})),fe&&(g(V,J=>{fe=!1,J&&E(V,J),_e(J)}),V.on("readable",function(){if(ie){let J=ie;ie=null,J()}}),V.on("end",function(){he.push(null)}),he._read=function(){for(;;){let J=V.read();if(J===null){ie=he._read;return}if(!he.push(J))return}}),he._destroy=function(J,ve){!J&&R!==null&&(J=new _),ie=null,ye=null,D=null,R===null?ve(J):(R=ve,E(ue,J),E(V,J))},he}}),mt=de((s,c)=>{"use strict";ne(),se(),oe();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:h,ObjectSetPrototypeOf:t}=Ue();c.exports=r;var e=Mr(),i=En();t(r.prototype,e.prototype),t(r,e);{let d=h(i.prototype);for(let g=0;g<d.length;g++){let _=d[g];r.prototype[_]||(r.prototype[_]=i.prototype[_])}}function r(d){if(!(this instanceof r))return new r(d);e.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(r.prototype,{writable:Ie({__proto__:null},a(i.prototype,"writable")),writableHighWaterMark:Ie({__proto__:null},a(i.prototype,"writableHighWaterMark")),writableObjectMode:Ie({__proto__:null},a(i.prototype,"writableObjectMode")),writableBuffer:Ie({__proto__:null},a(i.prototype,"writableBuffer")),writableLength:Ie({__proto__:null},a(i.prototype,"writableLength")),writableFinished:Ie({__proto__:null},a(i.prototype,"writableFinished")),writableCorked:Ie({__proto__:null},a(i.prototype,"writableCorked")),writableEnded:Ie({__proto__:null},a(i.prototype,"writableEnded")),writableNeedDrain:Ie({__proto__:null},a(i.prototype,"writableNeedDrain")),destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var n;function l(){return n===void 0&&(n={}),n}r.fromWeb=function(d,g){return l().newStreamDuplexFromReadableWritablePair(d,g)},r.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};var f;r.from=function(d){return f||(f=Ja()),f(d,"body")}}),es=de((s,c)=>{"use strict";ne(),se(),oe();var{ObjectSetPrototypeOf:o,Symbol:a}=Ue();c.exports=r;var{ERR_METHOD_NOT_IMPLEMENTED:h}=Ge().codes,t=mt(),{getHighWaterMark:e}=xr();o(r.prototype,t.prototype),o(r,t);var i=a("kCallback");function r(f){if(!(this instanceof r))return new r(f);let d=f?e(this,f,"readableHighWaterMark",!0):null;d===0&&(f=et(Ie({},f),{highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:f.writableHighWaterMark||0})),t.call(this,f),this._readableState.sync=!1,this[i]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",l)}function n(f){typeof this._flush=="function"&&!this.destroyed?this._flush((d,g)=>{if(d){f?f(d):this.destroy(d);return}g!=null&&this.push(g),this.push(null),f&&f()}):(this.push(null),f&&f())}function l(){this._final!==n&&n.call(this)}r.prototype._final=n,r.prototype._transform=function(f,d,g){throw new h("_transform()")},r.prototype._write=function(f,d,g){let _=this._readableState,p=this._writableState,m=_.length;this._transform(f,d,(E,b)=>{if(E){g(E);return}b!=null&&this.push(b),p.ended||m===_.length||_.length<_.highWaterMark?g():this[i]=g})},r.prototype._read=function(){if(this[i]){let f=this[i];this[i]=null,f()}}}),ts=de((s,c)=>{"use strict";ne(),se(),oe();var{ObjectSetPrototypeOf:o}=Ue();c.exports=h;var a=es();o(h.prototype,a.prototype),o(h,a);function h(t){if(!(this instanceof h))return new h(t);a.call(this,t)}h.prototype._transform=function(t,e,i){i(null,t)}}),Sn=de((s,c)=>{ne(),se(),oe();var o=qt(),{ArrayIsArray:a,Promise:h,SymbolAsyncIterator:t,SymbolDispose:e}=Ue(),i=Ct(),{once:r}=Qe(),n=Kt(),l=mt(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:_,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:E}=Ge(),{validateFunction:b,validateAbortSignal:w}=pr(),{isIterable:k,isReadable:T,isReadableNodeStream:S,isNodeStream:I,isTransformStream:P,isWebStream:H,isReadableStream:Y,isReadableFinished:le}=yt(),N=globalThis.AbortController||dr().AbortController,$,G,V;function ue(J,ve,q){let x=!1;J.on("close",()=>{x=!0});let ee=i(J,{readable:ve,writable:q},z=>{x=!z});return{destroy:z=>{x||(x=!0,n.destroyer(J,z||new p("pipe")))},cleanup:ee}}function fe(J){return b(J[J.length-1],"streams[stream.length - 1]"),J.pop()}function pe(J){if(k(J))return J;if(S(J))return ye(J);throw new d("val",["Readable","Iterable","AsyncIterable"],J)}function ye(J){return lt(this,null,function*(){G||(G=Mr()),yield*vt(G.prototype[t].call(J))})}function D(ee,z,F,W){return Me(this,arguments,function*(J,ve,q,{end:x}){let ae,ce=null,O=X=>{if(X&&(ae=X),ce){let be=ce;ce=null,be()}},M=()=>new h((X,be)=>{ae?be(ae):ce=()=>{ae?be(ae):X()}});ve.on("drain",O);let j=i(ve,{readable:!1},O);try{ve.writableNeedDrain&&(yield M());try{for(var K=Ye(J),Z,re,L;Z=!(re=yield K.next()).done;Z=!1){let X=re.value;ve.write(X)||(yield M())}}catch{L=[re]}finally{try{Z&&(re=K.return)&&(yield re.call(K))}finally{if(L)throw L[0]}}x&&(ve.end(),yield M()),q()}catch(X){q(ae!==X?f(ae,X):X)}finally{j(),ve.off("drain",O)}})}function ie(ee,z,F,W){return Me(this,arguments,function*(J,ve,q,{end:x}){P(ve)&&(ve=ve.writable);let ae=ve.getWriter();try{try{for(var ce=Ye(J),O,M,j;O=!(M=yield ce.next()).done;O=!1){let K=M.value;yield ae.ready,ae.write(K).catch(()=>{})}}catch{j=[M]}finally{try{O&&(M=ce.return)&&(yield M.call(ce))}finally{if(j)throw j[0]}}yield ae.ready,x&&(yield ae.close()),q()}catch(K){try{yield ae.abort(K),q(K)}catch(Z){q(Z)}}})}function R(...J){return he(J,r(fe(J)))}function he(J,ve,q){if(J.length===1&&a(J[0])&&(J=J[0]),J.length<2)throw new _("streams");let x=new N,ee=x.signal,z=q?.signal,F=[];w(z,"options.signal");function W(){Z(new E)}V=V||Qe().addAbortListener;let ae;z&&(ae=V(z,W));let ce,O,M=[],j=0;function K(te){Z(te,--j===0)}function Z(te,Ee){var u;if(te&&(!ce||ce.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ce=te),!(!ce&&!Ee)){for(;M.length;)M.shift()(ce);(u=ae)===null||u===void 0||u[e](),x.abort(),Ee&&(ce||F.forEach(y=>y()),o.nextTick(ve,ce,O))}}let re;for(let te=0;te<J.length;te++){let Ee=J[te],u=te<J.length-1,y=te>0,v=u||q?.end!==!1,B=te===J.length-1;if(I(Ee)){let U=function(Q){Q&&Q.name!=="AbortError"&&Q.code!=="ERR_STREAM_PREMATURE_CLOSE"&&K(Q)};var L=U;if(v){let{destroy:Q,cleanup:ge}=ue(Ee,u,y);M.push(Q),T(Ee)&&B&&F.push(ge)}Ee.on("error",U),T(Ee)&&B&&F.push(()=>{Ee.removeListener("error",U)})}if(te===0)if(typeof Ee=="function"){if(re=Ee({signal:ee}),!k(re))throw new g("Iterable, AsyncIterable or Stream","source",re)}else k(Ee)||S(Ee)||P(Ee)?re=Ee:re=l.from(Ee);else if(typeof Ee=="function"){if(P(re)){var X;re=pe((X=re)===null||X===void 0?void 0:X.readable)}else re=pe(re);if(re=Ee(re,{signal:ee}),u){if(!k(re,!0))throw new g("AsyncIterable",`transform[${te-1}]`,re)}else{var be;$||($=ts());let U=new $({objectMode:!0}),Q=(be=re)===null||be===void 0?void 0:be.then;if(typeof Q=="function")j++,Q.call(re,Te=>{O=Te,Te!=null&&U.write(Te),v&&U.end(),o.nextTick(K)},Te=>{U.destroy(Te),o.nextTick(K,Te)});else if(k(re,!0))j++,D(re,U,K,{end:v});else if(Y(re)||P(re)){let Te=re.readable||re;j++,D(Te,U,K,{end:v})}else throw new g("AsyncIterable or Promise","destination",re);re=U;let{destroy:ge,cleanup:Ae}=ue(re,!1,!0);M.push(ge),B&&F.push(Ae)}}else if(I(Ee)){if(S(re)){j+=2;let U=_e(re,Ee,K,{end:v});T(Ee)&&B&&F.push(U)}else if(P(re)||Y(re)){let U=re.readable||re;j++,D(U,Ee,K,{end:v})}else if(k(re))j++,D(re,Ee,K,{end:v});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],re);re=Ee}else if(H(Ee)){if(S(re))j++,ie(pe(re),Ee,K,{end:v});else if(Y(re)||k(re))j++,ie(re,Ee,K,{end:v});else if(P(re))j++,ie(re.readable,Ee,K,{end:v});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],re);re=Ee}else re=l.from(Ee)}return(ee!=null&&ee.aborted||z!=null&&z.aborted)&&o.nextTick(W),re}function _e(J,ve,q,{end:x}){let ee=!1;if(ve.on("close",()=>{ee||q(new m)}),J.pipe(ve,{end:!1}),x){let F=function(){ee=!0,ve.end()};var z=F;le(J)?o.nextTick(F):J.once("end",F)}else q();return i(J,{readable:!0,writable:!1},F=>{let W=J._readableState;F&&F.code==="ERR_STREAM_PREMATURE_CLOSE"&&W&&W.ended&&!W.errored&&!W.errorEmitted?J.once("end",q).once("error",q):q(F)}),i(ve,{readable:!1,writable:!0},q)}c.exports={pipelineImpl:he,pipeline:R}}),rs=de((s,c)=>{"use strict";ne(),se(),oe();var{pipeline:o}=Sn(),a=mt(),{destroyer:h}=Kt(),{isNodeStream:t,isReadable:e,isWritable:i,isWebStream:r,isTransformStream:n,isWritableStream:l,isReadableStream:f}=yt(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:_}}=Ge(),p=Ct();c.exports=function(...m){if(m.length===0)throw new _("streams");if(m.length===1)return a.from(m[0]);let E=[...m];if(typeof m[0]=="function"&&(m[0]=a.from(m[0])),typeof m[m.length-1]=="function"){let N=m.length-1;m[N]=a.from(m[N])}for(let N=0;N<m.length;++N)if(!(!t(m[N])&&!r(m[N]))){if(N<m.length-1&&!(e(m[N])||f(m[N])||n(m[N])))throw new g(`streams[${N}]`,E[N],"must be readable");if(N>0&&!(i(m[N])||l(m[N])||n(m[N])))throw new g(`streams[${N}]`,E[N],"must be writable")}let b,w,k,T,S;function I(N){let $=T;T=null,$?$(N):N?S.destroy(N):!le&&!Y&&S.destroy()}let P=m[0],H=o(m,I),Y=!!(i(P)||l(P)||n(P)),le=!!(e(H)||f(H)||n(H));if(S=new a({writableObjectMode:!!(P!=null&&P.writableObjectMode),readableObjectMode:!!(H!=null&&H.readableObjectMode),writable:Y,readable:le}),Y){if(t(P))S._write=function($,G,V){P.write($,G)?V():b=V},S._final=function($){P.end(),w=$},P.on("drain",function(){if(b){let $=b;b=null,$()}});else if(r(P)){let $=(n(P)?P.writable:P).getWriter();S._write=function(G,V,ue){return Me(this,null,function*(){try{yield $.ready,$.write(G).catch(()=>{}),ue()}catch(fe){ue(fe)}})},S._final=function(G){return Me(this,null,function*(){try{yield $.ready,$.close().catch(()=>{}),w=G}catch(V){G(V)}})}}let N=n(H)?H.readable:H;p(N,()=>{if(w){let $=w;w=null,$()}})}if(le){if(t(H))H.on("readable",function(){if(k){let N=k;k=null,N()}}),H.on("end",function(){S.push(null)}),S._read=function(){for(;;){let N=H.read();if(N===null){k=S._read;return}if(!S.push(N))return}};else if(r(H)){let N=(n(H)?H.readable:H).getReader();S._read=function(){return Me(this,null,function*(){for(;;)try{let{value:$,done:G}=yield N.read();if(!S.push($))return;if(G){S.push(null);return}}catch{return}})}}}return S._destroy=function(N,$){!N&&T!==null&&(N=new d),k=null,b=null,w=null,T===null?$(N):(T=$,t(H)&&h(H,N))},S}}),Xa=de((s,c)=>{"use strict";ne(),se(),oe();var o=globalThis.AbortController||dr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:h,ERR_MISSING_ARGS:t,ERR_OUT_OF_RANGE:e},AbortError:i}=Ge(),{validateAbortSignal:r,validateInteger:n,validateObject:l}=pr(),f=Ue().Symbol("kWeak"),d=Ue().Symbol("kResistStopPropagation"),{finished:g}=Ct(),_=rs(),{addAbortSignalNoValidate:p}=Or(),{isWritable:m,isNodeStream:E}=yt(),{deprecate:b}=Qe(),{ArrayPrototypePush:w,Boolean:k,MathFloor:T,Number:S,NumberIsNaN:I,Promise:P,PromiseReject:H,PromiseResolve:Y,PromisePrototypeThen:le,Symbol:N}=Ue(),$=N("kEmpty"),G=N("kEof");function V(z,F){if(F!=null&&l(F,"options"),F?.signal!=null&&r(F.signal,"options.signal"),E(z)&&!m(z))throw new a("stream",z,"must be writable");let W=_(this,z);return F!=null&&F.signal&&p(F.signal,W),W}function ue(z,F){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);F!=null&&l(F,"options"),F?.signal!=null&&r(F.signal,"options.signal");let W=1;F?.concurrency!=null&&(W=T(F.concurrency));let ae=W-1;return F?.highWaterMark!=null&&(ae=T(F.highWaterMark)),n(W,"options.concurrency",1),n(ae,"options.highWaterMark",0),ae+=W,(function(){return lt(this,null,function*(){let ce=Qe().AbortSignalAny([F?.signal].filter(k)),O=this,M=[],j={signal:ce},K,Z,re=!1,L=0;function X(){re=!0,be()}function be(){L-=1,te()}function te(){Z&&!re&&L<W&&M.length<ae&&(Z(),Z=null)}function Ee(){return Me(this,null,function*(){try{try{for(var u=Ye(O),y,v,B;y=!(v=yield u.next()).done;y=!1){let U=v.value;if(re)return;if(ce.aborted)throw new i;try{if(U=z(U,j),U===$)continue;U=Y(U)}catch(Q){U=H(Q)}L+=1,le(U,be,X),M.push(U),K&&(K(),K=null),!re&&(M.length>=ae||L>=W)&&(yield new P(Q=>{Z=Q}))}}catch{B=[v]}finally{try{y&&(v=u.return)&&(yield v.call(u))}finally{if(B)throw B[0]}}M.push(G)}catch(U){let Q=H(U);le(Q,be,X),M.push(Q)}finally{re=!0,K&&(K(),K=null)}})}Ee();try{for(;;){for(;M.length>0;){let u=yield new Ke(M[0]);if(u===G)return;if(ce.aborted)throw new i;u!==$&&(yield u),M.shift(),te()}yield new Ke(new P(u=>{K=u}))}}finally{re=!0,Z&&(Z(),Z=null)}})}).call(this)}function fe(z=void 0){return z!=null&&l(z,"options"),z?.signal!=null&&r(z.signal,"options.signal"),(function(){return lt(this,null,function*(){let F=0;try{for(var ae=Ye(this),ce,O,M;ce=!(O=yield new Ke(ae.next())).done;ce=!1){let j=O.value;var W;if(z!=null&&(W=z.signal)!==null&&W!==void 0&&W.aborted)throw new i({cause:z.signal.reason});yield[F++,j]}}catch{M=[O]}finally{try{ce&&(O=ae.return)&&(yield new Ke(O.call(ae)))}finally{if(M)throw M[0]}}})}).call(this)}function pe(z,F=void 0){return Me(this,null,function*(){try{for(var W=Ye(R.call(this,z,F)),ae,ce,O;ae=!(ce=yield W.next()).done;ae=!1){let M=ce.value;return!0}}catch{O=[ce]}finally{try{ae&&(ce=W.return)&&(yield ce.call(W))}finally{if(O)throw O[0]}}return!1})}function ye(z,F=void 0){return Me(this,null,function*(){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);return!(yield pe.call(this,(...W)=>Me(this,null,function*(){return!(yield z(...W))}),F))})}function D(z,F){return Me(this,null,function*(){try{for(var W=Ye(R.call(this,z,F)),ae,ce,O;ae=!(ce=yield W.next()).done;ae=!1){let M=ce.value;return M}}catch{O=[ce]}finally{try{ae&&(ce=W.return)&&(yield ce.call(W))}finally{if(O)throw O[0]}}})}function ie(z,F){return Me(this,null,function*(){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);function W(j,K){return Me(this,null,function*(){return yield z(j,K),$})}try{for(var ae=Ye(ue.call(this,W,F)),ce,O,M;ce=!(O=yield ae.next()).done;ce=!1){let j=O.value;;}}catch{M=[O]}finally{try{ce&&(O=ae.return)&&(yield O.call(ae))}finally{if(M)throw M[0]}}})}function R(z,F){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);function W(ae,ce){return Me(this,null,function*(){return(yield z(ae,ce))?ae:$})}return ue.call(this,W,F)}var he=class extends t{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function _e(ae,ce,O){return Me(this,arguments,function*(z,F,W){var M;if(typeof z!="function")throw new h("reducer",["Function","AsyncFunction"],z);W!=null&&l(W,"options"),W?.signal!=null&&r(W.signal,"options.signal");let j=arguments.length>1;if(W!=null&&(M=W.signal)!==null&&M!==void 0&&M.aborted){let u=new i(void 0,{cause:W.signal.reason});throw this.once("error",()=>{}),yield g(this.destroy(u)),u}let K=new o,Z=K.signal;if(W!=null&&W.signal){let u={once:!0,[f]:this,[d]:!0};W.signal.addEventListener("abort",()=>K.abort(),u)}let re=!1;try{try{for(var X=Ye(this),be,te,Ee;be=!(te=yield X.next()).done;be=!1){let u=te.value;var L;if(re=!0,W!=null&&(L=W.signal)!==null&&L!==void 0&&L.aborted)throw new i;j?F=yield z(F,u,{signal:Z}):(F=u,j=!0)}}catch{Ee=[te]}finally{try{be&&(te=X.return)&&(yield te.call(X))}finally{if(Ee)throw Ee[0]}}if(!re&&!j)throw new he}finally{K.abort()}return F})}function J(z){return Me(this,null,function*(){z!=null&&l(z,"options"),z?.signal!=null&&r(z.signal,"options.signal");let F=[];try{for(var ae=Ye(this),ce,O,M;ce=!(O=yield ae.next()).done;ce=!1){let j=O.value;var W;if(z!=null&&(W=z.signal)!==null&&W!==void 0&&W.aborted)throw new i(void 0,{cause:z.signal.reason});w(F,j)}}catch{M=[O]}finally{try{ce&&(O=ae.return)&&(yield O.call(ae))}finally{if(M)throw M[0]}}return F})}function ve(z,F){let W=ue.call(this,z,F);return(function(){return lt(this,null,function*(){try{for(var ae=Ye(W),ce,O,M;ce=!(O=yield new Ke(ae.next())).done;ce=!1){let j=O.value;yield*vt(j)}}catch{M=[O]}finally{try{ce&&(O=ae.return)&&(yield new Ke(O.call(ae)))}finally{if(M)throw M[0]}}})}).call(this)}function q(z){if(z=S(z),I(z))return 0;if(z<0)throw new e("number",">= 0",z);return z}function x(z,F=void 0){return F!=null&&l(F,"options"),F?.signal!=null&&r(F.signal,"options.signal"),z=q(z),(function(){return lt(this,null,function*(){var W;if(F!=null&&(W=F.signal)!==null&&W!==void 0&&W.aborted)throw new i;try{for(var ce=Ye(this),O,M,j;O=!(M=yield new Ke(ce.next())).done;O=!1){let K=M.value;var ae;if(F!=null&&(ae=F.signal)!==null&&ae!==void 0&&ae.aborted)throw new i;z--<=0&&(yield K)}}catch{j=[M]}finally{try{O&&(M=ce.return)&&(yield new Ke(M.call(ce)))}finally{if(j)throw j[0]}}})}).call(this)}function ee(z,F=void 0){return F!=null&&l(F,"options"),F?.signal!=null&&r(F.signal,"options.signal"),z=q(z),(function(){return lt(this,null,function*(){var W;if(F!=null&&(W=F.signal)!==null&&W!==void 0&&W.aborted)throw new i;try{for(var ce=Ye(this),O,M,j;O=!(M=yield new Ke(ce.next())).done;O=!1){let K=M.value;var ae;if(F!=null&&(ae=F.signal)!==null&&ae!==void 0&&ae.aborted)throw new i;if(z-- >0&&(yield K),z<=0)return}}catch{j=[M]}finally{try{O&&(M=ce.return)&&(yield new Ke(M.call(ce)))}finally{if(j)throw j[0]}}})}).call(this)}c.exports.streamReturningOperators={asIndexedPairs:b(fe,"readable.asIndexedPairs will be removed in a future version."),drop:x,filter:R,flatMap:ve,map:ue,take:ee,compose:V},c.exports.promiseReturningOperators={every:ye,forEach:ie,reduce:_e,toArray:J,some:pe,find:D}}),is=de((s,c)=>{"use strict";ne(),se(),oe();var{ArrayPrototypePop:o,Promise:a}=Ue(),{isIterable:h,isNodeStream:t,isWebStream:e}=yt(),{pipelineImpl:i}=Sn(),{finished:r}=Ct();ns();function n(...l){return new a((f,d)=>{let g,_,p=l[l.length-1];if(p&&typeof p=="object"&&!t(p)&&!h(p)&&!e(p)){let m=o(l);g=m.signal,_=m.end}i(l,(m,E)=>{m?d(m):f(E)},{signal:g,end:_})})}c.exports={finished:r,pipeline:n}}),ns=de((s,c)=>{"use strict";ne(),se(),oe();var{Buffer:o}=(qe(),Re(We)),{ObjectDefineProperty:a,ObjectKeys:h,ReflectApply:t}=Ue(),{promisify:{custom:e}}=Qe(),{streamReturningOperators:i,promiseReturningOperators:r}=Xa(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:n}}=Ge(),l=rs(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:d}=xr(),{pipeline:g}=Sn(),{destroyer:_}=Kt(),p=Ct(),m=is(),E=yt(),b=c.exports=vn().Stream;b.isDestroyed=E.isDestroyed,b.isDisturbed=E.isDisturbed,b.isErrored=E.isErrored,b.isReadable=E.isReadable,b.isWritable=E.isWritable,b.Readable=Mr();for(let k of h(i)){let T=function(...I){if(new.target)throw n();return b.Readable.from(t(S,this,I))},S=i[k];a(T,"name",{__proto__:null,value:S.name}),a(T,"length",{__proto__:null,value:S.length}),a(b.Readable.prototype,k,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(let k of h(r)){let T=function(...I){if(new.target)throw n();return t(S,this,I)},S=r[k];a(T,"name",{__proto__:null,value:S.name}),a(T,"length",{__proto__:null,value:S.length}),a(b.Readable.prototype,k,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}b.Writable=En(),b.Duplex=mt(),b.Transform=es(),b.PassThrough=ts(),b.pipeline=g;var{addAbortSignal:w}=Or();b.addAbortSignal=w,b.finished=p,b.destroy=_,b.compose=l,b.setDefaultHighWaterMark=f,b.getDefaultHighWaterMark=d,a(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),a(g,e,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),a(p,e,{__proto__:null,enumerable:!0,get(){return m.finished}}),b.Stream=b,b._isUint8Array=function(k){return k instanceof Uint8Array},b._uint8ArrayToBuffer=function(k){return o.from(k.buffer,k.byteOffset,k.byteLength)}}),$t=de((s,c)=>{"use strict";ne(),se(),oe();var o=ns(),a=is(),h=o.Readable.destroy;c.exports=o.Readable,c.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,c.exports._isUint8Array=o._isUint8Array,c.exports.isDisturbed=o.isDisturbed,c.exports.isErrored=o.isErrored,c.exports.isReadable=o.isReadable,c.exports.Readable=o.Readable,c.exports.Writable=o.Writable,c.exports.Duplex=o.Duplex,c.exports.Transform=o.Transform,c.exports.PassThrough=o.PassThrough,c.exports.addAbortSignal=o.addAbortSignal,c.exports.finished=o.finished,c.exports.destroy=o.destroy,c.exports.destroy=h,c.exports.pipeline=o.pipeline,c.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return a}}),c.exports.Stream=o.Stream,c.exports.default=c.exports}),Za=de((s,c)=>{ne(),se(),oe(),typeof Object.create=="function"?c.exports=function(o,a){a&&(o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(o,a){if(a){o.super_=a;var h=function(){};h.prototype=a.prototype,o.prototype=new h,o.prototype.constructor=o}}}),el=de((s,c)=>{"use strict";ne(),se(),oe();var{Buffer:o}=(qe(),Re(We)),a=Symbol.for("BufferList");function h(t){if(!(this instanceof h))return new h(t);h._init.call(this,t)}h._init=function(t){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},h.prototype._new=function(t){return new h(t)},h.prototype._offset=function(t){if(t===0)return[0,0];let e=0;for(let i=0;i<this._bufs.length;i++){let r=e+this._bufs[i].length;if(t<r||i===this._bufs.length-1)return[i,t-e];e=r}},h.prototype._reverseOffset=function(t){let e=t[0],i=t[1];for(let r=0;r<e;r++)i+=this._bufs[r].length;return i},h.prototype.get=function(t){if(t>this.length||t<0)return;let e=this._offset(t);return this._bufs[e[0]][e[1]]},h.prototype.slice=function(t,e){return typeof t=="number"&&t<0&&(t+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,t,e)},h.prototype.copy=function(t,e,i,r){if((typeof i!="number"||i<0)&&(i=0),(typeof r!="number"||r>this.length)&&(r=this.length),i>=this.length||r<=0)return t||o.alloc(0);let n=!!t,l=this._offset(i),f=r-i,d=f,g=n&&e||0,_=l[1];if(i===0&&r===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let p=0;p<this._bufs.length;p++)this._bufs[p].copy(t,g),g+=this._bufs[p].length;return t}if(d<=this._bufs[l[0]].length-_)return n?this._bufs[l[0]].copy(t,e,_,_+d):this._bufs[l[0]].slice(_,_+d);n||(t=o.allocUnsafe(f));for(let p=l[0];p<this._bufs.length;p++){let m=this._bufs[p].length-_;if(d>m)this._bufs[p].copy(t,g,_),g+=m;else{this._bufs[p].copy(t,g,_,_+d),g+=m;break}d-=m,_&&(_=0)}return t.length>g?t.slice(0,g):t},h.prototype.shallowSlice=function(t,e){if(t=t||0,e=typeof e!="number"?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();let i=this._offset(t),r=this._offset(e),n=this._bufs.slice(i[0],r[0]+1);return r[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,r[1]),i[1]!==0&&(n[0]=n[0].slice(i[1])),this._new(n)},h.prototype.toString=function(t,e,i){return this.slice(e,i).toString(t)},h.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;)if(t>=this._bufs[0].length)t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}return this},h.prototype.duplicate=function(){let t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},h.prototype.append=function(t){if(t==null)return this;if(t.buffer)this._appendBuffer(o.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else typeof t=="number"&&(t=t.toString()),this._appendBuffer(o.from(t));return this},h.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},h.prototype.indexOf=function(t,e,i){if(i===void 0&&typeof e=="string"&&(i=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=o.from([t]):typeof t=="string"?t=o.from(t,i):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=o.from(t.buffer,t.byteOffset,t.byteLength):o.isBuffer(t)||(t=o.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let r=this._offset(e),n=r[0],l=r[1];for(;n<this._bufs.length;n++){let f=this._bufs[n];for(;l<f.length;)if(f.length-l>=t.length){let d=f.indexOf(t,l);if(d!==-1)return this._reverseOffset([n,d]);l=f.length-t.length+1}else{let d=this._reverseOffset([n,l]);if(this._match(d,t))return d;l++}l=0}return-1},h.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let i=0;i<e.length;i++)if(this.get(t+i)!==e[i])return!1;return!0},function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(i){t[i]===null?h.prototype[i]=function(r,n){return this.slice(r,r+n)[i](0,n)}:h.prototype[i]=function(r=0){return this.slice(r,r+t[i])[i](0)}})(e)}(),h.prototype._isBufferList=function(t){return t instanceof h||h.isBufferList(t)},h.isBufferList=function(t){return t!=null&&t[a]},c.exports=h}),tl=de((s,c)=>{"use strict";ne(),se(),oe();var o=$t().Duplex,a=Za(),h=el();function t(e){if(!(this instanceof t))return new t(e);if(typeof e=="function"){this._callback=e;let i=(function(r){this._callback&&(this._callback(r),this._callback=null)}).bind(this);this.on("pipe",function(r){r.on("error",i)}),this.on("unpipe",function(r){r.removeListener("error",i)}),e=null}h._init.call(this,e),o.call(this)}a(t,o),Object.assign(t.prototype,h.prototype),t.prototype._new=function(e){return new t(e)},t.prototype._write=function(e,i,r){this._appendBuffer(e),typeof r=="function"&&r()},t.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},t.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},t.prototype._destroy=function(e,i){this._bufs.length=0,this.length=0,i(e)},t.prototype._isBufferList=function(e){return e instanceof t||e instanceof h||t.isBufferList(e)},t.isBufferList=h.isBufferList,c.exports=t,c.exports.BufferListStream=t,c.exports.BufferList=h}),rl=de((s,c)=>{ne(),se(),oe();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};c.exports=o}),os=de((s,c)=>{ne(),se(),oe();var o=c.exports,{Buffer:a}=(qe(),Re(We));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let t in o.requiredHeaderFlags){let e=o.requiredHeaderFlags[t];o.requiredHeaderFlagsErrors[t]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+o.types[t]+" packet"}o.codes={};for(let t in o.types){let e=o.types[t];o.codes[e]=t}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=a.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=a.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=a.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let t in o.properties){let e=o.properties[t];o.propertiesCodes[e]=t}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function h(t){return[0,1,2].map(e=>[0,1].map(i=>[0,1].map(r=>{let n=a.alloc(1);return n.writeUInt8(o.codes[t]<<o.CMD_SHIFT|(i?o.DUP_MASK:0)|e<<o.QOS_SHIFT|r,0,!0),n})))}o.PUBLISH_HEADER=h("publish"),o.SUBSCRIBE_HEADER=h("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=h("unsubscribe"),o.ACKS={unsuback:h("unsuback"),puback:h("puback"),pubcomp:h("pubcomp"),pubrel:h("pubrel"),pubrec:h("pubrec")},o.SUBACK_HEADER=a.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=a.from([3]),o.VERSION4=a.from([4]),o.VERSION5=a.from([5]),o.VERSION131=a.from([131]),o.VERSION132=a.from([132]),o.QOS=[0,1,2].map(t=>a.from([t])),o.EMPTY={pingreq:a.from([o.codes.pingreq<<4,0]),pingresp:a.from([o.codes.pingresp<<4,0]),disconnect:a.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),il=de((s,c)=>{ne(),se(),oe();var o=1e3,a=o*60,h=a*60,t=h*24,e=t*7,i=t*365.25;c.exports=function(d,g){g=g||{};var _=typeof d;if(_==="string"&&d.length>0)return r(d);if(_==="number"&&isFinite(d))return g.long?l(d):n(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function r(d){if(d=String(d),!(d.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(g){var _=parseFloat(g[1]),p=(g[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return _*i;case"weeks":case"week":case"w":return _*e;case"days":case"day":case"d":return _*t;case"hours":case"hour":case"hrs":case"hr":case"h":return _*h;case"minutes":case"minute":case"mins":case"min":case"m":return _*a;case"seconds":case"second":case"secs":case"sec":case"s":return _*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _;default:return}}}}function n(d){var g=Math.abs(d);return g>=t?Math.round(d/t)+"d":g>=h?Math.round(d/h)+"h":g>=a?Math.round(d/a)+"m":g>=o?Math.round(d/o)+"s":d+"ms"}function l(d){var g=Math.abs(d);return g>=t?f(d,g,t,"day"):g>=h?f(d,g,h,"hour"):g>=a?f(d,g,a,"minute"):g>=o?f(d,g,o,"second"):d+" ms"}function f(d,g,_,p){var m=g>=_*1.5;return Math.round(d/_)+" "+p+(m?"s":"")}}),nl=de((s,c)=>{ne(),se(),oe();function o(a){t.debug=t,t.default=t,t.coerce=f,t.disable=n,t.enable=i,t.enabled=l,t.humanize=il(),t.destroy=d,Object.keys(a).forEach(g=>{t[g]=a[g]}),t.names=[],t.skips=[],t.formatters={};function h(g){let _=0;for(let p=0;p<g.length;p++)_=(_<<5)-_+g.charCodeAt(p),_|=0;return t.colors[Math.abs(_)%t.colors.length]}t.selectColor=h;function t(g){let _,p=null,m,E;function b(...w){if(!b.enabled)return;let k=b,T=Number(new Date),S=T-(_||T);k.diff=S,k.prev=_,k.curr=T,_=T,w[0]=t.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let I=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(P,H)=>{if(P==="%%")return"%";I++;let Y=t.formatters[H];if(typeof Y=="function"){let le=w[I];P=Y.call(k,le),w.splice(I,1),I--}return P}),t.formatArgs.call(k,w),(k.log||t.log).apply(k,w)}return b.namespace=g,b.useColors=t.useColors(),b.color=t.selectColor(g),b.extend=e,b.destroy=t.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==t.namespaces&&(m=t.namespaces,E=t.enabled(g)),E),set:w=>{p=w}}),typeof t.init=="function"&&t.init(b),b}function e(g,_){let p=t(this.namespace+(typeof _>"u"?":":_)+g);return p.log=this.log,p}function i(g){t.save(g),t.namespaces=g,t.names=[],t.skips=[];let _=(typeof g=="string"?g:"").trim().replace(" ",",").split(",").filter(Boolean);for(let p of _)p[0]==="-"?t.skips.push(p.slice(1)):t.names.push(p)}function r(g,_){let p=0,m=0,E=-1,b=0;for(;p<g.length;)if(m<_.length&&(_[m]===g[p]||_[m]==="*"))_[m]==="*"?(E=m,b=p,m++):(p++,m++);else if(E!==-1)m=E+1,b++,p=b;else return!1;for(;m<_.length&&_[m]==="*";)m++;return m===_.length}function n(){let g=[...t.names,...t.skips.map(_=>"-"+_)].join(",");return t.enable(""),g}function l(g){for(let _ of t.skips)if(r(g,_))return!1;for(let _ of t.names)if(r(g,_))return!0;return!1}function f(g){return g instanceof Error?g.stack||g.message:g}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}c.exports=o}),bt=de((s,c)=>{ne(),se(),oe(),s.formatArgs=a,s.save=h,s.load=t,s.useColors=o,s.storage=e(),s.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;let n="color: "+this.color;r.splice(1,0,n,"color: inherit");let l=0,f=0;r[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(f=l))}),r.splice(f,0,n)}s.log=console.debug||console.log||(()=>{});function h(r){try{r?s.storage.setItem("debug",r):s.storage.removeItem("debug")}catch{}}function t(){let r;try{r=s.storage.getItem("debug")}catch{}return!r&&typeof xe<"u"&&"env"in xe&&(r=xe.env.DEBUG),r}function e(){try{return localStorage}catch{}}c.exports=nl()(s);var{formatters:i}=c.exports;i.j=function(r){try{return JSON.stringify(r)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}),ol=de((s,c)=>{ne(),se(),oe();var o=tl(),{EventEmitter:a}=(Wt(),Re(Tt)),h=rl(),t=os(),e=bt()("mqtt-packet:parser"),i=class ln extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(n){return this instanceof ln?(this.settings=n||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new ln().parser(n)}_resetState(){e("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new h,this.error=null,this._list=o(),this._stateCounter=0}parse(n){for(this.error&&this._resetState(),this._list.append(n),e("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,e("parse: state complete. _stateCounter is now: %d",this._stateCounter),e("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return e("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let n=this._list.readUInt8(0),l=n>>t.CMD_SHIFT;this.packet.cmd=t.types[l];let f=n&15,d=t.requiredHeaderFlags[l];return d!=null&&f!==d?this._emitError(new Error(t.requiredHeaderFlagsErrors[l])):(this.packet.retain=(n&t.RETAIN_MASK)!==0,this.packet.qos=n>>t.QOS_SHIFT&t.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(n&t.DUP_MASK)!==0,e("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let n=this._parseVarByteNum(!0);return n&&(this.packet.length=n.value,this._list.consume(n.bytes)),e("_parseLength %d",n.value),!!n}_parsePayload(){e("_parsePayload: payload %O",this._list);let n=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}n=!0}return e("_parsePayload complete result: %s",n),n}_parseConnect(){e("_parseConnect");let n,l,f,d,g={},_=this.packet,p=this._parseString();if(p===null)return this._emitError(new Error("Cannot parse protocolId"));if(p!=="MQTT"&&p!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(_.protocolId=p,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(_.protocolVersion=this._list.readUInt8(this._pos),_.protocolVersion>=128&&(_.bridgeMode=!0,_.protocolVersion=_.protocolVersion-128),_.protocolVersion!==3&&_.protocolVersion!==4&&_.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));g.username=this._list.readUInt8(this._pos)&t.USERNAME_MASK,g.password=this._list.readUInt8(this._pos)&t.PASSWORD_MASK,g.will=this._list.readUInt8(this._pos)&t.WILL_FLAG_MASK;let m=!!(this._list.readUInt8(this._pos)&t.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&t.WILL_QOS_MASK)>>t.WILL_QOS_SHIFT;if(g.will)_.will={},_.will.retain=m,_.will.qos=E;else{if(m)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(_.clean=(this._list.readUInt8(this._pos)&t.CLEAN_SESSION_MASK)!==0,this._pos++,_.keepalive=this._parseNum(),_.keepalive===-1)return this._emitError(new Error("Packet too short"));if(_.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(_.properties=w)}let b=this._parseString();if(b===null)return this._emitError(new Error("Packet too short"));if(_.clientId=b,e("_parseConnect: packet.clientId: %s",_.clientId),g.will){if(_.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(_.will.properties=w)}if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse will topic"));if(_.will.topic=n,e("_parseConnect: packet.will.topic: %s",_.will.topic),l=this._parseBuffer(),l===null)return this._emitError(new Error("Cannot parse will payload"));_.will.payload=l,e("_parseConnect: packet.will.paylaod: %s",_.will.payload)}if(g.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));_.username=d,e("_parseConnect: packet.username: %s",_.username)}if(g.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));_.password=f}return this.settings=_,e("_parseConnect: complete"),_}_parseConnack(){e("_parseConnack");let n=this.packet;if(this._list.length<1)return null;let l=this._list.readUInt8(this._pos++);if(l>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(n.sessionPresent=!!(l&t.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?n.reasonCode=this._list.readUInt8(this._pos++):n.reasonCode=0;else{if(this._list.length<2)return null;n.returnCode=this._list.readUInt8(this._pos++)}if(n.returnCode===-1||n.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(n.properties=f)}e("_parseConnack: complete")}_parsePublish(){e("_parsePublish");let n=this.packet;if(n.topic=this._parseString(),n.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(n.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}n.payload=this._list.slice(this._pos,n.length),e("_parsePublish: payload from buffer list: %o",n.payload)}}_parseSubscribe(){e("_parseSubscribe");let n=this.packet,l,f,d,g,_,p,m;if(n.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(n.properties=E)}if(n.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<n.length;){if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=n.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(f=this._parseByte(),this.settings.protocolVersion===5){if(f&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(f&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=f&t.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(p=(f>>t.SUBSCRIBE_OPTIONS_NL_SHIFT&t.SUBSCRIBE_OPTIONS_NL_MASK)!==0,_=(f>>t.SUBSCRIBE_OPTIONS_RAP_SHIFT&t.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,g=f>>t.SUBSCRIBE_OPTIONS_RH_SHIFT&t.SUBSCRIBE_OPTIONS_RH_MASK,g>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));m={topic:l,qos:d},this.settings.protocolVersion===5?(m.nl=p,m.rap=_,m.rh=g):this.settings.bridgeMode&&(m.rh=0,m.rap=!0,m.nl=!0),e("_parseSubscribe: push subscription `%s` to subscription",m),n.subscriptions.push(m)}}}_parseSuback(){e("_parseSuback");let n=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}if(n.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!t.MQTT5_SUBACK_CODES[l])return this._emitError(new Error("Invalid suback code"))}else if(l>2&&l!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(l)}}}_parseUnsubscribe(){e("_parseUnsubscribe");let n=this.packet;if(n.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}if(n.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<n.length;){let l=this._parseString();if(l===null)return this._emitError(new Error("Cannot parse topic"));e("_parseUnsubscribe: push topic `%s` to unsubscriptions",l),n.unsubscriptions.push(l)}}}_parseUnsuback(){e("_parseUnsuback");let n=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&n.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(n.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let l=this._parseProperties();for(Object.getOwnPropertyNames(l).length&&(n.properties=l),n.granted=[];this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(!t.MQTT5_UNSUBACK_CODES[f])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(f)}}}_parseConfirmation(){e("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let n=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(n.length>2){switch(n.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!t.MQTT5_PUBACK_PUBREC_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!t.MQTT5_PUBREL_PUBCOMP_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}e("_parseConfirmation: packet.reasonCode `%d`",n.reasonCode)}else n.reasonCode=0;if(n.length>3){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}}return!0}_parseDisconnect(){let n=this.packet;if(e("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(n.reasonCode=this._parseByte(),t.MQTT5_DISCONNECT_CODES[n.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):n.reasonCode=0;let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}return e("_parseDisconnect result: true"),!0}_parseAuth(){e("_parseAuth");let n=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(n.reasonCode=this._parseByte(),!t.MQTT5_AUTH_CODES[n.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let l=this._parseProperties();return Object.getOwnPropertyNames(l).length&&(n.properties=l),e("_parseAuth: result: true"),!0}_parseMessageId(){let n=this.packet;return n.messageId=this._parseNum(),n.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(e("_parseMessageId: packet.messageId %d",n.messageId),!0)}_parseString(n){let l=this._parseNum(),f=l+this._pos;if(l===-1||f>this._list.length||f>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,f);return this._pos+=l,e("_parseString: result: %s",d),d}_parseStringPair(){return e("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let n=this._parseNum(),l=n+this._pos;if(n===-1||l>this._list.length||l>this.packet.length)return null;let f=this._list.slice(this._pos,l);return this._pos+=n,e("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;let n=this._list.readUInt16BE(this._pos);return this._pos+=2,e("_parseNum: result: %s",n),n}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let n=this._list.readUInt32BE(this._pos);return this._pos+=4,e("_parse4ByteNum: result: %s",n),n}_parseVarByteNum(n){e("_parseVarByteNum");let l=4,f=0,d=1,g=0,_=!1,p,m=this._pos?this._pos:0;for(;f<l&&m+f<this._list.length;){if(p=this._list.readUInt8(m+f++),g+=d*(p&t.VARBYTEINT_MASK),d*=128,(p&t.VARBYTEINT_FIN_MASK)===0){_=!0;break}if(this._list.length<=f)break}return!_&&f===l&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),m&&(this._pos+=f),_?n?_={bytes:f,value:g}:_=g:_=!1,e("_parseVarByteNum: result: %o",_),_}_parseByte(){let n;return this._pos<this._list.length&&(n=this._list.readUInt8(this._pos),this._pos++),e("_parseByte: result: %o",n),n}_parseByType(n){switch(e("_parseByType: type: %s",n),n){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){e("_parseProperties");let n=this._parseVarByteNum(),l=this._pos+n,f={};for(;this._pos<l;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let g=t.propertiesCodes[d];if(!g)return this._emitError(new Error("Unknown property")),!1;if(g==="userProperties"){f[g]||(f[g]=Object.create(null));let _=this._parseByType(t.propertiesTypes[g]);if(f[g][_.name])if(Array.isArray(f[g][_.name]))f[g][_.name].push(_.value);else{let p=f[g][_.name];f[g][_.name]=[p],f[g][_.name].push(_.value)}else f[g][_.name]=_.value;continue}f[g]?Array.isArray(f[g])?f[g].push(this._parseByType(t.propertiesTypes[g])):(f[g]=[f[g]],f[g].push(this._parseByType(t.propertiesTypes[g]))):f[g]=this._parseByType(t.propertiesTypes[g])}return f}_newPacket(){return e("_newPacket"),this.packet&&(this._list.consume(this.packet.length),e("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),e("_newPacket: new packet"),this.packet=new h,this._pos=0,!0}_emitError(n){e("_emitError",n),this.error=n,this.emit("error",n)}};c.exports=i}),sl=de((s,c)=>{ne(),se(),oe();var{Buffer:o}=(qe(),Re(We)),a=65536,h={},t=o.isBuffer(o.from([1,2]).subarray(0,1));function e(l){let f=o.allocUnsafe(2);return f.writeUInt8(l>>8,0),f.writeUInt8(l&255,1),f}function i(){for(let l=0;l<a;l++)h[l]=e(l)}function r(l){let f=0,d=0,g=o.allocUnsafe(4);do f=l%128|0,l=l/128|0,l>0&&(f=f|128),g.writeUInt8(f,d++);while(l>0&&d<4);return l>0&&(d=0),t?g.subarray(0,d):g.slice(0,d)}function n(l){let f=o.allocUnsafe(4);return f.writeUInt32BE(l,0),f}c.exports={cache:h,generateCache:i,generateNumber:e,genBufVariableByteInt:r,generate4ByteBuffer:n}}),al=de((s,c)=>{"use strict";ne(),se(),oe(),typeof xe>"u"||!xe.version||xe.version.indexOf("v0.")===0||xe.version.indexOf("v1.")===0&&xe.version.indexOf("v1.8.")!==0?c.exports={nextTick:o}:c.exports=xe;function o(a,h,t,e){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,r,n;switch(i){case 0:case 1:return xe.nextTick(a);case 2:return xe.nextTick(function(){a.call(null,h)});case 3:return xe.nextTick(function(){a.call(null,h,t)});case 4:return xe.nextTick(function(){a.call(null,h,t,e)});default:for(r=new Array(i-1),n=0;n<r.length;)r[n++]=arguments[n];return xe.nextTick(function(){a.apply(null,r)})}}}),ss=de((s,c)=>{ne(),se(),oe();var o=os(),{Buffer:a}=(qe(),Re(We)),h=a.allocUnsafe(0),t=a.from([0]),e=sl(),i=al().nextTick,r=bt()("mqtt-packet:writeToStream"),n=e.cache,l=e.generateNumber,f=e.generateCache,d=e.genBufVariableByteInt,g=e.generate4ByteBuffer,_=fe,p=!0;function m(q,x,ee){switch(r("generate called"),x.cork&&(x.cork(),i(E,x)),p&&(p=!1,f()),r("generate: packet.cmd: %s",q.cmd),q.cmd){case"connect":return b(q,x,ee);case"connack":return w(q,x,ee);case"publish":return k(q,x,ee);case"puback":case"pubrec":case"pubrel":case"pubcomp":return T(q,x,ee);case"subscribe":return S(q,x,ee);case"suback":return I(q,x,ee);case"unsubscribe":return P(q,x,ee);case"unsuback":return H(q,x,ee);case"pingreq":case"pingresp":return Y(q,x,ee);case"disconnect":return le(q,x,ee);case"auth":return N(q,x,ee);default:return x.destroy(new Error("Unknown command")),!1}}Object.defineProperty(m,"cacheNumbers",{get(){return _===fe},set(q){q?((!n||Object.keys(n).length===0)&&(p=!0),_=fe):(p=!1,_=pe)}});function E(q){q.uncork()}function b(q,x,ee){let z=q||{},F=z.protocolId||"MQTT",W=z.protocolVersion||4,ae=z.will,ce=z.clean,O=z.keepalive||0,M=z.clientId||"",j=z.username,K=z.password,Z=z.properties;ce===void 0&&(ce=!0);let re=0;if(!F||typeof F!="string"&&!a.isBuffer(F))return x.destroy(new Error("Invalid protocolId")),!1;if(re+=F.length+2,W!==3&&W!==4&&W!==5)return x.destroy(new Error("Invalid protocol version")),!1;if(re+=1,(typeof M=="string"||a.isBuffer(M))&&(M||W>=4)&&(M||ce))re+=a.byteLength(M)+2;else{if(W<4)return x.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ce*1===0)return x.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof O!="number"||O<0||O>65535||O%1!==0)return x.destroy(new Error("Invalid keepalive")),!1;re+=2,re+=1;let L,X;if(W===5){if(L=ie(x,Z),!L)return!1;re+=L.length}if(ae){if(typeof ae!="object")return x.destroy(new Error("Invalid will")),!1;if(!ae.topic||typeof ae.topic!="string")return x.destroy(new Error("Invalid will topic")),!1;if(re+=a.byteLength(ae.topic)+2,re+=2,ae.payload)if(ae.payload.length>=0)typeof ae.payload=="string"?re+=a.byteLength(ae.payload):re+=ae.payload.length;else return x.destroy(new Error("Invalid will payload")),!1;if(X={},W===5){if(X=ie(x,ae.properties),!X)return!1;re+=X.length}}let be=!1;if(j!=null)if(ve(j))be=!0,re+=a.byteLength(j)+2;else return x.destroy(new Error("Invalid username")),!1;if(K!=null){if(!be)return x.destroy(new Error("Username is required to use password")),!1;if(ve(K))re+=J(K)+2;else return x.destroy(new Error("Invalid password")),!1}x.write(o.CONNECT_HEADER),G(x,re),D(x,F),z.bridgeMode&&(W+=128),x.write(W===131?o.VERSION131:W===132?o.VERSION132:W===4?o.VERSION4:W===5?o.VERSION5:o.VERSION3);let te=0;return te|=j!=null?o.USERNAME_MASK:0,te|=K!=null?o.PASSWORD_MASK:0,te|=ae&&ae.retain?o.WILL_RETAIN_MASK:0,te|=ae&&ae.qos?ae.qos<<o.WILL_QOS_SHIFT:0,te|=ae?o.WILL_FLAG_MASK:0,te|=ce?o.CLEAN_SESSION_MASK:0,x.write(a.from([te])),_(x,O),W===5&&L.write(),D(x,M),ae&&(W===5&&X.write(),V(x,ae.topic),D(x,ae.payload)),j!=null&&D(x,j),K!=null&&D(x,K),!0}function w(q,x,ee){let z=ee?ee.protocolVersion:4,F=q||{},W=z===5?F.reasonCode:F.returnCode,ae=F.properties,ce=2;if(typeof W!="number")return x.destroy(new Error("Invalid return code")),!1;let O=null;if(z===5){if(O=ie(x,ae),!O)return!1;ce+=O.length}return x.write(o.CONNACK_HEADER),G(x,ce),x.write(F.sessionPresent?o.SESSIONPRESENT_HEADER:t),x.write(a.from([W])),O?.write(),!0}function k(q,x,ee){r("publish: packet: %o",q);let z=ee?ee.protocolVersion:4,F=q||{},W=F.qos||0,ae=F.retain?o.RETAIN_MASK:0,ce=F.topic,O=F.payload||h,M=F.messageId,j=F.properties,K=0;if(typeof ce=="string")K+=a.byteLength(ce)+2;else if(a.isBuffer(ce))K+=ce.length+2;else return x.destroy(new Error("Invalid topic")),!1;if(a.isBuffer(O)?K+=O.length:K+=a.byteLength(O),W&&typeof M!="number")return x.destroy(new Error("Invalid messageId")),!1;W&&(K+=2);let Z=null;if(z===5){if(Z=ie(x,j),!Z)return!1;K+=Z.length}return x.write(o.PUBLISH_HEADER[W][F.dup?1:0][ae?1:0]),G(x,K),_(x,J(ce)),x.write(ce),W>0&&_(x,M),Z?.write(),r("publish: payload: %o",O),x.write(O)}function T(q,x,ee){let z=ee?ee.protocolVersion:4,F=q||{},W=F.cmd||"puback",ae=F.messageId,ce=F.dup&&W==="pubrel"?o.DUP_MASK:0,O=0,M=F.reasonCode,j=F.properties,K=z===5?3:2;if(W==="pubrel"&&(O=1),typeof ae!="number")return x.destroy(new Error("Invalid messageId")),!1;let Z=null;if(z===5&&typeof j=="object"){if(Z=R(x,j,ee,K),!Z)return!1;K+=Z.length}return x.write(o.ACKS[W][O][ce][0]),K===3&&(K+=M!==0?1:-1),G(x,K),_(x,ae),z===5&&K!==2&&x.write(a.from([M])),Z!==null?Z.write():K===4&&x.write(a.from([0])),!0}function S(q,x,ee){r("subscribe: packet: ");let z=ee?ee.protocolVersion:4,F=q||{},W=F.dup?o.DUP_MASK:0,ae=F.messageId,ce=F.subscriptions,O=F.properties,M=0;if(typeof ae!="number")return x.destroy(new Error("Invalid messageId")),!1;M+=2;let j=null;if(z===5){if(j=ie(x,O),!j)return!1;M+=j.length}if(typeof ce=="object"&&ce.length)for(let Z=0;Z<ce.length;Z+=1){let re=ce[Z].topic,L=ce[Z].qos;if(typeof re!="string")return x.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof L!="number")return x.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(z===5){if(typeof(ce[Z].nl||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ce[Z].rap||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let X=ce[Z].rh||0;if(typeof X!="number"||X>2)return x.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}M+=a.byteLength(re)+2+1}else return x.destroy(new Error("Invalid subscriptions")),!1;r("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),x.write(o.SUBSCRIBE_HEADER[1][W?1:0][0]),G(x,M),_(x,ae),j!==null&&j.write();let K=!0;for(let Z of ce){let re=Z.topic,L=Z.qos,X=+Z.nl,be=+Z.rap,te=Z.rh,Ee;V(x,re),Ee=o.SUBSCRIBE_OPTIONS_QOS[L],z===5&&(Ee|=X?o.SUBSCRIBE_OPTIONS_NL:0,Ee|=be?o.SUBSCRIBE_OPTIONS_RAP:0,Ee|=te?o.SUBSCRIBE_OPTIONS_RH[te]:0),K=x.write(a.from([Ee]))}return K}function I(q,x,ee){let z=ee?ee.protocolVersion:4,F=q||{},W=F.messageId,ae=F.granted,ce=F.properties,O=0;if(typeof W!="number")return x.destroy(new Error("Invalid messageId")),!1;if(O+=2,typeof ae=="object"&&ae.length)for(let j=0;j<ae.length;j+=1){if(typeof ae[j]!="number")return x.destroy(new Error("Invalid qos vector")),!1;O+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let M=null;if(z===5){if(M=R(x,ce,ee,O),!M)return!1;O+=M.length}return x.write(o.SUBACK_HEADER),G(x,O),_(x,W),M!==null&&M.write(),x.write(a.from(ae))}function P(q,x,ee){let z=ee?ee.protocolVersion:4,F=q||{},W=F.messageId,ae=F.dup?o.DUP_MASK:0,ce=F.unsubscriptions,O=F.properties,M=0;if(typeof W!="number")return x.destroy(new Error("Invalid messageId")),!1;if(M+=2,typeof ce=="object"&&ce.length)for(let Z=0;Z<ce.length;Z+=1){if(typeof ce[Z]!="string")return x.destroy(new Error("Invalid unsubscriptions")),!1;M+=a.byteLength(ce[Z])+2}else return x.destroy(new Error("Invalid unsubscriptions")),!1;let j=null;if(z===5){if(j=ie(x,O),!j)return!1;M+=j.length}x.write(o.UNSUBSCRIBE_HEADER[1][ae?1:0][0]),G(x,M),_(x,W),j!==null&&j.write();let K=!0;for(let Z=0;Z<ce.length;Z++)K=V(x,ce[Z]);return K}function H(q,x,ee){let z=ee?ee.protocolVersion:4,F=q||{},W=F.messageId,ae=F.dup?o.DUP_MASK:0,ce=F.granted,O=F.properties,M=F.cmd,j=0,K=2;if(typeof W!="number")return x.destroy(new Error("Invalid messageId")),!1;if(z===5)if(typeof ce=="object"&&ce.length)for(let re=0;re<ce.length;re+=1){if(typeof ce[re]!="number")return x.destroy(new Error("Invalid qos vector")),!1;K+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let Z=null;if(z===5){if(Z=R(x,O,ee,K),!Z)return!1;K+=Z.length}return x.write(o.ACKS[M][j][ae][0]),G(x,K),_(x,W),Z!==null&&Z.write(),z===5&&x.write(a.from(ce)),!0}function Y(q,x,ee){return x.write(o.EMPTY[q.cmd])}function le(q,x,ee){let z=ee?ee.protocolVersion:4,F=q||{},W=F.reasonCode,ae=F.properties,ce=z===5?1:0,O=null;if(z===5){if(O=R(x,ae,ee,ce),!O)return!1;ce+=O.length}return x.write(a.from([o.codes.disconnect<<4])),G(x,ce),z===5&&x.write(a.from([W])),O!==null&&O.write(),!0}function N(q,x,ee){let z=ee?ee.protocolVersion:4,F=q||{},W=F.reasonCode,ae=F.properties,ce=z===5?1:0;z!==5&&x.destroy(new Error("Invalid mqtt version for auth packet"));let O=R(x,ae,ee,ce);return O?(ce+=O.length,x.write(a.from([o.codes.auth<<4])),G(x,ce),x.write(a.from([W])),O!==null&&O.write(),!0):!1}var $={};function G(q,x){if(x>o.VARBYTEINT_MAX)return q.destroy(new Error(`Invalid variable byte integer: ${x}`)),!1;let ee=$[x];return ee||(ee=d(x),x<16384&&($[x]=ee)),r("writeVarByteInt: writing to stream: %o",ee),q.write(ee)}function V(q,x){let ee=a.byteLength(x);return _(q,ee),r("writeString: %s",x),q.write(x,"utf8")}function ue(q,x,ee){V(q,x),V(q,ee)}function fe(q,x){return r("writeNumberCached: number: %d",x),r("writeNumberCached: %o",n[x]),q.write(n[x])}function pe(q,x){let ee=l(x);return r("writeNumberGenerated: %o",ee),q.write(ee)}function ye(q,x){let ee=g(x);return r("write4ByteNumber: %o",ee),q.write(ee)}function D(q,x){typeof x=="string"?V(q,x):x?(_(q,x.length),q.write(x)):_(q,0)}function ie(q,x){if(typeof x!="object"||x.length!=null)return{length:1,write(){_e(q,{},0)}};let ee=0;function z(F,W){let ae=o.propertiesTypes[F],ce=0;switch(ae){case"byte":{if(typeof W!="boolean")return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=2;break}case"int8":{if(typeof W!="number"||W<0||W>255)return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=2;break}case"binary":{if(W&&W===null)return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=1+a.byteLength(W)+2;break}case"int16":{if(typeof W!="number"||W<0||W>65535)return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=3;break}case"int32":{if(typeof W!="number"||W<0||W>4294967295)return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=5;break}case"var":{if(typeof W!="number"||W<0||W>268435455)return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=1+a.byteLength(d(W));break}case"string":{if(typeof W!="string")return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=3+a.byteLength(W.toString());break}case"pair":{if(typeof W!="object")return q.destroy(new Error(`Invalid ${F}: ${W}`)),!1;ce+=Object.getOwnPropertyNames(W).reduce((O,M)=>{let j=W[M];return Array.isArray(j)?O+=j.reduce((K,Z)=>(K+=3+a.byteLength(M.toString())+2+a.byteLength(Z.toString()),K),0):O+=3+a.byteLength(M.toString())+2+a.byteLength(W[M].toString()),O},0);break}default:return q.destroy(new Error(`Invalid property ${F}: ${W}`)),!1}return ce}if(x)for(let F in x){let W=0,ae=0,ce=x[F];if(ce!==void 0){if(Array.isArray(ce))for(let O=0;O<ce.length;O++){if(ae=z(F,ce[O]),!ae)return!1;W+=ae}else{if(ae=z(F,ce),!ae)return!1;W=ae}if(!W)return!1;ee+=W}}return{length:a.byteLength(d(ee))+ee,write(){_e(q,x,ee)}}}function R(q,x,ee,z){let F=["reasonString","userProperties"],W=ee&&ee.properties&&ee.properties.maximumPacketSize?ee.properties.maximumPacketSize:0,ae=ie(q,x);if(W)for(;z+ae.length>W;){let ce=F.shift();if(ce&&x[ce])delete x[ce],ae=ie(q,x);else return!1}return ae}function he(q,x,ee){switch(o.propertiesTypes[x]){case"byte":{q.write(a.from([o.properties[x]])),q.write(a.from([+ee]));break}case"int8":{q.write(a.from([o.properties[x]])),q.write(a.from([ee]));break}case"binary":{q.write(a.from([o.properties[x]])),D(q,ee);break}case"int16":{q.write(a.from([o.properties[x]])),_(q,ee);break}case"int32":{q.write(a.from([o.properties[x]])),ye(q,ee);break}case"var":{q.write(a.from([o.properties[x]])),G(q,ee);break}case"string":{q.write(a.from([o.properties[x]])),V(q,ee);break}case"pair":{Object.getOwnPropertyNames(ee).forEach(z=>{let F=ee[z];Array.isArray(F)?F.forEach(W=>{q.write(a.from([o.properties[x]])),ue(q,z.toString(),W.toString())}):(q.write(a.from([o.properties[x]])),ue(q,z.toString(),F.toString()))});break}default:return q.destroy(new Error(`Invalid property ${x} value: ${ee}`)),!1}}function _e(q,x,ee){G(q,ee);for(let z in x)if(Object.prototype.hasOwnProperty.call(x,z)&&x[z]!=null){let F=x[z];if(Array.isArray(F))for(let W=0;W<F.length;W++)he(q,z,F[W]);else he(q,z,F)}}function J(q){return q?q instanceof a?q.length:a.byteLength(q):0}function ve(q){return typeof q=="string"||q instanceof a}c.exports=m}),ll=de((s,c)=>{ne(),se(),oe();var o=ss(),{EventEmitter:a}=(Wt(),Re(Tt)),{Buffer:h}=(qe(),Re(We));function t(i,r){let n=new e;return o(i,n,r),n.concat()}var e=class extends a{constructor(){super(),this._array=new Array(20),this._i=0}write(i){return this._array[this._i++]=i,!0}concat(){let i=0,r=new Array(this._array.length),n=this._array,l=0,f;for(f=0;f<n.length&&n[f]!==void 0;f++)typeof n[f]!="string"?r[f]=n[f].length:r[f]=h.byteLength(n[f]),i+=r[f];let d=h.allocUnsafe(i);for(f=0;f<n.length&&n[f]!==void 0;f++)typeof n[f]!="string"?(n[f].copy(d,l),l+=r[f]):(d.write(n[f],l),l+=r[f]);return d}destroy(i){i&&this.emit("error",i)}};c.exports=t}),ul=de(s=>{ne(),se(),oe(),s.parser=ol().parser,s.generate=ll(),s.writeToStream=ss()}),hl=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports=a;function o(t){return t instanceof Cr?Cr.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function a(t){if(t=t||{},t.circles)return h(t);let e=new Map;if(e.set(Date,f=>new Date(f)),e.set(Map,(f,d)=>new Map(r(Array.from(f),d))),e.set(Set,(f,d)=>new Set(r(Array.from(f),d))),t.constructorHandlers)for(let f of t.constructorHandlers)e.set(f[0],f[1]);let i=null;return t.proto?l:n;function r(f,d){let g=Object.keys(f),_=new Array(g.length);for(let p=0;p<g.length;p++){let m=g[p],E=f[m];typeof E!="object"||E===null?_[m]=E:E.constructor!==Object&&(i=e.get(E.constructor))?_[m]=i(E,d):ArrayBuffer.isView(E)?_[m]=o(E):_[m]=d(E)}return _}function n(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return r(f,n);if(f.constructor!==Object&&(i=e.get(f.constructor)))return i(f,n);let d={};for(let g in f){if(Object.hasOwnProperty.call(f,g)===!1)continue;let _=f[g];typeof _!="object"||_===null?d[g]=_:_.constructor!==Object&&(i=e.get(_.constructor))?d[g]=i(_,n):ArrayBuffer.isView(_)?d[g]=o(_):d[g]=n(_)}return d}function l(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return r(f,l);if(f.constructor!==Object&&(i=e.get(f.constructor)))return i(f,l);let d={};for(let g in f){let _=f[g];typeof _!="object"||_===null?d[g]=_:_.constructor!==Object&&(i=e.get(_.constructor))?d[g]=i(_,l):ArrayBuffer.isView(_)?d[g]=o(_):d[g]=l(_)}return d}}function h(t){let e=[],i=[],r=new Map;if(r.set(Date,g=>new Date(g)),r.set(Map,(g,_)=>new Map(l(Array.from(g),_))),r.set(Set,(g,_)=>new Set(l(Array.from(g),_))),t.constructorHandlers)for(let g of t.constructorHandlers)r.set(g[0],g[1]);let n=null;return t.proto?d:f;function l(g,_){let p=Object.keys(g),m=new Array(p.length);for(let E=0;E<p.length;E++){let b=p[E],w=g[b];if(typeof w!="object"||w===null)m[b]=w;else if(w.constructor!==Object&&(n=r.get(w.constructor)))m[b]=n(w,_);else if(ArrayBuffer.isView(w))m[b]=o(w);else{let k=e.indexOf(w);k!==-1?m[b]=i[k]:m[b]=_(w)}}return m}function f(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return l(g,f);if(g.constructor!==Object&&(n=r.get(g.constructor)))return n(g,f);let _={};e.push(g),i.push(_);for(let p in g){if(Object.hasOwnProperty.call(g,p)===!1)continue;let m=g[p];if(typeof m!="object"||m===null)_[p]=m;else if(m.constructor!==Object&&(n=r.get(m.constructor)))_[p]=n(m,f);else if(ArrayBuffer.isView(m))_[p]=o(m);else{let E=e.indexOf(m);E!==-1?_[p]=i[E]:_[p]=f(m)}}return e.pop(),i.pop(),_}function d(g){if(typeof g!="object"||g===null)return g;if(Array.isArray(g))return l(g,d);if(g.constructor!==Object&&(n=r.get(g.constructor)))return n(g,d);let _={};e.push(g),i.push(_);for(let p in g){let m=g[p];if(typeof m!="object"||m===null)_[p]=m;else if(m.constructor!==Object&&(n=r.get(m.constructor)))_[p]=n(m,d);else if(ArrayBuffer.isView(m))_[p]=o(m);else{let E=e.indexOf(m);E!==-1?_[p]=i[E]:_[p]=d(m)}}return e.pop(),i.pop(),_}}}),cl=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports=hl()()}),fl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.validateTopic=c,s.validateTopics=o;function c(a){let h=a.split("/");for(let t=0;t<h.length;t++)if(h[t]!=="+"){if(h[t]==="#")return t===h.length-1;if(h[t].indexOf("+")!==-1||h[t].indexOf("#")!==-1)return!1}return!0}function o(a){if(a.length===0)return"empty_topic_list";for(let h=0;h<a.length;h++)if(!c(a[h]))return a[h];return null}}),as=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=$t(),o={objectMode:!0},a={clean:!0},h=class{options;_inflights;constructor(t){this.options=t||{},this.options=Ie(Ie({},a),t),this._inflights=new Map}put(t,e){return this._inflights.set(t.messageId,t),e&&e(),this}createStream(){let t=new c.Readable(o),e=[],i=!1,r=0;return this._inflights.forEach((n,l)=>{e.push(n)}),t._read=()=>{!i&&r<e.length?t.push(e[r++]):t.push(null)},t.destroy=n=>{if(!i)return i=!0,setTimeout(()=>{t.emit("close")},0),t},t}del(t,e){let i=this._inflights.get(t.messageId);return i?(this._inflights.delete(t.messageId),e(null,i)):e&&e(new Error("missing packet")),this}get(t,e){let i=this._inflights.get(t.messageId);return i?e(null,i):e&&e(new Error("missing packet")),this}close(t){this.options.clean&&(this._inflights=null),t&&t()}};s.default=h}),dl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=[0,16,128,131,135,144,145,151,153],o=(a,h,t)=>{a.log("handlePublish: packet %o",h),t=typeof t<"u"?t:a.noop;let e=h.topic.toString(),i=h.payload,{qos:r}=h,{messageId:n}=h,{options:l}=a;if(a.options.protocolVersion===5){let f;if(h.properties&&(f=h.properties.topicAlias),typeof f<"u")if(e.length===0)if(f>0&&f<=65535){let d=a.topicAliasRecv.getTopicByAlias(f);if(d)e=d,a.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",e,f);else{a.log("handlePublish :: unregistered topic alias. alias: %d",f),a.emit("error",new Error("Received unregistered Topic Alias"));return}}else{a.log("handlePublish :: topic alias out of range. alias: %d",f),a.emit("error",new Error("Received Topic Alias is out of range"));return}else if(a.topicAliasRecv.put(e,f))a.log("handlePublish :: registered topic: %s - alias: %d",e,f);else{a.log("handlePublish :: topic alias out of range. alias: %d",f),a.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(a.log("handlePublish: qos %d",r),r){case 2:{l.customHandleAcks(e,i,h,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return a.emit("error",f);if(c.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for pubrec"));d?a._sendPacket({cmd:"pubrec",messageId:n,reasonCode:d},t):a.incomingStore.put(h,()=>{a._sendPacket({cmd:"pubrec",messageId:n},t)})});break}case 1:{l.customHandleAcks(e,i,h,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return a.emit("error",f);if(c.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for puback"));d||a.emit("message",e,i,h),a.handleMessage(h,g=>{if(g)return t&&t(g);a._sendPacket({cmd:"puback",messageId:n,reasonCode:d},t)})});break}case 0:a.emit("message",e,i,h),a.handleMessage(h,t);break;default:a.log("handlePublish: unknown QoS. Doing nothing.");break}};s.default=o}),pl=de((s,c)=>{c.exports={version:"5.13.3"}}),Yt=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.MQTTJS_VERSION=s.nextTick=s.ErrorWithSubackPacket=s.ErrorWithReasonCode=void 0,s.applyMixin=a;var c=class ls extends Error{code;constructor(t,e){super(t),this.code=e,Object.setPrototypeOf(this,ls.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};s.ErrorWithReasonCode=c;var o=class us extends Error{packet;constructor(t,e){super(t),this.packet=e,Object.setPrototypeOf(this,us.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};s.ErrorWithSubackPacket=o;function a(h,t,e=!1){let i=[t];for(;;){let r=i[0],n=Object.getPrototypeOf(r);if(n?.prototype)i.unshift(n);else break}for(let r of i)for(let n of Object.getOwnPropertyNames(r.prototype))(e||n!=="constructor")&&Object.defineProperty(h.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)??Object.create(null))}s.nextTick=typeof xe?.nextTick=="function"?xe.nextTick:h=>{setTimeout(h,0)},s.MQTTJS_VERSION=pl().version}),Br=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=void 0;var c=Yt();s.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(a,h)=>{let{messageId:t}=h,e=h.cmd,i=null,r=a.outgoing[t]?a.outgoing[t].cb:null,n=null;if(!r){a.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(a.log("_handleAck :: packet type",e),e){case"pubcomp":case"puback":{let l=h.reasonCode;l&&l>0&&l!==16?(n=new c.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[l]}`,l),a._removeOutgoingAndStoreMessage(t,()=>{r(n,h)})):a._removeOutgoingAndStoreMessage(t,r);break}case"pubrec":{i={cmd:"pubrel",qos:2,messageId:t};let l=h.reasonCode;l&&l>0&&l!==16?(n=new c.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[l]}`,l),a._removeOutgoingAndStoreMessage(t,()=>{r(n,h)})):a._sendPacket(i);break}case"suback":{delete a.outgoing[t],a.messageIdProvider.deallocate(t);let l=h.granted;for(let f=0;f<l.length;f++){let d=l[f];if((d&128)!==0){n=new Error(`Subscribe error: ${s.ReasonCodes[d]}`),n.code=d;let g=a.messageIdToTopic[t];g&&g.forEach(_=>{delete a._resubscribeTopics[_]})}}delete a.messageIdToTopic[t],a._invokeStoreProcessingQueue(),r(n,h);break}case"unsuback":{delete a.outgoing[t],a.messageIdProvider.deallocate(t),a._invokeStoreProcessingQueue(),r(null,h);break}default:a.emit("error",new Error("unrecognized packet type"))}a.disconnecting&&Object.keys(a.outgoing).length===0&&a.emit("outgoingEmpty")};s.default=o}),gl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=Yt(),o=Br(),a=(h,t)=>{let{options:e}=h,i=e.protocolVersion,r=i===5?t.reasonCode:t.returnCode;if(i!==5){let n=new c.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${i}`,r);h.emit("error",n);return}h.handleAuth(t,(n,l)=>{if(n){h.emit("error",n);return}if(r===24)h.reconnecting=!1,h._sendPacket(l);else{let f=new c.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[r]}`,r);h.emit("error",f)}})};s.default=a}),ml=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.LRUCache=void 0;var c=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,a=typeof xe=="object"&&xe?xe:{},h=(_,p,m,E)=>{typeof a.emitWarning=="function"?a.emitWarning(_,p,m,E):console.error(`[${m}] ${p}: ${_}`)},t=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof t>"u"){e=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(m,E){this._onabort.push(E)}},t=class{constructor(){p()}signal=new e;abort(m){if(!this.signal.aborted){this.signal.reason=m,this.signal.aborted=!0;for(let E of this.signal._onabort)E(m);this.signal.onabort?.(m)}}};let _=a.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",p=()=>{_&&(_=!1,h("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",p))}}var i=_=>!o.has(_),r=Symbol("type"),n=_=>_&&_===Math.floor(_)&&_>0&&isFinite(_),l=_=>n(_)?_<=Math.pow(2,8)?Uint8Array:_<=Math.pow(2,16)?Uint16Array:_<=Math.pow(2,32)?Uint32Array:_<=Number.MAX_SAFE_INTEGER?f:null:null,f=class extends Array{constructor(_){super(_),this.fill(0)}},d=class hr{heap;length;static#l=!1;static create(p){let m=l(p);if(!m)return[];hr.#l=!0;let E=new hr(p,m);return hr.#l=!1,E}constructor(p,m){if(!hr.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new m(p),this.length=0}push(p){this.heap[this.length++]=p}pop(){return this.heap[--this.length]}},g=class hs{#l;#c;#g;#m;#R;#O;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#b;#i;#r;#e;#u;#f;#a;#o;#y;#s;#_;#w;#d;#v;#k;#h;static unsafeExposeInternals(p){return{starts:p.#w,ttls:p.#d,sizes:p.#_,keyMap:p.#i,keyList:p.#r,valList:p.#e,next:p.#u,prev:p.#f,get head(){return p.#a},get tail(){return p.#o},free:p.#y,isBackgroundFetch:m=>p.#t(m),backgroundFetch:(m,E,b,w)=>p.#B(m,E,b,w),moveToTail:m=>p.#P(m),indexes:m=>p.#E(m),rindexes:m=>p.#S(m),isStale:m=>p.#p(m)}}get max(){return this.#l}get maxSize(){return this.#c}get calculatedSize(){return this.#b}get size(){return this.#n}get fetchMethod(){return this.#R}get memoMethod(){return this.#O}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(p){let{max:m=0,ttl:E,ttlResolution:b=1,ttlAutopurge:w,updateAgeOnGet:k,updateAgeOnHas:T,allowStale:S,dispose:I,disposeAfter:P,noDisposeOnSet:H,noUpdateTTL:Y,maxSize:le=0,maxEntrySize:N=0,sizeCalculation:$,fetchMethod:G,memoMethod:V,noDeleteOnFetchRejection:ue,noDeleteOnStaleGet:fe,allowStaleOnFetchRejection:pe,allowStaleOnFetchAbort:ye,ignoreFetchAbort:D}=p;if(m!==0&&!n(m))throw new TypeError("max option must be a nonnegative integer");let ie=m?l(m):Array;if(!ie)throw new Error("invalid max value: "+m);if(this.#l=m,this.#c=le,this.maxEntrySize=N||this.#c,this.sizeCalculation=$,this.sizeCalculation){if(!this.#c&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(V!==void 0&&typeof V!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#O=V,G!==void 0&&typeof G!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=G,this.#k=!!G,this.#i=new Map,this.#r=new Array(m).fill(void 0),this.#e=new Array(m).fill(void 0),this.#u=new ie(m),this.#f=new ie(m),this.#a=0,this.#o=0,this.#y=d.create(m),this.#n=0,this.#b=0,typeof I=="function"&&(this.#g=I),typeof P=="function"?(this.#m=P,this.#s=[]):(this.#m=void 0,this.#s=void 0),this.#v=!!this.#g,this.#h=!!this.#m,this.noDisposeOnSet=!!H,this.noUpdateTTL=!!Y,this.noDeleteOnFetchRejection=!!ue,this.allowStaleOnFetchRejection=!!pe,this.allowStaleOnFetchAbort=!!ye,this.ignoreFetchAbort=!!D,this.maxEntrySize!==0){if(this.#c!==0&&!n(this.#c))throw new TypeError("maxSize must be a positive integer if specified");if(!n(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#W()}if(this.allowStale=!!S,this.noDeleteOnStaleGet=!!fe,this.updateAgeOnGet=!!k,this.updateAgeOnHas=!!T,this.ttlResolution=n(b)||b===0?b:1,this.ttlAutopurge=!!w,this.ttl=E||0,this.ttl){if(!n(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#N()}if(this.#l===0&&this.ttl===0&&this.#c===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#c){let R="LRU_CACHE_UNBOUNDED";i(R)&&(o.add(R),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",R,hs))}}getRemainingTTL(p){return this.#i.has(p)?1/0:0}#N(){let p=new f(this.#l),m=new f(this.#l);this.#d=p,this.#w=m,this.#L=(w,k,T=c.now())=>{if(m[w]=k!==0?T:0,p[w]=k,k!==0&&this.ttlAutopurge){let S=setTimeout(()=>{this.#p(w)&&this.#A(this.#r[w],"expire")},k+1);S.unref&&S.unref()}},this.#T=w=>{m[w]=p[w]!==0?c.now():0},this.#I=(w,k)=>{if(p[k]){let T=p[k],S=m[k];if(!T||!S)return;w.ttl=T,w.start=S,w.now=E||b();let I=w.now-S;w.remainingTTL=T-I}};let E=0,b=()=>{let w=c.now();if(this.ttlResolution>0){E=w;let k=setTimeout(()=>E=0,this.ttlResolution);k.unref&&k.unref()}return w};this.getRemainingTTL=w=>{let k=this.#i.get(w);if(k===void 0)return 0;let T=p[k],S=m[k];if(!T||!S)return 1/0;let I=(E||b())-S;return T-I},this.#p=w=>{let k=m[w],T=p[w];return!!T&&!!k&&(E||b())-k>T}}#T=()=>{};#I=()=>{};#L=()=>{};#p=()=>!1;#W(){let p=new f(this.#l);this.#b=0,this.#_=p,this.#C=m=>{this.#b-=p[m],p[m]=0},this.#U=(m,E,b,w)=>{if(this.#t(E))return 0;if(!n(b))if(w){if(typeof w!="function")throw new TypeError("sizeCalculation must be a function");if(b=w(E,m),!n(b))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return b},this.#x=(m,E,b)=>{if(p[m]=E,this.#c){let w=this.#c-p[m];for(;this.#b>w;)this.#M(!0)}this.#b+=p[m],b&&(b.entrySize=E,b.totalCalculatedSize=this.#b)}}#C=p=>{};#x=(p,m,E)=>{};#U=(p,m,E,b)=>{if(E||b)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:p=this.allowStale}={}){if(this.#n)for(let m=this.#o;!(!this.#j(m)||((p||!this.#p(m))&&(yield m),m===this.#a));)m=this.#f[m]}*#S({allowStale:p=this.allowStale}={}){if(this.#n)for(let m=this.#a;!(!this.#j(m)||((p||!this.#p(m))&&(yield m),m===this.#o));)m=this.#u[m]}#j(p){return p!==void 0&&this.#i.get(this.#r[p])===p}*entries(){for(let p of this.#E())this.#e[p]!==void 0&&this.#r[p]!==void 0&&!this.#t(this.#e[p])&&(yield[this.#r[p],this.#e[p]])}*rentries(){for(let p of this.#S())this.#e[p]!==void 0&&this.#r[p]!==void 0&&!this.#t(this.#e[p])&&(yield[this.#r[p],this.#e[p]])}*keys(){for(let p of this.#E()){let m=this.#r[p];m!==void 0&&!this.#t(this.#e[p])&&(yield m)}}*rkeys(){for(let p of this.#S()){let m=this.#r[p];m!==void 0&&!this.#t(this.#e[p])&&(yield m)}}*values(){for(let p of this.#E())this.#e[p]!==void 0&&!this.#t(this.#e[p])&&(yield this.#e[p])}*rvalues(){for(let p of this.#S())this.#e[p]!==void 0&&!this.#t(this.#e[p])&&(yield this.#e[p])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(p,m={}){for(let E of this.#E()){let b=this.#e[E],w=this.#t(b)?b.__staleWhileFetching:b;if(w!==void 0&&p(w,this.#r[E],this))return this.get(this.#r[E],m)}}forEach(p,m=this){for(let E of this.#E()){let b=this.#e[E],w=this.#t(b)?b.__staleWhileFetching:b;w!==void 0&&p.call(m,w,this.#r[E],this)}}rforEach(p,m=this){for(let E of this.#S()){let b=this.#e[E],w=this.#t(b)?b.__staleWhileFetching:b;w!==void 0&&p.call(m,w,this.#r[E],this)}}purgeStale(){let p=!1;for(let m of this.#S({allowStale:!0}))this.#p(m)&&(this.#A(this.#r[m],"expire"),p=!0);return p}info(p){let m=this.#i.get(p);if(m===void 0)return;let E=this.#e[m],b=this.#t(E)?E.__staleWhileFetching:E;if(b===void 0)return;let w={value:b};if(this.#d&&this.#w){let k=this.#d[m],T=this.#w[m];if(k&&T){let S=k-(c.now()-T);w.ttl=S,w.start=Date.now()}}return this.#_&&(w.size=this.#_[m]),w}dump(){let p=[];for(let m of this.#E({allowStale:!0})){let E=this.#r[m],b=this.#e[m],w=this.#t(b)?b.__staleWhileFetching:b;if(w===void 0||E===void 0)continue;let k={value:w};if(this.#d&&this.#w){k.ttl=this.#d[m];let T=c.now()-this.#w[m];k.start=Math.floor(Date.now()-T)}this.#_&&(k.size=this.#_[m]),p.unshift([E,k])}return p}load(p){this.clear();for(let[m,E]of p){if(E.start){let b=Date.now()-E.start;E.start=c.now()-b}this.set(m,E.value,E)}}set(p,m,E={}){if(m===void 0)return this.delete(p),this;let{ttl:b=this.ttl,start:w,noDisposeOnSet:k=this.noDisposeOnSet,sizeCalculation:T=this.sizeCalculation,status:S}=E,{noUpdateTTL:I=this.noUpdateTTL}=E,P=this.#U(p,m,E.size||0,T);if(this.maxEntrySize&&P>this.maxEntrySize)return S&&(S.set="miss",S.maxEntrySizeExceeded=!0),this.#A(p,"set"),this;let H=this.#n===0?void 0:this.#i.get(p);if(H===void 0)H=this.#n===0?this.#o:this.#y.length!==0?this.#y.pop():this.#n===this.#l?this.#M(!1):this.#n,this.#r[H]=p,this.#e[H]=m,this.#i.set(p,H),this.#u[this.#o]=H,this.#f[H]=this.#o,this.#o=H,this.#n++,this.#x(H,P,S),S&&(S.set="add"),I=!1;else{this.#P(H);let Y=this.#e[H];if(m!==Y){if(this.#k&&this.#t(Y)){Y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:le}=Y;le!==void 0&&!k&&(this.#v&&this.#g?.(le,p,"set"),this.#h&&this.#s?.push([le,p,"set"]))}else k||(this.#v&&this.#g?.(Y,p,"set"),this.#h&&this.#s?.push([Y,p,"set"]));if(this.#C(H),this.#x(H,P,S),this.#e[H]=m,S){S.set="replace";let le=Y&&this.#t(Y)?Y.__staleWhileFetching:Y;le!==void 0&&(S.oldValue=le)}}else S&&(S.set="update")}if(b!==0&&!this.#d&&this.#N(),this.#d&&(I||this.#L(H,b,w),S&&this.#I(S,H)),!k&&this.#h&&this.#s){let Y=this.#s,le;for(;le=Y?.shift();)this.#m?.(...le)}return this}pop(){try{for(;this.#n;){let p=this.#e[this.#a];if(this.#M(!0),this.#t(p)){if(p.__staleWhileFetching)return p.__staleWhileFetching}else if(p!==void 0)return p}}finally{if(this.#h&&this.#s){let p=this.#s,m;for(;m=p?.shift();)this.#m?.(...m)}}}#M(p){let m=this.#a,E=this.#r[m],b=this.#e[m];return this.#k&&this.#t(b)?b.__abortController.abort(new Error("evicted")):(this.#v||this.#h)&&(this.#v&&this.#g?.(b,E,"evict"),this.#h&&this.#s?.push([b,E,"evict"])),this.#C(m),p&&(this.#r[m]=void 0,this.#e[m]=void 0,this.#y.push(m)),this.#n===1?(this.#a=this.#o=0,this.#y.length=0):this.#a=this.#u[m],this.#i.delete(E),this.#n--,m}has(p,m={}){let{updateAgeOnHas:E=this.updateAgeOnHas,status:b}=m,w=this.#i.get(p);if(w!==void 0){let k=this.#e[w];if(this.#t(k)&&k.__staleWhileFetching===void 0)return!1;if(this.#p(w))b&&(b.has="stale",this.#I(b,w));else return E&&this.#T(w),b&&(b.has="hit",this.#I(b,w)),!0}else b&&(b.has="miss");return!1}peek(p,m={}){let{allowStale:E=this.allowStale}=m,b=this.#i.get(p);if(b===void 0||!E&&this.#p(b))return;let w=this.#e[b];return this.#t(w)?w.__staleWhileFetching:w}#B(p,m,E,b){let w=m===void 0?void 0:this.#e[m];if(this.#t(w))return w;let k=new t,{signal:T}=E;T?.addEventListener("abort",()=>k.abort(T.reason),{signal:k.signal});let S={signal:k.signal,options:E,context:b},I=($,G=!1)=>{let{aborted:V}=k.signal,ue=E.ignoreFetchAbort&&$!==void 0;if(E.status&&(V&&!G?(E.status.fetchAborted=!0,E.status.fetchError=k.signal.reason,ue&&(E.status.fetchAbortIgnored=!0)):E.status.fetchResolved=!0),V&&!ue&&!G)return H(k.signal.reason);let fe=le;return this.#e[m]===le&&($===void 0?fe.__staleWhileFetching?this.#e[m]=fe.__staleWhileFetching:this.#A(p,"fetch"):(E.status&&(E.status.fetchUpdated=!0),this.set(p,$,S.options))),$},P=$=>(E.status&&(E.status.fetchRejected=!0,E.status.fetchError=$),H($)),H=$=>{let{aborted:G}=k.signal,V=G&&E.allowStaleOnFetchAbort,ue=V||E.allowStaleOnFetchRejection,fe=ue||E.noDeleteOnFetchRejection,pe=le;if(this.#e[m]===le&&(!fe||pe.__staleWhileFetching===void 0?this.#A(p,"fetch"):V||(this.#e[m]=pe.__staleWhileFetching)),ue)return E.status&&pe.__staleWhileFetching!==void 0&&(E.status.returnedStale=!0),pe.__staleWhileFetching;if(pe.__returned===pe)throw $},Y=($,G)=>{let V=this.#R?.(p,w,S);V&&V instanceof Promise&&V.then(ue=>$(ue===void 0?void 0:ue),G),k.signal.addEventListener("abort",()=>{(!E.ignoreFetchAbort||E.allowStaleOnFetchAbort)&&($(void 0),E.allowStaleOnFetchAbort&&($=ue=>I(ue,!0)))})};E.status&&(E.status.fetchDispatched=!0);let le=new Promise(Y).then(I,P),N=Object.assign(le,{__abortController:k,__staleWhileFetching:w,__returned:void 0});return m===void 0?(this.set(p,N,et(Ie({},S.options),{status:void 0})),m=this.#i.get(p)):this.#e[m]=N,N}#t(p){if(!this.#k)return!1;let m=p;return!!m&&m instanceof Promise&&m.hasOwnProperty("__staleWhileFetching")&&m.__abortController instanceof t}fetch(E){return Me(this,arguments,function*(p,m={}){let{allowStale:b=this.allowStale,updateAgeOnGet:w=this.updateAgeOnGet,noDeleteOnStaleGet:k=this.noDeleteOnStaleGet,ttl:T=this.ttl,noDisposeOnSet:S=this.noDisposeOnSet,size:I=0,sizeCalculation:P=this.sizeCalculation,noUpdateTTL:H=this.noUpdateTTL,noDeleteOnFetchRejection:Y=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:le=this.allowStaleOnFetchRejection,ignoreFetchAbort:N=this.ignoreFetchAbort,allowStaleOnFetchAbort:$=this.allowStaleOnFetchAbort,context:G,forceRefresh:V=!1,status:ue,signal:fe}=m;if(!this.#k)return ue&&(ue.fetch="get"),this.get(p,{allowStale:b,updateAgeOnGet:w,noDeleteOnStaleGet:k,status:ue});let pe={allowStale:b,updateAgeOnGet:w,noDeleteOnStaleGet:k,ttl:T,noDisposeOnSet:S,size:I,sizeCalculation:P,noUpdateTTL:H,noDeleteOnFetchRejection:Y,allowStaleOnFetchRejection:le,allowStaleOnFetchAbort:$,ignoreFetchAbort:N,status:ue,signal:fe},ye=this.#i.get(p);if(ye===void 0){ue&&(ue.fetch="miss");let D=this.#B(p,ye,pe,G);return D.__returned=D}else{let D=this.#e[ye];if(this.#t(D)){let _e=b&&D.__staleWhileFetching!==void 0;return ue&&(ue.fetch="inflight",_e&&(ue.returnedStale=!0)),_e?D.__staleWhileFetching:D.__returned=D}let ie=this.#p(ye);if(!V&&!ie)return ue&&(ue.fetch="hit"),this.#P(ye),w&&this.#T(ye),ue&&this.#I(ue,ye),D;let R=this.#B(p,ye,pe,G),he=R.__staleWhileFetching!==void 0&&b;return ue&&(ue.fetch=ie?"stale":"refresh",he&&ie&&(ue.returnedStale=!0)),he?R.__staleWhileFetching:R.__returned=R}})}forceFetch(E){return Me(this,arguments,function*(p,m={}){let b=yield this.fetch(p,m);if(b===void 0)throw new Error("fetch() returned undefined");return b})}memo(p,m={}){let E=this.#O;if(!E)throw new Error("no memoMethod provided to constructor");let I=m,{context:b,forceRefresh:w}=I,k=qr(I,["context","forceRefresh"]),T=this.get(p,k);if(!w&&T!==void 0)return T;let S=E(p,T,{options:k,context:b});return this.set(p,S,k),S}get(p,m={}){let{allowStale:E=this.allowStale,updateAgeOnGet:b=this.updateAgeOnGet,noDeleteOnStaleGet:w=this.noDeleteOnStaleGet,status:k}=m,T=this.#i.get(p);if(T!==void 0){let S=this.#e[T],I=this.#t(S);return k&&this.#I(k,T),this.#p(T)?(k&&(k.get="stale"),I?(k&&E&&S.__staleWhileFetching!==void 0&&(k.returnedStale=!0),E?S.__staleWhileFetching:void 0):(w||this.#A(p,"expire"),k&&E&&(k.returnedStale=!0),E?S:void 0)):(k&&(k.get="hit"),I?S.__staleWhileFetching:(this.#P(T),b&&this.#T(T),S))}else k&&(k.get="miss")}#D(p,m){this.#f[m]=p,this.#u[p]=m}#P(p){p!==this.#o&&(p===this.#a?this.#a=this.#u[p]:this.#D(this.#f[p],this.#u[p]),this.#D(this.#o,p),this.#o=p)}delete(p){return this.#A(p,"delete")}#A(p,m){let E=!1;if(this.#n!==0){let b=this.#i.get(p);if(b!==void 0)if(E=!0,this.#n===1)this.#F(m);else{this.#C(b);let w=this.#e[b];if(this.#t(w)?w.__abortController.abort(new Error("deleted")):(this.#v||this.#h)&&(this.#v&&this.#g?.(w,p,m),this.#h&&this.#s?.push([w,p,m])),this.#i.delete(p),this.#r[b]=void 0,this.#e[b]=void 0,b===this.#o)this.#o=this.#f[b];else if(b===this.#a)this.#a=this.#u[b];else{let k=this.#f[b];this.#u[k]=this.#u[b];let T=this.#u[b];this.#f[T]=this.#f[b]}this.#n--,this.#y.push(b)}}if(this.#h&&this.#s?.length){let b=this.#s,w;for(;w=b?.shift();)this.#m?.(...w)}return E}clear(){return this.#F("delete")}#F(p){for(let m of this.#S({allowStale:!0})){let E=this.#e[m];if(this.#t(E))E.__abortController.abort(new Error("deleted"));else{let b=this.#r[m];this.#v&&this.#g?.(E,b,p),this.#h&&this.#s?.push([E,b,p])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#d&&this.#w&&(this.#d.fill(0),this.#w.fill(0)),this.#_&&this.#_.fill(0),this.#a=0,this.#o=0,this.#y.length=0,this.#b=0,this.#n=0,this.#h&&this.#s){let m=this.#s,E;for(;E=m?.shift();)this.#m?.(...E)}}};s.LRUCache=g}),_t=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.ContainerIterator=s.Container=s.Base=void 0;var c=class{constructor(h=0){this.iteratorType=h}equals(h){return this.o===h.o}};s.ContainerIterator=c;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};s.Base=o;var a=class extends o{};s.Container=a}),bl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=_t(),o=class extends c.Base{constructor(h=[]){super(),this.S=[];let t=this;h.forEach(function(e){t.push(e)})}clear(){this.i=0,this.S=[]}push(h){return this.S.push(h),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},a=o;s.default=a}),yl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=_t(),o=class extends c.Base{constructor(h=[]){super(),this.j=0,this.q=[];let t=this;h.forEach(function(e){t.push(e)})}clear(){this.q=[],this.i=this.j=0}push(h){let t=this.q.length;if(this.j/t>.5&&this.j+this.i>=t&&t>4096){let e=this.i;for(let i=0;i<e;++i)this.q[i]=this.q[this.j+i];this.j=0,this.q[this.i]=h}else this.q[this.j+this.i]=h;return++this.i}pop(){if(this.i===0)return;let h=this.q[this.j++];return this.i-=1,h}front(){if(this.i!==0)return this.q[this.j]}},a=o;s.default=a}),_l=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=_t(),o=class extends c.Base{constructor(h=[],t=function(i,r){return i>r?-1:i<r?1:0},e=!0){if(super(),this.v=t,Array.isArray(h))this.C=e?[...h]:h;else{this.C=[];let r=this;h.forEach(function(n){r.C.push(n)})}this.i=this.C.length;let i=this.i>>1;for(let r=this.i-1>>1;r>=0;--r)this.k(r,i)}m(h){let t=this.C[h];for(;h>0;){let e=h-1>>1,i=this.C[e];if(this.v(i,t)<=0)break;this.C[h]=i,h=e}this.C[h]=t}k(h,t){let e=this.C[h];for(;h<t;){let i=h<<1|1,r=i+1,n=this.C[i];if(r<this.i&&this.v(n,this.C[r])>0&&(i=r,n=this.C[r]),this.v(n,e)>=0)break;this.C[h]=n,h=i}this.C[h]=e}clear(){this.i=0,this.C.length=0}push(h){this.C.push(h),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let h=this.C[0],t=this.C.pop();return this.i-=1,this.i&&(this.C[0]=t,this.k(0,this.i>>1)),h}top(){return this.C[0]}find(h){return this.C.indexOf(h)>=0}remove(h){let t=this.C.indexOf(h);return t<0?!1:(t===0?this.pop():t===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(t,1,this.C.pop()),this.i-=1,this.m(t),this.k(t,this.i>>1)),!0)}updateItem(h){let t=this.C.indexOf(h);return t<0?!1:(this.m(t),this.k(t,this.i>>1),!0)}toArray(){return[...this.C]}},a=o;s.default=a}),An=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=_t(),o=class extends c.Container{},a=o;s.default=a}),wt=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.throwIteratorAccessError=c;function c(){throw new RangeError("Iterator access denied!")}}),cs=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.RandomIterator=void 0;var c=_t(),o=wt(),a=class extends c.ContainerIterator{constructor(h,t){super(t),this.o=h,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(h){this.container.setElementByPos(this.o,h)}};s.RandomIterator=a}),wl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=a(An()),o=cs();function a(i){return i&&i.t?i:{default:i}}var h=class fs extends o.RandomIterator{constructor(r,n,l){super(r,l),this.container=n}copy(){return new fs(this.o,this.container,this.iteratorType)}},t=class extends c.default{constructor(i=[],r=!0){if(super(),Array.isArray(i))this.J=r?[...i]:i,this.i=i.length;else{this.J=[];let n=this;i.forEach(function(l){n.pushBack(l)})}}clear(){this.i=0,this.J.length=0}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;return this.J[i]}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;return this.J.splice(i,1),this.i-=1,this.i}eraseElementByValue(i){let r=0;for(let n=0;n<this.i;++n)this.J[n]!==i&&(this.J[r++]=this.J[n]);return this.i=this.J.length=r,this.i}eraseElementByIterator(i){let r=i.o;return i=i.next(),this.eraseElementByPos(r),i}pushBack(i){return this.J.push(i),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(i,r){if(i<0||i>this.i-1)throw new RangeError;this.J[i]=r}insert(i,r,n=1){if(i<0||i>this.i)throw new RangeError;return this.J.splice(i,0,...new Array(n).fill(r)),this.i+=n,this.i}find(i){for(let r=0;r<this.i;++r)if(this.J[r]===i)return new h(r,this);return this.end()}reverse(){this.J.reverse()}unique(){let i=1;for(let r=1;r<this.i;++r)this.J[r]!==this.J[r-1]&&(this.J[i++]=this.J[r]);return this.i=this.J.length=i,this.i}sort(i){this.J.sort(i)}forEach(i){for(let r=0;r<this.i;++r)i(this.J[r],r,this)}[Symbol.iterator](){return(function*(){yield*vt(this.J)}).bind(this)()}},e=t;s.default=e}),vl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(An()),o=_t(),a=wt();function h(r){return r&&r.t?r:{default:r}}var t=class ds extends o.ContainerIterator{constructor(n,l,f,d){super(d),this.o=n,this.h=l,this.container=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l}set pointer(n){this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l=n}copy(){return new ds(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(r=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let n=this;r.forEach(function(l){n.pushBack(l)})}V(r){let{L:n,B:l}=r;n.B=l,l.L=n,r===this.p&&(this.p=l),r===this._&&(this._=n),this.i-=1}G(r,n){let l=n.B,f={l:r,L:n,B:l};n.B=f,l.L=f,n===this.h&&(this.p=f),l===this.h&&(this._=f),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new t(this.p,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this._,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return n.l}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return this.V(n),this.i}eraseElementByValue(r){let n=this.p;for(;n!==this.h;)n.l===r&&this.V(n),n=n.B;return this.i}eraseElementByIterator(r){let n=r.o;return n===this.h&&(0,a.throwIteratorAccessError)(),r=r.next(),this.V(n),r}pushBack(r){return this.G(r,this._),this.i}popBack(){if(this.i===0)return;let r=this._.l;return this.V(this._),r}pushFront(r){return this.G(r,this.h),this.i}popFront(){if(this.i===0)return;let r=this.p.l;return this.V(this.p),r}setElementByPos(r,n){if(r<0||r>this.i-1)throw new RangeError;let l=this.p;for(;r--;)l=l.B;l.l=n}insert(r,n,l=1){if(r<0||r>this.i)throw new RangeError;if(l<=0)return this.i;if(r===0)for(;l--;)this.pushFront(n);else if(r===this.i)for(;l--;)this.pushBack(n);else{let f=this.p;for(let g=1;g<r;++g)f=f.B;let d=f.B;for(this.i+=l;l--;)f.B={l:n,L:f},f.B.L=f,f=f.B;f.B=d,d.L=f}return this.i}find(r){let n=this.p;for(;n!==this.h;){if(n.l===r)return new t(n,this.h,this);n=n.B}return this.end()}reverse(){if(this.i<=1)return;let r=this.p,n=this._,l=0;for(;l<<1<this.i;){let f=r.l;r.l=n.l,n.l=f,r=r.B,n=n.L,l+=1}}unique(){if(this.i<=1)return this.i;let r=this.p;for(;r!==this.h;){let n=r;for(;n.B!==this.h&&n.l===n.B.l;)n=n.B,this.i-=1;r.B=n.B,r.B.L=r,r=r.B}return this.i}sort(r){if(this.i<=1)return;let n=[];this.forEach(function(f){n.push(f)}),n.sort(r);let l=this.p;n.forEach(function(f){l.l=f,l=l.B})}merge(r){let n=this;if(this.i===0)r.forEach(function(l){n.pushBack(l)});else{let l=this.p;r.forEach(function(f){for(;l!==n.h&&l.l<=f;)l=l.B;n.G(f,l.L)})}return this.i}forEach(r){let n=this.p,l=0;for(;n!==this.h;)r(n.l,l++,this),n=n.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let r=this.p;for(;r!==this.h;)yield r.l,r=r.B}).bind(this)()}},i=e;s.default=i}),El=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=a(An()),o=cs();function a(i){return i&&i.t?i:{default:i}}var h=class ps extends o.RandomIterator{constructor(r,n,l){super(r,l),this.container=n}copy(){return new ps(this.o,this.container,this.iteratorType)}},t=class extends c.default{constructor(i=[],r=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let n=(()=>{if(typeof i.length=="number")return i.length;if(typeof i.size=="number")return i.size;if(typeof i.size=="function")return i.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=r,this.P=Math.max(Math.ceil(n/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let l=Math.ceil(n/this.F);this.j=this.R=(this.P>>1)-(l>>1),this.D=this.N=this.F-n%this.F>>1;let f=this;i.forEach(function(d){f.pushBack(d)})}T(){let i=[],r=Math.max(this.P>>1,1);for(let n=0;n<r;++n)i[n]=new Array(this.F);for(let n=this.j;n<this.P;++n)i[i.length]=this.A[n];for(let n=0;n<this.R;++n)i[i.length]=this.A[n];i[i.length]=[...this.A[this.R]],this.j=r,this.R=i.length-1;for(let n=0;n<r;++n)i[i.length]=new Array(this.F);this.A=i,this.P=i.length}O(i){let r=this.D+i+1,n=r%this.F,l=n-1,f=this.j+(r-n)/this.F;return n===0&&(f-=1),f%=this.P,l<0&&(l+=this.F),{curNodeBucketIndex:f,curNodePointerIndex:l}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(i){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=i,this.i}popBack(){if(this.i===0)return;let i=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,i}pushFront(i){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=i,this.i}popFront(){if(this.i===0)return;let i=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,i}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(i);return this.A[r][n]}setElementByPos(i,r){if(i<0||i>this.i-1)throw new RangeError;let{curNodeBucketIndex:n,curNodePointerIndex:l}=this.O(i);this.A[n][l]=r}insert(i,r,n=1){if(i<0||i>this.i)throw new RangeError;if(i===0)for(;n--;)this.pushFront(r);else if(i===this.i)for(;n--;)this.pushBack(r);else{let l=[];for(let f=i;f<this.i;++f)l.push(this.getElementByPos(f));this.cut(i-1);for(let f=0;f<n;++f)this.pushBack(r);for(let f=0;f<l.length;++f)this.pushBack(l[f])}return this.i}cut(i){if(i<0)return this.clear(),0;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(i);return this.R=r,this.N=n,this.i=i+1,this.i}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;if(i===0)this.popFront();else if(i===this.i-1)this.popBack();else{let r=[];for(let l=i+1;l<this.i;++l)r.push(this.getElementByPos(l));this.cut(i),this.popBack();let n=this;r.forEach(function(l){n.pushBack(l)})}return this.i}eraseElementByValue(i){if(this.i===0)return 0;let r=[];for(let l=0;l<this.i;++l){let f=this.getElementByPos(l);f!==i&&r.push(f)}let n=r.length;for(let l=0;l<n;++l)this.setElementByPos(l,r[l]);return this.cut(n-1)}eraseElementByIterator(i){let r=i.o;return this.eraseElementByPos(r),i=i.next(),i}find(i){for(let r=0;r<this.i;++r)if(this.getElementByPos(r)===i)return new h(r,this);return this.end()}reverse(){let i=0,r=this.i-1;for(;i<r;){let n=this.getElementByPos(i);this.setElementByPos(i,this.getElementByPos(r)),this.setElementByPos(r,n),i+=1,r-=1}}unique(){if(this.i<=1)return this.i;let i=1,r=this.getElementByPos(0);for(let n=1;n<this.i;++n){let l=this.getElementByPos(n);l!==r&&(r=l,this.setElementByPos(i++,l))}for(;this.i>i;)this.popBack();return this.i}sort(i){let r=[];for(let n=0;n<this.i;++n)r.push(this.getElementByPos(n));r.sort(i);for(let n=0;n<this.i;++n)this.setElementByPos(n,r[n])}shrinkToFit(){if(this.i===0)return;let i=[];this.forEach(function(r){i.push(r)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let r=0;r<this.P;++r)this.A.push(new Array(this.F));for(let r=0;r<i.length;++r)this.pushBack(i[r])}forEach(i){for(let r=0;r<this.i;++r)i(this.getElementByPos(r),r,this)}[Symbol.iterator](){return(function*(){for(let i=0;i<this.i;++i)yield this.getElementByPos(i)}).bind(this)()}},e=t;s.default=e}),Sl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.TreeNodeEnableIndex=s.TreeNode=void 0;var c=class{constructor(a,h){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=a,this.l=h}L(){let a=this;if(a.ee===1&&a.tt.tt===a)a=a.W;else if(a.U)for(a=a.U;a.W;)a=a.W;else{let h=a.tt;for(;h.U===a;)a=h,h=a.tt;a=h}return a}B(){let a=this;if(a.W){for(a=a.W;a.U;)a=a.U;return a}else{let h=a.tt;for(;h.W===a;)a=h,h=a.tt;return a.W!==h?h:a}}te(){let a=this.tt,h=this.W,t=h.U;return a.tt===this?a.tt=h:a.U===this?a.U=h:a.W=h,h.tt=a,h.U=this,this.tt=h,this.W=t,t&&(t.tt=this),h}se(){let a=this.tt,h=this.U,t=h.W;return a.tt===this?a.tt=h:a.U===this?a.U=h:a.W=h,h.tt=a,h.W=this,this.tt=h,this.U=t,t&&(t.tt=this),h}};s.TreeNode=c;var o=class extends c{constructor(){super(...arguments),this.rt=1}te(){let a=super.te();return this.ie(),a.ie(),a}se(){let a=super.se();return this.ie(),a.ie(),a}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};s.TreeNodeEnableIndex=o}),gs=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Sl(),o=_t(),a=wt(),h=class extends o.Container{constructor(e=function(r,n){return r<n?-1:r>n?1:0},i=!1){super(),this.Y=void 0,this.v=e,i?(this.re=c.TreeNodeEnableIndex,this.M=function(r,n,l){let f=this.ne(r,n,l);if(f){let d=f.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let g=this.he(f);if(g){let{parentNode:_,grandParent:p,curNode:m}=g;_.ie(),p.ie(),m.ie()}}return this.i},this.V=function(r){let n=this.fe(r);for(;n!==this.h;)n.rt-=1,n=n.tt}):(this.re=c.TreeNode,this.M=function(r,n,l){let f=this.ne(r,n,l);return f&&this.he(f),this.i},this.V=this.fe),this.h=new this.re}X(e,i){let r=this.h;for(;e;){let n=this.v(e.u,i);if(n<0)e=e.W;else if(n>0)r=e,e=e.U;else return e}return r}Z(e,i){let r=this.h;for(;e;)this.v(e.u,i)<=0?e=e.W:(r=e,e=e.U);return r}$(e,i){let r=this.h;for(;e;){let n=this.v(e.u,i);if(n<0)r=e,e=e.W;else if(n>0)e=e.U;else return e}return r}rr(e,i){let r=this.h;for(;e;)this.v(e.u,i)<0?(r=e,e=e.W):e=e.U;return r}ue(e){for(;;){let i=e.tt;if(i===this.h)return;if(e.ee===1){e.ee=0;return}if(e===i.U){let r=i.W;if(r.ee===1)r.ee=0,i.ee=1,i===this.Y?this.Y=i.te():i.te();else if(r.W&&r.W.ee===1){r.ee=i.ee,i.ee=0,r.W.ee=0,i===this.Y?this.Y=i.te():i.te();return}else r.U&&r.U.ee===1?(r.ee=1,r.U.ee=0,r.se()):(r.ee=1,e=i)}else{let r=i.U;if(r.ee===1)r.ee=0,i.ee=1,i===this.Y?this.Y=i.se():i.se();else if(r.U&&r.U.ee===1){r.ee=i.ee,i.ee=0,r.U.ee=0,i===this.Y?this.Y=i.se():i.se();return}else r.W&&r.W.ee===1?(r.ee=1,r.W.ee=0,r.te()):(r.ee=1,e=i)}}}fe(e){if(this.i===1)return this.clear(),this.h;let i=e;for(;i.U||i.W;){if(i.W)for(i=i.W;i.U;)i=i.U;else i=i.U;[e.u,i.u]=[i.u,e.u],[e.l,i.l]=[i.l,e.l],e=i}this.h.U===i?this.h.U=i.tt:this.h.W===i&&(this.h.W=i.tt),this.ue(i);let r=i.tt;return i===r.U?r.U=void 0:r.W=void 0,this.i-=1,this.Y.ee=0,r}oe(e,i){return e===void 0?!1:this.oe(e.U,i)||i(e)?!0:this.oe(e.W,i)}he(e){for(;;){let i=e.tt;if(i.ee===0)return;let r=i.tt;if(i===r.U){let n=r.W;if(n&&n.ee===1){if(n.ee=i.ee=0,r===this.Y)return;r.ee=1,e=r;continue}else if(e===i.W){if(e.ee=0,e.U&&(e.U.tt=i),e.W&&(e.W.tt=r),i.W=e.U,r.U=e.W,e.U=i,e.W=r,r===this.Y)this.Y=e,this.h.tt=e;else{let l=r.tt;l.U===r?l.U=e:l.W=e}return e.tt=r.tt,i.tt=e,r.tt=e,r.ee=1,{parentNode:i,grandParent:r,curNode:e}}else i.ee=0,r===this.Y?this.Y=r.se():r.se(),r.ee=1}else{let n=r.U;if(n&&n.ee===1){if(n.ee=i.ee=0,r===this.Y)return;r.ee=1,e=r;continue}else if(e===i.U){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=i),r.W=e.U,i.U=e.W,e.U=r,e.W=i,r===this.Y)this.Y=e,this.h.tt=e;else{let l=r.tt;l.U===r?l.U=e:l.W=e}return e.tt=r.tt,i.tt=e,r.tt=e,r.ee=1,{parentNode:i,grandParent:r,curNode:e}}else i.ee=0,r===this.Y?this.Y=r.te():r.te(),r.ee=1}return}}ne(e,i,r){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,i),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let n,l=this.h.U,f=this.v(l.u,e);if(f===0){l.l=i;return}else if(f>0)l.U=new this.re(e,i),l.U.tt=l,n=l.U,this.h.U=n;else{let d=this.h.W,g=this.v(d.u,e);if(g===0){d.l=i;return}else if(g<0)d.W=new this.re(e,i),d.W.tt=d,n=d.W,this.h.W=n;else{if(r!==void 0){let _=r.o;if(_!==this.h){let p=this.v(_.u,e);if(p===0){_.l=i;return}else if(p>0){let m=_.L(),E=this.v(m.u,e);if(E===0){m.l=i;return}else E<0&&(n=new this.re(e,i),m.W===void 0?(m.W=n,n.tt=m):(_.U=n,n.tt=_))}}}if(n===void 0)for(n=this.Y;;){let _=this.v(n.u,e);if(_>0){if(n.U===void 0){n.U=new this.re(e,i),n.U.tt=n,n=n.U;break}n=n.U}else if(_<0){if(n.W===void 0){n.W=new this.re(e,i),n.W.tt=n,n=n.W;break}n=n.W}else{n.l=i;return}}}}return this.i+=1,n}I(e,i){for(;e;){let r=this.v(e.u,i);if(r<0)e=e.W;else if(r>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,i){let r=e.o;if(r===this.h&&(0,a.throwIteratorAccessError)(),this.i===1)return r.u=i,!0;if(r===this.h.U)return this.v(r.B().u,i)>0?(r.u=i,!0):!1;if(r===this.h.W)return this.v(r.L().u,i)<0?(r.u=i,!0):!1;let n=r.L().u;if(this.v(n,i)>=0)return!1;let l=r.B().u;return this.v(l,i)<=0?!1:(r.u=i,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=0,r=this;return this.oe(this.Y,function(n){return e===i?(r.V(n),!0):(i+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let i=this.I(this.Y,e);return i===this.h?!1:(this.V(i),!0)}eraseElementByIterator(e){let i=e.o;i===this.h&&(0,a.throwIteratorAccessError)();let r=i.W===void 0;return e.iteratorType===0?r&&e.next():(!r||i.U===void 0)&&e.next(),this.V(i),e}forEach(e){let i=0;for(let r of this)e(r,i++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i,r=0;for(let n of this){if(r===e){i=n;break}r+=1}return i}getHeight(){if(this.i===0)return 0;let e=function(i){return i?Math.max(e(i.U),e(i.W))+1:0};return e(this.Y)}},t=h;s.default=t}),ms=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=_t(),o=wt(),a=class extends c.ContainerIterator{constructor(t,e,i){super(i),this.o=t,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let t=this.o,e=this.h.tt;if(t===this.h)return e?e.rt-1:0;let i=0;for(t.U&&(i+=t.U.rt);t!==e;){let r=t.tt;t===r.W&&(i+=1,r.U&&(i+=r.U.rt)),t=r}return i}},h=a;s.default=h}),Al=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(gs()),o=h(ms()),a=wt();function h(r){return r&&r.t?r:{default:r}}var t=class bs extends o.default{constructor(n,l,f,d){super(n,l,d),this.container=f}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.u}copy(){return new bs(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(r=[],n,l){super(n,l);let f=this;r.forEach(function(d){f.insert(d)})}*K(r){r!==void 0&&(yield*vt(this.K(r.U)),yield r.u,yield*vt(this.K(r.W)))}begin(){return new t(this.h.U||this.h,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this.h.W||this.h,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(r,n){return this.M(r,void 0,n)}find(r){let n=this.I(this.Y,r);return new t(n,this.h,this)}lowerBound(r){let n=this.X(this.Y,r);return new t(n,this.h,this)}upperBound(r){let n=this.Z(this.Y,r);return new t(n,this.h,this)}reverseLowerBound(r){let n=this.$(this.Y,r);return new t(n,this.h,this)}reverseUpperBound(r){let n=this.rr(this.Y,r);return new t(n,this.h,this)}union(r){let n=this;return r.forEach(function(l){n.insert(l)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},i=e;s.default=i}),Il=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(gs()),o=h(ms()),a=wt();function h(r){return r&&r.t?r:{default:r}}var t=class ys extends o.default{constructor(n,l,f,d){super(n,l,d),this.container=f}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let n=this;return new Proxy([],{get(l,f){if(f==="0")return n.o.u;if(f==="1")return n.o.l},set(l,f,d){if(f!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new ys(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(r=[],n,l){super(n,l);let f=this;r.forEach(function(d){f.setElement(d[0],d[1])})}*K(r){r!==void 0&&(yield*vt(this.K(r.U)),yield[r.u,r.l],yield*vt(this.K(r.W)))}begin(){return new t(this.h.U||this.h,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this.h.W||this.h,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){if(this.i===0)return;let r=this.h.U;return[r.u,r.l]}back(){if(this.i===0)return;let r=this.h.W;return[r.u,r.l]}lowerBound(r){let n=this.X(this.Y,r);return new t(n,this.h,this)}upperBound(r){let n=this.Z(this.Y,r);return new t(n,this.h,this)}reverseLowerBound(r){let n=this.$(this.Y,r);return new t(n,this.h,this)}reverseUpperBound(r){let n=this.rr(this.Y,r);return new t(n,this.h,this)}setElement(r,n,l){return this.M(r,n,l)}find(r){let n=this.I(this.Y,r);return new t(n,this.h,this)}getElementByKey(r){return this.I(this.Y,r).l}union(r){let n=this;return r.forEach(function(l){n.setElement(l[0],l[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},i=e;s.default=i}),_s=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=c;function c(o){let a=typeof o;return a==="object"&&o!==null||a==="function"}}),ws=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.HashContainerIterator=s.HashContainer=void 0;var c=_t(),o=h(_s()),a=wt();function h(i){return i&&i.t?i:{default:i}}var t=class extends c.ContainerIterator{constructor(i,r,n){super(n),this.o=i,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}};s.HashContainerIterator=t;var e=class extends c.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(i){let{L:r,B:n}=i;r.B=n,n.L=r,i===this.p&&(this.p=n),i===this._&&(this._=r),this.i-=1}M(i,r,n){n===void 0&&(n=(0,o.default)(i));let l;if(n){let f=i[this.HASH_TAG];if(f!==void 0)return this.H[f].l=r,this.i;Object.defineProperty(i,this.HASH_TAG,{value:this.H.length,configurable:!0}),l={u:i,l:r,L:this._,B:this.h},this.H.push(l)}else{let f=this.g[i];if(f)return f.l=r,this.i;l={u:i,l:r,L:this._,B:this.h},this.g[i]=l}return this.i===0?(this.p=l,this.h.B=l):this._.B=l,this._=l,this.h.L=l,++this.i}I(i,r){if(r===void 0&&(r=(0,o.default)(i)),r){let n=i[this.HASH_TAG];return n===void 0?this.h:this.H[n]}else return this.g[i]||this.h}clear(){let i=this.HASH_TAG;this.H.forEach(function(r){delete r.u[i]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(i,r){let n;if(r===void 0&&(r=(0,o.default)(i)),r){let l=i[this.HASH_TAG];if(l===void 0)return!1;delete i[this.HASH_TAG],n=this.H[l],delete this.H[l]}else{if(n=this.g[i],n===void 0)return!1;delete this.g[i]}return this.V(n),!0}eraseElementByIterator(i){let r=i.o;return r===this.h&&(0,a.throwIteratorAccessError)(),this.V(r),i.next()}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let r=this.p;for(;i--;)r=r.B;return this.V(r),this.i}};s.HashContainer=e}),kl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=ws(),o=wt(),a=class vs extends c.HashContainerIterator{constructor(i,r,n,l){super(i,r,l),this.container=n}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new vs(this.o,this.h,this.container,this.iteratorType)}},h=class extends c.HashContainer{constructor(e=[]){super();let i=this;e.forEach(function(r){i.insert(r)})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,i){return this.M(e,void 0,i)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return i.u}find(e,i){let r=this.I(e,i);return new a(r,this.h,this)}forEach(e){let i=0,r=this.p;for(;r!==this.h;)e(r.u,i++,this),r=r.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}).bind(this)()}},t=h;s.default=t}),Tl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=ws(),o=h(_s()),a=wt();function h(r){return r&&r.t?r:{default:r}}var t=class Es extends c.HashContainerIterator{constructor(n,l,f,d){super(n,l,d),this.container=f}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let n=this;return new Proxy([],{get(l,f){if(f==="0")return n.o.u;if(f==="1")return n.o.l},set(l,f,d){if(f!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new Es(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.HashContainer{constructor(r=[]){super();let n=this;r.forEach(function(l){n.setElement(l[0],l[1])})}begin(){return new t(this.p,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this._,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(r,n,l){return this.M(r,n,l)}getElementByKey(r,n){if(n===void 0&&(n=(0,o.default)(r)),n){let f=r[this.HASH_TAG];return f!==void 0?this.H[f].l:void 0}let l=this.g[r];return l?l.l:void 0}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return[n.u,n.l]}find(r,n){let l=this.I(r,n);return new t(l,this.h,this)}forEach(r){let n=0,l=this.p;for(;l!==this.h;)r([l.u,l.l],n++,this),l=l.B}[Symbol.iterator](){return(function*(){let r=this.p;for(;r!==this.h;)yield[r.u,r.l],r=r.B}).bind(this)()}},i=e;s.default=i}),Cl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),Object.defineProperty(s,"Deque",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(s,"HashMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"HashSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(s,"LinkList",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(s,"OrderedMap",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(s,"OrderedSet",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(s,"PriorityQueue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"Stack",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"Vector",{enumerable:!0,get:function(){return h.default}});var c=f(bl()),o=f(yl()),a=f(_l()),h=f(wl()),t=f(vl()),e=f(El()),i=f(Al()),r=f(Il()),n=f(kl()),l=f(Tl());function f(d){return d&&d.t?d:{default:d}}}),Pl=de((s,c)=>{"use strict";ne(),se(),oe();var o=Cl().OrderedSet,a=bt()("number-allocator:trace"),h=bt()("number-allocator:error");function t(i,r){this.low=i,this.high=r}t.prototype.equals=function(i){return this.low===i.low&&this.high===i.high},t.prototype.compare=function(i){return this.low<i.low&&this.high<i.low?-1:i.low<this.low&&i.high<this.low?1:0};function e(i,r){if(!(this instanceof e))return new e(i,r);this.min=i,this.max=r,this.ss=new o([],(n,l)=>n.compare(l)),a("Create"),this.clear()}e.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},e.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;let i=this.ss.begin(),r=i.pointer.low,n=i.pointer.high,l=r;return l+1<=n?this.ss.updateKeyByIterator(i,new t(r+1,n)):this.ss.eraseElementByPos(0),a("alloc():"+l),l},e.prototype.use=function(i){let r=new t(i,i),n=this.ss.lowerBound(r);if(!n.equals(this.ss.end())){let l=n.pointer.low,f=n.pointer.high;return n.pointer.equals(r)?(this.ss.eraseElementByIterator(n),a("use():"+i),!0):l>i?!1:l===i?(this.ss.updateKeyByIterator(n,new t(l+1,f)),a("use():"+i),!0):f===i?(this.ss.updateKeyByIterator(n,new t(l,f-1)),a("use():"+i),!0):(this.ss.updateKeyByIterator(n,new t(i+1,f)),this.ss.insert(new t(l,i-1)),a("use():"+i),!0)}return a("use():failed"),!1},e.prototype.free=function(i){if(i<this.min||i>this.max){h("free():"+i+" is out of range");return}let r=new t(i,i),n=this.ss.upperBound(r);if(n.equals(this.ss.end())){if(n.equals(this.ss.begin())){this.ss.insert(r);return}n.pre();let l=n.pointer.high;n.pointer.high+1===i?this.ss.updateKeyByIterator(n,new t(l,i)):this.ss.insert(r)}else if(n.equals(this.ss.begin()))if(i+1===n.pointer.low){let l=n.pointer.high;this.ss.updateKeyByIterator(n,new t(i,l))}else this.ss.insert(r);else{let l=n.pointer.low,f=n.pointer.high;n.pre();let d=n.pointer.low;n.pointer.high+1===i?i+1===l?(this.ss.eraseElementByIterator(n),this.ss.updateKeyByIterator(n,new t(d,f))):this.ss.updateKeyByIterator(n,new t(d,i)):i+1===l?(this.ss.eraseElementByIterator(n.next()),this.ss.insert(new t(i,f))):this.ss.insert(r)}a("free():"+i)},e.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new t(this.min,this.max))},e.prototype.intervalCount=function(){return this.ss.size()},e.prototype.dump=function(){console.log("length:"+this.ss.size());for(let i of this.ss)console.log(i)},c.exports=e}),Ss=de((s,c)=>{ne(),se(),oe();var o=Pl();c.exports.NumberAllocator=o}),Rl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=ml(),o=Ss(),a=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(h){h>0&&(this.aliasToTopic=new c.LRUCache({max:h}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,h),this.max=h,this.length=0)}put(h,t){if(t===0||t>this.max)return!1;let e=this.aliasToTopic.get(t);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(t,h),this.topicToAlias[h]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(h){return this.aliasToTopic.get(h)}getAliasByTopic(h){let t=this.topicToAlias[h];return typeof t<"u"&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};s.default=a}),Ol=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});var o=Br(),a=c(Rl()),h=Yt(),t=(e,i)=>{e.log("_handleConnack");let{options:r}=e,n=r.protocolVersion===5?i.reasonCode:i.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,i.properties){if(i.properties.topicAliasMaximum){if(i.properties.topicAliasMaximum>65535){e.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}i.properties.topicAliasMaximum>0&&(e.topicAliasSend=new a.default(i.properties.topicAliasMaximum))}i.properties.serverKeepAlive&&r.keepalive&&(r.keepalive=i.properties.serverKeepAlive),i.properties.maximumPacketSize&&(r.properties||(r.properties={}),r.properties.maximumPacketSize=i.properties.maximumPacketSize)}if(n===0)e.reconnecting=!1,e._onConnect(i);else if(n>0){let l=new h.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[n]}`,n);e.emit("error",l),e.options.reconnectOnConnackError&&e._cleanUp(!0)}};s.default=t}),xl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(o,a,h)=>{o.log("handling pubrel packet");let t=typeof h<"u"?h:o.noop,{messageId:e}=a,i={cmd:"pubcomp",messageId:e};o.incomingStore.get(a,(r,n)=>{r?o._sendPacket(i,t):(o.emit("message",n.topic,n.payload,n),o.handleMessage(n,l=>{if(l)return t(l);o.incomingStore.del(n,o.noop),o._sendPacket(i,t)}))})};s.default=c}),Ml=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(s,"__esModule",{value:!0});var o=c(dl()),a=c(gl()),h=c(Ol()),t=c(Br()),e=c(xl()),i=(r,n,l)=>{let{options:f}=r;if(f.protocolVersion===5&&f.properties&&f.properties.maximumPacketSize&&f.properties.maximumPacketSize<n.length)return r.emit("error",new Error(`exceeding packets size ${n.cmd}`)),r.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),r;switch(r.log("_handlePacket :: emitting packetreceive"),r.emit("packetreceive",n),n.cmd){case"publish":(0,o.default)(r,n,l);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":r.reschedulePing(),(0,t.default)(r,n),l();break;case"pubrel":r.reschedulePing(),(0,e.default)(r,n,l);break;case"connack":(0,h.default)(r,n),l();break;case"auth":r.reschedulePing(),(0,a.default)(r,n),l();break;case"pingresp":r.log("_handlePacket :: received pingresp"),r.reschedulePing(!0),l();break;case"disconnect":r.emit("disconnect",n),l();break;default:r.log("_handlePacket :: unknown command"),l();break}};s.default=i}),As=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};s.default=c}),Bl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=class{aliasToTopic;max;length;constructor(o){this.aliasToTopic={},this.max=o}put(o,a){return a===0||a>this.max?!1:(this.aliasToTopic[a]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};s.default=c}),Nl=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0}),s.TypedEventEmitter=void 0;var o=c((Wt(),Re(Tt))),a=Yt(),h=class{};s.TypedEventEmitter=h,(0,a.applyMixin)(h,o.default)}),Ll=de((s,c)=>{ne(),se(),oe(),function(o,a){typeof s=="object"&&typeof c<"u"?a(s):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.fastUniqueNumbers={}))}(s,function(o){"use strict";var a=function(g){return function(_){var p=g(_);return _.add(p),p}},h=function(g){return function(_,p){return g.set(_,p),p}},t=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,e=536870912,i=e*2,r=function(g,_){return function(p){var m=_.get(p),E=m===void 0?p.size:m<i?m+1:0;if(!p.has(E))return g(p,E);if(p.size<e){for(;p.has(E);)E=Math.floor(Math.random()*i);return g(p,E)}if(p.size>t)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;p.has(E);)E=Math.floor(Math.random()*t);return g(p,E)}},n=new WeakMap,l=h(n),f=r(l,n),d=a(f);o.addUniqueNumber=d,o.generateUniqueNumber=f})}),Ul=de((s,c)=>{ne(),se(),oe(),function(o,a){typeof s=="object"&&typeof c<"u"?a(s,Ll()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimersBroker={},o.fastUniqueNumbers))}(s,function(o,a){"use strict";var h=function(i){return i.method!==void 0&&i.method==="call"},t=function(i){return i.error===null&&typeof i.id=="number"},e=function(i){var r=new Map([[0,function(){}]]),n=new Map([[0,function(){}]]),l=new Map,f=new Worker(i);f.addEventListener("message",function(m){var E=m.data;if(h(E)){var b=E.params,w=b.timerId,k=b.timerType;if(k==="interval"){var T=r.get(w);if(typeof T=="number"){var S=l.get(T);if(S===void 0||S.timerId!==w||S.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof T<"u")T();else throw new Error("The timer is in an undefined state.")}else if(k==="timeout"){var I=n.get(w);if(typeof I=="number"){var P=l.get(I);if(P===void 0||P.timerId!==w||P.timerType!==k)throw new Error("The timer is in an undefined state.")}else if(typeof I<"u")I(),n.delete(w);else throw new Error("The timer is in an undefined state.")}}else if(t(E)){var H=E.id,Y=l.get(H);if(Y===void 0)throw new Error("The timer is in an undefined state.");var le=Y.timerId,N=Y.timerType;l.delete(H),N==="interval"?r.delete(le):n.delete(le)}else{var $=E.error.message;throw new Error($)}});var d=function(m){var E=a.generateUniqueNumber(l);l.set(E,{timerId:m,timerType:"interval"}),r.set(m,E),f.postMessage({id:E,method:"clear",params:{timerId:m,timerType:"interval"}})},g=function(m){var E=a.generateUniqueNumber(l);l.set(E,{timerId:m,timerType:"timeout"}),n.set(m,E),f.postMessage({id:E,method:"clear",params:{timerId:m,timerType:"timeout"}})},_=function(m){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=a.generateUniqueNumber(r);return r.set(b,function(){m(),typeof r.get(b)=="function"&&f.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:b,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:b,timerType:"interval"}}),b},p=function(m){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=a.generateUniqueNumber(n);return n.set(b,m),f.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:b,timerType:"timeout"}}),b};return{clearInterval:d,clearTimeout:g,setInterval:_,setTimeout:p}};o.load=e})}),jl=de((s,c)=>{ne(),se(),oe(),function(o,a){typeof s=="object"&&typeof c<"u"?a(s,Ul()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimers={},o.workerTimersBroker))}(s,function(o,a){"use strict";var h=function(f,d){var g=null;return function(){if(g!==null)return g;var _=new Blob([d],{type:"application/javascript; charset=utf-8"}),p=URL.createObjectURL(_);return g=f(p),setTimeout(function(){return URL.revokeObjectURL(p)}),g}},t=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,e=h(a.load,t),i=function(f){return e().clearInterval(f)},r=function(f){return e().clearTimeout(f)},n=function(){var f;return(f=e()).setInterval.apply(f,arguments)},l=function(){var f;return(f=e()).setTimeout.apply(f,arguments)};o.clearInterval=i,o.clearTimeout=r,o.setInterval=n,o.setTimeout=l})}),Nr=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.isReactNativeBrowser=s.isWebWorker=void 0;var c=()=>typeof window<"u"?typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&xe?.versions?!Object.prototype.hasOwnProperty.call(xe.versions,"electron"):typeof window.document<"u":!1,o=()=>!!(typeof self=="object"&&self?.constructor?.name?.includes("WorkerGlobalScope")),a=()=>typeof navigator<"u"&&navigator.product==="ReactNative",h=c()||o()||a();s.isWebWorker=o(),s.isReactNativeBrowser=a(),s.default=h}),Dl=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(n,l,f,d){d===void 0&&(d=f);var g=Object.getOwnPropertyDescriptor(l,f);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(n,d,g)}:function(n,l,f,d){d===void 0&&(d=f),n[d]=l[f]}),o=s&&s.__setModuleDefault||(Object.create?function(n,l){Object.defineProperty(n,"default",{enumerable:!0,value:l})}:function(n,l){n.default=l}),a=s&&s.__importStar||function(){var n=function(l){return n=Object.getOwnPropertyNames||function(f){var d=[];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(d[d.length]=g);return d},n(l)};return function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var d=n(l),g=0;g<d.length;g++)d[g]!=="default"&&c(f,l,d[g]);return o(f,l),f}}();Object.defineProperty(s,"__esModule",{value:!0});var h=jl(),t=a(Nr()),e={set:h.setInterval,clear:h.clearInterval},i={set:(n,l)=>setInterval(n,l),clear:n=>clearInterval(n)},r=n=>{switch(n){case"native":return i;case"worker":return e;case"auto":default:return t.default&&!t.isWebWorker&&!t.isReactNativeBrowser?e:i}};s.default=r}),Is=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0});var o=c(Dl()),a=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(h,t){this.client=h,this.timer=typeof t=="object"&&"set"in t&&"clear"in t?t:(0,o.default)(t),this.setKeepalive(h.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(h){if(h*=1e3,isNaN(h)||h<=0||h>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${h}`);this._keepalive=h,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${h}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let h=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+h,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};s.default=a}),un=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(T,S,I,P){P===void 0&&(P=I);var H=Object.getOwnPropertyDescriptor(S,I);(!H||("get"in H?!S.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return S[I]}}),Object.defineProperty(T,P,H)}:function(T,S,I,P){P===void 0&&(P=I),T[P]=S[I]}),o=s&&s.__setModuleDefault||(Object.create?function(T,S){Object.defineProperty(T,"default",{enumerable:!0,value:S})}:function(T,S){T.default=S}),a=s&&s.__importStar||function(){var T=function(S){return T=Object.getOwnPropertyNames||function(I){var P=[];for(var H in I)Object.prototype.hasOwnProperty.call(I,H)&&(P[P.length]=H);return P},T(S)};return function(S){if(S&&S.__esModule)return S;var I={};if(S!=null)for(var P=T(S),H=0;H<P.length;H++)P[H]!=="default"&&c(I,S,P[H]);return o(I,S),I}}(),h=s&&s.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(s,"__esModule",{value:!0});var t=h(ul()),e=$t(),i=h(cl()),r=h(bt()),n=a(fl()),l=h(as()),f=h(Ml()),d=h(As()),g=h(Bl()),_=Yt(),p=Nl(),m=h(Is()),E=a(Nr()),b=globalThis.setImmediate||((...T)=>{let S=T.shift();(0,_.nextTick)(()=>{S(...T)})}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},k=class hn extends p.TypedEventEmitter{static VERSION=_.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(S,I){super(),this.options=I||{};for(let P in w)typeof this.options[P]>"u"?this.options[P]=w[P]:this.options[P]=I[P];this.log=this.options.log||(0,r.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",hn.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",I.protocol),this.log("MqttClient :: options.protocolVersion",I.protocolVersion),this.log("MqttClient :: options.username",I.username),this.log("MqttClient :: options.keepalive",I.keepalive),this.log("MqttClient :: options.reconnectPeriod",I.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",I.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",I.properties?I.properties.topicAliasMaximum:void 0),this.options.clientId=typeof I.clientId=="string"?I.clientId:hn.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=I.protocolVersion===5&&I.customHandleAcks?I.customHandleAcks:(...P)=>{P[3](null,0)},this.options.writeCache||(t.default.writeToStream.cacheNumbers=!1),this.streamBuilder=S,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new d.default:this.options.messageIdProvider,this.outgoingStore=I.outgoingStore||new l.default,this.incomingStore=I.incomingStore||new l.default,this.queueQoSZero=I.queueQoSZero===void 0?!0:I.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,I.properties&&I.properties.topicAliasMaximum>0&&(I.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new g.default(I.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:P}=this,H=()=>{let Y=P.shift();this.log("deliver :: entry %o",Y);let le=null;if(!Y){this._resubscribe();return}le=Y.packet,this.log("deliver :: call _sendPacket for %o",le);let N=!0;le.messageId&&le.messageId!==0&&(this.messageIdProvider.register(le.messageId)||(N=!1)),N?this._sendPacket(le,$=>{Y.cb&&Y.cb($),H()}):(this.log("messageId: %d has already used. The message is skipped and removed.",le.messageId),H())};this.log("connect :: sending queued packets"),H()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(S,I){I()}handleMessage(S,I){I()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let S=new e.Writable,I=t.default.parser(this.options),P=null,H=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new l.default,this.outgoingStore=this.options.outgoingStore||new l.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),I.on("packet",G=>{this.log("parser :: on packet push to packets array."),H.push(G)});let Y=()=>{this.log("work :: getting next packet in queue");let G=H.shift();if(G)this.log("work :: packet pulled from queue"),(0,f.default)(this,G,le);else{this.log("work :: no packets in queue");let V=P;P=null,this.log("work :: done flag is %s",!!V),V&&V()}},le=()=>{if(H.length)(0,_.nextTick)(Y);else{let G=P;P=null,G()}};S._write=(G,V,ue)=>{P=ue,this.log("writable stream :: parsing buffer"),I.parse(G),Y()};let N=G=>{this.log("streamErrorHandler :: error",G.message),G.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",G)):this.noop(G)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(S),this.stream.on("error",N),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let $={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&($.will=et(Ie({},this.options.will),{payload:this.options.will?.payload})),this.topicAliasRecv&&($.properties||($.properties={}),this.topicAliasRecv&&($.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket($),I.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let G=Ie({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(G)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(S,I,P,H){this.log("publish :: message `%s` to topic `%s`",I,S);let{options:Y}=this;typeof P=="function"&&(H=P,P=null),P=P||{},P=Ie({qos:0,retain:!1,dup:!1},P);let{qos:le,retain:N,dup:$,properties:G,cbStorePut:V}=P;if(this._checkDisconnecting(H))return this;let ue=()=>{let fe=0;if((le===1||le===2)&&(fe=this._nextId(),fe===null))return this.log("No messageId left"),!1;let pe={cmd:"publish",topic:S,payload:I,qos:le,retain:N,messageId:fe,dup:$};switch(Y.protocolVersion===5&&(pe.properties=G),this.log("publish :: qos",le),le){case 1:case 2:this.outgoing[pe.messageId]={volatile:!1,cb:H||this.noop},this.log("MqttClient:publish: packet cmd: %s",pe.cmd),this._sendPacket(pe,void 0,V);break;default:this.log("MqttClient:publish: packet cmd: %s",pe.cmd),this._sendPacket(pe,H,V);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ue())&&this._storeProcessingQueue.push({invoke:ue,cbStorePut:P.cbStorePut,callback:H}),this}publishAsync(S,I,P){return new Promise((H,Y)=>{this.publish(S,I,P,(le,N)=>{le?Y(le):H(N)})})}subscribe(S,I,P){let H=this.options.protocolVersion;typeof I=="function"&&(P=I),P=P||this.noop;let Y=!1,le=[];typeof S=="string"?(S=[S],le=S):Array.isArray(S)?le=S:typeof S=="object"&&(Y=S.resubscribe,delete S.resubscribe,le=Object.keys(S));let N=n.validateTopics(le);if(N!==null)return b(P,new Error(`Invalid topic ${N}`)),this;if(this._checkDisconnecting(P))return this.log("subscribe: discconecting true"),this;let $={qos:0};H===5&&($.nl=!1,$.rap=!1,$.rh=0),I=Ie(Ie({},$),I);let{properties:G}=I,V=[],ue=(ye,D)=>{if(D=D||I,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,ye)||this._resubscribeTopics[ye].qos<D.qos||Y){let ie={topic:ye,qos:D.qos};H===5&&(ie.nl=D.nl,ie.rap=D.rap,ie.rh=D.rh,ie.properties=G),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",ie.topic,ie.qos),V.push(ie)}};if(Array.isArray(S)?S.forEach(ye=>{this.log("subscribe: array topic %s",ye),ue(ye)}):Object.keys(S).forEach(ye=>{this.log("subscribe: object topic %s, %o",ye,S[ye]),ue(ye,S[ye])}),!V.length)return P(null,[]),this;let fe=(ye,D)=>{let ie={cmd:"subscribe",subscriptions:ye,messageId:D};if(G&&(ie.properties=G),this.options.resubscribe){this.log("subscribe :: resubscribe true");let he=[];ye.forEach(_e=>{if(this.options.reconnectPeriod>0){let J={qos:_e.qos};H===5&&(J.nl=_e.nl||!1,J.rap=_e.rap||!1,J.rh=_e.rh||0,J.properties=_e.properties),this._resubscribeTopics[_e.topic]=J,he.push(_e.topic)}}),this.messageIdToTopic[ie.messageId]=he}let R=new Promise((he,_e)=>{this.outgoing[ie.messageId]={volatile:!0,cb(J,ve){if(!J){let{granted:q}=ve;for(let x=0;x<q.length;x+=1)ye[x].qos=q[x]}J?_e(new _.ErrorWithSubackPacket(J.message,ve)):he(ve)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(ie),R},pe=()=>{let ye=this.options.subscribeBatchSize??V.length,D=[];for(let ie=0;ie<V.length;ie+=ye){let R=V.slice(ie,ie+ye),he=this._nextId();if(he===null)return this.log("No messageId left"),!1;D.push(fe(R,he))}return Promise.all(D).then(ie=>{P(null,V,ie.at(-1))}).catch(ie=>{P(ie,V,ie.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!pe())&&this._storeProcessingQueue.push({invoke:pe,callback:P}),this}subscribeAsync(S,I){return new Promise((P,H)=>{this.subscribe(S,I,(Y,le)=>{Y?H(Y):P(le)})})}unsubscribe(S,I,P){typeof S=="string"&&(S=[S]),typeof I=="function"&&(P=I),P=P||this.noop;let H=n.validateTopics(S);if(H!==null)return b(P,new Error(`Invalid topic ${H}`)),this;if(this._checkDisconnecting(P))return this;let Y=()=>{let le=this._nextId();if(le===null)return this.log("No messageId left"),!1;let N={cmd:"unsubscribe",messageId:le,unsubscriptions:[]};return typeof S=="string"?N.unsubscriptions=[S]:Array.isArray(S)&&(N.unsubscriptions=S),this.options.resubscribe&&N.unsubscriptions.forEach($=>{delete this._resubscribeTopics[$]}),typeof I=="object"&&I.properties&&(N.properties=I.properties),this.outgoing[N.messageId]={volatile:!0,cb:P},this.log("unsubscribe: call _sendPacket"),this._sendPacket(N),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Y())&&this._storeProcessingQueue.push({invoke:Y,callback:P}),this}unsubscribeAsync(S,I){return new Promise((P,H)=>{this.unsubscribe(S,I,(Y,le)=>{Y?H(Y):P(le)})})}end(S,I,P){this.log("end :: (%s)",this.options.clientId),(S==null||typeof S!="boolean")&&(P=P||I,I=S,S=!1),typeof I!="object"&&(P=P||I,I=null),this.log("end :: cb? %s",!!P),(!P||typeof P!="function")&&(P=this.noop);let H=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(le=>{this.outgoingStore.close(N=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),P){let $=le||N;this.log("end :: closeStores: invoking callback with args"),P($)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},Y=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,S),this._cleanUp(S,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,_.nextTick)(H)},I)};return this.disconnecting?(P(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,Y,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),Y()),this)}endAsync(S,I){return new Promise((P,H)=>{this.end(S,I,Y=>{Y?H(Y):P()})})}removeOutgoingMessage(S){if(this.outgoing[S]){let{cb:I}=this.outgoing[S];this._removeOutgoingAndStoreMessage(S,()=>{I(new Error("Message removed"))})}return this}reconnect(S){this.log("client reconnect");let I=()=>{S?(this.options.incomingStore=S.incomingStore,this.options.outgoingStore=S.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new l.default,this.outgoingStore=this.options.outgoingStore||new l.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=I:I(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(S=>{this.outgoing[S].volatile&&typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(S=>{typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_removeTopicAliasAndRecoverTopicName(S){let I;S.properties&&(I=S.properties.topicAlias);let P=S.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",I,P),P.length===0){if(typeof I>"u")return new Error("Unregistered Topic Alias");if(P=this.topicAliasSend.getTopicByAlias(I),typeof P>"u")return new Error("Unregistered Topic Alias");S.topic=P}I&&delete S.properties.topicAlias}_checkDisconnecting(S){return this.disconnecting&&(S&&S!==this.noop?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(S,I,P={}){if(I&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",I)),this.log("_cleanUp :: forced? %s",S),S)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let H=Ie({cmd:"disconnect"},P);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(H,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),b(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),I&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",I),I())}_storeAndSend(S,I,P){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let H=S,Y;if(H.cmd==="publish"&&(H=(0,i.default)(S),Y=this._removeTopicAliasAndRecoverTopicName(H),Y))return I&&I(Y);this.outgoingStore.put(H,le=>{if(le)return I&&I(le);P(),this._writePacket(S,I)})}_applyTopicAlias(S){if(this.options.protocolVersion===5&&S.cmd==="publish"){let I;S.properties&&(I=S.properties.topicAlias);let P=S.topic.toString();if(this.topicAliasSend)if(I){if(P.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",P,I),!this.topicAliasSend.put(P,I)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,I),new Error("Sending Topic Alias out of range")}else P.length!==0&&(this.options.autoAssignTopicAlias?(I=this.topicAliasSend.getAliasByTopic(P),I?(S.topic="",S.properties=et(Ie({},S.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",P,I)):(I=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(P,I),S.properties=et(Ie({},S.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",P,I))):this.options.autoUseTopicAlias&&(I=this.topicAliasSend.getAliasByTopic(P),I&&(S.topic="",S.properties=et(Ie({},S.properties),{topicAlias:I}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",P,I))));else if(I)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,I),new Error("Sending Topic Alias out of range")}}_noop(S){this.log("noop ::",S)}_writePacket(S,I){this.log("_writePacket :: packet: %O",S),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",S),this.log("_writePacket :: writing to stream");let P=t.default.writeToStream(S,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",P),!P&&I&&I!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",I)):I&&(this.log("_writePacket :: invoking cb"),I())}_sendPacket(S,I,P,H){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),P=P||this.noop,I=I||this.noop;let Y=this._applyTopicAlias(S);if(Y){I(Y);return}if(!this.connected){if(S.cmd==="auth"){this._writePacket(S,I);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(S,I,P);return}if(H){this._writePacket(S,I);return}switch(S.cmd){case"publish":break;case"pubrel":this._storeAndSend(S,I,P);return;default:this._writePacket(S,I);return}switch(S.qos){case 2:case 1:this._storeAndSend(S,I,P);break;case 0:default:this._writePacket(S,I);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(S,I,P){this.log("_storePacket :: packet: %o",S),this.log("_storePacket :: cb? %s",!!I),P=P||this.noop;let H=S;if(H.cmd==="publish"){H=(0,i.default)(S);let le=this._removeTopicAliasAndRecoverTopicName(H);if(le)return I&&I(le)}let Y=H.qos||0;Y===0&&this.queueQoSZero||H.cmd!=="publish"?this.queue.push({packet:H,cb:I}):Y>0?(I=this.outgoing[H.messageId]?this.outgoing[H.messageId].cb:null,this.outgoingStore.put(H,le=>{if(le)return I&&I(le);P()})):I&&I(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new m.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(S=!1){this.keepaliveManager&&this.options.keepalive&&(S||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let I=0;I<S.length;I++){let P={};P[S[I]]=this._resubscribeTopics[S[I]],P.resubscribe=!0,this.subscribe(P,{properties:P[S[I]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(S){if(this.disconnected){this.emit("connect",S);return}this.connackPacket=S,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let I=()=>{let P=this.outgoingStore.createStream(),H=()=>{P.destroy(),P=null,this._flushStoreProcessingQueue(),Y()},Y=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",H),P.on("error",N=>{Y(),this._flushStoreProcessingQueue(),this.removeListener("close",H),this.emit("error",N)});let le=()=>{if(!P)return;let N=P.read(1),$;if(!N){P.once("readable",le);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[N.messageId]){le();return}!this.disconnecting&&!this.reconnectTimer?($=this.outgoing[N.messageId]?this.outgoing[N.messageId].cb:null,this.outgoing[N.messageId]={volatile:!1,cb(G,V){$&&$(G,V),le()}},this._packetIdsDuringStoreProcessing[N.messageId]=!0,this.messageIdProvider.register(N.messageId)?this._sendPacket(N,void 0,void 0,!0):this.log("messageId: %d has already used.",N.messageId)):P.destroy&&P.destroy()};P.on("end",()=>{let N=!0;for(let $ in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[$]){N=!1;break}this.removeListener("close",H),N?(Y(),this._invokeAllStoreProcessingQueue(),this.emit("connect",S)):I()}),le()};I()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(S,I){delete this.outgoing[S],this.outgoingStore.del({messageId:S},(P,H)=>{I(P,H),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue()})}};s.default=k}),Fl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=Ss(),o=class{numberAllocator;lastId;constructor(){this.numberAllocator=new c.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(a){return this.numberAllocator.use(a)}deallocate(a){this.numberAllocator.free(a)}clear(){this.numberAllocator.clear()}};s.default=o});function Mt(s){throw new RangeError(Ts[s])}function lo(s,c){let o=s.split("@"),a="";o.length>1&&(a=o[0]+"@",s=o[1]);let h=function(t,e){let i=[],r=t.length;for(;r--;)i[r]=e(t[r]);return i}((s=s.replace(ks,".")).split("."),c).join(".");return a+h}function uo(s){let c=[],o=0,a=s.length;for(;o<a;){let h=s.charCodeAt(o++);if(h>=55296&&h<=56319&&o<a){let t=s.charCodeAt(o++);(64512&t)==56320?c.push(((1023&h)<<10)+(1023&t)+65536):(c.push(h),o--)}else c.push(h)}return c}var ho,co,ks,Ts,tt,br,Qr,Kr,Yr,Jr,kt,Wl=ze(()=>{ne(),se(),oe(),ho=/^xn--/,co=/[^\0-\x7E]/,ks=/[\x2E\u3002\uFF0E\uFF61]/g,Ts={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},tt=Math.floor,br=String.fromCharCode,Qr=function(s,c){return s+22+75*(s<26)-((c!=0)<<5)},Kr=function(s,c,o){let a=0;for(s=o?tt(s/700):s>>1,s+=tt(s/c);s>455;a+=36)s=tt(s/35);return tt(a+36*s/(s+38))},Yr=function(s){let c=[],o=s.length,a=0,h=128,t=72,e=s.lastIndexOf("-");e<0&&(e=0);for(let r=0;r<e;++r)s.charCodeAt(r)>=128&&Mt("not-basic"),c.push(s.charCodeAt(r));for(let r=e>0?e+1:0;r<o;){let n=a;for(let f=1,d=36;;d+=36){r>=o&&Mt("invalid-input");let g=(i=s.charCodeAt(r++))-48<10?i-22:i-65<26?i-65:i-97<26?i-97:36;(g>=36||g>tt((2147483647-a)/f))&&Mt("overflow"),a+=g*f;let _=d<=t?1:d>=t+26?26:d-t;if(g<_)break;let p=36-_;f>tt(2147483647/p)&&Mt("overflow"),f*=p}let l=c.length+1;t=Kr(a-n,l,n==0),tt(a/l)>2147483647-h&&Mt("overflow"),h+=tt(a/l),a%=l,c.splice(a++,0,h)}var i;return String.fromCodePoint(...c)},Jr=function(s){let c=[],o=(s=uo(s)).length,a=128,h=0,t=72;for(let r of s)r<128&&c.push(br(r));let e=c.length,i=e;for(e&&c.push("-");i<o;){let r=2147483647;for(let l of s)l>=a&&l<r&&(r=l);let n=i+1;r-a>tt((2147483647-h)/n)&&Mt("overflow"),h+=(r-a)*n,a=r;for(let l of s)if(l<a&&++h>2147483647&&Mt("overflow"),l==a){let f=h;for(let d=36;;d+=36){let g=d<=t?1:d>=t+26?26:d-t;if(f<g)break;let _=f-g,p=36-g;c.push(br(Qr(g+_%p,0))),f=tt(_/p)}c.push(br(Qr(f,0))),t=Kr(h,n,i==e),h=0,++i}++h,++a}return c.join("")},kt={version:"2.1.0",ucs2:{decode:uo,encode:s=>String.fromCodePoint(...s)},decode:Yr,encode:Jr,toASCII:function(s){return lo(s,function(c){return co.test(c)?"xn--"+Jr(c):c})},toUnicode:function(s){return lo(s,function(c){return ho.test(c)?Yr(c.slice(4).toLowerCase()):c})}},kt.decode,kt.encode,kt.toASCII,kt.toUnicode,kt.ucs2,kt.version});function ql(s,c){return Object.prototype.hasOwnProperty.call(s,c)}var fo,zt,po,nt,$l=ze(()=>{ne(),se(),oe(),fo=function(s,c,o,a){c=c||"&",o=o||"=";var h={};if(typeof s!="string"||s.length===0)return h;var t=/\+/g;s=s.split(c);var e=1e3;a&&typeof a.maxKeys=="number"&&(e=a.maxKeys);var i=s.length;e>0&&i>e&&(i=e);for(var r=0;r<i;++r){var n,l,f,d,g=s[r].replace(t,"%20"),_=g.indexOf(o);_>=0?(n=g.substr(0,_),l=g.substr(_+1)):(n=g,l=""),f=decodeURIComponent(n),d=decodeURIComponent(l),ql(h,f)?Array.isArray(h[f])?h[f].push(d):h[f]=[h[f],d]:h[f]=d}return h},zt=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}},po=function(s,c,o,a){return c=c||"&",o=o||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(h){var t=encodeURIComponent(zt(h))+o;return Array.isArray(s[h])?s[h].map(function(e){return t+encodeURIComponent(zt(e))}).join(c):t+encodeURIComponent(zt(s[h]))}).join(c):a?encodeURIComponent(zt(a))+o+encodeURIComponent(zt(s)):""},nt={},nt.decode=nt.parse=fo,nt.encode=nt.stringify=po,nt.decode,nt.encode,nt.parse,nt.stringify});function cn(){throw new Error("setTimeout has not been defined")}function fn(){throw new Error("clearTimeout has not been defined")}function Cs(s){if(dt===setTimeout)return setTimeout(s,0);if((dt===cn||!dt)&&setTimeout)return dt=setTimeout,setTimeout(s,0);try{return dt(s,0)}catch{try{return dt.call(null,s,0)}catch{return dt.call(this||Dt,s,0)}}}function Hl(){Ft&&Ut&&(Ft=!1,Ut.length?st=Ut.concat(st):fr=-1,st.length&&Ps())}function Ps(){if(!Ft){var s=Cs(Hl);Ft=!0;for(var c=st.length;c;){for(Ut=st,st=[];++fr<c;)Ut&&Ut[fr].run();fr=-1,c=st.length}Ut=null,Ft=!1,function(o){if(pt===clearTimeout)return clearTimeout(o);if((pt===fn||!pt)&&clearTimeout)return pt=clearTimeout,clearTimeout(o);try{pt(o)}catch{try{return pt.call(null,o)}catch{return pt.call(this||Dt,o)}}}(s)}}function go(s,c){(this||Dt).fun=s,(this||Dt).array=c}function ht(){}var mo,dt,pt,Dt,De,Ut,st,Ft,fr,Le,Vl=ze(()=>{ne(),se(),oe(),Dt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,De=mo={},function(){try{dt=typeof setTimeout=="function"?setTimeout:cn}catch{dt=cn}try{pt=typeof clearTimeout=="function"?clearTimeout:fn}catch{pt=fn}}(),st=[],Ft=!1,fr=-1,De.nextTick=function(s){var c=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)c[o-1]=arguments[o];st.push(new go(s,c)),st.length!==1||Ft||Cs(Ps)},go.prototype.run=function(){(this||Dt).fun.apply(null,(this||Dt).array)},De.title="browser",De.browser=!0,De.env={},De.argv=[],De.version="",De.versions={},De.on=ht,De.addListener=ht,De.once=ht,De.off=ht,De.removeListener=ht,De.removeAllListeners=ht,De.emit=ht,De.prependListener=ht,De.prependOnceListener=ht,De.listeners=function(s){return[]},De.binding=function(s){throw new Error("process.binding is not supported")},De.cwd=function(){return"/"},De.chdir=function(s){throw new Error("process.chdir is not supported")},De.umask=function(){return 0},Le=mo,Le.addListener,Le.argv,Le.binding,Le.browser,Le.chdir,Le.cwd,Le.emit,Le.env,Le.listeners,Le.nextTick,Le.off,Le.on,Le.once,Le.prependListener,Le.prependOnceListener,Le.removeAllListeners,Le.removeListener,Le.title,Le.umask,Le.version,Le.versions});function zl(){if(dn)return Ir;dn=!0;var s=Ir={},c,o;function a(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=a}catch{c=a}try{typeof clearTimeout=="function"?o=clearTimeout:o=h}catch{o=h}})();function t(p){if(c===setTimeout)return setTimeout(p,0);if((c===a||!c)&&setTimeout)return c=setTimeout,setTimeout(p,0);try{return c(p,0)}catch{try{return c.call(null,p,0)}catch{return c.call(this||Nt,p,0)}}}function e(p){if(o===clearTimeout)return clearTimeout(p);if((o===h||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(p);try{return o(p)}catch{try{return o.call(null,p)}catch{return o.call(this||Nt,p)}}}var i=[],r=!1,n,l=-1;function f(){!r||!n||(r=!1,n.length?i=n.concat(i):l=-1,i.length&&d())}function d(){if(!r){var p=t(f);r=!0;for(var m=i.length;m;){for(n=i,i=[];++l<m;)n&&n[l].run();l=-1,m=i.length}n=null,r=!1,e(p)}}s.nextTick=function(p){var m=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)m[E-1]=arguments[E];i.push(new g(p,m)),i.length===1&&!r&&t(d)};function g(p,m){(this||Nt).fun=p,(this||Nt).array=m}g.prototype.run=function(){(this||Nt).fun.apply(null,(this||Nt).array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function _(){}return s.on=_,s.addListener=_,s.once=_,s.off=_,s.removeListener=_,s.removeAllListeners=_,s.emit=_,s.prependListener=_,s.prependOnceListener=_,s.listeners=function(p){return[]},s.binding=function(p){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(p){throw new Error("process.chdir is not supported")},s.umask=function(){return 0},Ir}var Ir,dn,Nt,Be,Rs=ze(()=>{ne(),se(),oe(),Ir={},dn=!1,Nt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Be=zl(),Be.platform="browser",Be.addListener,Be.argv,Be.binding,Be.browser,Be.chdir,Be.cwd,Be.emit,Be.env,Be.listeners,Be.nextTick,Be.off,Be.on,Be.once,Be.prependListener,Be.prependOnceListener,Be.removeAllListeners,Be.removeListener,Be.title,Be.umask,Be.version,Be.versions});function Gl(){if(pn)return kr;pn=!0;var s=Be;function c(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function o(t,e){for(var i="",r=0,n=-1,l=0,f,d=0;d<=t.length;++d){if(d<t.length)f=t.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(n===d-1||l===1))if(n!==d-1&&l===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var g=i.lastIndexOf("/");if(g!==i.length-1){g===-1?(i="",r=0):(i=i.slice(0,g),r=i.length-1-i.lastIndexOf("/")),n=d,l=0;continue}}else if(i.length===2||i.length===1){i="",r=0,n=d,l=0;continue}}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+t.slice(n+1,d):i=t.slice(n+1,d),r=d-n-1;n=d,l=0}else f===46&&l!==-1?++l:l=-1}return i}function a(t,e){var i=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+r:i+t+r:r}var h={resolve:function(){for(var t="",e=!1,i,r=arguments.length-1;r>=-1&&!e;r--){var n;r>=0?n=arguments[r]:(i===void 0&&(i=s.cwd()),n=i),c(n),n.length!==0&&(t=n+"/"+t,e=n.charCodeAt(0)===47)}return t=o(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(c(t),t.length===0)return".";var e=t.charCodeAt(0)===47,i=t.charCodeAt(t.length-1)===47;return t=o(t,!e),t.length===0&&!e&&(t="."),t.length>0&&i&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return c(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];c(i),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":h.normalize(t)},relative:function(t,e){if(c(t),c(e),t===e||(t=h.resolve(t),e=h.resolve(e),t===e))return"";for(var i=1;i<t.length&&t.charCodeAt(i)===47;++i);for(var r=t.length,n=r-i,l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var f=e.length,d=f-l,g=n<d?n:d,_=-1,p=0;p<=g;++p){if(p===g){if(d>g){if(e.charCodeAt(l+p)===47)return e.slice(l+p+1);if(p===0)return e.slice(l+p)}else n>g&&(t.charCodeAt(i+p)===47?_=p:p===0&&(_=0));break}var m=t.charCodeAt(i+p),E=e.charCodeAt(l+p);if(m!==E)break;m===47&&(_=p)}var b="";for(p=i+_+1;p<=r;++p)(p===r||t.charCodeAt(p)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+e.slice(l+_):(l+=_,e.charCodeAt(l)===47&&++l,e.slice(l))},_makeLong:function(t){return t},dirname:function(t){if(c(t),t.length===0)return".";for(var e=t.charCodeAt(0),i=e===47,r=-1,n=!0,l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!n){r=l;break}}else n=!1;return r===-1?i?"/":".":i&&r===1?"//":t.slice(0,r)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');c(t);var i=0,r=-1,n=!0,l;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var f=e.length-1,d=-1;for(l=t.length-1;l>=0;--l){var g=t.charCodeAt(l);if(g===47){if(!n){i=l+1;break}}else d===-1&&(n=!1,d=l+1),f>=0&&(g===e.charCodeAt(f)?--f===-1&&(r=l):(f=-1,r=d))}return i===r?r=d:r===-1&&(r=t.length),t.slice(i,r)}else{for(l=t.length-1;l>=0;--l)if(t.charCodeAt(l)===47){if(!n){i=l+1;break}}else r===-1&&(n=!1,r=l+1);return r===-1?"":t.slice(i,r)}},extname:function(t){c(t);for(var e=-1,i=0,r=-1,n=!0,l=0,f=t.length-1;f>=0;--f){var d=t.charCodeAt(f);if(d===47){if(!n){i=f+1;break}continue}r===-1&&(n=!1,r=f+1),d===46?e===-1?e=f:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||r===-1||l===0||l===1&&e===r-1&&e===i+1?"":t.slice(e,r)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return a("/",t)},parse:function(t){c(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var i=t.charCodeAt(0),r=i===47,n;r?(e.root="/",n=1):n=0;for(var l=-1,f=0,d=-1,g=!0,_=t.length-1,p=0;_>=n;--_){if(i=t.charCodeAt(_),i===47){if(!g){f=_+1;break}continue}d===-1&&(g=!1,d=_+1),i===46?l===-1?l=_:p!==1&&(p=1):l!==-1&&(p=-1)}return l===-1||d===-1||p===0||p===1&&l===d-1&&l===f+1?d!==-1&&(f===0&&r?e.base=e.name=t.slice(1,d):e.base=e.name=t.slice(f,d)):(f===0&&r?(e.name=t.slice(1,l),e.base=t.slice(1,d)):(e.name=t.slice(f,l),e.base=t.slice(f,d)),e.ext=t.slice(l,d)),f>0?e.dir=t.slice(0,f-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,kr=h,kr}var kr,pn,gn,Ql=ze(()=>{ne(),se(),oe(),Rs(),kr={},pn=!1,gn=Gl()}),Os={};Qt(Os,{URL:()=>Ks,Url:()=>Hs,default:()=>Ce,fileURLToPath:()=>xs,format:()=>Vs,parse:()=>Qs,pathToFileURL:()=>Ms,resolve:()=>zs,resolveObject:()=>Gs});function Ze(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function ar(s,c,o){if(s&&rt.isObject(s)&&s instanceof Ze)return s;var a=new Ze;return a.parse(s,c,o),a}function Kl(){if(mn)return Tr;mn=!0;var s=Le;function c(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function o(t,e){for(var i="",r=0,n=-1,l=0,f,d=0;d<=t.length;++d){if(d<t.length)f=t.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(n===d-1||l===1))if(n!==d-1&&l===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var g=i.lastIndexOf("/");if(g!==i.length-1){g===-1?(i="",r=0):(i=i.slice(0,g),r=i.length-1-i.lastIndexOf("/")),n=d,l=0;continue}}else if(i.length===2||i.length===1){i="",r=0,n=d,l=0;continue}}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+t.slice(n+1,d):i=t.slice(n+1,d),r=d-n-1;n=d,l=0}else f===46&&l!==-1?++l:l=-1}return i}function a(t,e){var i=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+r:i+t+r:r}var h={resolve:function(){for(var t="",e=!1,i,r=arguments.length-1;r>=-1&&!e;r--){var n;r>=0?n=arguments[r]:(i===void 0&&(i=s.cwd()),n=i),c(n),n.length!==0&&(t=n+"/"+t,e=n.charCodeAt(0)===47)}return t=o(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(c(t),t.length===0)return".";var e=t.charCodeAt(0)===47,i=t.charCodeAt(t.length-1)===47;return t=o(t,!e),t.length===0&&!e&&(t="."),t.length>0&&i&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return c(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];c(i),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":h.normalize(t)},relative:function(t,e){if(c(t),c(e),t===e||(t=h.resolve(t),e=h.resolve(e),t===e))return"";for(var i=1;i<t.length&&t.charCodeAt(i)===47;++i);for(var r=t.length,n=r-i,l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var f=e.length,d=f-l,g=n<d?n:d,_=-1,p=0;p<=g;++p){if(p===g){if(d>g){if(e.charCodeAt(l+p)===47)return e.slice(l+p+1);if(p===0)return e.slice(l+p)}else n>g&&(t.charCodeAt(i+p)===47?_=p:p===0&&(_=0));break}var m=t.charCodeAt(i+p),E=e.charCodeAt(l+p);if(m!==E)break;m===47&&(_=p)}var b="";for(p=i+_+1;p<=r;++p)(p===r||t.charCodeAt(p)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+e.slice(l+_):(l+=_,e.charCodeAt(l)===47&&++l,e.slice(l))},_makeLong:function(t){return t},dirname:function(t){if(c(t),t.length===0)return".";for(var e=t.charCodeAt(0),i=e===47,r=-1,n=!0,l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!n){r=l;break}}else n=!1;return r===-1?i?"/":".":i&&r===1?"//":t.slice(0,r)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');c(t);var i=0,r=-1,n=!0,l;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var f=e.length-1,d=-1;for(l=t.length-1;l>=0;--l){var g=t.charCodeAt(l);if(g===47){if(!n){i=l+1;break}}else d===-1&&(n=!1,d=l+1),f>=0&&(g===e.charCodeAt(f)?--f===-1&&(r=l):(f=-1,r=d))}return i===r?r=d:r===-1&&(r=t.length),t.slice(i,r)}else{for(l=t.length-1;l>=0;--l)if(t.charCodeAt(l)===47){if(!n){i=l+1;break}}else r===-1&&(n=!1,r=l+1);return r===-1?"":t.slice(i,r)}},extname:function(t){c(t);for(var e=-1,i=0,r=-1,n=!0,l=0,f=t.length-1;f>=0;--f){var d=t.charCodeAt(f);if(d===47){if(!n){i=f+1;break}continue}r===-1&&(n=!1,r=f+1),d===46?e===-1?e=f:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||r===-1||l===0||l===1&&e===r-1&&e===i+1?"":t.slice(e,r)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return a("/",t)},parse:function(t){c(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var i=t.charCodeAt(0),r=i===47,n;r?(e.root="/",n=1):n=0;for(var l=-1,f=0,d=-1,g=!0,_=t.length-1,p=0;_>=n;--_){if(i=t.charCodeAt(_),i===47){if(!g){f=_+1;break}continue}d===-1&&(g=!1,d=_+1),i===46?l===-1?l=_:p!==1&&(p=1):l!==-1&&(p=-1)}return l===-1||d===-1||p===0||p===1&&l===d-1&&l===f+1?d!==-1&&(f===0&&r?e.base=e.name=t.slice(1,d):e.base=e.name=t.slice(f,d)):(f===0&&r?(e.name=t.slice(1,l),e.base=t.slice(1,d)):(e.name=t.slice(f,l),e.base=t.slice(f,d)),e.ext=t.slice(l,d)),f>0?e.dir=t.slice(0,f-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,Tr=h,Tr}function Yl(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Pr?Jl(s):Xl(s)}function Jl(s){let c=s.hostname,o=s.pathname;for(let a=0;a<o.length;a++)if(o[a]==="%"){let h=o.codePointAt(a+2)||32;if(o[a+1]==="2"&&h===102||o[a+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(js,"\\"),o=decodeURIComponent(o),c!=="")return`\\\\${c}${o}`;{let a=o.codePointAt(1)|32,h=o[2];if(a<Ls||a>Us||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Xl(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let c=s.pathname;for(let o=0;o<c.length;o++)if(c[o]==="%"){let a=c.codePointAt(o+2)||32;if(c[o+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function Zl(s){let c=bn.resolve(s),o=s.charCodeAt(s.length-1);(o===Ns||Pr&&o===Bs)&&c[c.length-1]!==bn.sep&&(c+="/");let a=new URL("file://");return c.includes("%")&&(c=c.replace(Ds,"%25")),!Pr&&c.includes("\\")&&(c=c.replace(Fs,"%5C")),c.includes(`
`)&&(c=c.replace(Ws,"%0A")),c.includes("\r")&&(c=c.replace(qs,"%0D")),c.includes("	")&&(c=c.replace($s,"%09")),a.pathname=c,a}function xs(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Rr?eu(s):tu(s)}function eu(s){let c=s.hostname,o=s.pathname;for(let a=0;a<o.length;a++)if(o[a]==="%"){let h=o.codePointAt(a+2)||32;if(o[a+1]==="2"&&h===102||o[a+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(ea,"\\"),o=decodeURIComponent(o),c!=="")return`\\\\${c}${o}`;{let a=o.codePointAt(1)|32,h=o[2];if(a<Xs||a>Zs||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function tu(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let c=s.pathname;for(let o=0;o<c.length;o++)if(c[o]==="%"){let a=c.codePointAt(o+2)||32;if(c[o+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function Ms(s){let c=gn.resolve(s),o=s.charCodeAt(s.length-1);(o===Js||Rr&&o===Ys)&&c[c.length-1]!==gn.sep&&(c+="/");let a=new URL("file://");return c.includes("%")&&(c=c.replace(ta,"%25")),!Rr&&c.includes("\\")&&(c=c.replace(ra,"%5C")),c.includes(`
`)&&(c=c.replace(ia,"%0A")),c.includes("\r")&&(c=c.replace(na,"%0D")),c.includes("	")&&(c=c.replace(oa,"%09")),a.pathname=c,a}var Ce,bo,rt,yo,_o,wo,vo,yr,Xr,Zr,ei,Eo,So,_r,Bt,wr,Tr,mn,bn,Ao,Bs,Ns,Ls,Us,Pr,js,Ds,Fs,Ws,qs,$s,Io,Hs,Vs,zs,Gs,Qs,Ks,Ys,Js,Xs,Zs,Rr,ea,ta,ra,ia,na,oa,ru=ze(()=>{ne(),se(),oe(),Wl(),$l(),Vl(),Ql(),Rs(),Ce={},bo=kt,rt={isString:function(s){return typeof s=="string"},isObject:function(s){return typeof s=="object"&&s!==null},isNull:function(s){return s===null},isNullOrUndefined:function(s){return s==null}},Ce.parse=ar,Ce.resolve=function(s,c){return ar(s,!1,!0).resolve(c)},Ce.resolveObject=function(s,c){return s?ar(s,!1,!0).resolveObject(c):c},Ce.format=function(s){return rt.isString(s)&&(s=ar(s)),s instanceof Ze?s.format():Ze.prototype.format.call(s)},Ce.Url=Ze,yo=/^([a-z0-9.+-]+:)/i,_o=/:[0-9]*$/,wo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,vo=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),yr=["'"].concat(vo),Xr=["%","/","?",";","#"].concat(yr),Zr=["/","?","#"],ei=/^[+a-z0-9A-Z_-]{0,63}$/,Eo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,So={javascript:!0,"javascript:":!0},_r={javascript:!0,"javascript:":!0},Bt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wr=nt,Ze.prototype.parse=function(s,c,o){if(!rt.isString(s))throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var a=s.indexOf("?"),h=a!==-1&&a<s.indexOf("#")?"?":"#",t=s.split(h);t[0]=t[0].replace(/\\/g,"/");var e=s=t.join(h);if(e=e.trim(),!o&&s.split("#").length===1){var i=wo.exec(e);if(i)return this.path=e,this.href=e,this.pathname=i[1],i[2]?(this.search=i[2],this.query=c?wr.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this}var r=yo.exec(e);if(r){var n=(r=r[0]).toLowerCase();this.protocol=n,e=e.substr(r.length)}if(o||r||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=e.substr(0,2)==="//";!l||r&&_r[r]||(e=e.substr(2),this.slashes=!0)}if(!_r[r]&&(l||r&&!Bt[r])){for(var f,d,g=-1,_=0;_<Zr.length;_++)(p=e.indexOf(Zr[_]))!==-1&&(g===-1||p<g)&&(g=p);for((d=g===-1?e.lastIndexOf("@"):e.lastIndexOf("@",g))!==-1&&(f=e.slice(0,d),e=e.slice(d+1),this.auth=decodeURIComponent(f)),g=-1,_=0;_<Xr.length;_++){var p;(p=e.indexOf(Xr[_]))!==-1&&(g===-1||p<g)&&(g=p)}g===-1&&(g=e.length),this.host=e.slice(0,g),e=e.slice(g),this.parseHost(),this.hostname=this.hostname||"";var m=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!m)for(var E=this.hostname.split(/\./),b=(_=0,E.length);_<b;_++){var w=E[_];if(w&&!w.match(ei)){for(var k="",T=0,S=w.length;T<S;T++)w.charCodeAt(T)>127?k+="x":k+=w[T];if(!k.match(ei)){var I=E.slice(0,_),P=E.slice(_+1),H=w.match(Eo);H&&(I.push(H[1]),P.unshift(H[2])),P.length&&(e="/"+P.join(".")+e),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=bo.toASCII(this.hostname));var Y=this.port?":"+this.port:"",le=this.hostname||"";this.host=le+Y,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),e[0]!=="/"&&(e="/"+e))}if(!So[n])for(_=0,b=yr.length;_<b;_++){var N=yr[_];if(e.indexOf(N)!==-1){var $=encodeURIComponent(N);$===N&&($=escape(N)),e=e.split(N).join($)}}var G=e.indexOf("#");G!==-1&&(this.hash=e.substr(G),e=e.slice(0,G));var V=e.indexOf("?");if(V!==-1?(this.search=e.substr(V),this.query=e.substr(V+1),c&&(this.query=wr.parse(this.query)),e=e.slice(0,V)):c&&(this.search="",this.query={}),e&&(this.pathname=e),Bt[n]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Y=this.pathname||"";var ue=this.search||"";this.path=Y+ue}return this.href=this.format(),this},Ze.prototype.format=function(){var s=this.auth||"";s&&(s=(s=encodeURIComponent(s)).replace(/%3A/i,":"),s+="@");var c=this.protocol||"",o=this.pathname||"",a=this.hash||"",h=!1,t="";this.host?h=s+this.host:this.hostname&&(h=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&rt.isObject(this.query)&&Object.keys(this.query).length&&(t=wr.stringify(this.query));var e=this.search||t&&"?"+t||"";return c&&c.substr(-1)!==":"&&(c+=":"),this.slashes||(!c||Bt[c])&&h!==!1?(h="//"+(h||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):h||(h=""),a&&a.charAt(0)!=="#"&&(a="#"+a),e&&e.charAt(0)!=="?"&&(e="?"+e),c+h+(o=o.replace(/[?#]/g,function(i){return encodeURIComponent(i)}))+(e=e.replace("#","%23"))+a},Ze.prototype.resolve=function(s){return this.resolveObject(ar(s,!1,!0)).format()},Ze.prototype.resolveObject=function(s){if(rt.isString(s)){var c=new Ze;c.parse(s,!1,!0),s=c}for(var o=new Ze,a=Object.keys(this),h=0;h<a.length;h++){var t=a[h];o[t]=this[t]}if(o.hash=s.hash,s.href==="")return o.href=o.format(),o;if(s.slashes&&!s.protocol){for(var e=Object.keys(s),i=0;i<e.length;i++){var r=e[i];r!=="protocol"&&(o[r]=s[r])}return Bt[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(s.protocol&&s.protocol!==o.protocol){if(!Bt[s.protocol]){for(var n=Object.keys(s),l=0;l<n.length;l++){var f=n[l];o[f]=s[f]}return o.href=o.format(),o}if(o.protocol=s.protocol,s.host||_r[s.protocol])o.pathname=s.pathname;else{for(var d=(s.pathname||"").split("/");d.length&&!(s.host=d.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),o.pathname=d.join("/")}if(o.search=s.search,o.query=s.query,o.host=s.host||"",o.auth=s.auth,o.hostname=s.hostname||s.host,o.port=s.port,o.pathname||o.search){var g=o.pathname||"",_=o.search||"";o.path=g+_}return o.slashes=o.slashes||s.slashes,o.href=o.format(),o}var p=o.pathname&&o.pathname.charAt(0)==="/",m=s.host||s.pathname&&s.pathname.charAt(0)==="/",E=m||p||o.host&&s.pathname,b=E,w=o.pathname&&o.pathname.split("/")||[],k=(d=s.pathname&&s.pathname.split("/")||[],o.protocol&&!Bt[o.protocol]);if(k&&(o.hostname="",o.port=null,o.host&&(w[0]===""?w[0]=o.host:w.unshift(o.host)),o.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(d[0]===""?d[0]=s.host:d.unshift(s.host)),s.host=null),E=E&&(d[0]===""||w[0]==="")),m)o.host=s.host||s.host===""?s.host:o.host,o.hostname=s.hostname||s.hostname===""?s.hostname:o.hostname,o.search=s.search,o.query=s.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),o.search=s.search,o.query=s.query;else if(!rt.isNullOrUndefined(s.search))return k&&(o.hostname=o.host=w.shift(),(H=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=H.shift(),o.host=o.hostname=H.shift())),o.search=s.search,o.query=s.query,rt.isNull(o.pathname)&&rt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!w.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var T=w.slice(-1)[0],S=(o.host||s.host||w.length>1)&&(T==="."||T==="..")||T==="",I=0,P=w.length;P>=0;P--)(T=w[P])==="."?w.splice(P,1):T===".."?(w.splice(P,1),I++):I&&(w.splice(P,1),I--);if(!E&&!b)for(;I--;I)w.unshift("..");!E||w[0]===""||w[0]&&w[0].charAt(0)==="/"||w.unshift(""),S&&w.join("/").substr(-1)!=="/"&&w.push("");var H,Y=w[0]===""||w[0]&&w[0].charAt(0)==="/";return k&&(o.hostname=o.host=Y?"":w.length?w.shift():"",(H=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=H.shift(),o.host=o.hostname=H.shift())),(E=E||o.host&&w.length)&&!Y&&w.unshift(""),w.length?o.pathname=w.join("/"):(o.pathname=null,o.path=null),rt.isNull(o.pathname)&&rt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=s.auth||o.auth,o.slashes=o.slashes||s.slashes,o.href=o.format(),o},Ze.prototype.parseHost=function(){var s=this.host,c=_o.exec(s);c&&((c=c[0])!==":"&&(this.port=c.substr(1)),s=s.substr(0,s.length-c.length)),s&&(this.hostname=s)},Ce.Url,Ce.format,Ce.resolve,Ce.resolveObject,Tr={},mn=!1,bn=Kl(),Ao=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ce.URL=typeof URL<"u"?URL:null,Ce.pathToFileURL=Zl,Ce.fileURLToPath=Yl,Ce.Url,Ce.format,Ce.resolve,Ce.resolveObject,Ce.URL,Bs=92,Ns=47,Ls=97,Us=122,Pr=Ao==="win32",js=/\//g,Ds=/%/g,Fs=/\\/g,Ws=/\n/g,qs=/\r/g,$s=/\t/g,Io=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ce.URL=typeof URL<"u"?URL:null,Ce.pathToFileURL=Ms,Ce.fileURLToPath=xs,Hs=Ce.Url,Vs=Ce.format,zs=Ce.resolve,Gs=Ce.resolveObject,Qs=Ce.parse,Ks=Ce.URL,Ys=92,Js=47,Xs=97,Zs=122,Rr=Io==="win32",ea=/\//g,ta=/%/g,ra=/\\/g,ia=/\n/g,na=/\r/g,oa=/\t/g}),iu=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),In=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.BufferedDuplex=void 0,s.writev=a;var c=$t(),o=(qe(),Re(We));function a(t,e){let i=new Array(t.length);for(let r=0;r<t.length;r++)typeof t[r].chunk=="string"?i[r]=o.Buffer.from(t[r].chunk,"utf8"):i[r]=t[r].chunk;this._write(o.Buffer.concat(i),"binary",e)}var h=class extends c.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(t,e,i){super({objectMode:!0}),this.proxy=e,this.socket=i,this.writeQueue=[],t.objectMode||(this._writev=a.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",r=>{!this.destroyed&&this.readable&&this.push(r)})}_read(t){this.proxy.read(t)}_write(t,e,i){this.isSocketOpen?this.writeToProxy(t,e,i):this.writeQueue.push({chunk:t,encoding:e,cb:i})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,e){this.writeQueue=[],this.proxy.destroy(),e(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,e,i){this.proxy.write(t,e)===!1?this.proxy.once("drain",i):i()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:e,cb:i}=this.writeQueue.shift();this.writeToProxy(t,e,i)}}};s.BufferedDuplex=h}),vr=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(s,"__esModule",{value:!0}),s.streamBuilder=s.browserStreamBuilder=void 0;var o=(qe(),Re(We)),a=c(iu()),h=c(bt()),t=$t(),e=c(Nr()),i=In(),r=(0,h.default)("mqttjs:ws"),n=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function l(E,b){let w=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(w=E.transformWsUrl(w,E,b)),w}function f(E){let b=E;return E.port||(E.protocol==="wss"?b.port=443:b.port=80),E.path||(b.path="/"),E.wsOptions||(b.wsOptions={}),!e.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&n.forEach(w=>{Object.prototype.hasOwnProperty.call(E,w)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,w)&&(b.wsOptions[w]=E[w])}),b}function d(E){let b=f(E);if(b.hostname||(b.hostname=b.host),!b.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let w=new URL(document.URL);b.hostname=w.hostname,b.port||(b.port=Number(w.port))}return b.objectMode===void 0&&(b.objectMode=!(b.binary===!0||b.binary===void 0)),b}function g(E,b,w){r("createWebSocket"),r(`protocol: ${w.protocolId} ${w.protocolVersion}`);let k=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";r(`creating new Websocket for url: ${b} and protocol: ${k}`);let T;return w.createWebsocket?T=w.createWebsocket(b,[k],w):T=new a.default(b,[k],w.wsOptions),T}function _(E,b){let w=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt",k=l(b,E),T;return b.createWebsocket?T=b.createWebsocket(k,[w],b):T=new WebSocket(k,[w]),T.binaryType="arraybuffer",T}var p=(E,b)=>{r("streamBuilder");let w=f(b);w.hostname=w.hostname||w.host||"localhost";let k=l(w,E),T=g(E,k,w),S=a.default.createWebSocketStream(T,w.wsOptions);return S.url=k,T.on("close",()=>{S.destroy()}),S};s.streamBuilder=p;var m=(E,b)=>{r("browserStreamBuilder");let w,k=d(b).browserBufferSize||1024*512,T=b.browserBufferTimeout||1e3,S=!b.objectMode,I=_(E,b),P=Y(b,V,ue);b.objectMode||(P._writev=i.writev.bind(P)),P.on("close",()=>{I.close()});let H=typeof I.addEventListener<"u";I.readyState===I.OPEN?(w=P,w.socket=I):(w=new i.BufferedDuplex(b,P,I),H?I.addEventListener("open",le):I.onopen=le),H?(I.addEventListener("close",N),I.addEventListener("error",$),I.addEventListener("message",G)):(I.onclose=N,I.onerror=$,I.onmessage=G);function Y(fe,pe,ye){let D=new t.Transform({objectMode:fe.objectMode});return D._write=pe,D._flush=ye,D}function le(){r("WebSocket onOpen"),w instanceof i.BufferedDuplex&&w.socketReady()}function N(fe){r("WebSocket onClose",fe),w.end(),w.destroy()}function $(fe){r("WebSocket onError",fe);let pe=new Error("WebSocket error");pe.event=fe,w.destroy(pe)}function G(fe){return Me(this,null,function*(){if(!P||P.destroyed||!P.readable)return;let{data:pe}=fe;pe instanceof ArrayBuffer?pe=o.Buffer.from(pe):pe instanceof Blob?pe=o.Buffer.from(yield new Response(pe).arrayBuffer()):pe=o.Buffer.from(pe,"utf8"),P.push(pe)})}function V(fe,pe,ye){if(I.bufferedAmount>k){setTimeout(V,T,fe,pe,ye);return}S&&typeof fe=="string"&&(fe=o.Buffer.from(fe,"utf8"));try{I.send(fe)}catch(D){return ye(D)}ye()}function ue(fe){I.close(),fe()}return w};s.browserStreamBuilder=m}),kn={};Qt(kn,{Server:()=>Ne,Socket:()=>Ne,Stream:()=>Ne,_createServerHandle:()=>Ne,_normalizeArgs:()=>Ne,_setSimultaneousAccepts:()=>Ne,connect:()=>Ne,createConnection:()=>Ne,createServer:()=>Ne,default:()=>sa,isIP:()=>Ne,isIPv4:()=>Ne,isIPv6:()=>Ne});function Ne(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var sa,aa=ze(()=>{ne(),se(),oe(),sa={_createServerHandle:Ne,_normalizeArgs:Ne,_setSimultaneousAccepts:Ne,connect:Ne,createConnection:Ne,createServer:Ne,isIP:Ne,isIPv4:Ne,isIPv6:Ne,Server:Ne,Socket:Ne,Stream:Ne}}),la=de((s,c)=>{ne(),se(),oe(),c.exports={}}),ko=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(s,"__esModule",{value:!0});var o=c((aa(),Re(kn))),a=c(bt()),h=c(la()),t=(0,a.default)("mqttjs:tcp"),e=(i,r)=>{if(r.port=r.port||1883,r.hostname=r.hostname||r.host||"localhost",r.socksProxy)return(0,h.default)(r.hostname,r.port,r.socksProxy,{timeout:r.socksTimeout});let{port:n,path:l}=r,f=r.hostname;return t("port %d and host %s",n,f),o.default.createConnection({port:n,host:f,path:l})};s.default=e}),ua={};Qt(ua,{default:()=>ha});var ha,nu=ze(()=>{ne(),se(),oe(),ha={}}),To=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(s,"__esModule",{value:!0});var o=(nu(),Re(ua)),a=c((aa(),Re(kn))),h=c(bt()),t=c(la()),e=(0,h.default)("mqttjs:tls");function i(n){let _=n,{host:l,port:f,socksProxy:d}=_,g=qr(_,["host","port","socksProxy"]);if(d!==void 0){let p=(0,t.default)(l,f,d,{timeout:n.socksTimeout});return(0,o.connect)(et(Ie({},g),{socket:p}))}return(0,o.connect)(n)}var r=(n,l)=>{l.port=l.port||8883,l.host=l.hostname||l.host||"localhost",a.default.isIP(l.host)===0&&(l.servername=l.host),l.rejectUnauthorized=l.rejectUnauthorized!==!1,delete l.path,e("port %d host %s rejectUnauthorized %b",l.port,l.host,l.rejectUnauthorized);let f=i(l);f.on("secureConnect",()=>{l.rejectUnauthorized&&!f.authorized?f.emit("error",new Error("TLS not authorized")):f.removeListener("error",d)});function d(g){l.rejectUnauthorized&&n.emit("error",g),f.end()}return f.on("error",d),f};s.default=r}),Co=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(qe(),Re(We)),o=$t(),a=In(),h,t,e;function i(){let d=new o.Transform;return d._write=(g,_,p)=>{h.send({data:g.buffer,success(){p()},fail(m){p(new Error(m))}})},d._flush=g=>{h.close({success(){g()}})},d}function r(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function n(d,g){let _=d.protocol==="wxs"?"wss":"ws",p=`${_}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(p=`${_}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(p=d.transformWsUrl(p,d,g)),p}function l(){h.onOpen(()=>{e.socketReady()}),h.onMessage(d=>{let{data:g}=d;g instanceof ArrayBuffer?g=c.Buffer.from(g):g=c.Buffer.from(g,"utf8"),t.push(g)}),h.onClose(()=>{e.emit("close"),e.end(),e.destroy()}),h.onError(d=>{let g=new Error(d.errMsg);e.destroy(g)})}var f=(d,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let _=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";r(g);let p=n(g,d);h=wx.connectSocket({url:p,protocols:[_]}),t=i(),e=new a.BufferedDuplex(g,t,h),e._destroy=(E,b)=>{h.close({success(){b&&b(E)}})};let m=e.destroy;return e.destroy=(E,b)=>(e.destroy=m,setTimeout(()=>{h.close({fail(){e._destroy(E,b)}})},0),e),l(),e};s.default=f}),Po=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(qe(),Re(We)),o=$t(),a=In(),h,t,e,i=!1;function r(){let g=new o.Transform;return g._write=(_,p,m)=>{h.sendSocketMessage({data:_.buffer,success(){m()},fail(){m(new Error)}})},g._flush=_=>{h.closeSocket({success(){_()}})},g}function n(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function l(g,_){let p=g.protocol==="alis"?"wss":"ws",m=`${p}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(m=`${p}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(m=g.transformWsUrl(m,g,_)),m}function f(){i||(i=!0,h.onSocketOpen(()=>{e.socketReady()}),h.onSocketMessage(g=>{if(typeof g.data=="string"){let _=c.Buffer.from(g.data,"base64");t.push(_)}else{let _=new FileReader;_.addEventListener("load",()=>{if(_.result instanceof ArrayBuffer){t.push(c.Buffer.from(_.result));return}t.push(c.Buffer.from(_.result,"utf-8"))}),_.readAsArrayBuffer(g.data)}}),h.onSocketClose(()=>{e.end(),e.destroy()}),h.onSocketError(g=>{e.destroy(g)}))}var d=(g,_)=>{if(_.hostname=_.hostname||_.host,!_.hostname)throw new Error("Could not determine host. Specify host manually.");let p=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";n(_);let m=l(_,g);return h=_.my,h.connectSocket({url:m,protocols:p}),t=r(),e=new a.BufferedDuplex(_,t,h),f(),e};s.default=d}),ou=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0}),s.connectAsync=l;var o=c(bt()),a=c((ru(),Re(Os))),h=c(un()),t=c(Nr());typeof xe?.nextTick!="function"&&(xe.nextTick=setImmediate);var e=(0,o.default)("mqttjs"),i=null;function r(f){let d;if(f.auth)if(d=f.auth.match(/^(.+):(.+)$/),d){let[,g,_]=d;f.username=g,f.password=_}else f.username=f.auth}function n(f,d){if(e("connecting to an MQTT broker..."),typeof f=="object"&&!d&&(d=f,f=""),d=d||{},f&&typeof f=="string"){let p=a.default.parse(f,!0),m={};if(p.port!=null&&(m.port=Number(p.port)),m.host=p.hostname,m.query=p.query,m.auth=p.auth,m.protocol=p.protocol,m.path=p.path,d=Ie(Ie({},m),d),!d.protocol)throw new Error("Missing protocol");d.protocol=d.protocol.replace(/:$/,"")}if(d.unixSocket=d.unixSocket||d.protocol?.includes("+unix"),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!d.protocol?.startsWith("ws")&&!d.protocol?.startsWith("wx")&&delete d.path,r(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),t.default||d.unixSocket?d.socksProxy=void 0:d.socksProxy===void 0&&typeof xe<"u"&&(d.socksProxy=xe.env.MQTTJS_SOCKS_PROXY),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(i||(i={},!t.default&&!d.forceNativeWebSocket?(i.ws=vr().streamBuilder,i.wss=vr().streamBuilder,i.mqtt=ko().default,i.tcp=ko().default,i.ssl=To().default,i.tls=i.ssl,i.mqtts=To().default):(i.ws=vr().browserStreamBuilder,i.wss=vr().browserStreamBuilder,i.wx=Co().default,i.wxs=Co().default,i.ali=Po().default,i.alis=Po().default)),!i[d.protocol]){let p=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((m,E)=>p&&E%2===0?!1:typeof i[m]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function g(p){return d.servers&&((!p._reconnectCount||p._reconnectCount===d.servers.length)&&(p._reconnectCount=0),d.host=d.servers[p._reconnectCount].host,d.port=d.servers[p._reconnectCount].port,d.protocol=d.servers[p._reconnectCount].protocol?d.servers[p._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,p._reconnectCount++),e("calling streambuilder for",d.protocol),i[d.protocol](p,d)}let _=new h.default(g,d);return _.on("error",()=>{}),_}function l(f,d,g=!0){return new Promise((_,p)=>{let m=n(f,d),E={connect:w=>{b(),_(m)},end:()=>{b(),_(m)},error:w=>{b(),m.end(),p(w)}};g===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function b(){Object.keys(E).forEach(w=>{m.off(w,E[w])})}Object.keys(E).forEach(w=>{m.on(w,E[w])})})}s.default=n}),Ro=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(g,_,p,m){m===void 0&&(m=p);var E=Object.getOwnPropertyDescriptor(_,p);(!E||("get"in E?!_.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return _[p]}}),Object.defineProperty(g,m,E)}:function(g,_,p,m){m===void 0&&(m=p),g[m]=_[p]}),o=s&&s.__setModuleDefault||(Object.create?function(g,_){Object.defineProperty(g,"default",{enumerable:!0,value:_})}:function(g,_){g.default=_}),a=s&&s.__importStar||function(){var g=function(_){return g=Object.getOwnPropertyNames||function(p){var m=[];for(var E in p)Object.prototype.hasOwnProperty.call(p,E)&&(m[m.length]=E);return m},g(_)};return function(_){if(_&&_.__esModule)return _;var p={};if(_!=null)for(var m=g(_),E=0;E<m.length;E++)m[E]!=="default"&&c(p,_,m[E]);return o(p,_),p}}(),h=s&&s.__exportStar||function(g,_){for(var p in g)p!=="default"&&!Object.prototype.hasOwnProperty.call(_,p)&&c(_,g,p)},t=s&&s.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=s.KeepaliveManager=s.UniqueMessageIdProvider=s.DefaultMessageIdProvider=s.Store=s.MqttClient=s.connectAsync=s.connect=s.Client=void 0;var e=t(un());s.MqttClient=e.default;var i=t(As());s.DefaultMessageIdProvider=i.default;var r=t(Fl());s.UniqueMessageIdProvider=r.default;var n=t(as());s.Store=n.default;var l=a(ou());s.connect=l.default,Object.defineProperty(s,"connectAsync",{enumerable:!0,get:function(){return l.connectAsync}});var f=t(Is());s.KeepaliveManager=f.default,s.Client=e.default,h(un(),s),h(Yt(),s);var d=Br();Object.defineProperty(s,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),su=de(s=>{ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(e,i,r,n){n===void 0&&(n=r);var l=Object.getOwnPropertyDescriptor(i,r);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[r]}}),Object.defineProperty(e,n,l)}:function(e,i,r,n){n===void 0&&(n=r),e[n]=i[r]}),o=s&&s.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),a=s&&s.__importStar||function(){var e=function(i){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[n.length]=l);return n},e(i)};return function(i){if(i&&i.__esModule)return i;var r={};if(i!=null)for(var n=e(i),l=0;l<n.length;l++)n[l]!=="default"&&c(r,i,n[l]);return o(r,i),r}}(),h=s&&s.__exportStar||function(e,i){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(i,r)&&c(i,e,r)};Object.defineProperty(s,"__esModule",{value:!0});var t=a(Ro());s.default=t,h(Ro(),s)}),ca=su();var Lr=class s{client;BROKER_URL="ws://test.mosquitto.org:8080";TOPIC="will/publica";constructor(){this.client=ca.connect(this.BROKER_URL),this.setupListeners()}setupListeners(){this.client.on("connect",()=>{console.log("\u2705 MQTT conectado"),this.client.subscribe(this.TOPIC,c=>{c||console.log(`\u{1F4E1} Suscrito a ${this.TOPIC}`)})}),this.client.on("message",(c,o)=>{console.log(`\u{1F4E5} Mensaje recibido en ${c}:`,o.toString())}),this.client.on("error",c=>{console.error("\u274C Error MQTT:",c)})}getClient(){return this.client}publish(c,o){this.client.publish(c,o)}subscribe(c){this.client.subscribe(c)}static \u0275fac=function(o){return new(o||s)};static \u0275prov=Bn({token:s,factory:s.\u0275fac,providedIn:"root"})};var fa=class s{constructor(c){this.mqttService=c}temp1=0;temp2=0;thresholds={"-40":{color:"#7a96f1ff"},15:{color:"#2196f3"},35:{color:"#ffc107"},60:{color:"#f44336"}};ngOnInit(){this.mqttService.getClient().on("message",(c,o)=>{let a=JSON.parse(o.toString());a&&a.temperatura_uno!==void 0&&(this.temp1=a.temperatura_uno,this.temp2=a.temperatura_dos)})}static \u0275fac=function(o){return new(o||s)(Xt(Lr))};static \u0275cmp=gr({type:s,selectors:[["app-dashboard"]],decls:9,vars:24,consts:[[1,"card-container"],[1,"card"],[1,"title"],[3,"size","value","min","max","thick","label","append","type","cap","animate","duration","thresholds"]],template:function(o,a){o&1&&(Ot(0,"div",0)(1,"div",1)(2,"h3",2),At(3,"Sensor Superior"),ut(),tr(4,"ngx-gauge",3),ut(),Ot(5,"div",1)(6,"h3",2),At(7,"Sensor Inferior"),ut(),tr(8,"ngx-gauge",3),ut()()),o&2&&(Fe(4),He("size",400)("value",a.temp1)("min",-40)("max",80)("thick",20)("label","Temperatura")("append","\xB0C")("type","arch")("cap","round")("animate",!0)("duration",800)("thresholds",a.thresholds),Fe(4),He("size",400)("value",a.temp2)("min",-40)("max",80)("thick",20)("label","Temperatura")("append","\xB0C")("type","arch")("cap","round")("animate",!0)("duration",800)("thresholds",a.thresholds))},dependencies:[eo,Zn],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;padding:1rem}.card[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:1rem;box-shadow:0 4px 12px #0000001a;max-width:450px;width:100%;text-align:center}.title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1rem;color:#333}"]})};export{fa as Dashboard};
