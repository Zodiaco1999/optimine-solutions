import{g as Vn,h as zn,i as Qn,j as Gn}from"./chunk-6A55XQWV.js";import{$a as gr,Aa as Un,Ba as Kt,Fa as fr,Ga as Dn,Ha as Yt,Ka as Jt,R as Bn,S as Nn,Sa as Fn,Ya as Ve,Za as dr,_a as pr,a as $e,b as Ft,c as Mn,cb as Wt,d as xe,db as qt,e as Ke,f as at,g as _t,h as Ye,ib as Xt,jb as Wn,ka as jn,kb as Zt,lb as er,mb as mr,na as Ln,nb as wt,ob as vt,qb as qr,rb as qn,tb as tr,ub as rr,wa as We,yb as $n,zb as Hn}from"./chunk-SV4FBOOP.js";var _a=["canvas"],wa=["rLabel"],va=["reading"],Ea=[[["ngx-gauge-prepend"]],[["ngx-gauge-value"]],[["ngx-gauge-append"]],[["ngx-gauge-label"]]],Sa=["ngx-gauge-prepend","ngx-gauge-value","ngx-gauge-append","ngx-gauge-label"];function Aa(s,c){s&1&&Zt(0,0,["*ngSwitchCase","true"])}function ka(s,c){if(s&1&&(Wt(0),tr(1),qt()),s&2){let o=Xt();We(),rr(o.prepend)}}function Ia(s,c){s&1&&Zt(0,1,["*ngSwitchCase","true"])}function Ta(s,c){if(s&1&&(Wt(0),tr(1),$n(2,"number"),qt()),s&2){let o=Xt();We(),rr(Hn(2,1,o.value))}}function Ca(s,c){s&1&&Zt(0,2,["*ngSwitchCase","true"])}function Oa(s,c){if(s&1&&(Wt(0),tr(1),qt()),s&2){let o=Xt();We(),rr(o.append)}}function Ra(s,c){s&1&&Zt(0,3,["*ngSwitchCase","true"])}function Pa(s,c){if(s&1&&(Wt(0),tr(1),qt()),s&2){let o=Xt();We(),rr(o.label)}}function Kn(s,c,o){return Math.max(c,Math.min(o,s))}function xa(s){return s!=null&&`${s}`!="false"}function ir(s,c=0){return isNaN(parseFloat(s))||isNaN(Number(s))?c:Number(s)}function Yn(s){return`${s}px`}function Jn(s){return s!=null&&!isNaN(parseFloat(s))&&!isNaN(Number(s))}var Ma=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Yt({type:c,selectors:[["ngx-gauge-append"]],exportAs:["ngxGaugeAppend"],standalone:!1});let s=c;return s})(),Ba=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Yt({type:c,selectors:[["ngx-gauge-prepend"]],exportAs:["ngxGaugePrepend"],standalone:!1});let s=c;return s})(),Na=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Yt({type:c,selectors:[["ngx-gauge-value"]],exportAs:["ngxGaugeValue"],standalone:!1});let s=c;return s})(),ja=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275dir=Yt({type:c,selectors:[["ngx-gauge-label"]],exportAs:["ngxGaugeLabel"],standalone:!1});let s=c;return s})(),rt={MIN:0,MAX:100,TYPE:"arch",THICK:4,FOREGROUND_COLOR:"rgba(0, 150, 136, 1)",BACKGROUND_COLOR:"rgba(0, 0, 0, 0.1)",CAP:"butt",SIZE:200},Zn=(()=>{let c=class c{get size(){return this._size}set size(a){this._size=ir(a)}get margin(){return this._margin}set margin(a){this._margin=ir(a)}get min(){return this._min}set min(a){this._min=ir(a,rt.MIN)}get animate(){return this._animate}set animate(a){this._animate=xa(a)}get max(){return this._max}set max(a){this._max=ir(a,rt.MAX)}get value(){return this._value}set value(a){this._value=ir(a)}constructor(a,h){this._elementRef=a,this._renderer=h,this._size=rt.SIZE,this._min=rt.MIN,this._max=rt.MAX,this._animate=!0,this._margin=0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=rt.TYPE,this.cap=rt.CAP,this.thick=rt.THICK,this.foregroundColor=rt.FOREGROUND_COLOR,this.backgroundColor=rt.BACKGROUND_COLOR,this.thresholds=Object.create(null),this.markers=Object.create(null),this._value=0,this.duration=1200}ngOnInit(){this.markers&&Object.keys(this.markers).length>0&&!this._margin&&(this._margin=10)}ngOnChanges(a){let h=a.thick||a.type||a.cap||a.size,t=a.value||a.min||a.max;if(this._initialized){if(t){let e;if(a.value){e=Number(a.value.currentValue),e=isNaN(e)?0:e;let i=Number(a.value.previousValue);this._oldChangeVal=isNaN(i)?this._oldChangeVal:i}this._update(e,this._oldChangeVal)}h&&(this._destroy(),this._init())}}_updateSize(){this._renderer.setStyle(this._elementRef.nativeElement,"width",Yn(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",Yn(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-this.size*.22/2)+"px)")}ngAfterViewInit(){this._canvas&&this._init()}ngOnDestroy(){this._destroy()}_getBounds(a){let h,t,e,i;return a=="semi"?(h=Math.PI,t=2*Math.PI,e=180,i=360):a=="full"?(h=1.5*Math.PI,t=3.5*Math.PI,e=270,i=e+360):a==="arch"&&(h=.8*Math.PI,t=2.2*Math.PI,e=180-.2*180,i=360+.2*180),{head:h,tail:t,start:e,end:i}}_drawShell(a,h,t,e){let i=this._getCenter(),r=this._getRadius();if(this._initialized){this._clear(),this._drawMarkersAndTicks();let n=this._getBackgroundColorRanges();if(this._context.lineWidth=this.thick,n&&n.length>0){this._context.lineCap="butt";for(let l=0;l<n.length;++l){let f=n[l];this._context.beginPath(),this._context.strokeStyle=f.backgroundColor?f.backgroundColor:f.bgOpacity?f.color:this.backgroundColor,f.bgOpacity!==void 0&&f.bgOpacity!==null&&(this._context.globalAlpha=f.bgOpacity),this._context.arc(i.x,i.y,r,this._getDisplacement(f.start),this._getDisplacement(f.end),!1),this._context.stroke(),this._context.globalAlpha=1}}else this._context.lineCap=this.cap,this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(i.x,i.y,r,a,t,!1),this._context.stroke();this._drawFill(a,h,t,e)}}_drawFill(a,h,t,e){let i=this._getCenter(),r=this._getRadius();this._context.lineCap=this.cap,this._context.lineWidth=this.thick,h=Math.max(h,a),h=Math.min(h,t),this._context.lineCap=this.cap,this._context.lineWidth=this.thick,this._context.beginPath(),this._context.strokeStyle=e,this._context.arc(i.x,i.y,r,a,h,!1),this._context.stroke()}_addMarker(a,h,t,e,i,r){var n=a*Math.PI/180;let l=2;i||(i=8),e||(e="line");let f=this._getCenter(),d=this._getRadius(),p=(d+this.thick/2+l)*Math.cos(n)+f.x,y=(d+this.thick/2+l)*Math.sin(n)+f.y,g=(d+this.thick/2+l+i)*Math.cos(n)+f.x,b=(d+this.thick/2+l+i)*Math.sin(n)+f.y;if(e=="triangle"){this._context.beginPath(),this._context.strokeStyle=h,this._context.moveTo(p,y),this._context.lineWidth=1;let E=a-45,m=a+45;E<0&&(E+=360),E>360&&(E-=360),m<0&&(m+=360),m>360&&(m-=360);let w=E*Math.PI/180,I=i*Math.cos(w)+p,T=i*Math.sin(w)+y;this._context.lineTo(I,T);let S=m*Math.PI/180,k=i*Math.cos(S)+p,P=i*Math.sin(S)+y;this._context.lineTo(k,P),this._context.lineTo(p,y),this._context.closePath(),this._context.stroke(),this._context.fillStyle=h,this._context.fill()}else this._context.beginPath(),this._context.lineWidth=.5,this._context.strokeStyle=h,this._context.moveTo(p,y),this._context.lineTo(g,b),this._context.closePath(),this._context.stroke();t&&(this._context.save(),this._context.translate(g,b),this._context.rotate((a+90)*(Math.PI/180)),this._context.textAlign="center",this._context.font=r||"13px Arial",this._context.fillText(t,0,-3),this._context.restore())}_clear(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())}_getWidth(){return this.size}_getHeight(){return this.size}_getCanvasHeight(){return this.type=="arch"||this.type=="semi"?.85*this._getHeight():this._getHeight()}_getRadius(){var h=this._getCenter().x-this.thick;return this._margin>0&&(h-=this._margin),h}_getCenter(){var a=this._getWidth()/2,h=this._getHeight()/2;return{x:a,y:h}}_init(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._create()}_destroy(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1}_getForegroundColorByRange(a){let h=this._getThresholdMatchForValue(a);return h&&h.color?h.color:this.foregroundColor}_getThresholdMatchForValue(a){let h=Object.keys(this.thresholds).filter(function(t){return Jn(t)&&Number(t)<=a}).sort((t,e)=>Number(t)-Number(e)).reverse()[0];if(h!==void 0){let t=this.thresholds[h];return{color:t.color,backgroundColor:t.backgroundColor,bgOpacity:t.bgOpacity,start:Number(h),end:this._getNextThreshold(Number(h))}}}_getNextThreshold(a){let h=Object.keys(this.thresholds).filter(function(t){return Jn(t)&&Number(t)>a}).sort((t,e)=>Number(t)-Number(e));return h&&h[0]!==void 0?Number(h[0]):this.max}_getBackgroundColorRanges(){let a=0,h=[];do{let t=this._getThresholdMatchForValue(a);if(t){if(h.push({start:t.start,end:t.end,color:t.color,backgroundColor:t.backgroundColor,bgOpacity:t.bgOpacity}),a=t.end,a>=this.max)break}else break}while(!0);return h}_getDisplacement(a){let h=this.type,t=this._getBounds(h),e=this.min,i=this.max,r=t.head,n=Kn(a,this.min,this.max),l=(t.tail-t.head)/(i-e),f=l*(n-e);return r+f}_create(a,h){let t=this,e=this.type,i=this._getBounds(e),r=this.duration,n=this.min,l=this.max,f=Kn(this.value,n,l),d=i.head,p=(i.tail-i.head)/(l-n),y=p*(f-n),g=i.tail,b=this._getForegroundColorByRange(f),E;t._animationRequestID&&window.cancelAnimationFrame(t._animationRequestID);let m=w=>{w=w||new Date().getTime();let I=w-E,T=Math.min(I/r,1),S=h?(h-n)*p:0,k=d+S+y*T;t._drawShell(d,k,g,b),t._animationRequestID&&I<r?t._animationRequestID=window.requestAnimationFrame(P=>m(P)):window.cancelAnimationFrame(t._animationRequestID)};this._animate?(a!==void 0&&h!==void 0&&h!==0&&(y=p*a-p*h),t._animationRequestID=window.requestAnimationFrame(w=>{E=w||new Date().getTime(),m(E)})):t._drawShell(d,d+y,g,b)}_drawMarkersAndTicks(){if(this.markers){let a=this._getBounds(this.type),t=(a.end-a.start)/(this.max-this.min);for(let e in this.markers){let i=Number(e)-this.min,r=a.start+i*t,n=this.markers[e];this._addMarker(r,n.color,n.label,n.type,n.size,n.font)}}}_update(a,h){this._clear(),this._create(a,h)}};c.\u0275fac=function(h){return new(h||c)(Kt(Ln),Kt(Un))},c.\u0275cmp=fr({type:c,selectors:[["ngx-gauge"]],contentQueries:function(h,t,e){if(h&1&&(er(e,ja,5),er(e,Ba,5),er(e,Ma,5),er(e,Na,5)),h&2){let i;wt(i=vt())&&(t._labelChild=i.first),wt(i=vt())&&(t._prependChild=i.first),wt(i=vt())&&(t._appendChild=i.first),wt(i=vt())&&(t._valueDisplayChild=i.first)}},viewQuery:function(h,t){if(h&1&&(mr(_a,7),mr(wa,7),mr(va,7)),h&2){let e;wt(e=vt())&&(t._canvas=e.first),wt(e=vt())&&(t._label=e.first),wt(e=vt())&&(t._reading=e.first)}},hostAttrs:["role","slider","aria-readonly","true"],hostVars:7,hostBindings:function(h,t){h&2&&(Fn("aria-valuemin",t.min)("aria-valuemax",t.max)("aria-valuenow",t.value)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),qn("ngx-gauge-meter",!0))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],size:"size",margin:"margin",min:"min",animate:"animate",max:"max",type:"type",cap:"cap",thick:"thick",label:"label",append:"append",prepend:"prepend",foregroundColor:"foregroundColor",backgroundColor:"backgroundColor",thresholds:"thresholds",markers:"markers",value:"value",duration:"duration"},standalone:!1,features:[jn],ngContentSelectors:Sa,decls:17,vars:16,consts:[["reading",""],["rLabel",""],["canvas",""],[1,"reading-block"],[1,"reading-affix",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch"],[1,"reading-label",3,"ngSwitch"]],template:function(h,t){h&1&&(Wn(Ea),dr(0,"div",3,0)(2,"u",4),Jt(3,Aa,1,0,"ng-content",5)(4,ka,2,1,"ng-container",5),pr(),Wt(5,6),Jt(6,Ia,1,0,"ng-content",5)(7,Ta,3,3,"ng-container",5),qt(),dr(8,"u",4),Jt(9,Ca,1,0,"ng-content",5)(10,Oa,2,1,"ng-container",5),pr()(),dr(11,"div",7,1),Jt(13,Ra,1,0,"ng-content",5)(14,Pa,2,1,"ng-container",5),pr(),gr(15,"canvas",null,2)),h&2&&(qr("font-size",(t.size-t.margin*2)*.22+"px"),We(2),Ve("ngSwitch",t._prependChild!=null),We(),Ve("ngSwitchCase",!0),We(),Ve("ngSwitchCase",!1),We(),Ve("ngSwitch",t._valueDisplayChild!=null),We(),Ve("ngSwitchCase",!0),We(),Ve("ngSwitchCase",!1),We(),Ve("ngSwitch",t._appendChild!=null),We(),Ve("ngSwitchCase",!0),We(),Ve("ngSwitchCase",!1),We(),qr("font-size",(t.size-t.margin*2)/13+"px"),Ve("ngSwitch",t._labelChild!=null),We(2),Ve("ngSwitchCase",!0),We(),Ve("ngSwitchCase",!1))},dependencies:[Vn,zn,Qn],styles:[`.ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}
`],encapsulation:2});let s=c;return s})(),eo=(()=>{let c=class c{};c.\u0275fac=function(h){return new(h||c)},c.\u0275mod=Dn({type:c}),c.\u0275inj=Nn({imports:[Gn]});let s=c;return s})();var bn=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,Da=Object.getOwnPropertyNames,Fa=Object.prototype.hasOwnProperty,ze=(s,c)=>()=>(s&&(c=s(s=0)),c),de=(s,c)=>()=>(c||s((c={exports:{}}).exports,c),c.exports),Vt=(s,c)=>{for(var o in c)bn(s,o,{get:c[o],enumerable:!0})},Wa=(s,c,o,a)=>{if(c&&typeof c=="object"||typeof c=="function")for(let h of Da(c))!Fa.call(s,h)&&h!==o&&bn(s,h,{get:()=>c[h],enumerable:!(a=Ua(c,h))||a.enumerable});return s},Re=s=>Wa(bn({},"__esModule",{value:!0}),s),ne=ze(()=>{}),ke={};Vt(ke,{_debugEnd:()=>xi,_debugProcess:()=>Pi,_events:()=>Qi,_eventsCount:()=>Gi,_exiting:()=>bi,_fatalExceptions:()=>Ci,_getActiveHandles:()=>Lo,_getActiveRequests:()=>jo,_kill:()=>wi,_linkedBinding:()=>Bo,_maxListeners:()=>zi,_preload_modules:()=>Hi,_rawDebug:()=>pi,_startProfilerIdleNotifier:()=>Mi,_stopProfilerIdleNotifier:()=>Bi,_tickCallback:()=>Ri,abort:()=>Ui,addListener:()=>Ki,allowedNodeEnvironmentFlags:()=>Ii,arch:()=>ti,argv:()=>ni,argv0:()=>$i,assert:()=>Uo,binding:()=>ui,chdir:()=>fi,config:()=>yi,cpuUsage:()=>or,cwd:()=>ci,debugPort:()=>qi,default:()=>_n,dlopen:()=>No,domain:()=>mi,emit:()=>en,emitWarning:()=>li,env:()=>ii,execArgv:()=>oi,execPath:()=>Wi,exit:()=>Ai,features:()=>Ti,hasUncaughtExceptionCaptureCallback:()=>Do,hrtime:()=>Er,kill:()=>Si,listeners:()=>Wo,memoryUsage:()=>Ei,moduleLoadList:()=>gi,nextTick:()=>xo,off:()=>Ji,on:()=>ut,once:()=>Yi,openStdin:()=>ki,pid:()=>Di,platform:()=>ri,ppid:()=>Fi,prependListener:()=>tn,prependOnceListener:()=>rn,reallyExit:()=>_i,release:()=>di,removeAllListeners:()=>Zi,removeListener:()=>Xi,resourceUsage:()=>vi,setSourceMapsEnabled:()=>Vi,setUncaughtExceptionCaptureCallback:()=>Oi,stderr:()=>ji,stdin:()=>Li,stdout:()=>Ni,title:()=>ei,umask:()=>hi,uptime:()=>Fo,version:()=>si,versions:()=>ai});function yn(s){throw new Error("Node.js process "+s+" is not supported by JSPM core outside of Node.js")}function qa(){!Bt||!xt||(Bt=!1,xt.length?nt=xt.concat(nt):lr=-1,nt.length&&Po())}function Po(){if(!Bt){var s=setTimeout(qa,0);Bt=!0;for(var c=nt.length;c;){for(xt=nt,nt=[];++lr<c;)xt&&xt[lr].run();lr=-1,c=nt.length}xt=null,Bt=!1,clearTimeout(s)}}function xo(s){var c=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)c[o-1]=arguments[o];nt.push(new Mo(s,c)),nt.length===1&&!Bt&&setTimeout(Po,0)}function Mo(s,c){this.fun=s,this.array=c}function He(){}function Bo(s){yn("_linkedBinding")}function No(s){yn("dlopen")}function jo(){return[]}function Lo(){return[]}function Uo(s,c){if(!s)throw new Error(c||"assertion error")}function Do(){return!1}function Fo(){return dt.now()/1e3}function Er(s){var c=Math.floor((Date.now()-dt.now())*.001),o=dt.now()*.001,a=Math.floor(o)+c,h=Math.floor(o%1*1e9);return s&&(a=a-s[0],h=h-s[1],h<0&&(a--,h+=Sr)),[a,h]}function ut(){return _n}function Wo(s){return[]}var nt,Bt,xt,lr,ei,ti,ri,ii,ni,oi,si,ai,li,ui,hi,ci,fi,di,pi,gi,mi,bi,yi,_i,wi,or,vi,Ei,Si,Ai,ki,Ii,Ti,Ci,Oi,Ri,Pi,xi,Mi,Bi,Ni,ji,Li,Ui,Di,Fi,Wi,qi,$i,Hi,Vi,dt,$r,Sr,zi,Qi,Gi,Ki,Yi,Ji,Xi,Zi,en,tn,rn,_n,$a=ze(()=>{ne(),se(),oe(),nt=[],Bt=!1,lr=-1,Mo.prototype.run=function(){this.fun.apply(null,this.array)},ei="browser",ti="x64",ri="browser",ii={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},ni=["/usr/bin/node"],oi=[],si="v16.8.0",ai={},li=function(s,c){console.warn((c?c+": ":"")+s)},ui=function(s){yn("binding")},hi=function(s){return 0},ci=function(){return"/"},fi=function(s){},di={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},pi=He,gi=[],mi={},bi=!1,yi={},_i=He,wi=He,or=function(){return{}},vi=or,Ei=or,Si=He,Ai=He,ki=He,Ii={},Ti={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Ci=He,Oi=He,Ri=He,Pi=He,xi=He,Mi=He,Bi=He,Ni=void 0,ji=void 0,Li=void 0,Ui=He,Di=2,Fi=1,Wi="/bin/usr/node",qi=9229,$i="node",Hi=[],Vi=He,dt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},dt.now===void 0&&($r=Date.now(),dt.timing&&dt.timing.navigationStart&&($r=dt.timing.navigationStart),dt.now=()=>Date.now()-$r),Sr=1e9,Er.bigint=function(s){var c=Er(s);return typeof BigInt>"u"?c[0]*Sr+c[1]:BigInt(c[0]*Sr)+BigInt(c[1])},zi=10,Qi={},Gi=0,Ki=ut,Yi=ut,Ji=ut,Xi=ut,Zi=ut,en=He,tn=ut,rn=ut,_n={version:si,versions:ai,arch:ti,platform:ri,release:di,_rawDebug:pi,moduleLoadList:gi,binding:ui,_linkedBinding:Bo,_events:Qi,_eventsCount:Gi,_maxListeners:zi,on:ut,addListener:Ki,once:Yi,off:Ji,removeListener:Xi,removeAllListeners:Zi,emit:en,prependListener:tn,prependOnceListener:rn,listeners:Wo,domain:mi,_exiting:bi,config:yi,dlopen:No,uptime:Fo,_getActiveRequests:jo,_getActiveHandles:Lo,reallyExit:_i,_kill:wi,cpuUsage:or,resourceUsage:vi,memoryUsage:Ei,kill:Si,exit:Ai,openStdin:ki,allowedNodeEnvironmentFlags:Ii,assert:Uo,features:Ti,_fatalExceptions:Ci,setUncaughtExceptionCaptureCallback:Oi,hasUncaughtExceptionCaptureCallback:Do,emitWarning:li,nextTick:xo,_tickCallback:Ri,_debugProcess:Pi,_debugEnd:xi,_startProfilerIdleNotifier:Mi,_stopProfilerIdleNotifier:Bi,stdout:Ni,stdin:Li,stderr:ji,abort:Ui,umask:hi,chdir:fi,cwd:ci,env:ii,title:ei,argv:ni,execArgv:oi,pid:Di,ppid:Fi,execPath:Wi,debugPort:qi,hrtime:Er,argv0:$i,_preload_modules:Hi,setSourceMapsEnabled:Vi}}),oe=ze(()=>{$a()}),De={};Vt(De,{Buffer:()=>Cr,INSPECT_MAX_BYTES:()=>qo,default:()=>ht,kMaxLength:()=>$o});function Ha(){if(nn)return Ht;nn=!0,Ht.byteLength=i,Ht.toByteArray=n,Ht.fromByteArray=d;for(var s=[],c=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,t=a.length;h<t;++h)s[h]=a[h],c[a.charCodeAt(h)]=h;c[45]=62,c[95]=63;function e(p){var y=p.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=p.indexOf("=");g===-1&&(g=y);var b=g===y?0:4-g%4;return[g,b]}function i(p){var y=e(p),g=y[0],b=y[1];return(g+b)*3/4-b}function r(p,y,g){return(y+g)*3/4-g}function n(p){var y,g=e(p),b=g[0],E=g[1],m=new o(r(p,b,E)),w=0,I=E>0?b-4:b,T;for(T=0;T<I;T+=4)y=c[p.charCodeAt(T)]<<18|c[p.charCodeAt(T+1)]<<12|c[p.charCodeAt(T+2)]<<6|c[p.charCodeAt(T+3)],m[w++]=y>>16&255,m[w++]=y>>8&255,m[w++]=y&255;return E===2&&(y=c[p.charCodeAt(T)]<<2|c[p.charCodeAt(T+1)]>>4,m[w++]=y&255),E===1&&(y=c[p.charCodeAt(T)]<<10|c[p.charCodeAt(T+1)]<<4|c[p.charCodeAt(T+2)]>>2,m[w++]=y>>8&255,m[w++]=y&255),m}function l(p){return s[p>>18&63]+s[p>>12&63]+s[p>>6&63]+s[p&63]}function f(p,y,g){for(var b,E=[],m=y;m<g;m+=3)b=(p[m]<<16&16711680)+(p[m+1]<<8&65280)+(p[m+2]&255),E.push(l(b));return E.join("")}function d(p){for(var y,g=p.length,b=g%3,E=[],m=16383,w=0,I=g-b;w<I;w+=m)E.push(f(p,w,w+m>I?I:w+m));return b===1?(y=p[g-1],E.push(s[y>>2]+s[y<<4&63]+"==")):b===2&&(y=(p[g-2]<<8)+p[g-1],E.push(s[y>>10]+s[y>>4&63]+s[y<<2&63]+"=")),E.join("")}return Ht}function Va(){return on?sr:(on=!0,sr.read=function(s,c,o,a,h){var t,e,i=h*8-a-1,r=(1<<i)-1,n=r>>1,l=-7,f=o?h-1:0,d=o?-1:1,p=s[c+f];for(f+=d,t=p&(1<<-l)-1,p>>=-l,l+=i;l>0;t=t*256+s[c+f],f+=d,l-=8);for(e=t&(1<<-l)-1,t>>=-l,l+=a;l>0;e=e*256+s[c+f],f+=d,l-=8);if(t===0)t=1-n;else{if(t===r)return e?NaN:(p?-1:1)*(1/0);e=e+Math.pow(2,a),t=t-n}return(p?-1:1)*e*Math.pow(2,t-a)},sr.write=function(s,c,o,a,h,t){var e,i,r,n=t*8-h-1,l=(1<<n)-1,f=l>>1,d=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=a?0:t-1,y=a?1:-1,g=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(i=isNaN(c)?1:0,e=l):(e=Math.floor(Math.log(c)/Math.LN2),c*(r=Math.pow(2,-e))<1&&(e--,r*=2),e+f>=1?c+=d/r:c+=d*Math.pow(2,1-f),c*r>=2&&(e++,r/=2),e+f>=l?(i=0,e=l):e+f>=1?(i=(c*r-1)*Math.pow(2,h),e=e+f):(i=c*Math.pow(2,f-1)*Math.pow(2,h),e=0));h>=8;s[o+p]=i&255,p+=y,i/=256,h-=8);for(e=e<<h|i,n+=h;n>0;s[o+p]=e&255,p+=y,e/=256,n-=8);s[o+p-y]|=g*128},sr)}function za(){if(sn)return Et;sn=!0;let s=Ha(),c=Va(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Et.Buffer=e,Et.SlowBuffer=E,Et.INSPECT_MAX_BYTES=50;let a=2147483647;Et.kMaxLength=a,e.TYPED_ARRAY_SUPPORT=h(),!e.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{let u=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(u,_),u.foo()===42}catch{return!1}}Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}});function t(u){if(u>a)throw new RangeError('The value "'+u+'" is invalid for option "size"');let _=new Uint8Array(u);return Object.setPrototypeOf(_,e.prototype),_}function e(u,_,v){if(typeof u=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(u)}return i(u,_,v)}e.poolSize=8192;function i(u,_,v){if(typeof u=="string")return f(u,_);if(ArrayBuffer.isView(u))return p(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(j(u,ArrayBuffer)||u&&j(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(j(u,SharedArrayBuffer)||u&&j(u.buffer,SharedArrayBuffer)))return y(u,_,v);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let B=u.valueOf&&u.valueOf();if(B!=null&&B!==u)return e.from(B,_,v);let L=g(u);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return e.from(u[Symbol.toPrimitive]("string"),_,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}e.from=function(u,_,v){return i(u,_,v)},Object.setPrototypeOf(e.prototype,Uint8Array.prototype),Object.setPrototypeOf(e,Uint8Array);function r(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function n(u,_,v){return r(u),u<=0?t(u):_!==void 0?typeof v=="string"?t(u).fill(_,v):t(u).fill(_):t(u)}e.alloc=function(u,_,v){return n(u,_,v)};function l(u){return r(u),t(u<0?0:b(u)|0)}e.allocUnsafe=function(u){return l(u)},e.allocUnsafeSlow=function(u){return l(u)};function f(u,_){if((typeof _!="string"||_==="")&&(_="utf8"),!e.isEncoding(_))throw new TypeError("Unknown encoding: "+_);let v=m(u,_)|0,B=t(v),L=B.write(u,_);return L!==v&&(B=B.slice(0,L)),B}function d(u){let _=u.length<0?0:b(u.length)|0,v=t(_);for(let B=0;B<_;B+=1)v[B]=u[B]&255;return v}function p(u){if(j(u,Uint8Array)){let _=new Uint8Array(u);return y(_.buffer,_.byteOffset,_.byteLength)}return d(u)}function y(u,_,v){if(_<0||u.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<_+(v||0))throw new RangeError('"length" is outside of buffer bounds');let B;return _===void 0&&v===void 0?B=new Uint8Array(u):v===void 0?B=new Uint8Array(u,_):B=new Uint8Array(u,_,v),Object.setPrototypeOf(B,e.prototype),B}function g(u){if(e.isBuffer(u)){let _=b(u.length)|0,v=t(_);return v.length===0||u.copy(v,0,0,_),v}if(u.length!==void 0)return typeof u.length!="number"||X(u.length)?t(0):d(u);if(u.type==="Buffer"&&Array.isArray(u.data))return d(u.data)}function b(u){if(u>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return u|0}function E(u){return+u!=u&&(u=0),e.alloc(+u)}e.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==e.prototype},e.compare=function(u,_){if(j(u,Uint8Array)&&(u=e.from(u,u.offset,u.byteLength)),j(_,Uint8Array)&&(_=e.from(_,_.offset,_.byteLength)),!e.isBuffer(u)||!e.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===_)return 0;let v=u.length,B=_.length;for(let L=0,Q=Math.min(v,B);L<Q;++L)if(u[L]!==_[L]){v=u[L],B=_[L];break}return v<B?-1:B<v?1:0},e.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(u,_){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return e.alloc(0);let v;if(_===void 0)for(_=0,v=0;v<u.length;++v)_+=u[v].length;let B=e.allocUnsafe(_),L=0;for(v=0;v<u.length;++v){let Q=u[v];if(j(Q,Uint8Array))L+Q.length>B.length?(e.isBuffer(Q)||(Q=e.from(Q)),Q.copy(B,L)):Uint8Array.prototype.set.call(B,Q,L);else if(e.isBuffer(Q))Q.copy(B,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=Q.length}return B};function m(u,_){if(e.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||j(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);let v=u.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&v===0)return 0;let L=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return M(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return Z(u).length;default:if(L)return B?-1:M(u).length;_=(""+_).toLowerCase(),L=!0}}e.byteLength=m;function w(u,_,v){let B=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,_>>>=0,v<=_))return"";for(u||(u="utf8");;)switch(u){case"hex":return pe(this,_,v);case"utf8":case"utf-8":return V(this,_,v);case"ascii":return ie(this,_,v);case"latin1":case"binary":return fe(this,_,v);case"base64":return N(this,_,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,_,v);default:if(B)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),B=!0}}e.prototype._isBuffer=!0;function I(u,_,v){let B=u[_];u[_]=u[v],u[v]=B}e.prototype.swap16=function(){let u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<u;_+=2)I(this,_,_+1);return this},e.prototype.swap32=function(){let u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<u;_+=4)I(this,_,_+3),I(this,_+1,_+2);return this},e.prototype.swap64=function(){let u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<u;_+=8)I(this,_,_+7),I(this,_+1,_+6),I(this,_+2,_+5),I(this,_+3,_+4);return this},e.prototype.toString=function(){let u=this.length;return u===0?"":arguments.length===0?V(this,0,u):w.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(u){if(!e.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:e.compare(this,u)===0},e.prototype.inspect=function(){let u="",_=Et.INSPECT_MAX_BYTES;return u=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(u+=" ... "),"<Buffer "+u+">"},o&&(e.prototype[o]=e.prototype.inspect),e.prototype.compare=function(u,_,v,B,L){if(j(u,Uint8Array)&&(u=e.from(u,u.offset,u.byteLength)),!e.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(_===void 0&&(_=0),v===void 0&&(v=u?u.length:0),B===void 0&&(B=0),L===void 0&&(L=this.length),_<0||v>u.length||B<0||L>this.length)throw new RangeError("out of range index");if(B>=L&&_>=v)return 0;if(B>=L)return-1;if(_>=v)return 1;if(_>>>=0,v>>>=0,B>>>=0,L>>>=0,this===u)return 0;let Q=L-B,ge=v-_,Ae=Math.min(Q,ge),Te=this.slice(B,L),Pe=u.slice(_,v);for(let Ie=0;Ie<Ae;++Ie)if(Te[Ie]!==Pe[Ie]){Q=Te[Ie],ge=Pe[Ie];break}return Q<ge?-1:ge<Q?1:0};function T(u,_,v,B,L){if(u.length===0)return-1;if(typeof v=="string"?(B=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,X(v)&&(v=L?0:u.length-1),v<0&&(v=u.length+v),v>=u.length){if(L)return-1;v=u.length-1}else if(v<0)if(L)v=0;else return-1;if(typeof _=="string"&&(_=e.from(_,B)),e.isBuffer(_))return _.length===0?-1:S(u,_,v,B,L);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(u,_,v):Uint8Array.prototype.lastIndexOf.call(u,_,v):S(u,[_],v,B,L);throw new TypeError("val must be string, number or Buffer")}function S(u,_,v,B,L){let Q=1,ge=u.length,Ae=_.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(u.length<2||_.length<2)return-1;Q=2,ge/=2,Ae/=2,v/=2}function Te(Ie,Le){return Q===1?Ie[Le]:Ie.readUInt16BE(Le*Q)}let Pe;if(L){let Ie=-1;for(Pe=v;Pe<ge;Pe++)if(Te(u,Pe)===Te(_,Ie===-1?0:Pe-Ie)){if(Ie===-1&&(Ie=Pe),Pe-Ie+1===Ae)return Ie*Q}else Ie!==-1&&(Pe-=Pe-Ie),Ie=-1}else for(v+Ae>ge&&(v=ge-Ae),Pe=v;Pe>=0;Pe--){let Ie=!0;for(let Le=0;Le<Ae;Le++)if(Te(u,Pe+Le)!==Te(_,Le)){Ie=!1;break}if(Ie)return Pe}return-1}e.prototype.includes=function(u,_,v){return this.indexOf(u,_,v)!==-1},e.prototype.indexOf=function(u,_,v){return T(this,u,_,v,!0)},e.prototype.lastIndexOf=function(u,_,v){return T(this,u,_,v,!1)};function k(u,_,v,B){v=Number(v)||0;let L=u.length-v;B?(B=Number(B),B>L&&(B=L)):B=L;let Q=_.length;B>Q/2&&(B=Q/2);let ge;for(ge=0;ge<B;++ge){let Ae=parseInt(_.substr(ge*2,2),16);if(X(Ae))return ge;u[v+ge]=Ae}return ge}function P(u,_,v,B){return re(M(_,u.length-v),u,v,B)}function $(u,_,v,B){return re(D(_),u,v,B)}function K(u,_,v,B){return re(Z(_),u,v,B)}function ae(u,_,v,B){return re(Y(_,u.length-v),u,v,B)}e.prototype.write=function(u,_,v,B){if(_===void 0)B="utf8",v=this.length,_=0;else if(v===void 0&&typeof _=="string")B=_,v=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(v)?(v=v>>>0,B===void 0&&(B="utf8")):(B=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let L=this.length-_;if((v===void 0||v>L)&&(v=L),u.length>0&&(v<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let Q=!1;for(;;)switch(B){case"hex":return k(this,u,_,v);case"utf8":case"utf-8":return P(this,u,_,v);case"ascii":case"latin1":case"binary":return $(this,u,_,v);case"base64":return K(this,u,_,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,u,_,v);default:if(Q)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),Q=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(u,_,v){return _===0&&v===u.length?s.fromByteArray(u):s.fromByteArray(u.slice(_,v))}function V(u,_,v){v=Math.min(u.length,v);let B=[],L=_;for(;L<v;){let Q=u[L],ge=null,Ae=Q>239?4:Q>223?3:Q>191?2:1;if(L+Ae<=v){let Te,Pe,Ie,Le;switch(Ae){case 1:Q<128&&(ge=Q);break;case 2:Te=u[L+1],(Te&192)===128&&(Le=(Q&31)<<6|Te&63,Le>127&&(ge=Le));break;case 3:Te=u[L+1],Pe=u[L+2],(Te&192)===128&&(Pe&192)===128&&(Le=(Q&15)<<12|(Te&63)<<6|Pe&63,Le>2047&&(Le<55296||Le>57343)&&(ge=Le));break;case 4:Te=u[L+1],Pe=u[L+2],Ie=u[L+3],(Te&192)===128&&(Pe&192)===128&&(Ie&192)===128&&(Le=(Q&15)<<18|(Te&63)<<12|(Pe&63)<<6|Ie&63,Le>65535&&Le<1114112&&(ge=Le))}}ge===null?(ge=65533,Ae=1):ge>65535&&(ge-=65536,B.push(ge>>>10&1023|55296),ge=56320|ge&1023),B.push(ge),L+=Ae}return U(B)}let G=4096;function U(u){let _=u.length;if(_<=G)return String.fromCharCode.apply(String,u);let v="",B=0;for(;B<_;)v+=String.fromCharCode.apply(String,u.slice(B,B+=G));return v}function ie(u,_,v){let B="";v=Math.min(u.length,v);for(let L=_;L<v;++L)B+=String.fromCharCode(u[L]&127);return B}function fe(u,_,v){let B="";v=Math.min(u.length,v);for(let L=_;L<v;++L)B+=String.fromCharCode(u[L]);return B}function pe(u,_,v){let B=u.length;(!_||_<0)&&(_=0),(!v||v<0||v>B)&&(v=B);let L="";for(let Q=_;Q<v;++Q)L+=be[u[Q]];return L}function _e(u,_,v){let B=u.slice(_,v),L="";for(let Q=0;Q<B.length-1;Q+=2)L+=String.fromCharCode(B[Q]+B[Q+1]*256);return L}e.prototype.slice=function(u,_){let v=this.length;u=~~u,_=_===void 0?v:~~_,u<0?(u+=v,u<0&&(u=0)):u>v&&(u=v),_<0?(_+=v,_<0&&(_=0)):_>v&&(_=v),_<u&&(_=u);let B=this.subarray(u,_);return Object.setPrototypeOf(B,e.prototype),B};function F(u,_,v){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+_>v)throw new RangeError("Trying to access beyond buffer length")}e.prototype.readUintLE=e.prototype.readUIntLE=function(u,_,v){u=u>>>0,_=_>>>0,v||F(u,_,this.length);let B=this[u],L=1,Q=0;for(;++Q<_&&(L*=256);)B+=this[u+Q]*L;return B},e.prototype.readUintBE=e.prototype.readUIntBE=function(u,_,v){u=u>>>0,_=_>>>0,v||F(u,_,this.length);let B=this[u+--_],L=1;for(;_>0&&(L*=256);)B+=this[u+--_]*L;return B},e.prototype.readUint8=e.prototype.readUInt8=function(u,_){return u=u>>>0,_||F(u,1,this.length),this[u]},e.prototype.readUint16LE=e.prototype.readUInt16LE=function(u,_){return u=u>>>0,_||F(u,2,this.length),this[u]|this[u+1]<<8},e.prototype.readUint16BE=e.prototype.readUInt16BE=function(u,_){return u=u>>>0,_||F(u,2,this.length),this[u]<<8|this[u+1]},e.prototype.readUint32LE=e.prototype.readUInt32LE=function(u,_){return u=u>>>0,_||F(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},e.prototype.readUint32BE=e.prototype.readUInt32BE=function(u,_){return u=u>>>0,_||F(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},e.prototype.readBigUInt64LE=te(function(u){u=u>>>0,q(u,"offset");let _=this[u],v=this[u+7];(_===void 0||v===void 0)&&le(u,this.length-8);let B=_+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,L=this[++u]+this[++u]*2**8+this[++u]*2**16+v*2**24;return BigInt(B)+(BigInt(L)<<BigInt(32))}),e.prototype.readBigUInt64BE=te(function(u){u=u>>>0,q(u,"offset");let _=this[u],v=this[u+7];(_===void 0||v===void 0)&&le(u,this.length-8);let B=_*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],L=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v;return(BigInt(B)<<BigInt(32))+BigInt(L)}),e.prototype.readIntLE=function(u,_,v){u=u>>>0,_=_>>>0,v||F(u,_,this.length);let B=this[u],L=1,Q=0;for(;++Q<_&&(L*=256);)B+=this[u+Q]*L;return L*=128,B>=L&&(B-=Math.pow(2,8*_)),B},e.prototype.readIntBE=function(u,_,v){u=u>>>0,_=_>>>0,v||F(u,_,this.length);let B=_,L=1,Q=this[u+--B];for(;B>0&&(L*=256);)Q+=this[u+--B]*L;return L*=128,Q>=L&&(Q-=Math.pow(2,8*_)),Q},e.prototype.readInt8=function(u,_){return u=u>>>0,_||F(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},e.prototype.readInt16LE=function(u,_){u=u>>>0,_||F(u,2,this.length);let v=this[u]|this[u+1]<<8;return v&32768?v|4294901760:v},e.prototype.readInt16BE=function(u,_){u=u>>>0,_||F(u,2,this.length);let v=this[u+1]|this[u]<<8;return v&32768?v|4294901760:v},e.prototype.readInt32LE=function(u,_){return u=u>>>0,_||F(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},e.prototype.readInt32BE=function(u,_){return u=u>>>0,_||F(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},e.prototype.readBigInt64LE=te(function(u){u=u>>>0,q(u,"offset");let _=this[u],v=this[u+7];(_===void 0||v===void 0)&&le(u,this.length-8);let B=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(v<<24);return(BigInt(B)<<BigInt(32))+BigInt(_+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),e.prototype.readBigInt64BE=te(function(u){u=u>>>0,q(u,"offset");let _=this[u],v=this[u+7];(_===void 0||v===void 0)&&le(u,this.length-8);let B=(_<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(B)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v)}),e.prototype.readFloatLE=function(u,_){return u=u>>>0,_||F(u,4,this.length),c.read(this,u,!0,23,4)},e.prototype.readFloatBE=function(u,_){return u=u>>>0,_||F(u,4,this.length),c.read(this,u,!1,23,4)},e.prototype.readDoubleLE=function(u,_){return u=u>>>0,_||F(u,8,this.length),c.read(this,u,!0,52,8)},e.prototype.readDoubleBE=function(u,_){return u=u>>>0,_||F(u,8,this.length),c.read(this,u,!1,52,8)};function he(u,_,v,B,L,Q){if(!e.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>L||_<Q)throw new RangeError('"value" argument is out of bounds');if(v+B>u.length)throw new RangeError("Index out of range")}e.prototype.writeUintLE=e.prototype.writeUIntLE=function(u,_,v,B){if(u=+u,_=_>>>0,v=v>>>0,!B){let ge=Math.pow(2,8*v)-1;he(this,u,_,v,ge,0)}let L=1,Q=0;for(this[_]=u&255;++Q<v&&(L*=256);)this[_+Q]=u/L&255;return _+v},e.prototype.writeUintBE=e.prototype.writeUIntBE=function(u,_,v,B){if(u=+u,_=_>>>0,v=v>>>0,!B){let ge=Math.pow(2,8*v)-1;he(this,u,_,v,ge,0)}let L=v-1,Q=1;for(this[_+L]=u&255;--L>=0&&(Q*=256);)this[_+L]=u/Q&255;return _+v},e.prototype.writeUint8=e.prototype.writeUInt8=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,1,255,0),this[_]=u&255,_+1},e.prototype.writeUint16LE=e.prototype.writeUInt16LE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,2,65535,0),this[_]=u&255,this[_+1]=u>>>8,_+2},e.prototype.writeUint16BE=e.prototype.writeUInt16BE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,2,65535,0),this[_]=u>>>8,this[_+1]=u&255,_+2},e.prototype.writeUint32LE=e.prototype.writeUInt32LE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,4,4294967295,0),this[_+3]=u>>>24,this[_+2]=u>>>16,this[_+1]=u>>>8,this[_]=u&255,_+4},e.prototype.writeUint32BE=e.prototype.writeUInt32BE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,4,4294967295,0),this[_]=u>>>24,this[_+1]=u>>>16,this[_+2]=u>>>8,this[_+3]=u&255,_+4};function O(u,_,v,B,L){W(_,B,L,u,v,7);let Q=Number(_&BigInt(4294967295));u[v++]=Q,Q=Q>>8,u[v++]=Q,Q=Q>>8,u[v++]=Q,Q=Q>>8,u[v++]=Q;let ge=Number(_>>BigInt(32)&BigInt(4294967295));return u[v++]=ge,ge=ge>>8,u[v++]=ge,ge=ge>>8,u[v++]=ge,ge=ge>>8,u[v++]=ge,v}function ue(u,_,v,B,L){W(_,B,L,u,v,7);let Q=Number(_&BigInt(4294967295));u[v+7]=Q,Q=Q>>8,u[v+6]=Q,Q=Q>>8,u[v+5]=Q,Q=Q>>8,u[v+4]=Q;let ge=Number(_>>BigInt(32)&BigInt(4294967295));return u[v+3]=ge,ge=ge>>8,u[v+2]=ge,ge=ge>>8,u[v+1]=ge,ge=ge>>8,u[v]=ge,v+8}e.prototype.writeBigUInt64LE=te(function(u,_=0){return O(this,u,_,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeBigUInt64BE=te(function(u,_=0){return ue(this,u,_,BigInt(0),BigInt("0xffffffffffffffff"))}),e.prototype.writeIntLE=function(u,_,v,B){if(u=+u,_=_>>>0,!B){let Ae=Math.pow(2,8*v-1);he(this,u,_,v,Ae-1,-Ae)}let L=0,Q=1,ge=0;for(this[_]=u&255;++L<v&&(Q*=256);)u<0&&ge===0&&this[_+L-1]!==0&&(ge=1),this[_+L]=(u/Q>>0)-ge&255;return _+v},e.prototype.writeIntBE=function(u,_,v,B){if(u=+u,_=_>>>0,!B){let Ae=Math.pow(2,8*v-1);he(this,u,_,v,Ae-1,-Ae)}let L=v-1,Q=1,ge=0;for(this[_+L]=u&255;--L>=0&&(Q*=256);)u<0&&ge===0&&this[_+L+1]!==0&&(ge=1),this[_+L]=(u/Q>>0)-ge&255;return _+v},e.prototype.writeInt8=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,1,127,-128),u<0&&(u=255+u+1),this[_]=u&255,_+1},e.prototype.writeInt16LE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,2,32767,-32768),this[_]=u&255,this[_+1]=u>>>8,_+2},e.prototype.writeInt16BE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,2,32767,-32768),this[_]=u>>>8,this[_+1]=u&255,_+2},e.prototype.writeInt32LE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,4,2147483647,-2147483648),this[_]=u&255,this[_+1]=u>>>8,this[_+2]=u>>>16,this[_+3]=u>>>24,_+4},e.prototype.writeInt32BE=function(u,_,v){return u=+u,_=_>>>0,v||he(this,u,_,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[_]=u>>>24,this[_+1]=u>>>16,this[_+2]=u>>>8,this[_+3]=u&255,_+4},e.prototype.writeBigInt64LE=te(function(u,_=0){return O(this,u,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),e.prototype.writeBigInt64BE=te(function(u,_=0){return ue(this,u,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ye(u,_,v,B,L,Q){if(v+B>u.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function J(u,_,v,B,L){return _=+_,v=v>>>0,L||ye(u,_,v,4),c.write(u,_,v,B,23,4),v+4}e.prototype.writeFloatLE=function(u,_,v){return J(this,u,_,!0,v)},e.prototype.writeFloatBE=function(u,_,v){return J(this,u,_,!1,v)};function ve(u,_,v,B,L){return _=+_,v=v>>>0,L||ye(u,_,v,8),c.write(u,_,v,B,52,8),v+8}e.prototype.writeDoubleLE=function(u,_,v){return ve(this,u,_,!0,v)},e.prototype.writeDoubleBE=function(u,_,v){return ve(this,u,_,!1,v)},e.prototype.copy=function(u,_,v,B){if(!e.isBuffer(u))throw new TypeError("argument should be a Buffer");if(v||(v=0),!B&&B!==0&&(B=this.length),_>=u.length&&(_=u.length),_||(_=0),B>0&&B<v&&(B=v),B===v||u.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),u.length-_<B-v&&(B=u.length-_+v);let L=B-v;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,v,B):Uint8Array.prototype.set.call(u,this.subarray(v,B),_),L},e.prototype.fill=function(u,_,v,B){if(typeof u=="string"){if(typeof _=="string"?(B=_,_=0,v=this.length):typeof v=="string"&&(B=v,v=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!e.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(u.length===1){let Q=u.charCodeAt(0);(B==="utf8"&&Q<128||B==="latin1")&&(u=Q)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(_<0||this.length<_||this.length<v)throw new RangeError("Out of range index");if(v<=_)return this;_=_>>>0,v=v===void 0?this.length:v>>>0,u||(u=0);let L;if(typeof u=="number")for(L=_;L<v;++L)this[L]=u;else{let Q=e.isBuffer(u)?u:e.from(u,B),ge=Q.length;if(ge===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(L=0;L<v-_;++L)this[L+_]=Q[L%ge]}return this};let H={};function x(u,_,v){H[u]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}}}x("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),x("ERR_INVALID_ARG_TYPE",function(u,_){return`The "${u}" argument must be of type number. Received type ${typeof _}`},TypeError),x("ERR_OUT_OF_RANGE",function(u,_,v){let B=`The value of "${u}" is out of range.`,L=v;return Number.isInteger(v)&&Math.abs(v)>2**32?L=ee(String(v)):typeof v=="bigint"&&(L=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(L=ee(L)),L+="n"),B+=` It must be ${_}. Received ${L}`,B},RangeError);function ee(u){let _="",v=u.length,B=u[0]==="-"?1:0;for(;v>=B+4;v-=3)_=`_${u.slice(v-3,v)}${_}`;return`${u.slice(0,v)}${_}`}function z(u,_,v){q(_,"offset"),(u[_]===void 0||u[_+v]===void 0)&&le(_,u.length-(v+1))}function W(u,_,v,B,L,Q){if(u>v||u<_){let ge=typeof _=="bigint"?"n":"",Ae;throw Q>3?_===0||_===BigInt(0)?Ae=`>= 0${ge} and < 2${ge} ** ${(Q+1)*8}${ge}`:Ae=`>= -(2${ge} ** ${(Q+1)*8-1}${ge}) and < 2 ** ${(Q+1)*8-1}${ge}`:Ae=`>= ${_}${ge} and <= ${v}${ge}`,new H.ERR_OUT_OF_RANGE("value",Ae,u)}z(B,L,Q)}function q(u,_){if(typeof u!="number")throw new H.ERR_INVALID_ARG_TYPE(_,"number",u)}function le(u,_,v){throw Math.floor(u)!==u?(q(u,v),new H.ERR_OUT_OF_RANGE(v||"offset","an integer",u)):_<0?new H.ERR_BUFFER_OUT_OF_BOUNDS:new H.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${_}`,u)}let ce=/[^+/0-9A-Za-z-_]/g;function R(u){if(u=u.split("=")[0],u=u.trim().replace(ce,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function M(u,_){_=_||1/0;let v,B=u.length,L=null,Q=[];for(let ge=0;ge<B;++ge){if(v=u.charCodeAt(ge),v>55295&&v<57344){if(!L){if(v>56319){(_-=3)>-1&&Q.push(239,191,189);continue}else if(ge+1===B){(_-=3)>-1&&Q.push(239,191,189);continue}L=v;continue}if(v<56320){(_-=3)>-1&&Q.push(239,191,189),L=v;continue}v=(L-55296<<10|v-56320)+65536}else L&&(_-=3)>-1&&Q.push(239,191,189);if(L=null,v<128){if((_-=1)<0)break;Q.push(v)}else if(v<2048){if((_-=2)<0)break;Q.push(v>>6|192,v&63|128)}else if(v<65536){if((_-=3)<0)break;Q.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((_-=4)<0)break;Q.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return Q}function D(u){let _=[];for(let v=0;v<u.length;++v)_.push(u.charCodeAt(v)&255);return _}function Y(u,_){let v,B,L,Q=[];for(let ge=0;ge<u.length&&!((_-=2)<0);++ge)v=u.charCodeAt(ge),B=v>>8,L=v%256,Q.push(L),Q.push(B);return Q}function Z(u){return s.toByteArray(R(u))}function re(u,_,v,B){let L;for(L=0;L<B&&!(L+v>=_.length||L>=u.length);++L)_[L+v]=u[L];return L}function j(u,_){return u instanceof _||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===_.name}function X(u){return u!==u}let be=function(){let u="0123456789abcdef",_=new Array(256);for(let v=0;v<16;++v){let B=v*16;for(let L=0;L<16;++L)_[B+L]=u[v]+u[L]}return _}();function te(u){return typeof BigInt>"u"?Ee:u}function Ee(){throw new Error("BigInt not supported")}return Et}var Ht,nn,sr,on,Et,sn,ht,Cr,qo,$o,Fe=ze(()=>{ne(),se(),oe(),Ht={},nn=!1,sr={},on=!1,Et={},sn=!1,ht=za(),ht.Buffer,ht.SlowBuffer,ht.INSPECT_MAX_BYTES,ht.kMaxLength,Cr=ht.Buffer,qo=ht.INSPECT_MAX_BYTES,$o=ht.kMaxLength}),se=ze(()=>{Fe()}),Qa=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=class{constructor(o){this.aliasToTopic={},this.max=o}put(o,a){return a===0||a>this.max?!1:(this.aliasToTopic[a]=o,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(o){return this.aliasToTopic[o]}clear(){this.aliasToTopic={}}};s.default=c}),je=de((s,c)=>{"use strict";ne(),se(),oe();var o=class extends Error{constructor(a){if(!Array.isArray(a))throw new TypeError(`Expected input to be an Array, got ${typeof a}`);let h="";for(let t=0;t<a.length;t++)h+=`    ${a[t].stack}
`;super(h),this.name="AggregateError",this.errors=a}};c.exports={AggregateError:o,ArrayIsArray(a){return Array.isArray(a)},ArrayPrototypeIncludes(a,h){return a.includes(h)},ArrayPrototypeIndexOf(a,h){return a.indexOf(h)},ArrayPrototypeJoin(a,h){return a.join(h)},ArrayPrototypeMap(a,h){return a.map(h)},ArrayPrototypePop(a,h){return a.pop(h)},ArrayPrototypePush(a,h){return a.push(h)},ArrayPrototypeSlice(a,h,t){return a.slice(h,t)},Error,FunctionPrototypeCall(a,h,...t){return a.call(h,...t)},FunctionPrototypeSymbolHasInstance(a,h){return Function.prototype[Symbol.hasInstance].call(a,h)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(a,h){return Object.defineProperties(a,h)},ObjectDefineProperty(a,h,t){return Object.defineProperty(a,h,t)},ObjectGetOwnPropertyDescriptor(a,h){return Object.getOwnPropertyDescriptor(a,h)},ObjectKeys(a){return Object.keys(a)},ObjectSetPrototypeOf(a,h){return Object.setPrototypeOf(a,h)},Promise,PromisePrototypeCatch(a,h){return a.catch(h)},PromisePrototypeThen(a,h,t){return a.then(h,t)},PromiseReject(a){return Promise.reject(a)},PromiseResolve(a){return Promise.resolve(a)},ReflectApply:Reflect.apply,RegExpPrototypeTest(a,h){return a.test(h)},SafeSet:Set,String,StringPrototypeSlice(a,h,t){return a.slice(h,t)},StringPrototypeToLowerCase(a){return a.toLowerCase()},StringPrototypeToUpperCase(a){return a.toUpperCase()},StringPrototypeTrim(a){return a.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(a,h,t){return a.set(h,t)},Boolean,Uint8Array}}),Ho=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports={format(o,...a){return o.replace(/%([sdifj])/g,function(...[h,t]){let e=a.shift();return t==="f"?e.toFixed(6):t==="j"?JSON.stringify(e):t==="s"&&typeof e=="object"?`${e.constructor!==Object?e.constructor.name:""} {}`.trim():e.toString()})},inspect(o){switch(typeof o){case"string":if(o.includes("'"))if(o.includes('"')){if(!o.includes("`")&&!o.includes("${"))return`\`${o}\``}else return`"${o}"`;return`'${o}'`;case"number":return isNaN(o)?"NaN":Object.is(o,-0)?String(o):o;case"bigint":return`${String(o)}n`;case"boolean":case"undefined":return String(o);case"object":return"{}"}}}}),Qe=de((s,c)=>{"use strict";ne(),se(),oe();var{format:o,inspect:a}=Ho(),{AggregateError:h}=je(),t=globalThis.AggregateError||h,e=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],r=/^([A-Z][a-z0-9]*)+$/,n="__node_internal_",l={};function f(m,w){if(!m)throw new l.ERR_INTERNAL_ASSERTION(w)}function d(m){let w="",I=m.length,T=m[0]==="-"?1:0;for(;I>=T+4;I-=3)w=`_${m.slice(I-3,I)}${w}`;return`${m.slice(0,I)}${w}`}function p(m,w,I){if(typeof w=="function")return f(w.length<=I.length,`Code: ${m}; The provided arguments length (${I.length}) does not match the required ones (${w.length}).`),w(...I);let T=(w.match(/%[dfijoOs]/g)||[]).length;return f(T===I.length,`Code: ${m}; The provided arguments length (${I.length}) does not match the required ones (${T}).`),I.length===0?w:o(w,...I)}function y(m,w,I){I||(I=Error);class T extends I{constructor(...k){super(p(m,w,k))}toString(){return`${this.name} [${m}]: ${this.message}`}}Object.defineProperties(T.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${m}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),T.prototype.code=m,T.prototype[e]=!0,l[m]=T}function g(m){let w=n+m.name;return Object.defineProperty(m,"name",{value:w}),m}function b(m,w){if(m&&w&&m!==w){if(Array.isArray(w.errors))return w.errors.push(m),w;let I=new t([w,m],w.message);return I.code=w.code,I}return m||w}var E=class extends Error{constructor(m="The operation was aborted",w=void 0){if(w!==void 0&&typeof w!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",w);super(m,w),this.code="ABORT_ERR",this.name="AbortError"}};y("ERR_ASSERTION","%s",Error),y("ERR_INVALID_ARG_TYPE",(m,w,I)=>{f(typeof m=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let T="The ";m.endsWith(" argument")?T+=`${m} `:T+=`"${m}" ${m.includes(".")?"property":"argument"} `,T+="must be ";let S=[],k=[],P=[];for(let K of w)f(typeof K=="string","All expected entries have to be of type string"),i.includes(K)?S.push(K.toLowerCase()):r.test(K)?k.push(K):(f(K!=="object",'The value "object" should be written as "Object"'),P.push(K));if(k.length>0){let K=S.indexOf("object");K!==-1&&(S.splice(S,K,1),k.push("Object"))}if(S.length>0){switch(S.length){case 1:T+=`of type ${S[0]}`;break;case 2:T+=`one of type ${S[0]} or ${S[1]}`;break;default:{let K=S.pop();T+=`one of type ${S.join(", ")}, or ${K}`}}(k.length>0||P.length>0)&&(T+=" or ")}if(k.length>0){switch(k.length){case 1:T+=`an instance of ${k[0]}`;break;case 2:T+=`an instance of ${k[0]} or ${k[1]}`;break;default:{let K=k.pop();T+=`an instance of ${k.join(", ")}, or ${K}`}}P.length>0&&(T+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(T+="an "),T+=`${P[0]}`;break;case 2:T+=`one of ${P[0]} or ${P[1]}`;break;default:{let K=P.pop();T+=`one of ${P.join(", ")}, or ${K}`}}if(I==null)T+=`. Received ${I}`;else if(typeof I=="function"&&I.name)T+=`. Received function ${I.name}`;else if(typeof I=="object"){var $;if(($=I.constructor)!==null&&$!==void 0&&$.name)T+=`. Received an instance of ${I.constructor.name}`;else{let K=a(I,{depth:-1});T+=`. Received ${K}`}}else{let K=a(I,{colors:!1});K.length>25&&(K=`${K.slice(0,25)}...`),T+=`. Received type ${typeof I} (${K})`}return T},TypeError),y("ERR_INVALID_ARG_VALUE",(m,w,I="is invalid")=>{let T=a(w);return T.length>128&&(T=T.slice(0,128)+"..."),`The ${m.includes(".")?"property":"argument"} '${m}' ${I}. Received ${T}`},TypeError),y("ERR_INVALID_RETURN_VALUE",(m,w,I)=>{var T;let S=I!=null&&(T=I.constructor)!==null&&T!==void 0&&T.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${m} to be returned from the "${w}" function but got ${S}.`},TypeError),y("ERR_MISSING_ARGS",(...m)=>{f(m.length>0,"At least one arg needs to be specified");let w,I=m.length;switch(m=(Array.isArray(m)?m:[m]).map(T=>`"${T}"`).join(" or "),I){case 1:w+=`The ${m[0]} argument`;break;case 2:w+=`The ${m[0]} and ${m[1]} arguments`;break;default:{let T=m.pop();w+=`The ${m.join(", ")}, and ${T} arguments`}break}return`${w} must be specified`},TypeError),y("ERR_OUT_OF_RANGE",(m,w,I)=>{f(w,'Missing "range" argument');let T;if(Number.isInteger(I)&&Math.abs(I)>2**32)T=d(String(I));else if(typeof I=="bigint"){T=String(I);let S=BigInt(2)**BigInt(32);(I>S||I<-S)&&(T=d(T)),T+="n"}else T=a(I);return`The value of "${m}" is out of range. It must be ${w}. Received ${T}`},RangeError),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),y("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),y("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),y("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),y("ERR_STREAM_WRITE_AFTER_END","write after end",Error),y("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),c.exports={AbortError:E,aggregateTwoErrors:g(b),hideStackFrames:g,codes:l}}),hr=de((s,c)=>{"use strict";ne(),se(),oe();var{AbortController:o,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;c.exports=o,c.exports.AbortSignal=a,c.exports.default=o});function Oe(){Oe.init.call(this)}function Ar(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}function Vo(s){return s._maxListeners===void 0?Oe.defaultMaxListeners:s._maxListeners}function to(s,c,o,a){var h,t,e,i;if(Ar(o),(t=s._events)===void 0?(t=s._events=Object.create(null),s._eventsCount=0):(t.newListener!==void 0&&(s.emit("newListener",c,o.listener?o.listener:o),t=s._events),e=t[c]),e===void 0)e=t[c]=o,++s._eventsCount;else if(typeof e=="function"?e=t[c]=a?[o,e]:[e,o]:a?e.unshift(o):e.push(o),(h=Vo(s))>0&&e.length>h&&!e.warned){e.warned=!0;var r=new Error("Possible EventEmitter memory leak detected. "+e.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");r.name="MaxListenersExceededWarning",r.emitter=s,r.type=c,r.count=e.length,i=r,console&&console.warn&&console.warn(i)}return s}function Ga(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ro(s,c,o){var a={fired:!1,wrapFn:void 0,target:s,type:c,listener:o},h=Ga.bind(a);return h.listener=o,a.wrapFn=h,h}function io(s,c,o){var a=s._events;if(a===void 0)return[];var h=a[c];return h===void 0?[]:typeof h=="function"?o?[h.listener||h]:[h]:o?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(h):zo(h,h.length)}function no(s){var c=this._events;if(c!==void 0){var o=c[s];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}function zo(s,c){for(var o=new Array(c),a=0;a<c;++a)o[a]=s[a];return o}var oo,so,Ct,Hr,Vr,zr,Je,ao=ze(()=>{ne(),se(),oe(),Ct=typeof Reflect=="object"?Reflect:null,Hr=Ct&&typeof Ct.apply=="function"?Ct.apply:function(s,c,o){return Function.prototype.apply.call(s,c,o)},so=Ct&&typeof Ct.ownKeys=="function"?Ct.ownKeys:Object.getOwnPropertySymbols?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:function(s){return Object.getOwnPropertyNames(s)},Vr=Number.isNaN||function(s){return s!=s},oo=Oe,Oe.EventEmitter=Oe,Oe.prototype._events=void 0,Oe.prototype._eventsCount=0,Oe.prototype._maxListeners=void 0,zr=10,Object.defineProperty(Oe,"defaultMaxListeners",{enumerable:!0,get:function(){return zr},set:function(s){if(typeof s!="number"||s<0||Vr(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");zr=s}}),Oe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Oe.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||Vr(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this},Oe.prototype.getMaxListeners=function(){return Vo(this)},Oe.prototype.emit=function(s){for(var c=[],o=1;o<arguments.length;o++)c.push(arguments[o]);var a=s==="error",h=this._events;if(h!==void 0)a=a&&h.error===void 0;else if(!a)return!1;if(a){var t;if(c.length>0&&(t=c[0]),t instanceof Error)throw t;var e=new Error("Unhandled error."+(t?" ("+t.message+")":""));throw e.context=t,e}var i=h[s];if(i===void 0)return!1;if(typeof i=="function")Hr(i,this,c);else{var r=i.length,n=zo(i,r);for(o=0;o<r;++o)Hr(n[o],this,c)}return!0},Oe.prototype.addListener=function(s,c){return to(this,s,c,!1)},Oe.prototype.on=Oe.prototype.addListener,Oe.prototype.prependListener=function(s,c){return to(this,s,c,!0)},Oe.prototype.once=function(s,c){return Ar(c),this.on(s,ro(this,s,c)),this},Oe.prototype.prependOnceListener=function(s,c){return Ar(c),this.prependListener(s,ro(this,s,c)),this},Oe.prototype.removeListener=function(s,c){var o,a,h,t,e;if(Ar(c),(a=this._events)===void 0)return this;if((o=a[s])===void 0)return this;if(o===c||o.listener===c)--this._eventsCount==0?this._events=Object.create(null):(delete a[s],a.removeListener&&this.emit("removeListener",s,o.listener||c));else if(typeof o!="function"){for(h=-1,t=o.length-1;t>=0;t--)if(o[t]===c||o[t].listener===c){e=o[t].listener,h=t;break}if(h<0)return this;h===0?o.shift():function(i,r){for(;r+1<i.length;r++)i[r]=i[r+1];i.pop()}(o,h),o.length===1&&(a[s]=o[0]),a.removeListener!==void 0&&this.emit("removeListener",s,e||c)}return this},Oe.prototype.off=Oe.prototype.removeListener,Oe.prototype.removeAllListeners=function(s){var c,o,a;if((o=this._events)===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[s]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete o[s]),this;if(arguments.length===0){var h,t=Object.keys(o);for(a=0;a<t.length;++a)(h=t[a])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(c=o[s])=="function")this.removeListener(s,c);else if(c!==void 0)for(a=c.length-1;a>=0;a--)this.removeListener(s,c[a]);return this},Oe.prototype.listeners=function(s){return io(this,s,!0)},Oe.prototype.rawListeners=function(s){return io(this,s,!1)},Oe.listenerCount=function(s,c){return typeof s.listenerCount=="function"?s.listenerCount(c):no.call(s,c)},Oe.prototype.listenerCount=no,Oe.prototype.eventNames=function(){return this._eventsCount>0?so(this._events):[]},Je=oo,Je.EventEmitter,Je.defaultMaxListeners,Je.init,Je.listenerCount,Je.EventEmitter,Je.defaultMaxListeners,Je.init,Je.listenerCount}),At={};Vt(At,{EventEmitter:()=>Qo,default:()=>Je,defaultMaxListeners:()=>Go,init:()=>Ko,listenerCount:()=>Yo,on:()=>Jo,once:()=>Xo});var Qo,Go,Ko,Yo,Jo,Xo,Lt=ze(()=>{ne(),se(),oe(),ao(),ao(),Je.once=function(s,c){return new Promise((o,a)=>{function h(...e){t!==void 0&&s.removeListener("error",t),o(e)}let t;c!=="error"&&(t=e=>{s.removeListener(name,h),a(e)},s.once("error",t)),s.once(c,h)})},Je.on=function(s,c){let o=[],a=[],h=null,t=!1,e={next(){return xe(this,null,function*(){let l=o.shift();if(l)return createIterResult(l,!1);if(h){let f=Promise.reject(h);return h=null,f}return t?createIterResult(void 0,!0):new Promise((f,d)=>a.push({resolve:f,reject:d}))})},return(){return xe(this,null,function*(){s.removeListener(c,i),s.removeListener("error",r),t=!0;for(let l of a)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)})},throw(l){h=l,s.removeListener(c,i),s.removeListener("error",r)},[Symbol.asyncIterator](){return this}};return s.on(c,i),s.on("error",r),e;function i(...l){let f=a.shift();f?f.resolve(createIterResult(l,!1)):o.push(l)}function r(l){t=!0;let f=a.shift();f?f.reject(l):h=l,e.return()}},{EventEmitter:Qo,defaultMaxListeners:Go,init:Ko,listenerCount:Yo,on:Jo,once:Xo}=Je}),Ge=de((s,c)=>{"use strict";ne(),se(),oe();var o=(Fe(),Re(De)),{format:a,inspect:h}=Ho(),{codes:{ERR_INVALID_ARG_TYPE:t}}=Qe(),{kResistStopPropagation:e,AggregateError:i,SymbolDispose:r}=je(),n=globalThis.AbortSignal||hr().AbortSignal,l=globalThis.AbortController||hr().AbortController,f=Object.getPrototypeOf(function(){return xe(this,null,function*(){})}).constructor,d=globalThis.Blob||o.Blob,p=typeof d<"u"?function(b){return b instanceof d}:function(b){return!1},y=(b,E)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new t(E,"AbortSignal",b)},g=(b,E)=>{if(typeof b!="function")throw new t(E,"Function",b)};c.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(b){let E=!1;return function(...m){E||(E=!0,b.apply(this,m))}},createDeferredPromise:function(){let b,E;return{promise:new Promise((m,w)=>{b=m,E=w}),resolve:b,reject:E}},promisify(b){return new Promise((E,m)=>{b((w,...I)=>w?m(w):E(...I))})},debuglog(){return function(){}},format:a,inspect:h,types:{isAsyncFunction(b){return b instanceof f},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,E){return b},addAbortListener:(Lt(),Re(At)).addAbortListener||function(b,E){if(b===void 0)throw new t("signal","AbortSignal",b);y(b,"signal"),g(E,"listener");let m;return b.aborted?queueMicrotask(()=>E()):(b.addEventListener("abort",E,{__proto__:null,once:!0,[e]:!0}),m=()=>{b.removeEventListener("abort",E)}),{__proto__:null,[r](){var w;(w=m)===null||w===void 0||w()}}},AbortSignalAny:n.any||function(b){if(b.length===1)return b[0];let E=new l,m=()=>E.abort();return b.forEach(w=>{y(w,"signals"),w.addEventListener("abort",m,{once:!0})}),E.signal.addEventListener("abort",()=>{b.forEach(w=>w.removeEventListener("abort",m))},{once:!0}),E.signal}},c.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),cr=de((s,c)=>{"use strict";ne(),se(),oe();var{ArrayIsArray:o,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:h,ArrayPrototypeMap:t,NumberIsInteger:e,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:r,NumberMIN_SAFE_INTEGER:n,NumberParseInt:l,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:d,String:p,StringPrototypeToUpperCase:y,StringPrototypeTrim:g}=je(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:E,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:I,ERR_UNKNOWN_SIGNAL:T}}=Qe(),{normalizeEncoding:S}=Ge(),{isAsyncFunction:k,isArrayBufferView:P}=Ge().types,$={};function K(j){return j===(j|0)}function ae(j){return j===j>>>0}var N=/^[0-7]+$/,V="must be a 32-bit unsigned integer or an octal string";function G(j,X,be){if(typeof j>"u"&&(j=be),typeof j=="string"){if(d(N,j)===null)throw new w(X,j,V);j=l(j,8)}return fe(j,X),j}var U=b((j,X,be=n,te=r)=>{if(typeof j!="number")throw new m(X,"number",j);if(!e(j))throw new I(X,"an integer",j);if(j<be||j>te)throw new I(X,`>= ${be} && <= ${te}`,j)}),ie=b((j,X,be=-2147483648,te=2147483647)=>{if(typeof j!="number")throw new m(X,"number",j);if(!e(j))throw new I(X,"an integer",j);if(j<be||j>te)throw new I(X,`>= ${be} && <= ${te}`,j)}),fe=b((j,X,be=!1)=>{if(typeof j!="number")throw new m(X,"number",j);if(!e(j))throw new I(X,"an integer",j);let te=be?1:0,Ee=4294967295;if(j<te||j>Ee)throw new I(X,`>= ${te} && <= ${Ee}`,j)});function pe(j,X){if(typeof j!="string")throw new m(X,"string",j)}function _e(j,X,be=void 0,te){if(typeof j!="number")throw new m(X,"number",j);if(be!=null&&j<be||te!=null&&j>te||(be!=null||te!=null)&&i(j))throw new I(X,`${be!=null?`>= ${be}`:""}${be!=null&&te!=null?" && ":""}${te!=null?`<= ${te}`:""}`,j)}var F=b((j,X,be)=>{if(!a(be,j)){let te="must be one of: "+h(t(be,Ee=>typeof Ee=="string"?`'${Ee}'`:p(Ee)),", ");throw new w(X,j,te)}});function he(j,X){if(typeof j!="boolean")throw new m(X,"boolean",j)}function O(j,X,be){return j==null||!f(j,X)?be:j[X]}var ue=b((j,X,be=null)=>{let te=O(be,"allowArray",!1),Ee=O(be,"allowFunction",!1);if(!O(be,"nullable",!1)&&j===null||!te&&o(j)||typeof j!="object"&&(!Ee||typeof j!="function"))throw new m(X,"Object",j)}),ye=b((j,X)=>{if(j!=null&&typeof j!="object"&&typeof j!="function")throw new m(X,"a dictionary",j)}),J=b((j,X,be=0)=>{if(!o(j))throw new m(X,"Array",j);if(j.length<be){let te=`must be longer than ${be}`;throw new w(X,j,te)}});function ve(j,X){J(j,X);for(let be=0;be<j.length;be++)pe(j[be],`${X}[${be}]`)}function H(j,X){J(j,X);for(let be=0;be<j.length;be++)he(j[be],`${X}[${be}]`)}function x(j,X){J(j,X);for(let be=0;be<j.length;be++){let te=j[be],Ee=`${X}[${be}]`;if(te==null)throw new m(Ee,"AbortSignal",te);le(te,Ee)}}function ee(j,X="signal"){if(pe(j,X),$[j]===void 0)throw $[y(j)]!==void 0?new T(j+" (signals must use all capital letters)"):new T(j)}var z=b((j,X="buffer")=>{if(!P(j))throw new m(X,["Buffer","TypedArray","DataView"],j)});function W(j,X){let be=S(X),te=j.length;if(be==="hex"&&te%2!==0)throw new w("encoding",X,`is invalid for data of length ${te}`)}function q(j,X="Port",be=!0){if(typeof j!="number"&&typeof j!="string"||typeof j=="string"&&g(j).length===0||+j!==+j>>>0||j>65535||j===0&&!be)throw new E(X,j,be);return j|0}var le=b((j,X)=>{if(j!==void 0&&(j===null||typeof j!="object"||!("aborted"in j)))throw new m(X,"AbortSignal",j)}),ce=b((j,X)=>{if(typeof j!="function")throw new m(X,"Function",j)}),R=b((j,X)=>{if(typeof j!="function"||k(j))throw new m(X,"Function",j)}),M=b((j,X)=>{if(j!==void 0)throw new m(X,"undefined",j)});function D(j,X,be){if(!a(be,j))throw new m(X,`('${h(be,"|")}')`,j)}var Y=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Z(j,X){if(typeof j>"u"||!d(Y,j))throw new w(X,j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function re(j){if(typeof j=="string")return Z(j,"hints"),j;if(o(j)){let X=j.length,be="";if(X===0)return be;for(let te=0;te<X;te++){let Ee=j[te];Z(Ee,"hints"),be+=Ee,te!==X-1&&(be+=", ")}return be}throw new w("hints",j,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}c.exports={isInt32:K,isUint32:ae,parseFileMode:G,validateArray:J,validateStringArray:ve,validateBooleanArray:H,validateAbortSignalArray:x,validateBoolean:he,validateBuffer:z,validateDictionary:ye,validateEncoding:W,validateFunction:ce,validateInt32:ie,validateInteger:U,validateNumber:_e,validateObject:ue,validateOneOf:F,validatePlainFunction:R,validatePort:q,validateSignalName:ee,validateString:pe,validateUint32:fe,validateUndefined:M,validateUnion:D,validateAbortSignal:le,validateLinkHeaderValue:re}}),Ut=de((s,c)=>{ne(),se(),oe();var o=c.exports={},a,h;function t(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=t}catch{a=t}try{typeof clearTimeout=="function"?h=clearTimeout:h=e}catch{h=e}})();function i(E){if(a===setTimeout)return setTimeout(E,0);if((a===t||!a)&&setTimeout)return a=setTimeout,setTimeout(E,0);try{return a(E,0)}catch{try{return a.call(null,E,0)}catch{return a.call(this,E,0)}}}function r(E){if(h===clearTimeout)return clearTimeout(E);if((h===e||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(E);try{return h(E)}catch{try{return h.call(null,E)}catch{return h.call(this,E)}}}var n=[],l=!1,f,d=-1;function p(){!l||!f||(l=!1,f.length?n=f.concat(n):d=-1,n.length&&y())}function y(){if(!l){var E=i(p);l=!0;for(var m=n.length;m;){for(f=n,n=[];++d<m;)f&&f[d].run();d=-1,m=n.length}f=null,l=!1,r(E)}}o.nextTick=function(E){var m=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)m[w-1]=arguments[w];n.push(new g(E,m)),n.length===1&&!l&&i(y)};function g(E,m){this.fun=E,this.array=m}g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function b(){}o.on=b,o.addListener=b,o.once=b,o.off=b,o.removeListener=b,o.removeAllListeners=b,o.emit=b,o.prependListener=b,o.prependOnceListener=b,o.listeners=function(E){return[]},o.binding=function(E){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(E){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),mt=de((s,c)=>{"use strict";ne(),se(),oe();var{SymbolAsyncIterator:o,SymbolIterator:a,SymbolFor:h}=je(),t=h("nodejs.stream.destroyed"),e=h("nodejs.stream.errored"),i=h("nodejs.stream.readable"),r=h("nodejs.stream.writable"),n=h("nodejs.stream.disturbed"),l=h("nodejs.webstream.isClosedPromise"),f=h("nodejs.webstream.controllerErrorFunction");function d(O,ue=!1){var ye;return!!(O&&typeof O.pipe=="function"&&typeof O.on=="function"&&(!ue||typeof O.pause=="function"&&typeof O.resume=="function")&&(!O._writableState||((ye=O._readableState)===null||ye===void 0?void 0:ye.readable)!==!1)&&(!O._writableState||O._readableState))}function p(O){var ue;return!!(O&&typeof O.write=="function"&&typeof O.on=="function"&&(!O._readableState||((ue=O._writableState)===null||ue===void 0?void 0:ue.writable)!==!1))}function y(O){return!!(O&&typeof O.pipe=="function"&&O._readableState&&typeof O.on=="function"&&typeof O.write=="function")}function g(O){return O&&(O._readableState||O._writableState||typeof O.write=="function"&&typeof O.on=="function"||typeof O.pipe=="function"&&typeof O.on=="function")}function b(O){return!!(O&&!g(O)&&typeof O.pipeThrough=="function"&&typeof O.getReader=="function"&&typeof O.cancel=="function")}function E(O){return!!(O&&!g(O)&&typeof O.getWriter=="function"&&typeof O.abort=="function")}function m(O){return!!(O&&!g(O)&&typeof O.readable=="object"&&typeof O.writable=="object")}function w(O){return b(O)||E(O)||m(O)}function I(O,ue){return O==null?!1:ue===!0?typeof O[o]=="function":ue===!1?typeof O[a]=="function":typeof O[o]=="function"||typeof O[a]=="function"}function T(O){if(!g(O))return null;let ue=O._writableState,ye=O._readableState,J=ue||ye;return!!(O.destroyed||O[t]||J!=null&&J.destroyed)}function S(O){if(!p(O))return null;if(O.writableEnded===!0)return!0;let ue=O._writableState;return ue!=null&&ue.errored?!1:typeof ue?.ended!="boolean"?null:ue.ended}function k(O,ue){if(!p(O))return null;if(O.writableFinished===!0)return!0;let ye=O._writableState;return ye!=null&&ye.errored?!1:typeof ye?.finished!="boolean"?null:!!(ye.finished||ue===!1&&ye.ended===!0&&ye.length===0)}function P(O){if(!d(O))return null;if(O.readableEnded===!0)return!0;let ue=O._readableState;return!ue||ue.errored?!1:typeof ue?.ended!="boolean"?null:ue.ended}function $(O,ue){if(!d(O))return null;let ye=O._readableState;return ye!=null&&ye.errored?!1:typeof ye?.endEmitted!="boolean"?null:!!(ye.endEmitted||ue===!1&&ye.ended===!0&&ye.length===0)}function K(O){return O&&O[i]!=null?O[i]:typeof O?.readable!="boolean"?null:T(O)?!1:d(O)&&O.readable&&!$(O)}function ae(O){return O&&O[r]!=null?O[r]:typeof O?.writable!="boolean"?null:T(O)?!1:p(O)&&O.writable&&!S(O)}function N(O,ue){return g(O)?T(O)?!0:!(ue?.readable!==!1&&K(O)||ue?.writable!==!1&&ae(O)):null}function V(O){var ue,ye;return g(O)?O.writableErrored?O.writableErrored:(ue=(ye=O._writableState)===null||ye===void 0?void 0:ye.errored)!==null&&ue!==void 0?ue:null:null}function G(O){var ue,ye;return g(O)?O.readableErrored?O.readableErrored:(ue=(ye=O._readableState)===null||ye===void 0?void 0:ye.errored)!==null&&ue!==void 0?ue:null:null}function U(O){if(!g(O))return null;if(typeof O.closed=="boolean")return O.closed;let ue=O._writableState,ye=O._readableState;return typeof ue?.closed=="boolean"||typeof ye?.closed=="boolean"?ue?.closed||ye?.closed:typeof O._closed=="boolean"&&ie(O)?O._closed:null}function ie(O){return typeof O._closed=="boolean"&&typeof O._defaultKeepAlive=="boolean"&&typeof O._removedConnection=="boolean"&&typeof O._removedContLen=="boolean"}function fe(O){return typeof O._sent100=="boolean"&&ie(O)}function pe(O){var ue;return typeof O._consuming=="boolean"&&typeof O._dumped=="boolean"&&((ue=O.req)===null||ue===void 0?void 0:ue.upgradeOrConnect)===void 0}function _e(O){if(!g(O))return null;let ue=O._writableState,ye=O._readableState,J=ue||ye;return!J&&fe(O)||!!(J&&J.autoDestroy&&J.emitClose&&J.closed===!1)}function F(O){var ue;return!!(O&&((ue=O[n])!==null&&ue!==void 0?ue:O.readableDidRead||O.readableAborted))}function he(O){var ue,ye,J,ve,H,x,ee,z,W,q;return!!(O&&((ue=(ye=(J=(ve=(H=(x=O[e])!==null&&x!==void 0?x:O.readableErrored)!==null&&H!==void 0?H:O.writableErrored)!==null&&ve!==void 0?ve:(ee=O._readableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&J!==void 0?J:(z=O._writableState)===null||z===void 0?void 0:z.errorEmitted)!==null&&ye!==void 0?ye:(W=O._readableState)===null||W===void 0?void 0:W.errored)!==null&&ue!==void 0?ue:!((q=O._writableState)===null||q===void 0)&&q.errored))}c.exports={isDestroyed:T,kIsDestroyed:t,isDisturbed:F,kIsDisturbed:n,isErrored:he,kIsErrored:e,isReadable:K,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:f,kIsWritable:r,isClosed:U,isDuplexNodeStream:y,isFinished:N,isIterable:I,isReadableNodeStream:d,isReadableStream:b,isReadableEnded:P,isReadableFinished:$,isReadableErrored:G,isNodeStream:g,isWebStream:w,isWritable:ae,isWritableNodeStream:p,isWritableStream:E,isWritableEnded:S,isWritableFinished:k,isWritableErrored:V,isServerRequest:pe,isServerResponse:fe,willEmitClose:_e,isTransformStream:m}}),kt=de((s,c)=>{"use strict";ne(),se(),oe();var o=Ut(),{AbortError:a,codes:h}=Qe(),{ERR_INVALID_ARG_TYPE:t,ERR_STREAM_PREMATURE_CLOSE:e}=h,{kEmptyObject:i,once:r}=Ge(),{validateAbortSignal:n,validateFunction:l,validateObject:f,validateBoolean:d}=cr(),{Promise:p,PromisePrototypeThen:y,SymbolDispose:g}=je(),{isClosed:b,isReadable:E,isReadableNodeStream:m,isReadableStream:w,isReadableFinished:I,isReadableErrored:T,isWritable:S,isWritableNodeStream:k,isWritableStream:P,isWritableFinished:$,isWritableErrored:K,isNodeStream:ae,willEmitClose:N,kIsClosedPromise:V}=mt(),G;function U(F){return F.setHeader&&typeof F.abort=="function"}var ie=()=>{};function fe(F,he,O){var ue,ye;if(arguments.length===2?(O=he,he=i):he==null?he=i:f(he,"options"),l(O,"callback"),n(he.signal,"options.signal"),O=r(O),w(F)||P(F))return pe(F,he,O);if(!ae(F))throw new t("stream",["ReadableStream","WritableStream","Stream"],F);let J=(ue=he.readable)!==null&&ue!==void 0?ue:m(F),ve=(ye=he.writable)!==null&&ye!==void 0?ye:k(F),H=F._writableState,x=F._readableState,ee=()=>{F.writable||q()},z=N(F)&&m(F)===J&&k(F)===ve,W=$(F,!1),q=()=>{W=!0,F.destroyed&&(z=!1),!(z&&(!F.readable||J))&&(!J||le)&&O.call(F)},le=I(F,!1),ce=()=>{le=!0,F.destroyed&&(z=!1),!(z&&(!F.writable||ve))&&(!ve||W)&&O.call(F)},R=j=>{O.call(F,j)},M=b(F),D=()=>{M=!0;let j=K(F)||T(F);if(j&&typeof j!="boolean")return O.call(F,j);if(J&&!le&&m(F,!0)&&!I(F,!1))return O.call(F,new e);if(ve&&!W&&!$(F,!1))return O.call(F,new e);O.call(F)},Y=()=>{M=!0;let j=K(F)||T(F);if(j&&typeof j!="boolean")return O.call(F,j);O.call(F)},Z=()=>{F.req.on("finish",q)};U(F)?(F.on("complete",q),z||F.on("abort",D),F.req?Z():F.on("request",Z)):ve&&!H&&(F.on("end",ee),F.on("close",ee)),!z&&typeof F.aborted=="boolean"&&F.on("aborted",D),F.on("end",ce),F.on("finish",q),he.error!==!1&&F.on("error",R),F.on("close",D),M?o.nextTick(D):H!=null&&H.errorEmitted||x!=null&&x.errorEmitted?z||o.nextTick(Y):(!J&&(!z||E(F))&&(W||S(F)===!1)||!ve&&(!z||S(F))&&(le||E(F)===!1)||x&&F.req&&F.aborted)&&o.nextTick(Y);let re=()=>{O=ie,F.removeListener("aborted",D),F.removeListener("complete",q),F.removeListener("abort",D),F.removeListener("request",Z),F.req&&F.req.removeListener("finish",q),F.removeListener("end",ee),F.removeListener("close",ee),F.removeListener("finish",q),F.removeListener("end",ce),F.removeListener("error",R),F.removeListener("close",D)};if(he.signal&&!M){let j=()=>{let X=O;re(),X.call(F,new a(void 0,{cause:he.signal.reason}))};if(he.signal.aborted)o.nextTick(j);else{G=G||Ge().addAbortListener;let X=G(he.signal,j),be=O;O=r((...te)=>{X[g](),be.apply(F,te)})}}return re}function pe(F,he,O){let ue=!1,ye=ie;if(he.signal)if(ye=()=>{ue=!0,O.call(F,new a(void 0,{cause:he.signal.reason}))},he.signal.aborted)o.nextTick(ye);else{G=G||Ge().addAbortListener;let ve=G(he.signal,ye),H=O;O=r((...x)=>{ve[g](),H.apply(F,x)})}let J=(...ve)=>{ue||o.nextTick(()=>O.apply(F,ve))};return y(F[V].promise,J,J),ie}function _e(F,he){var O;let ue=!1;return he===null&&(he=i),(O=he)!==null&&O!==void 0&&O.cleanup&&(d(he.cleanup,"cleanup"),ue=he.cleanup),new p((ye,J)=>{let ve=fe(F,he,H=>{ue&&ve(),H?J(H):ye()})})}c.exports=fe,c.exports.finished=_e}),zt=de((s,c)=>{"use strict";ne(),se(),oe();var o=Ut(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:h},AbortError:t}=Qe(),{Symbol:e}=je(),{kIsDestroyed:i,isDestroyed:r,isFinished:n,isServerRequest:l}=mt(),f=e("kDestroy"),d=e("kConstruct");function p(N,V,G){N&&(N.stack,V&&!V.errored&&(V.errored=N),G&&!G.errored&&(G.errored=N))}function y(N,V){let G=this._readableState,U=this._writableState,ie=U||G;return U!=null&&U.destroyed||G!=null&&G.destroyed?(typeof V=="function"&&V(),this):(p(N,U,G),U&&(U.destroyed=!0),G&&(G.destroyed=!0),ie.constructed?g(this,N,V):this.once(f,function(fe){g(this,a(fe,N),V)}),this)}function g(N,V,G){let U=!1;function ie(fe){if(U)return;U=!0;let pe=N._readableState,_e=N._writableState;p(fe,_e,pe),_e&&(_e.closed=!0),pe&&(pe.closed=!0),typeof G=="function"&&G(fe),fe?o.nextTick(b,N,fe):o.nextTick(E,N)}try{N._destroy(V||null,ie)}catch(fe){ie(fe)}}function b(N,V){m(N,V),E(N)}function E(N){let V=N._readableState,G=N._writableState;G&&(G.closeEmitted=!0),V&&(V.closeEmitted=!0),(G!=null&&G.emitClose||V!=null&&V.emitClose)&&N.emit("close")}function m(N,V){let G=N._readableState,U=N._writableState;U!=null&&U.errorEmitted||G!=null&&G.errorEmitted||(U&&(U.errorEmitted=!0),G&&(G.errorEmitted=!0),N.emit("error",V))}function w(){let N=this._readableState,V=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),V&&(V.constructed=!0,V.destroyed=!1,V.closed=!1,V.closeEmitted=!1,V.errored=null,V.errorEmitted=!1,V.finalCalled=!1,V.prefinished=!1,V.ended=V.writable===!1,V.ending=V.writable===!1,V.finished=V.writable===!1)}function I(N,V,G){let U=N._readableState,ie=N._writableState;if(ie!=null&&ie.destroyed||U!=null&&U.destroyed)return this;U!=null&&U.autoDestroy||ie!=null&&ie.autoDestroy?N.destroy(V):V&&(V.stack,ie&&!ie.errored&&(ie.errored=V),U&&!U.errored&&(U.errored=V),G?o.nextTick(m,N,V):m(N,V))}function T(N,V){if(typeof N._construct!="function")return;let G=N._readableState,U=N._writableState;G&&(G.constructed=!1),U&&(U.constructed=!1),N.once(d,V),!(N.listenerCount(d)>1)&&o.nextTick(S,N)}function S(N){let V=!1;function G(U){if(V){I(N,U??new h);return}V=!0;let ie=N._readableState,fe=N._writableState,pe=fe||ie;ie&&(ie.constructed=!0),fe&&(fe.constructed=!0),pe.destroyed?N.emit(f,U):U?I(N,U,!0):o.nextTick(k,N)}try{N._construct(U=>{o.nextTick(G,U)})}catch(U){o.nextTick(G,U)}}function k(N){N.emit(d)}function P(N){return N?.setHeader&&typeof N.abort=="function"}function $(N){N.emit("close")}function K(N,V){N.emit("error",V),o.nextTick($,N)}function ae(N,V){!N||r(N)||(!V&&!n(N)&&(V=new t),l(N)?(N.socket=null,N.destroy(V)):P(N)?N.abort():P(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(V):typeof N.close=="function"?N.close():V?o.nextTick(K,N,V):o.nextTick($,N),N.destroyed||(N[i]=!0))}c.exports={construct:T,destroyer:ae,destroy:y,undestroy:w,errorOrDestroy:I}}),wn=de((s,c)=>{"use strict";ne(),se(),oe();var{ArrayIsArray:o,ObjectSetPrototypeOf:a}=je(),{EventEmitter:h}=(Lt(),Re(At));function t(i){h.call(this,i)}a(t.prototype,h.prototype),a(t,h),t.prototype.pipe=function(i,r){let n=this;function l(E){i.writable&&i.write(E)===!1&&n.pause&&n.pause()}n.on("data",l);function f(){n.readable&&n.resume&&n.resume()}i.on("drain",f),!i._isStdio&&(!r||r.end!==!1)&&(n.on("end",p),n.on("close",y));let d=!1;function p(){d||(d=!0,i.end())}function y(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(E){b(),h.listenerCount(this,"error")===0&&this.emit("error",E)}e(n,"error",g),e(i,"error",g);function b(){n.removeListener("data",l),i.removeListener("drain",f),n.removeListener("end",p),n.removeListener("close",y),n.removeListener("error",g),i.removeListener("error",g),n.removeListener("end",b),n.removeListener("close",b),i.removeListener("close",b)}return n.on("end",b),n.on("close",b),i.on("close",b),i.emit("pipe",n),i};function e(i,r,n){if(typeof i.prependListener=="function")return i.prependListener(r,n);!i._events||!i._events[r]?i.on(r,n):o(i._events[r])?i._events[r].unshift(n):i._events[r]=[n,i._events[r]]}c.exports={Stream:t,prependListener:e}}),Pr=de((s,c)=>{"use strict";ne(),se(),oe();var{SymbolDispose:o}=je(),{AbortError:a,codes:h}=Qe(),{isNodeStream:t,isWebStream:e,kControllerErrorFunction:i}=mt(),r=kt(),{ERR_INVALID_ARG_TYPE:n}=h,l,f=(d,p)=>{if(typeof d!="object"||!("aborted"in d))throw new n(p,"AbortSignal",d)};c.exports.addAbortSignal=function(d,p){if(f(d,"signal"),!t(p)&&!e(p))throw new n("stream",["ReadableStream","WritableStream","Stream"],p);return c.exports.addAbortSignalNoValidate(d,p)},c.exports.addAbortSignalNoValidate=function(d,p){if(typeof d!="object"||!("aborted"in d))return p;let y=t(p)?()=>{p.destroy(new a(void 0,{cause:d.reason}))}:()=>{p[i](new a(void 0,{cause:d.reason}))};if(d.aborted)y();else{l=l||Ge().addAbortListener;let g=l(d,y);r(p,g[o])}return p}}),Ka=de((s,c)=>{"use strict";ne(),se(),oe();var{StringPrototypeSlice:o,SymbolIterator:a,TypedArrayPrototypeSet:h,Uint8Array:t}=je(),{Buffer:e}=(Fe(),Re(De)),{inspect:i}=Ge();c.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(r){let n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(r){let n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}clear(){this.head=this.tail=null,this.length=0}join(r){if(this.length===0)return"";let n=this.head,l=""+n.data;for(;(n=n.next)!==null;)l+=r+n.data;return l}concat(r){if(this.length===0)return e.alloc(0);let n=e.allocUnsafe(r>>>0),l=this.head,f=0;for(;l;)h(n,l.data,f),f+=l.data.length,l=l.next;return n}consume(r,n){let l=this.head.data;if(r<l.length){let f=l.slice(0,r);return this.head.data=l.slice(r),f}return r===l.length?this.shift():n?this._getString(r):this._getBuffer(r)}first(){return this.head.data}*[a](){for(let r=this.head;r;r=r.next)yield r.data}_getString(r){let n="",l=this.head,f=0;do{let d=l.data;if(r>d.length)n+=d,r-=d.length;else{r===d.length?(n+=d,++f,l.next?this.head=l.next:this.head=this.tail=null):(n+=o(d,0,r),this.head=l,l.data=o(d,r));break}++f}while((l=l.next)!==null);return this.length-=f,n}_getBuffer(r){let n=e.allocUnsafe(r),l=r,f=this.head,d=0;do{let p=f.data;if(r>p.length)h(n,p,l-r),r-=p.length;else{r===p.length?(h(n,p,l-r),++d,f.next?this.head=f.next:this.head=this.tail=null):(h(n,new t(p.buffer,p.byteOffset,r),l-r),this.head=f,f.data=p.slice(r));break}++d}while((f=f.next)!==null);return this.length-=d,n}[Symbol.for("nodejs.util.inspect.custom")](r,n){return i(this,Ft($e({},n),{depth:0,customInspect:!1}))}}}),xr=de((s,c)=>{"use strict";ne(),se(),oe();var{MathFloor:o,NumberIsInteger:a}=je(),{validateInteger:h}=cr(),{ERR_INVALID_ARG_VALUE:t}=Qe().codes,e=16*1024,i=16;function r(d,p,y){return d.highWaterMark!=null?d.highWaterMark:p?d[y]:null}function n(d){return d?i:e}function l(d,p){h(p,"value",0),d?i=p:e=p}function f(d,p,y,g){let b=r(p,g,y);if(b!=null){if(!a(b)||b<0){let E=g?`options.${y}`:"options.highWaterMark";throw new t(E,b)}return o(b)}return n(d.objectMode)}c.exports={getHighWaterMark:f,getDefaultHighWaterMark:n,setDefaultHighWaterMark:l}}),Ya=de((s,c)=>{ne(),se(),oe();var o=(Fe(),Re(De)),a=o.Buffer;function h(e,i){for(var r in e)i[r]=e[r]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?c.exports=o:(h(o,s),s.Buffer=t);function t(e,i,r){return a(e,i,r)}t.prototype=Object.create(a.prototype),h(a,t),t.from=function(e,i,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return a(e,i,r)},t.alloc=function(e,i,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=a(e);return i!==void 0?typeof r=="string"?n.fill(i,r):n.fill(i):n.fill(0),n},t.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return a(e)},t.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}}),Ja=de(s=>{"use strict";ne(),se(),oe();var c=Ya().Buffer,o=c.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(m){if(!m)return"utf8";for(var w;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(w)return;m=(""+m).toLowerCase(),w=!0}}function h(m){var w=a(m);if(typeof w!="string"&&(c.isEncoding===o||!o(m)))throw new Error("Unknown encoding: "+m);return w||m}s.StringDecoder=t;function t(m){this.encoding=h(m);var w;switch(this.encoding){case"utf16le":this.text=d,this.end=p,w=4;break;case"utf8":this.fillLast=n,w=4;break;case"base64":this.text=y,this.end=g,w=3;break;default:this.write=b,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(w)}t.prototype.write=function(m){if(m.length===0)return"";var w,I;if(this.lastNeed){if(w=this.fillLast(m),w===void 0)return"";I=this.lastNeed,this.lastNeed=0}else I=0;return I<m.length?w?w+this.text(m,I):this.text(m,I):w||""},t.prototype.end=f,t.prototype.text=l,t.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function e(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function i(m,w,I){var T=w.length-1;if(T<I)return 0;var S=e(w[T]);return S>=0?(S>0&&(m.lastNeed=S-1),S):--T<I||S===-2?0:(S=e(w[T]),S>=0?(S>0&&(m.lastNeed=S-2),S):--T<I||S===-2?0:(S=e(w[T]),S>=0?(S>0&&(S===2?S=0:m.lastNeed=S-3),S):0))}function r(m,w,I){if((w[0]&192)!==128)return m.lastNeed=0,"\uFFFD";if(m.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return m.lastNeed=1,"\uFFFD";if(m.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return m.lastNeed=2,"\uFFFD"}}function n(m){var w=this.lastTotal-this.lastNeed,I=r(this,m,w);if(I!==void 0)return I;if(this.lastNeed<=m.length)return m.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,w,0,m.length),this.lastNeed-=m.length}function l(m,w){var I=i(this,m,w);if(!this.lastNeed)return m.toString("utf8",w);this.lastTotal=I;var T=m.length-(I-this.lastNeed);return m.copy(this.lastChar,0,T),m.toString("utf8",w,T)}function f(m){var w=m&&m.length?this.write(m):"";return this.lastNeed?w+"\uFFFD":w}function d(m,w){if((m.length-w)%2===0){var I=m.toString("utf16le",w);if(I){var T=I.charCodeAt(I.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],I.slice(0,-1)}return I}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",w,m.length-1)}function p(m){var w=m&&m.length?this.write(m):"";if(this.lastNeed){var I=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,I)}return w}function y(m,w){var I=(m.length-w)%3;return I===0?m.toString("base64",w):(this.lastNeed=3-I,this.lastTotal=3,I===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",w,m.length-I))}function g(m){var w=m&&m.length?this.write(m):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function b(m){return m.toString(this.encoding)}function E(m){return m&&m.length?this.write(m):""}}),Zo=de((s,c)=>{"use strict";ne(),se(),oe();var o=Ut(),{PromisePrototypeThen:a,SymbolAsyncIterator:h,SymbolIterator:t}=je(),{Buffer:e}=(Fe(),Re(De)),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:r}=Qe().codes;function n(l,f,d){let p;if(typeof f=="string"||f instanceof e)return new l(Ft($e({objectMode:!0},d),{read(){this.push(f),this.push(null)}}));let y;if(f&&f[h])y=!0,p=f[h]();else if(f&&f[t])y=!1,p=f[t]();else throw new i("iterable",["Iterable"],f);let g=new l($e({objectMode:!0,highWaterMark:1},d)),b=!1;g._read=function(){b||(b=!0,m())},g._destroy=function(w,I){a(E(w),()=>o.nextTick(I,w),T=>o.nextTick(I,T||w))};function E(w){return xe(this,null,function*(){let I=w!=null,T=typeof p.throw=="function";if(I&&T){let{value:S,done:k}=yield p.throw(w);if(yield S,k)return}if(typeof p.return=="function"){let{value:S}=yield p.return();yield S}})}function m(){return xe(this,null,function*(){for(;;){try{let{value:w,done:I}=y?yield p.next():p.next();if(I)g.push(null);else{let T=w&&typeof w.then=="function"?yield w:w;if(T===null)throw b=!1,new r;if(g.push(T))continue;b=!1}}catch(w){g.destroy(w)}break}})}return g}c.exports=n}),Mr=de((s,c)=>{"use strict";ne(),se(),oe();var o=Ut(),{ArrayPrototypeIndexOf:a,NumberIsInteger:h,NumberIsNaN:t,NumberParseInt:e,ObjectDefineProperties:i,ObjectKeys:r,ObjectSetPrototypeOf:n,Promise:l,SafeSet:f,SymbolAsyncDispose:d,SymbolAsyncIterator:p,Symbol:y}=je();c.exports=te,te.ReadableState=be;var{EventEmitter:g}=(Lt(),Re(At)),{Stream:b,prependListener:E}=wn(),{Buffer:m}=(Fe(),Re(De)),{addAbortSignal:w}=Pr(),I=kt(),T=Ge().debuglog("stream",A=>{T=A}),S=Ka(),k=zt(),{getHighWaterMark:P,getDefaultHighWaterMark:$}=xr(),{aggregateTwoErrors:K,codes:{ERR_INVALID_ARG_TYPE:ae,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:V,ERR_STREAM_PUSH_AFTER_EOF:G,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:U},AbortError:ie}=Qe(),{validateObject:fe}=cr(),pe=y("kPaused"),{StringDecoder:_e}=Ja(),F=Zo();n(te.prototype,b.prototype),n(te,b);var he=()=>{},{errorOrDestroy:O}=k,ue=1,ye=2,J=4,ve=8,H=16,x=32,ee=64,z=128,W=256,q=512,le=1024,ce=2048,R=4096,M=8192,D=16384,Y=32768,Z=65536,re=1<<17,j=1<<18;function X(A){return{enumerable:!1,get(){return(this.state&A)!==0},set(C){C?this.state|=A:this.state&=~A}}}i(be.prototype,{objectMode:X(ue),ended:X(ye),endEmitted:X(J),reading:X(ve),constructed:X(H),sync:X(x),needReadable:X(ee),emittedReadable:X(z),readableListening:X(W),resumeScheduled:X(q),errorEmitted:X(le),emitClose:X(ce),autoDestroy:X(R),destroyed:X(M),closed:X(D),closeEmitted:X(Y),multiAwaitDrain:X(Z),readingMore:X(re),dataEmitted:X(j)});function be(A,C,me){typeof me!="boolean"&&(me=C instanceof pt()),this.state=ce|R|H|x,A&&A.objectMode&&(this.state|=ue),me&&A&&A.readableObjectMode&&(this.state|=ue),this.highWaterMark=A?P(this,A,"readableHighWaterMark",me):$(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[pe]=null,A&&A.emitClose===!1&&(this.state&=~ce),A&&A.autoDestroy===!1&&(this.state&=~R),this.errored=null,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,A&&A.encoding&&(this.decoder=new _e(A.encoding),this.encoding=A.encoding)}function te(A){if(!(this instanceof te))return new te(A);let C=this instanceof pt();this._readableState=new be(A,this,C),A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&!C&&w(A.signal,this)),b.call(this,A),k.construct(this,()=>{this._readableState.needReadable&&Ae(this,this._readableState)})}te.prototype.destroy=k.destroy,te.prototype._undestroy=k.undestroy,te.prototype._destroy=function(A,C){C(A)},te.prototype[g.captureRejectionSymbol]=function(A){this.destroy(A)},te.prototype[d]=function(){let A;return this.destroyed||(A=this.readableEnded?null:new ie,this.destroy(A)),new l((C,me)=>I(this,we=>we&&we!==A?me(we):C(null)))},te.prototype.push=function(A,C){return Ee(this,A,C,!1)},te.prototype.unshift=function(A,C){return Ee(this,A,C,!0)};function Ee(A,C,me,we){T("readableAddChunk",C);let Se=A._readableState,qe;if((Se.state&ue)===0&&(typeof C=="string"?(me=me||Se.defaultEncoding,Se.encoding!==me&&(we&&Se.encoding?C=m.from(C,me).toString(Se.encoding):(C=m.from(C,me),me=""))):C instanceof m?me="":b._isUint8Array(C)?(C=b._uint8ArrayToBuffer(C),me=""):C!=null&&(qe=new ae("chunk",["string","Buffer","Uint8Array"],C))),qe)O(A,qe);else if(C===null)Se.state&=~ve,L(A,Se);else if((Se.state&ue)!==0||C&&C.length>0)if(we)if((Se.state&J)!==0)O(A,new U);else{if(Se.destroyed||Se.errored)return!1;u(A,Se,C,!0)}else if(Se.ended)O(A,new G);else{if(Se.destroyed||Se.errored)return!1;Se.state&=~ve,Se.decoder&&!me?(C=Se.decoder.write(C),Se.objectMode||C.length!==0?u(A,Se,C,!1):Ae(A,Se)):u(A,Se,C,!1)}else we||(Se.state&=~ve,Ae(A,Se));return!Se.ended&&(Se.length<Se.highWaterMark||Se.length===0)}function u(A,C,me,we){C.flowing&&C.length===0&&!C.sync&&A.listenerCount("data")>0?((C.state&Z)!==0?C.awaitDrainWriters.clear():C.awaitDrainWriters=null,C.dataEmitted=!0,A.emit("data",me)):(C.length+=C.objectMode?1:me.length,we?C.buffer.unshift(me):C.buffer.push(me),(C.state&ee)!==0&&Q(A)),Ae(A,C)}te.prototype.isPaused=function(){let A=this._readableState;return A[pe]===!0||A.flowing===!1},te.prototype.setEncoding=function(A){let C=new _e(A);this._readableState.decoder=C,this._readableState.encoding=this._readableState.decoder.encoding;let me=this._readableState.buffer,we="";for(let Se of me)we+=C.write(Se);return me.clear(),we!==""&&me.push(we),this._readableState.length=we.length,this};var _=1073741824;function v(A){if(A>_)throw new V("size","<= 1GiB",A);return A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++,A}function B(A,C){return A<=0||C.length===0&&C.ended?0:(C.state&ue)!==0?1:t(A)?C.flowing&&C.length?C.buffer.first().length:C.length:A<=C.length?A:C.ended?C.length:0}te.prototype.read=function(A){T("read",A),A===void 0?A=NaN:h(A)||(A=e(A,10));let C=this._readableState,me=A;if(A>C.highWaterMark&&(C.highWaterMark=v(A)),A!==0&&(C.state&=~z),A===0&&C.needReadable&&((C.highWaterMark!==0?C.length>=C.highWaterMark:C.length>0)||C.ended))return T("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?Lr(this):Q(this),null;if(A=B(A,C),A===0&&C.ended)return C.length===0&&Lr(this),null;let we=(C.state&ee)!==0;if(T("need readable",we),(C.length===0||C.length-A<C.highWaterMark)&&(we=!0,T("length less than watermark",we)),C.ended||C.reading||C.destroyed||C.errored||!C.constructed)we=!1,T("reading, ended or constructing",we);else if(we){T("do read"),C.state|=ve|x,C.length===0&&(C.state|=ee);try{this._read(C.highWaterMark)}catch(qe){O(this,qe)}C.state&=~x,C.reading||(A=B(me,C))}let Se;return A>0?Se=Cn(A,C):Se=null,Se===null?(C.needReadable=C.length<=C.highWaterMark,A=0):(C.length-=A,C.multiAwaitDrain?C.awaitDrainWriters.clear():C.awaitDrainWriters=null),C.length===0&&(C.ended||(C.needReadable=!0),me!==A&&C.ended&&Lr(this)),Se!==null&&!C.errorEmitted&&!C.closeEmitted&&(C.dataEmitted=!0,this.emit("data",Se)),Se};function L(A,C){if(T("onEofChunk"),!C.ended){if(C.decoder){let me=C.decoder.end();me&&me.length&&(C.buffer.push(me),C.length+=C.objectMode?1:me.length)}C.ended=!0,C.sync?Q(A):(C.needReadable=!1,C.emittedReadable=!0,ge(A))}}function Q(A){let C=A._readableState;T("emitReadable",C.needReadable,C.emittedReadable),C.needReadable=!1,C.emittedReadable||(T("emitReadable",C.flowing),C.emittedReadable=!0,o.nextTick(ge,A))}function ge(A){let C=A._readableState;T("emitReadable_",C.destroyed,C.length,C.ended),!C.destroyed&&!C.errored&&(C.length||C.ended)&&(A.emit("readable"),C.emittedReadable=!1),C.needReadable=!C.flowing&&!C.ended&&C.length<=C.highWaterMark,In(A)}function Ae(A,C){!C.readingMore&&C.constructed&&(C.readingMore=!0,o.nextTick(Te,A,C))}function Te(A,C){for(;!C.reading&&!C.ended&&(C.length<C.highWaterMark||C.flowing&&C.length===0);){let me=C.length;if(T("maybeReadMore read 0"),A.read(0),me===C.length)break}C.readingMore=!1}te.prototype._read=function(A){throw new N("_read()")},te.prototype.pipe=function(A,C){let me=this,we=this._readableState;we.pipes.length===1&&(we.multiAwaitDrain||(we.multiAwaitDrain=!0,we.awaitDrainWriters=new f(we.awaitDrainWriters?[we.awaitDrainWriters]:[]))),we.pipes.push(A),T("pipe count=%d opts=%j",we.pipes.length,C);let Se=(!C||C.end!==!1)&&A!==o.stdout&&A!==o.stderr?Xe:Gt;we.endEmitted?o.nextTick(Se):me.once("end",Se),A.on("unpipe",qe);function qe(Tt,st){T("onunpipe"),Tt===me&&st&&st.hasUnpiped===!1&&(st.hasUnpiped=!0,ya())}function Xe(){T("onend"),A.end()}let It,Rn=!1;function ya(){T("cleanup"),A.removeListener("close",Fr),A.removeListener("finish",Wr),It&&A.removeListener("drain",It),A.removeListener("error",Dr),A.removeListener("unpipe",qe),me.removeListener("end",Xe),me.removeListener("end",Gt),me.removeListener("data",xn),Rn=!0,It&&we.awaitDrainWriters&&(!A._writableState||A._writableState.needDrain)&&It()}function Pn(){Rn||(we.pipes.length===1&&we.pipes[0]===A?(T("false write response, pause",0),we.awaitDrainWriters=A,we.multiAwaitDrain=!1):we.pipes.length>1&&we.pipes.includes(A)&&(T("false write response, pause",we.awaitDrainWriters.size),we.awaitDrainWriters.add(A)),me.pause()),It||(It=Pe(me,A),A.on("drain",It))}me.on("data",xn);function xn(Tt){T("ondata");let st=A.write(Tt);T("dest.write",st),st===!1&&Pn()}function Dr(Tt){if(T("onerror",Tt),Gt(),A.removeListener("error",Dr),A.listenerCount("error")===0){let st=A._writableState||A._readableState;st&&!st.errorEmitted?O(A,Tt):A.emit("error",Tt)}}E(A,"error",Dr);function Fr(){A.removeListener("finish",Wr),Gt()}A.once("close",Fr);function Wr(){T("onfinish"),A.removeListener("close",Fr),Gt()}A.once("finish",Wr);function Gt(){T("unpipe"),me.unpipe(A)}return A.emit("pipe",me),A.writableNeedDrain===!0?Pn():we.flowing||(T("pipe resume"),me.resume()),A};function Pe(A,C){return function(){let me=A._readableState;me.awaitDrainWriters===C?(T("pipeOnDrain",1),me.awaitDrainWriters=null):me.multiAwaitDrain&&(T("pipeOnDrain",me.awaitDrainWriters.size),me.awaitDrainWriters.delete(C)),(!me.awaitDrainWriters||me.awaitDrainWriters.size===0)&&A.listenerCount("data")&&A.resume()}}te.prototype.unpipe=function(A){let C=this._readableState,me={hasUnpiped:!1};if(C.pipes.length===0)return this;if(!A){let Se=C.pipes;C.pipes=[],this.pause();for(let qe=0;qe<Se.length;qe++)Se[qe].emit("unpipe",this,{hasUnpiped:!1});return this}let we=a(C.pipes,A);return we===-1?this:(C.pipes.splice(we,1),C.pipes.length===0&&this.pause(),A.emit("unpipe",this,me),this)},te.prototype.on=function(A,C){let me=b.prototype.on.call(this,A,C),we=this._readableState;return A==="data"?(we.readableListening=this.listenerCount("readable")>0,we.flowing!==!1&&this.resume()):A==="readable"&&!we.endEmitted&&!we.readableListening&&(we.readableListening=we.needReadable=!0,we.flowing=!1,we.emittedReadable=!1,T("on readable",we.length,we.reading),we.length?Q(this):we.reading||o.nextTick(Le,this)),me},te.prototype.addListener=te.prototype.on,te.prototype.removeListener=function(A,C){let me=b.prototype.removeListener.call(this,A,C);return A==="readable"&&o.nextTick(Ie,this),me},te.prototype.off=te.prototype.removeListener,te.prototype.removeAllListeners=function(A){let C=b.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&o.nextTick(Ie,this),C};function Ie(A){let C=A._readableState;C.readableListening=A.listenerCount("readable")>0,C.resumeScheduled&&C[pe]===!1?C.flowing=!0:A.listenerCount("data")>0?A.resume():C.readableListening||(C.flowing=null)}function Le(A){T("readable nexttick read 0"),A.read(0)}te.prototype.resume=function(){let A=this._readableState;return A.flowing||(T("resume"),A.flowing=!A.readableListening,da(this,A)),A[pe]=!1,this};function da(A,C){C.resumeScheduled||(C.resumeScheduled=!0,o.nextTick(pa,A,C))}function pa(A,C){T("resume",C.reading),C.reading||A.read(0),C.resumeScheduled=!1,A.emit("resume"),In(A),C.flowing&&!C.reading&&A.read(0)}te.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[pe]=!0,this};function In(A){let C=A._readableState;for(T("flow",C.flowing);C.flowing&&A.read()!==null;);}te.prototype.wrap=function(A){let C=!1;A.on("data",we=>{!this.push(we)&&A.pause&&(C=!0,A.pause())}),A.on("end",()=>{this.push(null)}),A.on("error",we=>{O(this,we)}),A.on("close",()=>{this.destroy()}),A.on("destroy",()=>{this.destroy()}),this._read=()=>{C&&A.resume&&(C=!1,A.resume())};let me=r(A);for(let we=1;we<me.length;we++){let Se=me[we];this[Se]===void 0&&typeof A[Se]=="function"&&(this[Se]=A[Se].bind(A))}return this},te.prototype[p]=function(){return Tn(this)},te.prototype.iterator=function(A){return A!==void 0&&fe(A,"options"),Tn(this,A)};function Tn(A,C){typeof A.read!="function"&&(A=te.wrap(A,{objectMode:!0}));let me=ga(A,C);return me.stream=A,me}function ga(A,C){return at(this,null,function*(){let me=he;function we(Xe){this===A?(me(),me=he):me=Xe}A.on("readable",we);let Se,qe=I(A,{writable:!1},Xe=>{Se=Xe?K(Se,Xe):null,me(),me=he});try{for(;;){let Xe=A.destroyed?null:A.read();if(Xe!==null)yield Xe;else{if(Se)throw Se;if(Se===null)return;yield new Ke(new l(we))}}}catch(Xe){throw Se=K(Se,Xe),Se}finally{(Se||C?.destroyOnReturn!==!1)&&(Se===void 0||A._readableState.autoDestroy)?k.destroyer(A,null):(A.off("readable",we),qe())}})}i(te.prototype,{readable:{__proto__:null,get(){let A=this._readableState;return!!A&&A.readable!==!1&&!A.destroyed&&!A.errorEmitted&&!A.endEmitted},set(A){this._readableState&&(this._readableState.readable=!!A)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(A){this._readableState&&(this._readableState.destroyed=A)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(be.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[pe]!==!1},set(A){this[pe]=!!A}}}),te._fromList=Cn;function Cn(A,C){if(C.length===0)return null;let me;return C.objectMode?me=C.buffer.shift():!A||A>=C.length?(C.decoder?me=C.buffer.join(""):C.buffer.length===1?me=C.buffer.first():me=C.buffer.concat(C.length),C.buffer.clear()):me=C.buffer.consume(A,C.decoder),me}function Lr(A){let C=A._readableState;T("endReadable",C.endEmitted),C.endEmitted||(C.ended=!0,o.nextTick(ma,C,A))}function ma(A,C){if(T("endReadableNT",A.endEmitted,A.length),!A.errored&&!A.closeEmitted&&!A.endEmitted&&A.length===0){if(A.endEmitted=!0,C.emit("end"),C.writable&&C.allowHalfOpen===!1)o.nextTick(ba,C);else if(A.autoDestroy){let me=C._writableState;(!me||me.autoDestroy&&(me.finished||me.writable===!1))&&C.destroy()}}}function ba(A){A.writable&&!A.writableEnded&&!A.destroyed&&A.end()}te.from=function(A,C){return F(te,A,C)};var Ur;function On(){return Ur===void 0&&(Ur={}),Ur}te.fromWeb=function(A,C){return On().newStreamReadableFromReadableStream(A,C)},te.toWeb=function(A,C){return On().newReadableStreamFromStreamReadable(A,C)},te.wrap=function(A,C){var me,we;return new te(Ft($e({objectMode:(me=(we=A.readableObjectMode)!==null&&we!==void 0?we:A.objectMode)!==null&&me!==void 0?me:!0},C),{destroy(Se,qe){k.destroyer(A,Se),qe(Se)}})).wrap(A)}}),vn=de((s,c)=>{"use strict";ne(),se(),oe();var o=Ut(),{ArrayPrototypeSlice:a,Error:h,FunctionPrototypeSymbolHasInstance:t,ObjectDefineProperty:e,ObjectDefineProperties:i,ObjectSetPrototypeOf:r,StringPrototypeToLowerCase:n,Symbol:l,SymbolHasInstance:f}=je();c.exports=fe,fe.WritableState=U;var{EventEmitter:d}=(Lt(),Re(At)),p=wn().Stream,{Buffer:y}=(Fe(),Re(De)),g=zt(),{addAbortSignal:b}=Pr(),{getHighWaterMark:E,getDefaultHighWaterMark:m}=xr(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:T,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:$,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:ae}=Qe().codes,{errorOrDestroy:N}=g;r(fe.prototype,p.prototype),r(fe,p);function V(){}var G=l("kOnFinished");function U(R,M,D){typeof D!="boolean"&&(D=M instanceof pt()),this.objectMode=!!(R&&R.objectMode),D&&(this.objectMode=this.objectMode||!!(R&&R.writableObjectMode)),this.highWaterMark=R?E(this,R,"writableHighWaterMark",D):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let Y=!!(R&&R.decodeStrings===!1);this.decodeStrings=!Y,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=O.bind(void 0,M),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ie(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!R||R.emitClose!==!1,this.autoDestroy=!R||R.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[G]=[]}function ie(R){R.buffered=[],R.bufferedIndex=0,R.allBuffers=!0,R.allNoop=!0}U.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},e(U.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function fe(R){let M=this instanceof pt();if(!M&&!t(fe,this))return new fe(R);this._writableState=new U(R,this,M),R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&b(R.signal,this)),p.call(this,R),g.construct(this,()=>{let D=this._writableState;D.writing||ve(this,D),z(this,D)})}e(fe,f,{__proto__:null,value:function(R){return t(this,R)?!0:this!==fe?!1:R&&R._writableState instanceof U}}),fe.prototype.pipe=function(){N(this,new S)};function pe(R,M,D,Y){let Z=R._writableState;if(typeof D=="function")Y=D,D=Z.defaultEncoding;else{if(!D)D=Z.defaultEncoding;else if(D!=="buffer"&&!y.isEncoding(D))throw new ae(D);typeof Y!="function"&&(Y=V)}if(M===null)throw new $;if(!Z.objectMode)if(typeof M=="string")Z.decodeStrings!==!1&&(M=y.from(M,D),D="buffer");else if(M instanceof y)D="buffer";else if(p._isUint8Array(M))M=p._uint8ArrayToBuffer(M),D="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],M);let re;return Z.ending?re=new K:Z.destroyed&&(re=new k("write")),re?(o.nextTick(Y,re),N(R,re,!0),re):(Z.pendingcb++,_e(R,Z,M,D,Y))}fe.prototype.write=function(R,M,D){return pe(this,R,M,D)===!0},fe.prototype.cork=function(){this._writableState.corked++},fe.prototype.uncork=function(){let R=this._writableState;R.corked&&(R.corked--,R.writing||ve(this,R))},fe.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=n(R)),!y.isEncoding(R))throw new ae(R);return this._writableState.defaultEncoding=R,this};function _e(R,M,D,Y,Z){let re=M.objectMode?1:D.length;M.length+=re;let j=M.length<M.highWaterMark;return j||(M.needDrain=!0),M.writing||M.corked||M.errored||!M.constructed?(M.buffered.push({chunk:D,encoding:Y,callback:Z}),M.allBuffers&&Y!=="buffer"&&(M.allBuffers=!1),M.allNoop&&Z!==V&&(M.allNoop=!1)):(M.writelen=re,M.writecb=Z,M.writing=!0,M.sync=!0,R._write(D,Y,M.onwrite),M.sync=!1),j&&!M.errored&&!M.destroyed}function F(R,M,D,Y,Z,re,j){M.writelen=Y,M.writecb=j,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new k("write")):D?R._writev(Z,M.onwrite):R._write(Z,re,M.onwrite),M.sync=!1}function he(R,M,D,Y){--M.pendingcb,Y(D),J(M),N(R,D)}function O(R,M){let D=R._writableState,Y=D.sync,Z=D.writecb;if(typeof Z!="function"){N(R,new T);return}D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0,M?(M.stack,D.errored||(D.errored=M),R._readableState&&!R._readableState.errored&&(R._readableState.errored=M),Y?o.nextTick(he,R,D,M,Z):he(R,D,M,Z)):(D.buffered.length>D.bufferedIndex&&ve(R,D),Y?D.afterWriteTickInfo!==null&&D.afterWriteTickInfo.cb===Z?D.afterWriteTickInfo.count++:(D.afterWriteTickInfo={count:1,cb:Z,stream:R,state:D},o.nextTick(ue,D.afterWriteTickInfo)):ye(R,D,1,Z))}function ue({stream:R,state:M,count:D,cb:Y}){return M.afterWriteTickInfo=null,ye(R,M,D,Y)}function ye(R,M,D,Y){for(!M.ending&&!R.destroyed&&M.length===0&&M.needDrain&&(M.needDrain=!1,R.emit("drain"));D-- >0;)M.pendingcb--,Y();M.destroyed&&J(M),z(R,M)}function J(R){if(R.writing)return;for(let Z=R.bufferedIndex;Z<R.buffered.length;++Z){var M;let{chunk:re,callback:j}=R.buffered[Z],X=R.objectMode?1:re.length;R.length-=X,j((M=R.errored)!==null&&M!==void 0?M:new k("write"))}let D=R[G].splice(0);for(let Z=0;Z<D.length;Z++){var Y;D[Z]((Y=R.errored)!==null&&Y!==void 0?Y:new k("end"))}ie(R)}function ve(R,M){if(M.corked||M.bufferProcessing||M.destroyed||!M.constructed)return;let{buffered:D,bufferedIndex:Y,objectMode:Z}=M,re=D.length-Y;if(!re)return;let j=Y;if(M.bufferProcessing=!0,re>1&&R._writev){M.pendingcb-=re-1;let X=M.allNoop?V:te=>{for(let Ee=j;Ee<D.length;++Ee)D[Ee].callback(te)},be=M.allNoop&&j===0?D:a(D,j);be.allBuffers=M.allBuffers,F(R,M,!0,M.length,be,"",X),ie(M)}else{do{let{chunk:X,encoding:be,callback:te}=D[j];D[j++]=null;let Ee=Z?1:X.length;F(R,M,!1,Ee,X,be,te)}while(j<D.length&&!M.writing);j===D.length?ie(M):j>256?(D.splice(0,j),M.bufferedIndex=0):M.bufferedIndex=j}M.bufferProcessing=!1}fe.prototype._write=function(R,M,D){if(this._writev)this._writev([{chunk:R,encoding:M}],D);else throw new I("_write()")},fe.prototype._writev=null,fe.prototype.end=function(R,M,D){let Y=this._writableState;typeof R=="function"?(D=R,R=null,M=null):typeof M=="function"&&(D=M,M=null);let Z;if(R!=null){let re=pe(this,R,M);re instanceof h&&(Z=re)}return Y.corked&&(Y.corked=1,this.uncork()),Z||(!Y.errored&&!Y.ending?(Y.ending=!0,z(this,Y,!0),Y.ended=!0):Y.finished?Z=new P("end"):Y.destroyed&&(Z=new k("end"))),typeof D=="function"&&(Z||Y.finished?o.nextTick(D,Z):Y[G].push(D)),this};function H(R){return R.ending&&!R.destroyed&&R.constructed&&R.length===0&&!R.errored&&R.buffered.length===0&&!R.finished&&!R.writing&&!R.errorEmitted&&!R.closeEmitted}function x(R,M){let D=!1;function Y(Z){if(D){N(R,Z??T());return}if(D=!0,M.pendingcb--,Z){let re=M[G].splice(0);for(let j=0;j<re.length;j++)re[j](Z);N(R,Z,M.sync)}else H(M)&&(M.prefinished=!0,R.emit("prefinish"),M.pendingcb++,o.nextTick(W,R,M))}M.sync=!0,M.pendingcb++;try{R._final(Y)}catch(Z){Y(Z)}M.sync=!1}function ee(R,M){!M.prefinished&&!M.finalCalled&&(typeof R._final=="function"&&!M.destroyed?(M.finalCalled=!0,x(R,M)):(M.prefinished=!0,R.emit("prefinish")))}function z(R,M,D){H(M)&&(ee(R,M),M.pendingcb===0&&(D?(M.pendingcb++,o.nextTick((Y,Z)=>{H(Z)?W(Y,Z):Z.pendingcb--},R,M)):H(M)&&(M.pendingcb++,W(R,M))))}function W(R,M){M.pendingcb--,M.finished=!0;let D=M[G].splice(0);for(let Y=0;Y<D.length;Y++)D[Y]();if(R.emit("finish"),M.autoDestroy){let Y=R._readableState;(!Y||Y.autoDestroy&&(Y.endEmitted||Y.readable===!1))&&R.destroy()}}i(fe.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(R){this._writableState&&(this._writableState.destroyed=R)}},writable:{__proto__:null,get(){let R=this._writableState;return!!R&&R.writable!==!1&&!R.destroyed&&!R.errored&&!R.ending&&!R.ended},set(R){this._writableState&&(this._writableState.writable=!!R)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let R=this._writableState;return R?!R.destroyed&&!R.ending&&R.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var q=g.destroy;fe.prototype.destroy=function(R,M){let D=this._writableState;return!D.destroyed&&(D.bufferedIndex<D.buffered.length||D[G].length)&&o.nextTick(J,D),q.call(this,R,M),this},fe.prototype._undestroy=g.undestroy,fe.prototype._destroy=function(R,M){M(R)},fe.prototype[d.captureRejectionSymbol]=function(R){this.destroy(R)};var le;function ce(){return le===void 0&&(le={}),le}fe.fromWeb=function(R,M){return ce().newStreamWritableFromWritableStream(R,M)},fe.toWeb=function(R){return ce().newWritableStreamFromStreamWritable(R)}}),Xa=de((s,c)=>{ne(),se(),oe();var o=Ut(),a=(Fe(),Re(De)),{isReadable:h,isWritable:t,isIterable:e,isNodeStream:i,isReadableNodeStream:r,isWritableNodeStream:n,isDuplexNodeStream:l,isReadableStream:f,isWritableStream:d}=mt(),p=kt(),{AbortError:y,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:b}}=Qe(),{destroyer:E}=zt(),m=pt(),w=Mr(),I=vn(),{createDeferredPromise:T}=Ge(),S=Zo(),k=globalThis.Blob||a.Blob,P=typeof k<"u"?function(G){return G instanceof k}:function(G){return!1},$=globalThis.AbortController||hr().AbortController,{FunctionPrototypeCall:K}=je(),ae=class extends m{constructor(G){super(G),G?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),G?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};c.exports=function G(U,ie){if(l(U))return U;if(r(U))return V({readable:U});if(n(U))return V({writable:U});if(i(U))return V({writable:!1,readable:!1});if(f(U))return V({readable:w.fromWeb(U)});if(d(U))return V({writable:I.fromWeb(U)});if(typeof U=="function"){let{value:pe,write:_e,final:F,destroy:he}=N(U);if(e(pe))return S(ae,pe,{objectMode:!0,write:_e,final:F,destroy:he});let O=pe?.then;if(typeof O=="function"){let ue,ye=K(O,pe,J=>{if(J!=null)throw new b("nully","body",J)},J=>{E(ue,J)});return ue=new ae({objectMode:!0,readable:!1,write:_e,final(J){F(()=>xe(null,null,function*(){try{yield ye,o.nextTick(J,null)}catch(ve){o.nextTick(J,ve)}}))},destroy:he})}throw new b("Iterable, AsyncIterable or AsyncFunction",ie,pe)}if(P(U))return G(U.arrayBuffer());if(e(U))return S(ae,U,{objectMode:!0,writable:!1});if(f(U?.readable)&&d(U?.writable))return ae.fromWeb(U);if(typeof U?.writable=="object"||typeof U?.readable=="object"){let pe=U!=null&&U.readable?r(U?.readable)?U?.readable:G(U.readable):void 0,_e=U!=null&&U.writable?n(U?.writable)?U?.writable:G(U.writable):void 0;return V({readable:pe,writable:_e})}let fe=U?.then;if(typeof fe=="function"){let pe;return K(fe,U,_e=>{_e!=null&&pe.push(_e),pe.push(null)},_e=>{E(pe,_e)}),pe=new ae({objectMode:!0,writable:!1,read(){}})}throw new g(ie,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],U)};function N(G){let{promise:U,resolve:ie}=T(),fe=new $,pe=fe.signal;return{value:G(function(){return at(this,null,function*(){for(;;){let _e=U;U=null;let{chunk:F,done:he,cb:O}=yield new Ke(_e);if(o.nextTick(O),he)return;if(pe.aborted)throw new y(void 0,{cause:pe.reason});({promise:U,resolve:ie}=T()),yield F}})}(),{signal:pe}),write(_e,F,he){let O=ie;ie=null,O({chunk:_e,done:!1,cb:he})},final(_e){let F=ie;ie=null,F({done:!0,cb:_e})},destroy(_e,F){fe.abort(),F(_e)}}}function V(G){let U=G.readable&&typeof G.readable.read!="function"?w.wrap(G.readable):G.readable,ie=G.writable,fe=!!h(U),pe=!!t(ie),_e,F,he,O,ue;function ye(J){let ve=O;O=null,ve?ve(J):J&&ue.destroy(J)}return ue=new ae({readableObjectMode:!!(U!=null&&U.readableObjectMode),writableObjectMode:!!(ie!=null&&ie.writableObjectMode),readable:fe,writable:pe}),pe&&(p(ie,J=>{pe=!1,J&&E(U,J),ye(J)}),ue._write=function(J,ve,H){ie.write(J,ve)?H():_e=H},ue._final=function(J){ie.end(),F=J},ie.on("drain",function(){if(_e){let J=_e;_e=null,J()}}),ie.on("finish",function(){if(F){let J=F;F=null,J()}})),fe&&(p(U,J=>{fe=!1,J&&E(U,J),ye(J)}),U.on("readable",function(){if(he){let J=he;he=null,J()}}),U.on("end",function(){ue.push(null)}),ue._read=function(){for(;;){let J=U.read();if(J===null){he=ue._read;return}if(!ue.push(J))return}}),ue._destroy=function(J,ve){!J&&O!==null&&(J=new y),he=null,_e=null,F=null,O===null?ve(J):(O=ve,E(ie,J),E(U,J))},ue}}),pt=de((s,c)=>{"use strict";ne(),se(),oe();var{ObjectDefineProperties:o,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:h,ObjectSetPrototypeOf:t}=je();c.exports=r;var e=Mr(),i=vn();t(r.prototype,e.prototype),t(r,e);{let d=h(i.prototype);for(let p=0;p<d.length;p++){let y=d[p];r.prototype[y]||(r.prototype[y]=i.prototype[y])}}function r(d){if(!(this instanceof r))return new r(d);e.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}o(r.prototype,{writable:$e({__proto__:null},a(i.prototype,"writable")),writableHighWaterMark:$e({__proto__:null},a(i.prototype,"writableHighWaterMark")),writableObjectMode:$e({__proto__:null},a(i.prototype,"writableObjectMode")),writableBuffer:$e({__proto__:null},a(i.prototype,"writableBuffer")),writableLength:$e({__proto__:null},a(i.prototype,"writableLength")),writableFinished:$e({__proto__:null},a(i.prototype,"writableFinished")),writableCorked:$e({__proto__:null},a(i.prototype,"writableCorked")),writableEnded:$e({__proto__:null},a(i.prototype,"writableEnded")),writableNeedDrain:$e({__proto__:null},a(i.prototype,"writableNeedDrain")),destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});var n;function l(){return n===void 0&&(n={}),n}r.fromWeb=function(d,p){return l().newStreamDuplexFromReadableWritablePair(d,p)},r.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};var f;r.from=function(d){return f||(f=Xa()),f(d,"body")}}),es=de((s,c)=>{"use strict";ne(),se(),oe();var{ObjectSetPrototypeOf:o,Symbol:a}=je();c.exports=r;var{ERR_METHOD_NOT_IMPLEMENTED:h}=Qe().codes,t=pt(),{getHighWaterMark:e}=xr();o(r.prototype,t.prototype),o(r,t);var i=a("kCallback");function r(f){if(!(this instanceof r))return new r(f);let d=f?e(this,f,"readableHighWaterMark",!0):null;d===0&&(f=Ft($e({},f),{highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:f.writableHighWaterMark||0})),t.call(this,f),this._readableState.sync=!1,this[i]=null,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",l)}function n(f){typeof this._flush=="function"&&!this.destroyed?this._flush((d,p)=>{if(d){f?f(d):this.destroy(d);return}p!=null&&this.push(p),this.push(null),f&&f()}):(this.push(null),f&&f())}function l(){this._final!==n&&n.call(this)}r.prototype._final=n,r.prototype._transform=function(f,d,p){throw new h("_transform()")},r.prototype._write=function(f,d,p){let y=this._readableState,g=this._writableState,b=y.length;this._transform(f,d,(E,m)=>{if(E){p(E);return}m!=null&&this.push(m),g.ended||b===y.length||y.length<y.highWaterMark?p():this[i]=p})},r.prototype._read=function(){if(this[i]){let f=this[i];this[i]=null,f()}}}),ts=de((s,c)=>{"use strict";ne(),se(),oe();var{ObjectSetPrototypeOf:o}=je();c.exports=h;var a=es();o(h.prototype,a.prototype),o(h,a);function h(t){if(!(this instanceof h))return new h(t);a.call(this,t)}h.prototype._transform=function(t,e,i){i(null,t)}}),En=de((s,c)=>{ne(),se(),oe();var o=Ut(),{ArrayIsArray:a,Promise:h,SymbolAsyncIterator:t,SymbolDispose:e}=je(),i=kt(),{once:r}=Ge(),n=zt(),l=pt(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:E}=Qe(),{validateFunction:m,validateAbortSignal:w}=cr(),{isIterable:I,isReadable:T,isReadableNodeStream:S,isNodeStream:k,isTransformStream:P,isWebStream:$,isReadableStream:K,isReadableFinished:ae}=mt(),N=globalThis.AbortController||hr().AbortController,V,G,U;function ie(J,ve,H){let x=!1;J.on("close",()=>{x=!0});let ee=i(J,{readable:ve,writable:H},z=>{x=!z});return{destroy:z=>{x||(x=!0,n.destroyer(J,z||new g("pipe")))},cleanup:ee}}function fe(J){return m(J[J.length-1],"streams[stream.length - 1]"),J.pop()}function pe(J){if(I(J))return J;if(S(J))return _e(J);throw new d("val",["Readable","Iterable","AsyncIterable"],J)}function _e(J){return at(this,null,function*(){G||(G=Mr()),yield*_t(G.prototype[t].call(J))})}function F(ee,z,W,q){return xe(this,arguments,function*(J,ve,H,{end:x}){let le,ce=null,R=X=>{if(X&&(le=X),ce){let be=ce;ce=null,be()}},M=()=>new h((X,be)=>{le?be(le):ce=()=>{le?be(le):X()}});ve.on("drain",R);let D=i(ve,{readable:!1},R);try{ve.writableNeedDrain&&(yield M());try{for(var Y=Ye(J),Z,re,j;Z=!(re=yield Y.next()).done;Z=!1){let X=re.value;ve.write(X)||(yield M())}}catch{j=[re]}finally{try{Z&&(re=Y.return)&&(yield re.call(Y))}finally{if(j)throw j[0]}}x&&(ve.end(),yield M()),H()}catch(X){H(le!==X?f(le,X):X)}finally{D(),ve.off("drain",R)}})}function he(ee,z,W,q){return xe(this,arguments,function*(J,ve,H,{end:x}){P(ve)&&(ve=ve.writable);let le=ve.getWriter();try{try{for(var ce=Ye(J),R,M,D;R=!(M=yield ce.next()).done;R=!1){let Y=M.value;yield le.ready,le.write(Y).catch(()=>{})}}catch{D=[M]}finally{try{R&&(M=ce.return)&&(yield M.call(ce))}finally{if(D)throw D[0]}}yield le.ready,x&&(yield le.close()),H()}catch(Y){try{yield le.abort(Y),H(Y)}catch(Z){H(Z)}}})}function O(...J){return ue(J,r(fe(J)))}function ue(J,ve,H){if(J.length===1&&a(J[0])&&(J=J[0]),J.length<2)throw new y("streams");let x=new N,ee=x.signal,z=H?.signal,W=[];w(z,"options.signal");function q(){Z(new E)}U=U||Ge().addAbortListener;let le;z&&(le=U(z,q));let ce,R,M=[],D=0;function Y(te){Z(te,--D===0)}function Z(te,Ee){var u;if(te&&(!ce||ce.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ce=te),!(!ce&&!Ee)){for(;M.length;)M.shift()(ce);(u=le)===null||u===void 0||u[e](),x.abort(),Ee&&(ce||W.forEach(_=>_()),o.nextTick(ve,ce,R))}}let re;for(let te=0;te<J.length;te++){let Ee=J[te],u=te<J.length-1,_=te>0,v=u||H?.end!==!1,B=te===J.length-1;if(k(Ee)){let L=function(Q){Q&&Q.name!=="AbortError"&&Q.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Y(Q)};var j=L;if(v){let{destroy:Q,cleanup:ge}=ie(Ee,u,_);M.push(Q),T(Ee)&&B&&W.push(ge)}Ee.on("error",L),T(Ee)&&B&&W.push(()=>{Ee.removeListener("error",L)})}if(te===0)if(typeof Ee=="function"){if(re=Ee({signal:ee}),!I(re))throw new p("Iterable, AsyncIterable or Stream","source",re)}else I(Ee)||S(Ee)||P(Ee)?re=Ee:re=l.from(Ee);else if(typeof Ee=="function"){if(P(re)){var X;re=pe((X=re)===null||X===void 0?void 0:X.readable)}else re=pe(re);if(re=Ee(re,{signal:ee}),u){if(!I(re,!0))throw new p("AsyncIterable",`transform[${te-1}]`,re)}else{var be;V||(V=ts());let L=new V({objectMode:!0}),Q=(be=re)===null||be===void 0?void 0:be.then;if(typeof Q=="function")D++,Q.call(re,Te=>{R=Te,Te!=null&&L.write(Te),v&&L.end(),o.nextTick(Y)},Te=>{L.destroy(Te),o.nextTick(Y,Te)});else if(I(re,!0))D++,F(re,L,Y,{end:v});else if(K(re)||P(re)){let Te=re.readable||re;D++,F(Te,L,Y,{end:v})}else throw new p("AsyncIterable or Promise","destination",re);re=L;let{destroy:ge,cleanup:Ae}=ie(re,!1,!0);M.push(ge),B&&W.push(Ae)}}else if(k(Ee)){if(S(re)){D+=2;let L=ye(re,Ee,Y,{end:v});T(Ee)&&B&&W.push(L)}else if(P(re)||K(re)){let L=re.readable||re;D++,F(L,Ee,Y,{end:v})}else if(I(re))D++,F(re,Ee,Y,{end:v});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],re);re=Ee}else if($(Ee)){if(S(re))D++,he(pe(re),Ee,Y,{end:v});else if(K(re)||I(re))D++,he(re,Ee,Y,{end:v});else if(P(re))D++,he(re.readable,Ee,Y,{end:v});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],re);re=Ee}else re=l.from(Ee)}return(ee!=null&&ee.aborted||z!=null&&z.aborted)&&o.nextTick(q),re}function ye(J,ve,H,{end:x}){let ee=!1;if(ve.on("close",()=>{ee||H(new b)}),J.pipe(ve,{end:!1}),x){let W=function(){ee=!0,ve.end()};var z=W;ae(J)?o.nextTick(W):J.once("end",W)}else H();return i(J,{readable:!0,writable:!1},W=>{let q=J._readableState;W&&W.code==="ERR_STREAM_PREMATURE_CLOSE"&&q&&q.ended&&!q.errored&&!q.errorEmitted?J.once("end",H).once("error",H):H(W)}),i(ve,{readable:!1,writable:!0},H)}c.exports={pipelineImpl:ue,pipeline:O}}),rs=de((s,c)=>{"use strict";ne(),se(),oe();var{pipeline:o}=En(),a=pt(),{destroyer:h}=zt(),{isNodeStream:t,isReadable:e,isWritable:i,isWebStream:r,isTransformStream:n,isWritableStream:l,isReadableStream:f}=mt(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:y}}=Qe(),g=kt();c.exports=function(...b){if(b.length===0)throw new y("streams");if(b.length===1)return a.from(b[0]);let E=[...b];if(typeof b[0]=="function"&&(b[0]=a.from(b[0])),typeof b[b.length-1]=="function"){let N=b.length-1;b[N]=a.from(b[N])}for(let N=0;N<b.length;++N)if(!(!t(b[N])&&!r(b[N]))){if(N<b.length-1&&!(e(b[N])||f(b[N])||n(b[N])))throw new p(`streams[${N}]`,E[N],"must be readable");if(N>0&&!(i(b[N])||l(b[N])||n(b[N])))throw new p(`streams[${N}]`,E[N],"must be writable")}let m,w,I,T,S;function k(N){let V=T;T=null,V?V(N):N?S.destroy(N):!ae&&!K&&S.destroy()}let P=b[0],$=o(b,k),K=!!(i(P)||l(P)||n(P)),ae=!!(e($)||f($)||n($));if(S=new a({writableObjectMode:!!(P!=null&&P.writableObjectMode),readableObjectMode:!!($!=null&&$.readableObjectMode),writable:K,readable:ae}),K){if(t(P))S._write=function(V,G,U){P.write(V,G)?U():m=U},S._final=function(V){P.end(),w=V},P.on("drain",function(){if(m){let V=m;m=null,V()}});else if(r(P)){let V=(n(P)?P.writable:P).getWriter();S._write=function(G,U,ie){return xe(this,null,function*(){try{yield V.ready,V.write(G).catch(()=>{}),ie()}catch(fe){ie(fe)}})},S._final=function(G){return xe(this,null,function*(){try{yield V.ready,V.close().catch(()=>{}),w=G}catch(U){G(U)}})}}let N=n($)?$.readable:$;g(N,()=>{if(w){let V=w;w=null,V()}})}if(ae){if(t($))$.on("readable",function(){if(I){let N=I;I=null,N()}}),$.on("end",function(){S.push(null)}),S._read=function(){for(;;){let N=$.read();if(N===null){I=S._read;return}if(!S.push(N))return}};else if(r($)){let N=(n($)?$.readable:$).getReader();S._read=function(){return xe(this,null,function*(){for(;;)try{let{value:V,done:G}=yield N.read();if(!S.push(V))return;if(G){S.push(null);return}}catch{return}})}}}return S._destroy=function(N,V){!N&&T!==null&&(N=new d),I=null,m=null,w=null,T===null?V(N):(T=V,t($)&&h($,N))},S}}),Za=de((s,c)=>{"use strict";ne(),se(),oe();var o=globalThis.AbortController||hr().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:h,ERR_MISSING_ARGS:t,ERR_OUT_OF_RANGE:e},AbortError:i}=Qe(),{validateAbortSignal:r,validateInteger:n,validateObject:l}=cr(),f=je().Symbol("kWeak"),d=je().Symbol("kResistStopPropagation"),{finished:p}=kt(),y=rs(),{addAbortSignalNoValidate:g}=Pr(),{isWritable:b,isNodeStream:E}=mt(),{deprecate:m}=Ge(),{ArrayPrototypePush:w,Boolean:I,MathFloor:T,Number:S,NumberIsNaN:k,Promise:P,PromiseReject:$,PromiseResolve:K,PromisePrototypeThen:ae,Symbol:N}=je(),V=N("kEmpty"),G=N("kEof");function U(z,W){if(W!=null&&l(W,"options"),W?.signal!=null&&r(W.signal,"options.signal"),E(z)&&!b(z))throw new a("stream",z,"must be writable");let q=y(this,z);return W!=null&&W.signal&&g(W.signal,q),q}function ie(z,W){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);W!=null&&l(W,"options"),W?.signal!=null&&r(W.signal,"options.signal");let q=1;W?.concurrency!=null&&(q=T(W.concurrency));let le=q-1;return W?.highWaterMark!=null&&(le=T(W.highWaterMark)),n(q,"options.concurrency",1),n(le,"options.highWaterMark",0),le+=q,(function(){return at(this,null,function*(){let ce=Ge().AbortSignalAny([W?.signal].filter(I)),R=this,M=[],D={signal:ce},Y,Z,re=!1,j=0;function X(){re=!0,be()}function be(){j-=1,te()}function te(){Z&&!re&&j<q&&M.length<le&&(Z(),Z=null)}function Ee(){return xe(this,null,function*(){try{try{for(var u=Ye(R),_,v,B;_=!(v=yield u.next()).done;_=!1){let L=v.value;if(re)return;if(ce.aborted)throw new i;try{if(L=z(L,D),L===V)continue;L=K(L)}catch(Q){L=$(Q)}j+=1,ae(L,be,X),M.push(L),Y&&(Y(),Y=null),!re&&(M.length>=le||j>=q)&&(yield new P(Q=>{Z=Q}))}}catch{B=[v]}finally{try{_&&(v=u.return)&&(yield v.call(u))}finally{if(B)throw B[0]}}M.push(G)}catch(L){let Q=$(L);ae(Q,be,X),M.push(Q)}finally{re=!0,Y&&(Y(),Y=null)}})}Ee();try{for(;;){for(;M.length>0;){let u=yield new Ke(M[0]);if(u===G)return;if(ce.aborted)throw new i;u!==V&&(yield u),M.shift(),te()}yield new Ke(new P(u=>{Y=u}))}}finally{re=!0,Z&&(Z(),Z=null)}})}).call(this)}function fe(z=void 0){return z!=null&&l(z,"options"),z?.signal!=null&&r(z.signal,"options.signal"),(function(){return at(this,null,function*(){let W=0;try{for(var le=Ye(this),ce,R,M;ce=!(R=yield new Ke(le.next())).done;ce=!1){let D=R.value;var q;if(z!=null&&(q=z.signal)!==null&&q!==void 0&&q.aborted)throw new i({cause:z.signal.reason});yield[W++,D]}}catch{M=[R]}finally{try{ce&&(R=le.return)&&(yield new Ke(R.call(le)))}finally{if(M)throw M[0]}}})}).call(this)}function pe(z,W=void 0){return xe(this,null,function*(){try{for(var q=Ye(O.call(this,z,W)),le,ce,R;le=!(ce=yield q.next()).done;le=!1){let M=ce.value;return!0}}catch{R=[ce]}finally{try{le&&(ce=q.return)&&(yield ce.call(q))}finally{if(R)throw R[0]}}return!1})}function _e(z,W=void 0){return xe(this,null,function*(){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);return!(yield pe.call(this,(...q)=>xe(this,null,function*(){return!(yield z(...q))}),W))})}function F(z,W){return xe(this,null,function*(){try{for(var q=Ye(O.call(this,z,W)),le,ce,R;le=!(ce=yield q.next()).done;le=!1){let M=ce.value;return M}}catch{R=[ce]}finally{try{le&&(ce=q.return)&&(yield ce.call(q))}finally{if(R)throw R[0]}}})}function he(z,W){return xe(this,null,function*(){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);function q(D,Y){return xe(this,null,function*(){return yield z(D,Y),V})}try{for(var le=Ye(ie.call(this,q,W)),ce,R,M;ce=!(R=yield le.next()).done;ce=!1){let D=R.value;;}}catch{M=[R]}finally{try{ce&&(R=le.return)&&(yield R.call(le))}finally{if(M)throw M[0]}}})}function O(z,W){if(typeof z!="function")throw new h("fn",["Function","AsyncFunction"],z);function q(le,ce){return xe(this,null,function*(){return(yield z(le,ce))?le:V})}return ie.call(this,q,W)}var ue=class extends t{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function ye(le,ce,R){return xe(this,arguments,function*(z,W,q){var M;if(typeof z!="function")throw new h("reducer",["Function","AsyncFunction"],z);q!=null&&l(q,"options"),q?.signal!=null&&r(q.signal,"options.signal");let D=arguments.length>1;if(q!=null&&(M=q.signal)!==null&&M!==void 0&&M.aborted){let u=new i(void 0,{cause:q.signal.reason});throw this.once("error",()=>{}),yield p(this.destroy(u)),u}let Y=new o,Z=Y.signal;if(q!=null&&q.signal){let u={once:!0,[f]:this,[d]:!0};q.signal.addEventListener("abort",()=>Y.abort(),u)}let re=!1;try{try{for(var X=Ye(this),be,te,Ee;be=!(te=yield X.next()).done;be=!1){let u=te.value;var j;if(re=!0,q!=null&&(j=q.signal)!==null&&j!==void 0&&j.aborted)throw new i;D?W=yield z(W,u,{signal:Z}):(W=u,D=!0)}}catch{Ee=[te]}finally{try{be&&(te=X.return)&&(yield te.call(X))}finally{if(Ee)throw Ee[0]}}if(!re&&!D)throw new ue}finally{Y.abort()}return W})}function J(z){return xe(this,null,function*(){z!=null&&l(z,"options"),z?.signal!=null&&r(z.signal,"options.signal");let W=[];try{for(var le=Ye(this),ce,R,M;ce=!(R=yield le.next()).done;ce=!1){let D=R.value;var q;if(z!=null&&(q=z.signal)!==null&&q!==void 0&&q.aborted)throw new i(void 0,{cause:z.signal.reason});w(W,D)}}catch{M=[R]}finally{try{ce&&(R=le.return)&&(yield R.call(le))}finally{if(M)throw M[0]}}return W})}function ve(z,W){let q=ie.call(this,z,W);return(function(){return at(this,null,function*(){try{for(var le=Ye(q),ce,R,M;ce=!(R=yield new Ke(le.next())).done;ce=!1){let D=R.value;yield*_t(D)}}catch{M=[R]}finally{try{ce&&(R=le.return)&&(yield new Ke(R.call(le)))}finally{if(M)throw M[0]}}})}).call(this)}function H(z){if(z=S(z),k(z))return 0;if(z<0)throw new e("number",">= 0",z);return z}function x(z,W=void 0){return W!=null&&l(W,"options"),W?.signal!=null&&r(W.signal,"options.signal"),z=H(z),(function(){return at(this,null,function*(){var q;if(W!=null&&(q=W.signal)!==null&&q!==void 0&&q.aborted)throw new i;try{for(var ce=Ye(this),R,M,D;R=!(M=yield new Ke(ce.next())).done;R=!1){let Y=M.value;var le;if(W!=null&&(le=W.signal)!==null&&le!==void 0&&le.aborted)throw new i;z--<=0&&(yield Y)}}catch{D=[M]}finally{try{R&&(M=ce.return)&&(yield new Ke(M.call(ce)))}finally{if(D)throw D[0]}}})}).call(this)}function ee(z,W=void 0){return W!=null&&l(W,"options"),W?.signal!=null&&r(W.signal,"options.signal"),z=H(z),(function(){return at(this,null,function*(){var q;if(W!=null&&(q=W.signal)!==null&&q!==void 0&&q.aborted)throw new i;try{for(var ce=Ye(this),R,M,D;R=!(M=yield new Ke(ce.next())).done;R=!1){let Y=M.value;var le;if(W!=null&&(le=W.signal)!==null&&le!==void 0&&le.aborted)throw new i;if(z-- >0&&(yield Y),z<=0)return}}catch{D=[M]}finally{try{R&&(M=ce.return)&&(yield new Ke(M.call(ce)))}finally{if(D)throw D[0]}}})}).call(this)}c.exports.streamReturningOperators={asIndexedPairs:m(fe,"readable.asIndexedPairs will be removed in a future version."),drop:x,filter:O,flatMap:ve,map:ie,take:ee,compose:U},c.exports.promiseReturningOperators={every:_e,forEach:he,reduce:ye,toArray:J,some:pe,find:F}}),is=de((s,c)=>{"use strict";ne(),se(),oe();var{ArrayPrototypePop:o,Promise:a}=je(),{isIterable:h,isNodeStream:t,isWebStream:e}=mt(),{pipelineImpl:i}=En(),{finished:r}=kt();ns();function n(...l){return new a((f,d)=>{let p,y,g=l[l.length-1];if(g&&typeof g=="object"&&!t(g)&&!h(g)&&!e(g)){let b=o(l);p=b.signal,y=b.end}i(l,(b,E)=>{b?d(b):f(E)},{signal:p,end:y})})}c.exports={finished:r,pipeline:n}}),ns=de((s,c)=>{"use strict";ne(),se(),oe();var{Buffer:o}=(Fe(),Re(De)),{ObjectDefineProperty:a,ObjectKeys:h,ReflectApply:t}=je(),{promisify:{custom:e}}=Ge(),{streamReturningOperators:i,promiseReturningOperators:r}=Za(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:n}}=Qe(),l=rs(),{setDefaultHighWaterMark:f,getDefaultHighWaterMark:d}=xr(),{pipeline:p}=En(),{destroyer:y}=zt(),g=kt(),b=is(),E=mt(),m=c.exports=wn().Stream;m.isDestroyed=E.isDestroyed,m.isDisturbed=E.isDisturbed,m.isErrored=E.isErrored,m.isReadable=E.isReadable,m.isWritable=E.isWritable,m.Readable=Mr();for(let I of h(i)){let T=function(...k){if(new.target)throw n();return m.Readable.from(t(S,this,k))},S=i[I];a(T,"name",{__proto__:null,value:S.name}),a(T,"length",{__proto__:null,value:S.length}),a(m.Readable.prototype,I,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(let I of h(r)){let T=function(...k){if(new.target)throw n();return t(S,this,k)},S=r[I];a(T,"name",{__proto__:null,value:S.name}),a(T,"length",{__proto__:null,value:S.length}),a(m.Readable.prototype,I,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}m.Writable=vn(),m.Duplex=pt(),m.Transform=es(),m.PassThrough=ts(),m.pipeline=p;var{addAbortSignal:w}=Pr();m.addAbortSignal=w,m.finished=g,m.destroy=y,m.compose=l,m.setDefaultHighWaterMark=f,m.getDefaultHighWaterMark=d,a(m,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),a(p,e,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),a(g,e,{__proto__:null,enumerable:!0,get(){return b.finished}}),m.Stream=m,m._isUint8Array=function(I){return I instanceof Uint8Array},m._uint8ArrayToBuffer=function(I){return o.from(I.buffer,I.byteOffset,I.byteLength)}}),Dt=de((s,c)=>{"use strict";ne(),se(),oe();var o=ns(),a=is(),h=o.Readable.destroy;c.exports=o.Readable,c.exports._uint8ArrayToBuffer=o._uint8ArrayToBuffer,c.exports._isUint8Array=o._isUint8Array,c.exports.isDisturbed=o.isDisturbed,c.exports.isErrored=o.isErrored,c.exports.isReadable=o.isReadable,c.exports.Readable=o.Readable,c.exports.Writable=o.Writable,c.exports.Duplex=o.Duplex,c.exports.Transform=o.Transform,c.exports.PassThrough=o.PassThrough,c.exports.addAbortSignal=o.addAbortSignal,c.exports.finished=o.finished,c.exports.destroy=o.destroy,c.exports.destroy=h,c.exports.pipeline=o.pipeline,c.exports.compose=o.compose,Object.defineProperty(o,"promises",{configurable:!0,enumerable:!0,get(){return a}}),c.exports.Stream=o.Stream,c.exports.default=c.exports}),el=de((s,c)=>{ne(),se(),oe(),typeof Object.create=="function"?c.exports=function(o,a){a&&(o.super_=a,o.prototype=Object.create(a.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(o,a){if(a){o.super_=a;var h=function(){};h.prototype=a.prototype,o.prototype=new h,o.prototype.constructor=o}}}),tl=de((s,c)=>{"use strict";ne(),se(),oe();var{Buffer:o}=(Fe(),Re(De)),a=Symbol.for("BufferList");function h(t){if(!(this instanceof h))return new h(t);h._init.call(this,t)}h._init=function(t){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},h.prototype._new=function(t){return new h(t)},h.prototype._offset=function(t){if(t===0)return[0,0];let e=0;for(let i=0;i<this._bufs.length;i++){let r=e+this._bufs[i].length;if(t<r||i===this._bufs.length-1)return[i,t-e];e=r}},h.prototype._reverseOffset=function(t){let e=t[0],i=t[1];for(let r=0;r<e;r++)i+=this._bufs[r].length;return i},h.prototype.get=function(t){if(t>this.length||t<0)return;let e=this._offset(t);return this._bufs[e[0]][e[1]]},h.prototype.slice=function(t,e){return typeof t=="number"&&t<0&&(t+=this.length),typeof e=="number"&&e<0&&(e+=this.length),this.copy(null,0,t,e)},h.prototype.copy=function(t,e,i,r){if((typeof i!="number"||i<0)&&(i=0),(typeof r!="number"||r>this.length)&&(r=this.length),i>=this.length||r<=0)return t||o.alloc(0);let n=!!t,l=this._offset(i),f=r-i,d=f,p=n&&e||0,y=l[1];if(i===0&&r===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:o.concat(this._bufs,this.length);for(let g=0;g<this._bufs.length;g++)this._bufs[g].copy(t,p),p+=this._bufs[g].length;return t}if(d<=this._bufs[l[0]].length-y)return n?this._bufs[l[0]].copy(t,e,y,y+d):this._bufs[l[0]].slice(y,y+d);n||(t=o.allocUnsafe(f));for(let g=l[0];g<this._bufs.length;g++){let b=this._bufs[g].length-y;if(d>b)this._bufs[g].copy(t,p,y),p+=b;else{this._bufs[g].copy(t,p,y,y+d),p+=b;break}d-=b,y&&(y=0)}return t.length>p?t.slice(0,p):t},h.prototype.shallowSlice=function(t,e){if(t=t||0,e=typeof e!="number"?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();let i=this._offset(t),r=this._offset(e),n=this._bufs.slice(i[0],r[0]+1);return r[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,r[1]),i[1]!==0&&(n[0]=n[0].slice(i[1])),this._new(n)},h.prototype.toString=function(t,e,i){return this.slice(e,i).toString(t)},h.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;)if(t>=this._bufs[0].length)t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}return this},h.prototype.duplicate=function(){let t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},h.prototype.append=function(t){if(t==null)return this;if(t.buffer)this._appendBuffer(o.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else typeof t=="number"&&(t=t.toString()),this._appendBuffer(o.from(t));return this},h.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},h.prototype.indexOf=function(t,e,i){if(i===void 0&&typeof e=="string"&&(i=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=o.from([t]):typeof t=="string"?t=o.from(t,i):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=o.from(t.buffer,t.byteOffset,t.byteLength):o.isBuffer(t)||(t=o.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let r=this._offset(e),n=r[0],l=r[1];for(;n<this._bufs.length;n++){let f=this._bufs[n];for(;l<f.length;)if(f.length-l>=t.length){let d=f.indexOf(t,l);if(d!==-1)return this._reverseOffset([n,d]);l=f.length-t.length+1}else{let d=this._reverseOffset([n,l]);if(this._match(d,t))return d;l++}l=0}return-1},h.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let i=0;i<e.length;i++)if(this.get(t+i)!==e[i])return!1;return!0},function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(i){t[i]===null?h.prototype[i]=function(r,n){return this.slice(r,r+n)[i](0,n)}:h.prototype[i]=function(r=0){return this.slice(r,r+t[i])[i](0)}})(e)}(),h.prototype._isBufferList=function(t){return t instanceof h||h.isBufferList(t)},h.isBufferList=function(t){return t!=null&&t[a]},c.exports=h}),rl=de((s,c)=>{"use strict";ne(),se(),oe();var o=Dt().Duplex,a=el(),h=tl();function t(e){if(!(this instanceof t))return new t(e);if(typeof e=="function"){this._callback=e;let i=(function(r){this._callback&&(this._callback(r),this._callback=null)}).bind(this);this.on("pipe",function(r){r.on("error",i)}),this.on("unpipe",function(r){r.removeListener("error",i)}),e=null}h._init.call(this,e),o.call(this)}a(t,o),Object.assign(t.prototype,h.prototype),t.prototype._new=function(e){return new t(e)},t.prototype._write=function(e,i,r){this._appendBuffer(e),typeof r=="function"&&r()},t.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},t.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},t.prototype._destroy=function(e,i){this._bufs.length=0,this.length=0,i(e)},t.prototype._isBufferList=function(e){return e instanceof t||e instanceof h||t.isBufferList(e)},t.isBufferList=h.isBufferList,c.exports=t,c.exports.BufferListStream=t,c.exports.BufferList=h}),il=de((s,c)=>{ne(),se(),oe();var o=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};c.exports=o}),os=de((s,c)=>{ne(),se(),oe();var o=c.exports,{Buffer:a}=(Fe(),Re(De));o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},o.requiredHeaderFlagsErrors={};for(let t in o.requiredHeaderFlags){let e=o.requiredHeaderFlags[t];o.requiredHeaderFlagsErrors[t]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+o.types[t]+" packet"}o.codes={};for(let t in o.types){let e=o.types[t];o.codes[e]=t}o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=a.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=a.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=a.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={};for(let t in o.properties){let e=o.properties[t];o.propertiesCodes[e]=t}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function h(t){return[0,1,2].map(e=>[0,1].map(i=>[0,1].map(r=>{let n=a.alloc(1);return n.writeUInt8(o.codes[t]<<o.CMD_SHIFT|(i?o.DUP_MASK:0)|e<<o.QOS_SHIFT|r,0,!0),n})))}o.PUBLISH_HEADER=h("publish"),o.SUBSCRIBE_HEADER=h("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=h("unsubscribe"),o.ACKS={unsuback:h("unsuback"),puback:h("puback"),pubcomp:h("pubcomp"),pubrel:h("pubrel"),pubrec:h("pubrec")},o.SUBACK_HEADER=a.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=a.from([3]),o.VERSION4=a.from([4]),o.VERSION5=a.from([5]),o.VERSION131=a.from([131]),o.VERSION132=a.from([132]),o.QOS=[0,1,2].map(t=>a.from([t])),o.EMPTY={pingreq:a.from([o.codes.pingreq<<4,0]),pingresp:a.from([o.codes.pingresp<<4,0]),disconnect:a.from([o.codes.disconnect<<4,0])},o.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},o.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},o.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},o.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},o.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),nl=de((s,c)=>{ne(),se(),oe();var o=1e3,a=o*60,h=a*60,t=h*24,e=t*7,i=t*365.25;c.exports=function(d,p){p=p||{};var y=typeof d;if(y==="string"&&d.length>0)return r(d);if(y==="number"&&isFinite(d))return p.long?l(d):n(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function r(d){if(d=String(d),!(d.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(p){var y=parseFloat(p[1]),g=(p[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*e;case"days":case"day":case"d":return y*t;case"hours":case"hour":case"hrs":case"hr":case"h":return y*h;case"minutes":case"minute":case"mins":case"min":case"m":return y*a;case"seconds":case"second":case"secs":case"sec":case"s":return y*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function n(d){var p=Math.abs(d);return p>=t?Math.round(d/t)+"d":p>=h?Math.round(d/h)+"h":p>=a?Math.round(d/a)+"m":p>=o?Math.round(d/o)+"s":d+"ms"}function l(d){var p=Math.abs(d);return p>=t?f(d,p,t,"day"):p>=h?f(d,p,h,"hour"):p>=a?f(d,p,a,"minute"):p>=o?f(d,p,o,"second"):d+" ms"}function f(d,p,y,g){var b=p>=y*1.5;return Math.round(d/y)+" "+g+(b?"s":"")}}),ol=de((s,c)=>{ne(),se(),oe();function o(a){t.debug=t,t.default=t,t.coerce=f,t.disable=n,t.enable=i,t.enabled=l,t.humanize=nl(),t.destroy=d,Object.keys(a).forEach(p=>{t[p]=a[p]}),t.names=[],t.skips=[],t.formatters={};function h(p){let y=0;for(let g=0;g<p.length;g++)y=(y<<5)-y+p.charCodeAt(g),y|=0;return t.colors[Math.abs(y)%t.colors.length]}t.selectColor=h;function t(p){let y,g=null,b,E;function m(...w){if(!m.enabled)return;let I=m,T=Number(new Date),S=T-(y||T);I.diff=S,I.prev=y,I.curr=T,y=T,w[0]=t.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let k=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(P,$)=>{if(P==="%%")return"%";k++;let K=t.formatters[$];if(typeof K=="function"){let ae=w[k];P=K.call(I,ae),w.splice(k,1),k--}return P}),t.formatArgs.call(I,w),(I.log||t.log).apply(I,w)}return m.namespace=p,m.useColors=t.useColors(),m.color=t.selectColor(p),m.extend=e,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(b!==t.namespaces&&(b=t.namespaces,E=t.enabled(p)),E),set:w=>{g=w}}),typeof t.init=="function"&&t.init(m),m}function e(p,y){let g=t(this.namespace+(typeof y>"u"?":":y)+p);return g.log=this.log,g}function i(p){t.save(p),t.namespaces=p,t.names=[],t.skips=[];let y=(typeof p=="string"?p:"").trim().replace(" ",",").split(",").filter(Boolean);for(let g of y)g[0]==="-"?t.skips.push(g.slice(1)):t.names.push(g)}function r(p,y){let g=0,b=0,E=-1,m=0;for(;g<p.length;)if(b<y.length&&(y[b]===p[g]||y[b]==="*"))y[b]==="*"?(E=b,m=g,b++):(g++,b++);else if(E!==-1)b=E+1,m++,g=m;else return!1;for(;b<y.length&&y[b]==="*";)b++;return b===y.length}function n(){let p=[...t.names,...t.skips.map(y=>"-"+y)].join(",");return t.enable(""),p}function l(p){for(let y of t.skips)if(r(p,y))return!1;for(let y of t.names)if(r(p,y))return!0;return!1}function f(p){return p instanceof Error?p.stack||p.message:p}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}c.exports=o}),gt=de((s,c)=>{ne(),se(),oe(),s.formatArgs=a,s.save=h,s.load=t,s.useColors=o,s.storage=e(),s.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let r;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(r[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;let n="color: "+this.color;r.splice(1,0,n,"color: inherit");let l=0,f=0;r[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(f=l))}),r.splice(f,0,n)}s.log=console.debug||console.log||(()=>{});function h(r){try{r?s.storage.setItem("debug",r):s.storage.removeItem("debug")}catch{}}function t(){let r;try{r=s.storage.getItem("debug")}catch{}return!r&&typeof ke<"u"&&"env"in ke&&(r=ke.env.DEBUG),r}function e(){try{return localStorage}catch{}}c.exports=ol()(s);var{formatters:i}=c.exports;i.j=function(r){try{return JSON.stringify(r)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}),sl=de((s,c)=>{ne(),se(),oe();var o=rl(),{EventEmitter:a}=(Lt(),Re(At)),h=il(),t=os(),e=gt()("mqtt-packet:parser"),i=class an extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(n){return this instanceof an?(this.settings=n||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new an().parser(n)}_resetState(){e("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new h,this.error=null,this._list=o(),this._stateCounter=0}parse(n){for(this.error&&this._resetState(),this._list.append(n),e("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,e("parse: state complete. _stateCounter is now: %d",this._stateCounter),e("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return e("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let n=this._list.readUInt8(0),l=n>>t.CMD_SHIFT;this.packet.cmd=t.types[l];let f=n&15,d=t.requiredHeaderFlags[l];return d!=null&&f!==d?this._emitError(new Error(t.requiredHeaderFlagsErrors[l])):(this.packet.retain=(n&t.RETAIN_MASK)!==0,this.packet.qos=n>>t.QOS_SHIFT&t.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(n&t.DUP_MASK)!==0,e("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let n=this._parseVarByteNum(!0);return n&&(this.packet.length=n.value,this._list.consume(n.bytes)),e("_parseLength %d",n.value),!!n}_parsePayload(){e("_parsePayload: payload %O",this._list);let n=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}n=!0}return e("_parsePayload complete result: %s",n),n}_parseConnect(){e("_parseConnect");let n,l,f,d,p={},y=this.packet,g=this._parseString();if(g===null)return this._emitError(new Error("Cannot parse protocolId"));if(g!=="MQTT"&&g!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(y.protocolId=g,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.protocolVersion=this._list.readUInt8(this._pos),y.protocolVersion>=128&&(y.bridgeMode=!0,y.protocolVersion=y.protocolVersion-128),y.protocolVersion!==3&&y.protocolVersion!==4&&y.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));p.username=this._list.readUInt8(this._pos)&t.USERNAME_MASK,p.password=this._list.readUInt8(this._pos)&t.PASSWORD_MASK,p.will=this._list.readUInt8(this._pos)&t.WILL_FLAG_MASK;let b=!!(this._list.readUInt8(this._pos)&t.WILL_RETAIN_MASK),E=(this._list.readUInt8(this._pos)&t.WILL_QOS_MASK)>>t.WILL_QOS_SHIFT;if(p.will)y.will={},y.will.retain=b,y.will.qos=E;else{if(b)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(E)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(y.clean=(this._list.readUInt8(this._pos)&t.CLEAN_SESSION_MASK)!==0,this._pos++,y.keepalive=this._parseNum(),y.keepalive===-1)return this._emitError(new Error("Packet too short"));if(y.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(y.properties=w)}let m=this._parseString();if(m===null)return this._emitError(new Error("Packet too short"));if(y.clientId=m,e("_parseConnect: packet.clientId: %s",y.clientId),p.will){if(y.protocolVersion===5){let w=this._parseProperties();Object.getOwnPropertyNames(w).length&&(y.will.properties=w)}if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse will topic"));if(y.will.topic=n,e("_parseConnect: packet.will.topic: %s",y.will.topic),l=this._parseBuffer(),l===null)return this._emitError(new Error("Cannot parse will payload"));y.will.payload=l,e("_parseConnect: packet.will.paylaod: %s",y.will.payload)}if(p.username){if(d=this._parseString(),d===null)return this._emitError(new Error("Cannot parse username"));y.username=d,e("_parseConnect: packet.username: %s",y.username)}if(p.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));y.password=f}return this.settings=y,e("_parseConnect: complete"),y}_parseConnack(){e("_parseConnack");let n=this.packet;if(this._list.length<1)return null;let l=this._list.readUInt8(this._pos++);if(l>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(n.sessionPresent=!!(l&t.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?n.reasonCode=this._list.readUInt8(this._pos++):n.reasonCode=0;else{if(this._list.length<2)return null;n.returnCode=this._list.readUInt8(this._pos++)}if(n.returnCode===-1||n.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let f=this._parseProperties();Object.getOwnPropertyNames(f).length&&(n.properties=f)}e("_parseConnack: complete")}_parsePublish(){e("_parsePublish");let n=this.packet;if(n.topic=this._parseString(),n.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(n.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}n.payload=this._list.slice(this._pos,n.length),e("_parsePublish: payload from buffer list: %o",n.payload)}}_parseSubscribe(){e("_parseSubscribe");let n=this.packet,l,f,d,p,y,g,b;if(n.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let E=this._parseProperties();Object.getOwnPropertyNames(E).length&&(n.properties=E)}if(n.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<n.length;){if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=n.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(f=this._parseByte(),this.settings.protocolVersion===5){if(f&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(f&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(d=f&t.SUBSCRIBE_OPTIONS_QOS_MASK,d>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(g=(f>>t.SUBSCRIBE_OPTIONS_NL_SHIFT&t.SUBSCRIBE_OPTIONS_NL_MASK)!==0,y=(f>>t.SUBSCRIBE_OPTIONS_RAP_SHIFT&t.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,p=f>>t.SUBSCRIBE_OPTIONS_RH_SHIFT&t.SUBSCRIBE_OPTIONS_RH_MASK,p>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));b={topic:l,qos:d},this.settings.protocolVersion===5?(b.nl=g,b.rap=y,b.rh=p):this.settings.bridgeMode&&(b.rh=0,b.rap=!0,b.nl=!0),e("_parseSubscribe: push subscription `%s` to subscription",b),n.subscriptions.push(b)}}}_parseSuback(){e("_parseSuback");let n=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}if(n.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!t.MQTT5_SUBACK_CODES[l])return this._emitError(new Error("Invalid suback code"))}else if(l>2&&l!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(l)}}}_parseUnsubscribe(){e("_parseUnsubscribe");let n=this.packet;if(n.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}if(n.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<n.length;){let l=this._parseString();if(l===null)return this._emitError(new Error("Cannot parse topic"));e("_parseUnsubscribe: push topic `%s` to unsubscriptions",l),n.unsubscriptions.push(l)}}}_parseUnsuback(){e("_parseUnsuback");let n=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&n.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(n.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let l=this._parseProperties();for(Object.getOwnPropertyNames(l).length&&(n.properties=l),n.granted=[];this._pos<this.packet.length;){let f=this._list.readUInt8(this._pos++);if(!t.MQTT5_UNSUBACK_CODES[f])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(f)}}}_parseConfirmation(){e("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let n=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(n.length>2){switch(n.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!t.MQTT5_PUBACK_PUBREC_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!t.MQTT5_PUBREL_PUBCOMP_CODES[n.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}e("_parseConfirmation: packet.reasonCode `%d`",n.reasonCode)}else n.reasonCode=0;if(n.length>3){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}}return!0}_parseDisconnect(){let n=this.packet;if(e("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(n.reasonCode=this._parseByte(),t.MQTT5_DISCONNECT_CODES[n.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):n.reasonCode=0;let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(n.properties=l)}return e("_parseDisconnect result: true"),!0}_parseAuth(){e("_parseAuth");let n=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(n.reasonCode=this._parseByte(),!t.MQTT5_AUTH_CODES[n.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let l=this._parseProperties();return Object.getOwnPropertyNames(l).length&&(n.properties=l),e("_parseAuth: result: true"),!0}_parseMessageId(){let n=this.packet;return n.messageId=this._parseNum(),n.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(e("_parseMessageId: packet.messageId %d",n.messageId),!0)}_parseString(n){let l=this._parseNum(),f=l+this._pos;if(l===-1||f>this._list.length||f>this.packet.length)return null;let d=this._list.toString("utf8",this._pos,f);return this._pos+=l,e("_parseString: result: %s",d),d}_parseStringPair(){return e("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let n=this._parseNum(),l=n+this._pos;if(n===-1||l>this._list.length||l>this.packet.length)return null;let f=this._list.slice(this._pos,l);return this._pos+=n,e("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;let n=this._list.readUInt16BE(this._pos);return this._pos+=2,e("_parseNum: result: %s",n),n}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let n=this._list.readUInt32BE(this._pos);return this._pos+=4,e("_parse4ByteNum: result: %s",n),n}_parseVarByteNum(n){e("_parseVarByteNum");let l=4,f=0,d=1,p=0,y=!1,g,b=this._pos?this._pos:0;for(;f<l&&b+f<this._list.length;){if(g=this._list.readUInt8(b+f++),p+=d*(g&t.VARBYTEINT_MASK),d*=128,(g&t.VARBYTEINT_FIN_MASK)===0){y=!0;break}if(this._list.length<=f)break}return!y&&f===l&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),b&&(this._pos+=f),y?n?y={bytes:f,value:p}:y=p:y=!1,e("_parseVarByteNum: result: %o",y),y}_parseByte(){let n;return this._pos<this._list.length&&(n=this._list.readUInt8(this._pos),this._pos++),e("_parseByte: result: %o",n),n}_parseByType(n){switch(e("_parseByType: type: %s",n),n){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){e("_parseProperties");let n=this._parseVarByteNum(),l=this._pos+n,f={};for(;this._pos<l;){let d=this._parseByte();if(!d)return this._emitError(new Error("Cannot parse property code type")),!1;let p=t.propertiesCodes[d];if(!p)return this._emitError(new Error("Unknown property")),!1;if(p==="userProperties"){f[p]||(f[p]=Object.create(null));let y=this._parseByType(t.propertiesTypes[p]);if(f[p][y.name])if(Array.isArray(f[p][y.name]))f[p][y.name].push(y.value);else{let g=f[p][y.name];f[p][y.name]=[g],f[p][y.name].push(y.value)}else f[p][y.name]=y.value;continue}f[p]?Array.isArray(f[p])?f[p].push(this._parseByType(t.propertiesTypes[p])):(f[p]=[f[p]],f[p].push(this._parseByType(t.propertiesTypes[p]))):f[p]=this._parseByType(t.propertiesTypes[p])}return f}_newPacket(){return e("_newPacket"),this.packet&&(this._list.consume(this.packet.length),e("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),e("_newPacket: new packet"),this.packet=new h,this._pos=0,!0}_emitError(n){e("_emitError",n),this.error=n,this.emit("error",n)}};c.exports=i}),al=de((s,c)=>{ne(),se(),oe();var{Buffer:o}=(Fe(),Re(De)),a=65536,h={},t=o.isBuffer(o.from([1,2]).subarray(0,1));function e(l){let f=o.allocUnsafe(2);return f.writeUInt8(l>>8,0),f.writeUInt8(l&255,1),f}function i(){for(let l=0;l<a;l++)h[l]=e(l)}function r(l){let f=0,d=0,p=o.allocUnsafe(4);do f=l%128|0,l=l/128|0,l>0&&(f=f|128),p.writeUInt8(f,d++);while(l>0&&d<4);return l>0&&(d=0),t?p.subarray(0,d):p.slice(0,d)}function n(l){let f=o.allocUnsafe(4);return f.writeUInt32BE(l,0),f}c.exports={cache:h,generateCache:i,generateNumber:e,genBufVariableByteInt:r,generate4ByteBuffer:n}}),ll=de((s,c)=>{"use strict";ne(),se(),oe(),typeof ke>"u"||!ke.version||ke.version.indexOf("v0.")===0||ke.version.indexOf("v1.")===0&&ke.version.indexOf("v1.8.")!==0?c.exports={nextTick:o}:c.exports=ke;function o(a,h,t,e){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,r,n;switch(i){case 0:case 1:return ke.nextTick(a);case 2:return ke.nextTick(function(){a.call(null,h)});case 3:return ke.nextTick(function(){a.call(null,h,t)});case 4:return ke.nextTick(function(){a.call(null,h,t,e)});default:for(r=new Array(i-1),n=0;n<r.length;)r[n++]=arguments[n];return ke.nextTick(function(){a.apply(null,r)})}}}),ss=de((s,c)=>{ne(),se(),oe();var o=os(),{Buffer:a}=(Fe(),Re(De)),h=a.allocUnsafe(0),t=a.from([0]),e=al(),i=ll().nextTick,r=gt()("mqtt-packet:writeToStream"),n=e.cache,l=e.generateNumber,f=e.generateCache,d=e.genBufVariableByteInt,p=e.generate4ByteBuffer,y=fe,g=!0;function b(H,x,ee){switch(r("generate called"),x.cork&&(x.cork(),i(E,x)),g&&(g=!1,f()),r("generate: packet.cmd: %s",H.cmd),H.cmd){case"connect":return m(H,x,ee);case"connack":return w(H,x,ee);case"publish":return I(H,x,ee);case"puback":case"pubrec":case"pubrel":case"pubcomp":return T(H,x,ee);case"subscribe":return S(H,x,ee);case"suback":return k(H,x,ee);case"unsubscribe":return P(H,x,ee);case"unsuback":return $(H,x,ee);case"pingreq":case"pingresp":return K(H,x,ee);case"disconnect":return ae(H,x,ee);case"auth":return N(H,x,ee);default:return x.destroy(new Error("Unknown command")),!1}}Object.defineProperty(b,"cacheNumbers",{get(){return y===fe},set(H){H?((!n||Object.keys(n).length===0)&&(g=!0),y=fe):(g=!1,y=pe)}});function E(H){H.uncork()}function m(H,x,ee){let z=H||{},W=z.protocolId||"MQTT",q=z.protocolVersion||4,le=z.will,ce=z.clean,R=z.keepalive||0,M=z.clientId||"",D=z.username,Y=z.password,Z=z.properties;ce===void 0&&(ce=!0);let re=0;if(!W||typeof W!="string"&&!a.isBuffer(W))return x.destroy(new Error("Invalid protocolId")),!1;if(re+=W.length+2,q!==3&&q!==4&&q!==5)return x.destroy(new Error("Invalid protocol version")),!1;if(re+=1,(typeof M=="string"||a.isBuffer(M))&&(M||q>=4)&&(M||ce))re+=a.byteLength(M)+2;else{if(q<4)return x.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ce*1===0)return x.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof R!="number"||R<0||R>65535||R%1!==0)return x.destroy(new Error("Invalid keepalive")),!1;re+=2,re+=1;let j,X;if(q===5){if(j=he(x,Z),!j)return!1;re+=j.length}if(le){if(typeof le!="object")return x.destroy(new Error("Invalid will")),!1;if(!le.topic||typeof le.topic!="string")return x.destroy(new Error("Invalid will topic")),!1;if(re+=a.byteLength(le.topic)+2,re+=2,le.payload)if(le.payload.length>=0)typeof le.payload=="string"?re+=a.byteLength(le.payload):re+=le.payload.length;else return x.destroy(new Error("Invalid will payload")),!1;if(X={},q===5){if(X=he(x,le.properties),!X)return!1;re+=X.length}}let be=!1;if(D!=null)if(ve(D))be=!0,re+=a.byteLength(D)+2;else return x.destroy(new Error("Invalid username")),!1;if(Y!=null){if(!be)return x.destroy(new Error("Username is required to use password")),!1;if(ve(Y))re+=J(Y)+2;else return x.destroy(new Error("Invalid password")),!1}x.write(o.CONNECT_HEADER),G(x,re),F(x,W),z.bridgeMode&&(q+=128),x.write(q===131?o.VERSION131:q===132?o.VERSION132:q===4?o.VERSION4:q===5?o.VERSION5:o.VERSION3);let te=0;return te|=D!=null?o.USERNAME_MASK:0,te|=Y!=null?o.PASSWORD_MASK:0,te|=le&&le.retain?o.WILL_RETAIN_MASK:0,te|=le&&le.qos?le.qos<<o.WILL_QOS_SHIFT:0,te|=le?o.WILL_FLAG_MASK:0,te|=ce?o.CLEAN_SESSION_MASK:0,x.write(a.from([te])),y(x,R),q===5&&j.write(),F(x,M),le&&(q===5&&X.write(),U(x,le.topic),F(x,le.payload)),D!=null&&F(x,D),Y!=null&&F(x,Y),!0}function w(H,x,ee){let z=ee?ee.protocolVersion:4,W=H||{},q=z===5?W.reasonCode:W.returnCode,le=W.properties,ce=2;if(typeof q!="number")return x.destroy(new Error("Invalid return code")),!1;let R=null;if(z===5){if(R=he(x,le),!R)return!1;ce+=R.length}return x.write(o.CONNACK_HEADER),G(x,ce),x.write(W.sessionPresent?o.SESSIONPRESENT_HEADER:t),x.write(a.from([q])),R?.write(),!0}function I(H,x,ee){r("publish: packet: %o",H);let z=ee?ee.protocolVersion:4,W=H||{},q=W.qos||0,le=W.retain?o.RETAIN_MASK:0,ce=W.topic,R=W.payload||h,M=W.messageId,D=W.properties,Y=0;if(typeof ce=="string")Y+=a.byteLength(ce)+2;else if(a.isBuffer(ce))Y+=ce.length+2;else return x.destroy(new Error("Invalid topic")),!1;if(a.isBuffer(R)?Y+=R.length:Y+=a.byteLength(R),q&&typeof M!="number")return x.destroy(new Error("Invalid messageId")),!1;q&&(Y+=2);let Z=null;if(z===5){if(Z=he(x,D),!Z)return!1;Y+=Z.length}return x.write(o.PUBLISH_HEADER[q][W.dup?1:0][le?1:0]),G(x,Y),y(x,J(ce)),x.write(ce),q>0&&y(x,M),Z?.write(),r("publish: payload: %o",R),x.write(R)}function T(H,x,ee){let z=ee?ee.protocolVersion:4,W=H||{},q=W.cmd||"puback",le=W.messageId,ce=W.dup&&q==="pubrel"?o.DUP_MASK:0,R=0,M=W.reasonCode,D=W.properties,Y=z===5?3:2;if(q==="pubrel"&&(R=1),typeof le!="number")return x.destroy(new Error("Invalid messageId")),!1;let Z=null;if(z===5&&typeof D=="object"){if(Z=O(x,D,ee,Y),!Z)return!1;Y+=Z.length}return x.write(o.ACKS[q][R][ce][0]),Y===3&&(Y+=M!==0?1:-1),G(x,Y),y(x,le),z===5&&Y!==2&&x.write(a.from([M])),Z!==null?Z.write():Y===4&&x.write(a.from([0])),!0}function S(H,x,ee){r("subscribe: packet: ");let z=ee?ee.protocolVersion:4,W=H||{},q=W.dup?o.DUP_MASK:0,le=W.messageId,ce=W.subscriptions,R=W.properties,M=0;if(typeof le!="number")return x.destroy(new Error("Invalid messageId")),!1;M+=2;let D=null;if(z===5){if(D=he(x,R),!D)return!1;M+=D.length}if(typeof ce=="object"&&ce.length)for(let Z=0;Z<ce.length;Z+=1){let re=ce[Z].topic,j=ce[Z].qos;if(typeof re!="string")return x.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof j!="number")return x.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(z===5){if(typeof(ce[Z].nl||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ce[Z].rap||!1)!="boolean")return x.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let X=ce[Z].rh||0;if(typeof X!="number"||X>2)return x.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}M+=a.byteLength(re)+2+1}else return x.destroy(new Error("Invalid subscriptions")),!1;r("subscribe: writing to stream: %o",o.SUBSCRIBE_HEADER),x.write(o.SUBSCRIBE_HEADER[1][q?1:0][0]),G(x,M),y(x,le),D!==null&&D.write();let Y=!0;for(let Z of ce){let re=Z.topic,j=Z.qos,X=+Z.nl,be=+Z.rap,te=Z.rh,Ee;U(x,re),Ee=o.SUBSCRIBE_OPTIONS_QOS[j],z===5&&(Ee|=X?o.SUBSCRIBE_OPTIONS_NL:0,Ee|=be?o.SUBSCRIBE_OPTIONS_RAP:0,Ee|=te?o.SUBSCRIBE_OPTIONS_RH[te]:0),Y=x.write(a.from([Ee]))}return Y}function k(H,x,ee){let z=ee?ee.protocolVersion:4,W=H||{},q=W.messageId,le=W.granted,ce=W.properties,R=0;if(typeof q!="number")return x.destroy(new Error("Invalid messageId")),!1;if(R+=2,typeof le=="object"&&le.length)for(let D=0;D<le.length;D+=1){if(typeof le[D]!="number")return x.destroy(new Error("Invalid qos vector")),!1;R+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let M=null;if(z===5){if(M=O(x,ce,ee,R),!M)return!1;R+=M.length}return x.write(o.SUBACK_HEADER),G(x,R),y(x,q),M!==null&&M.write(),x.write(a.from(le))}function P(H,x,ee){let z=ee?ee.protocolVersion:4,W=H||{},q=W.messageId,le=W.dup?o.DUP_MASK:0,ce=W.unsubscriptions,R=W.properties,M=0;if(typeof q!="number")return x.destroy(new Error("Invalid messageId")),!1;if(M+=2,typeof ce=="object"&&ce.length)for(let Z=0;Z<ce.length;Z+=1){if(typeof ce[Z]!="string")return x.destroy(new Error("Invalid unsubscriptions")),!1;M+=a.byteLength(ce[Z])+2}else return x.destroy(new Error("Invalid unsubscriptions")),!1;let D=null;if(z===5){if(D=he(x,R),!D)return!1;M+=D.length}x.write(o.UNSUBSCRIBE_HEADER[1][le?1:0][0]),G(x,M),y(x,q),D!==null&&D.write();let Y=!0;for(let Z=0;Z<ce.length;Z++)Y=U(x,ce[Z]);return Y}function $(H,x,ee){let z=ee?ee.protocolVersion:4,W=H||{},q=W.messageId,le=W.dup?o.DUP_MASK:0,ce=W.granted,R=W.properties,M=W.cmd,D=0,Y=2;if(typeof q!="number")return x.destroy(new Error("Invalid messageId")),!1;if(z===5)if(typeof ce=="object"&&ce.length)for(let re=0;re<ce.length;re+=1){if(typeof ce[re]!="number")return x.destroy(new Error("Invalid qos vector")),!1;Y+=1}else return x.destroy(new Error("Invalid qos vector")),!1;let Z=null;if(z===5){if(Z=O(x,R,ee,Y),!Z)return!1;Y+=Z.length}return x.write(o.ACKS[M][D][le][0]),G(x,Y),y(x,q),Z!==null&&Z.write(),z===5&&x.write(a.from(ce)),!0}function K(H,x,ee){return x.write(o.EMPTY[H.cmd])}function ae(H,x,ee){let z=ee?ee.protocolVersion:4,W=H||{},q=W.reasonCode,le=W.properties,ce=z===5?1:0,R=null;if(z===5){if(R=O(x,le,ee,ce),!R)return!1;ce+=R.length}return x.write(a.from([o.codes.disconnect<<4])),G(x,ce),z===5&&x.write(a.from([q])),R!==null&&R.write(),!0}function N(H,x,ee){let z=ee?ee.protocolVersion:4,W=H||{},q=W.reasonCode,le=W.properties,ce=z===5?1:0;z!==5&&x.destroy(new Error("Invalid mqtt version for auth packet"));let R=O(x,le,ee,ce);return R?(ce+=R.length,x.write(a.from([o.codes.auth<<4])),G(x,ce),x.write(a.from([q])),R!==null&&R.write(),!0):!1}var V={};function G(H,x){if(x>o.VARBYTEINT_MAX)return H.destroy(new Error(`Invalid variable byte integer: ${x}`)),!1;let ee=V[x];return ee||(ee=d(x),x<16384&&(V[x]=ee)),r("writeVarByteInt: writing to stream: %o",ee),H.write(ee)}function U(H,x){let ee=a.byteLength(x);return y(H,ee),r("writeString: %s",x),H.write(x,"utf8")}function ie(H,x,ee){U(H,x),U(H,ee)}function fe(H,x){return r("writeNumberCached: number: %d",x),r("writeNumberCached: %o",n[x]),H.write(n[x])}function pe(H,x){let ee=l(x);return r("writeNumberGenerated: %o",ee),H.write(ee)}function _e(H,x){let ee=p(x);return r("write4ByteNumber: %o",ee),H.write(ee)}function F(H,x){typeof x=="string"?U(H,x):x?(y(H,x.length),H.write(x)):y(H,0)}function he(H,x){if(typeof x!="object"||x.length!=null)return{length:1,write(){ye(H,{},0)}};let ee=0;function z(W,q){let le=o.propertiesTypes[W],ce=0;switch(le){case"byte":{if(typeof q!="boolean")return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=2;break}case"int8":{if(typeof q!="number"||q<0||q>255)return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=2;break}case"binary":{if(q&&q===null)return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=1+a.byteLength(q)+2;break}case"int16":{if(typeof q!="number"||q<0||q>65535)return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=3;break}case"int32":{if(typeof q!="number"||q<0||q>4294967295)return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=5;break}case"var":{if(typeof q!="number"||q<0||q>268435455)return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=1+a.byteLength(d(q));break}case"string":{if(typeof q!="string")return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=3+a.byteLength(q.toString());break}case"pair":{if(typeof q!="object")return H.destroy(new Error(`Invalid ${W}: ${q}`)),!1;ce+=Object.getOwnPropertyNames(q).reduce((R,M)=>{let D=q[M];return Array.isArray(D)?R+=D.reduce((Y,Z)=>(Y+=3+a.byteLength(M.toString())+2+a.byteLength(Z.toString()),Y),0):R+=3+a.byteLength(M.toString())+2+a.byteLength(q[M].toString()),R},0);break}default:return H.destroy(new Error(`Invalid property ${W}: ${q}`)),!1}return ce}if(x)for(let W in x){let q=0,le=0,ce=x[W];if(ce!==void 0){if(Array.isArray(ce))for(let R=0;R<ce.length;R++){if(le=z(W,ce[R]),!le)return!1;q+=le}else{if(le=z(W,ce),!le)return!1;q=le}if(!q)return!1;ee+=q}}return{length:a.byteLength(d(ee))+ee,write(){ye(H,x,ee)}}}function O(H,x,ee,z){let W=["reasonString","userProperties"],q=ee&&ee.properties&&ee.properties.maximumPacketSize?ee.properties.maximumPacketSize:0,le=he(H,x);if(q)for(;z+le.length>q;){let ce=W.shift();if(ce&&x[ce])delete x[ce],le=he(H,x);else return!1}return le}function ue(H,x,ee){switch(o.propertiesTypes[x]){case"byte":{H.write(a.from([o.properties[x]])),H.write(a.from([+ee]));break}case"int8":{H.write(a.from([o.properties[x]])),H.write(a.from([ee]));break}case"binary":{H.write(a.from([o.properties[x]])),F(H,ee);break}case"int16":{H.write(a.from([o.properties[x]])),y(H,ee);break}case"int32":{H.write(a.from([o.properties[x]])),_e(H,ee);break}case"var":{H.write(a.from([o.properties[x]])),G(H,ee);break}case"string":{H.write(a.from([o.properties[x]])),U(H,ee);break}case"pair":{Object.getOwnPropertyNames(ee).forEach(z=>{let W=ee[z];Array.isArray(W)?W.forEach(q=>{H.write(a.from([o.properties[x]])),ie(H,z.toString(),q.toString())}):(H.write(a.from([o.properties[x]])),ie(H,z.toString(),W.toString()))});break}default:return H.destroy(new Error(`Invalid property ${x} value: ${ee}`)),!1}}function ye(H,x,ee){G(H,ee);for(let z in x)if(Object.prototype.hasOwnProperty.call(x,z)&&x[z]!=null){let W=x[z];if(Array.isArray(W))for(let q=0;q<W.length;q++)ue(H,z,W[q]);else ue(H,z,W)}}function J(H){return H?H instanceof a?H.length:a.byteLength(H):0}function ve(H){return typeof H=="string"||H instanceof a}c.exports=b}),ul=de((s,c)=>{ne(),se(),oe();var o=ss(),{EventEmitter:a}=(Lt(),Re(At)),{Buffer:h}=(Fe(),Re(De));function t(i,r){let n=new e;return o(i,n,r),n.concat()}var e=class extends a{constructor(){super(),this._array=new Array(20),this._i=0}write(i){return this._array[this._i++]=i,!0}concat(){let i=0,r=new Array(this._array.length),n=this._array,l=0,f;for(f=0;f<n.length&&n[f]!==void 0;f++)typeof n[f]!="string"?r[f]=n[f].length:r[f]=h.byteLength(n[f]),i+=r[f];let d=h.allocUnsafe(i);for(f=0;f<n.length&&n[f]!==void 0;f++)typeof n[f]!="string"?(n[f].copy(d,l),l+=r[f]):(d.write(n[f],l),l+=r[f]);return d}destroy(i){i&&this.emit("error",i)}};c.exports=t}),hl=de(s=>{ne(),se(),oe(),s.parser=sl().parser,s.generate=ul(),s.writeToStream=ss()}),as=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let o=this.nextId++;return this.nextId===65536&&(this.nextId=1),o}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(o){return!0}deallocate(o){}clear(){}};s.default=c}),cl=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports=a;function o(t){return t instanceof Cr?Cr.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function a(t){if(t=t||{},t.circles)return h(t);let e=new Map;if(e.set(Date,f=>new Date(f)),e.set(Map,(f,d)=>new Map(r(Array.from(f),d))),e.set(Set,(f,d)=>new Set(r(Array.from(f),d))),t.constructorHandlers)for(let f of t.constructorHandlers)e.set(f[0],f[1]);let i=null;return t.proto?l:n;function r(f,d){let p=Object.keys(f),y=new Array(p.length);for(let g=0;g<p.length;g++){let b=p[g],E=f[b];typeof E!="object"||E===null?y[b]=E:E.constructor!==Object&&(i=e.get(E.constructor))?y[b]=i(E,d):ArrayBuffer.isView(E)?y[b]=o(E):y[b]=d(E)}return y}function n(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return r(f,n);if(f.constructor!==Object&&(i=e.get(f.constructor)))return i(f,n);let d={};for(let p in f){if(Object.hasOwnProperty.call(f,p)===!1)continue;let y=f[p];typeof y!="object"||y===null?d[p]=y:y.constructor!==Object&&(i=e.get(y.constructor))?d[p]=i(y,n):ArrayBuffer.isView(y)?d[p]=o(y):d[p]=n(y)}return d}function l(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return r(f,l);if(f.constructor!==Object&&(i=e.get(f.constructor)))return i(f,l);let d={};for(let p in f){let y=f[p];typeof y!="object"||y===null?d[p]=y:y.constructor!==Object&&(i=e.get(y.constructor))?d[p]=i(y,l):ArrayBuffer.isView(y)?d[p]=o(y):d[p]=l(y)}return d}}function h(t){let e=[],i=[],r=new Map;if(r.set(Date,p=>new Date(p)),r.set(Map,(p,y)=>new Map(l(Array.from(p),y))),r.set(Set,(p,y)=>new Set(l(Array.from(p),y))),t.constructorHandlers)for(let p of t.constructorHandlers)r.set(p[0],p[1]);let n=null;return t.proto?d:f;function l(p,y){let g=Object.keys(p),b=new Array(g.length);for(let E=0;E<g.length;E++){let m=g[E],w=p[m];if(typeof w!="object"||w===null)b[m]=w;else if(w.constructor!==Object&&(n=r.get(w.constructor)))b[m]=n(w,y);else if(ArrayBuffer.isView(w))b[m]=o(w);else{let I=e.indexOf(w);I!==-1?b[m]=i[I]:b[m]=y(w)}}return b}function f(p){if(typeof p!="object"||p===null)return p;if(Array.isArray(p))return l(p,f);if(p.constructor!==Object&&(n=r.get(p.constructor)))return n(p,f);let y={};e.push(p),i.push(y);for(let g in p){if(Object.hasOwnProperty.call(p,g)===!1)continue;let b=p[g];if(typeof b!="object"||b===null)y[g]=b;else if(b.constructor!==Object&&(n=r.get(b.constructor)))y[g]=n(b,f);else if(ArrayBuffer.isView(b))y[g]=o(b);else{let E=e.indexOf(b);E!==-1?y[g]=i[E]:y[g]=f(b)}}return e.pop(),i.pop(),y}function d(p){if(typeof p!="object"||p===null)return p;if(Array.isArray(p))return l(p,d);if(p.constructor!==Object&&(n=r.get(p.constructor)))return n(p,d);let y={};e.push(p),i.push(y);for(let g in p){let b=p[g];if(typeof b!="object"||b===null)y[g]=b;else if(b.constructor!==Object&&(n=r.get(b.constructor)))y[g]=n(b,d);else if(ArrayBuffer.isView(b))y[g]=o(b);else{let E=e.indexOf(b);E!==-1?y[g]=i[E]:y[g]=d(b)}}return e.pop(),i.pop(),y}}}),fl=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports=cl()()}),dl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.validateTopic=c,s.validateTopics=o;function c(a){let h=a.split("/");for(let t=0;t<h.length;t++)if(h[t]!=="+"){if(h[t]==="#")return t===h.length-1;if(h[t].indexOf("+")!==-1||h[t].indexOf("#")!==-1)return!1}return!0}function o(a){if(a.length===0)return"empty_topic_list";for(let h=0;h<a.length;h++)if(!c(a[h]))return a[h];return null}}),ls=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=Dt(),o={objectMode:!0},a={clean:!0},h=class{constructor(t){this.options=t||{},this.options=Object.assign(Object.assign({},a),t),this._inflights=new Map}put(t,e){return this._inflights.set(t.messageId,t),e&&e(),this}createStream(){let t=new c.Readable(o),e=[],i=!1,r=0;return this._inflights.forEach((n,l)=>{e.push(n)}),t._read=()=>{!i&&r<e.length?t.push(e[r++]):t.push(null)},t.destroy=n=>{if(!i)return i=!0,setTimeout(()=>{t.emit("close")},0),t},t}del(t,e){let i=this._inflights.get(t.messageId);return i?(this._inflights.delete(t.messageId),e(null,i)):e&&e(new Error("missing packet")),this}get(t,e){let i=this._inflights.get(t.messageId);return i?e(null,i):e&&e(new Error("missing packet")),this}close(t){this.options.clean&&(this._inflights=null),t&&t()}};s.default=h}),pl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=[0,16,128,131,135,144,145,151,153],o=(a,h,t)=>{a.log("handlePublish: packet %o",h),t=typeof t<"u"?t:a.noop;let e=h.topic.toString(),i=h.payload,{qos:r}=h,{messageId:n}=h,{options:l}=a;if(a.options.protocolVersion===5){let f;if(h.properties&&(f=h.properties.topicAlias),typeof f<"u")if(e.length===0)if(f>0&&f<=65535){let d=a.topicAliasRecv.getTopicByAlias(f);if(d)e=d,a.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",e,f);else{a.log("handlePublish :: unregistered topic alias. alias: %d",f),a.emit("error",new Error("Received unregistered Topic Alias"));return}}else{a.log("handlePublish :: topic alias out of range. alias: %d",f),a.emit("error",new Error("Received Topic Alias is out of range"));return}else if(a.topicAliasRecv.put(e,f))a.log("handlePublish :: registered topic: %s - alias: %d",e,f);else{a.log("handlePublish :: topic alias out of range. alias: %d",f),a.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(a.log("handlePublish: qos %d",r),r){case 2:{l.customHandleAcks(e,i,h,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return a.emit("error",f);if(c.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for pubrec"));d?a._sendPacket({cmd:"pubrec",messageId:n,reasonCode:d},t):a.incomingStore.put(h,()=>{a._sendPacket({cmd:"pubrec",messageId:n},t)})});break}case 1:{l.customHandleAcks(e,i,h,(f,d)=>{if(typeof f=="number"&&(d=f,f=null),f)return a.emit("error",f);if(c.indexOf(d)===-1)return a.emit("error",new Error("Wrong reason code for puback"));d||a.emit("message",e,i,h),a.handleMessage(h,p=>{if(p)return t&&t(p);a._sendPacket({cmd:"puback",messageId:n,reasonCode:d},t)})});break}case 0:a.emit("message",e,i,h),a.handleMessage(h,t);break;default:a.log("handlePublish: unknown QoS. Doing nothing.");break}};s.default=o}),gl=de((s,c)=>{c.exports={version:"5.13.2"}}),Qt=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.MQTTJS_VERSION=s.nextTick=s.ErrorWithSubackPacket=s.ErrorWithReasonCode=void 0,s.applyMixin=a;var c=class us extends Error{constructor(t,e){super(t),this.code=e,Object.setPrototypeOf(this,us.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};s.ErrorWithReasonCode=c;var o=class hs extends Error{constructor(t,e){super(t),this.packet=e,Object.setPrototypeOf(this,hs.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};s.ErrorWithSubackPacket=o;function a(h,t,e=!1){var i;let r=[t];for(;;){let n=r[0],l=Object.getPrototypeOf(n);if(l?.prototype)r.unshift(l);else break}for(let n of r)for(let l of Object.getOwnPropertyNames(n.prototype))(e||l!=="constructor")&&Object.defineProperty(h.prototype,l,(i=Object.getOwnPropertyDescriptor(n.prototype,l))!==null&&i!==void 0?i:Object.create(null))}s.nextTick=typeof ke?.nextTick=="function"?ke.nextTick:h=>{setTimeout(h,0)},s.MQTTJS_VERSION=gl().version}),Br=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=void 0;var c=Qt();s.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(a,h)=>{let{messageId:t}=h,e=h.cmd,i=null,r=a.outgoing[t]?a.outgoing[t].cb:null,n=null;if(!r){a.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(a.log("_handleAck :: packet type",e),e){case"pubcomp":case"puback":{let l=h.reasonCode;l&&l>0&&l!==16?(n=new c.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[l]}`,l),a._removeOutgoingAndStoreMessage(t,()=>{r(n,h)})):a._removeOutgoingAndStoreMessage(t,r);break}case"pubrec":{i={cmd:"pubrel",qos:2,messageId:t};let l=h.reasonCode;l&&l>0&&l!==16?(n=new c.ErrorWithReasonCode(`Publish error: ${s.ReasonCodes[l]}`,l),a._removeOutgoingAndStoreMessage(t,()=>{r(n,h)})):a._sendPacket(i);break}case"suback":{delete a.outgoing[t],a.messageIdProvider.deallocate(t);let l=h.granted;for(let f=0;f<l.length;f++){let d=l[f];if((d&128)!==0){n=new Error(`Subscribe error: ${s.ReasonCodes[d]}`),n.code=d;let p=a.messageIdToTopic[t];p&&p.forEach(y=>{delete a._resubscribeTopics[y]})}}delete a.messageIdToTopic[t],a._invokeStoreProcessingQueue(),r(n,h);break}case"unsuback":{delete a.outgoing[t],a.messageIdProvider.deallocate(t),a._invokeStoreProcessingQueue(),r(null,h);break}default:a.emit("error",new Error("unrecognized packet type"))}a.disconnecting&&Object.keys(a.outgoing).length===0&&a.emit("outgoingEmpty")};s.default=o}),ml=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=Qt(),o=Br(),a=(h,t)=>{let{options:e}=h,i=e.protocolVersion,r=i===5?t.reasonCode:t.returnCode;if(i!==5){let n=new c.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${i}`,r);h.emit("error",n);return}h.handleAuth(t,(n,l)=>{if(n){h.emit("error",n);return}if(r===24)h.reconnecting=!1,h._sendPacket(l);else{let f=new c.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[r]}`,r);h.emit("error",f)}})};s.default=a}),bl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.LRUCache=void 0;var c=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=new Set,a=typeof ke=="object"&&ke?ke:{},h=(y,g,b,E)=>{typeof a.emitWarning=="function"?a.emitWarning(y,g,b,E):console.error(`[${b}] ${g}: ${y}`)},t=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof t>"u"){e=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(b,E){this._onabort.push(E)}},t=class{constructor(){g()}signal=new e;abort(b){if(!this.signal.aborted){this.signal.reason=b,this.signal.aborted=!0;for(let E of this.signal._onabort)E(b);this.signal.onabort?.(b)}}};let y=a.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",g=()=>{y&&(y=!1,h("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",g))}}var i=y=>!o.has(y),r=Symbol("type"),n=y=>y&&y===Math.floor(y)&&y>0&&isFinite(y),l=y=>n(y)?y<=Math.pow(2,8)?Uint8Array:y<=Math.pow(2,16)?Uint16Array:y<=Math.pow(2,32)?Uint32Array:y<=Number.MAX_SAFE_INTEGER?f:null:null,f=class extends Array{constructor(y){super(y),this.fill(0)}},d=class ar{heap;length;static#l=!1;static create(g){let b=l(g);if(!b)return[];ar.#l=!0;let E=new ar(g,b);return ar.#l=!1,E}constructor(g,b){if(!ar.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new b(g),this.length=0}push(g){this.heap[this.length++]=g}pop(){return this.heap[--this.length]}},p=class cs{#l;#c;#g;#m;#R;#P;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#b;#i;#r;#e;#u;#f;#a;#o;#y;#s;#_;#w;#d;#v;#I;#h;static unsafeExposeInternals(g){return{starts:g.#w,ttls:g.#d,sizes:g.#_,keyMap:g.#i,keyList:g.#r,valList:g.#e,next:g.#u,prev:g.#f,get head(){return g.#a},get tail(){return g.#o},free:g.#y,isBackgroundFetch:b=>g.#t(b),backgroundFetch:(b,E,m,w)=>g.#B(b,E,m,w),moveToTail:b=>g.#O(b),indexes:b=>g.#E(b),rindexes:b=>g.#S(b),isStale:b=>g.#p(b)}}get max(){return this.#l}get maxSize(){return this.#c}get calculatedSize(){return this.#b}get size(){return this.#n}get fetchMethod(){return this.#R}get memoMethod(){return this.#P}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(g){let{max:b=0,ttl:E,ttlResolution:m=1,ttlAutopurge:w,updateAgeOnGet:I,updateAgeOnHas:T,allowStale:S,dispose:k,disposeAfter:P,noDisposeOnSet:$,noUpdateTTL:K,maxSize:ae=0,maxEntrySize:N=0,sizeCalculation:V,fetchMethod:G,memoMethod:U,noDeleteOnFetchRejection:ie,noDeleteOnStaleGet:fe,allowStaleOnFetchRejection:pe,allowStaleOnFetchAbort:_e,ignoreFetchAbort:F}=g;if(b!==0&&!n(b))throw new TypeError("max option must be a nonnegative integer");let he=b?l(b):Array;if(!he)throw new Error("invalid max value: "+b);if(this.#l=b,this.#c=ae,this.maxEntrySize=N||this.#c,this.sizeCalculation=V,this.sizeCalculation){if(!this.#c&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(U!==void 0&&typeof U!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#P=U,G!==void 0&&typeof G!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=G,this.#I=!!G,this.#i=new Map,this.#r=new Array(b).fill(void 0),this.#e=new Array(b).fill(void 0),this.#u=new he(b),this.#f=new he(b),this.#a=0,this.#o=0,this.#y=d.create(b),this.#n=0,this.#b=0,typeof k=="function"&&(this.#g=k),typeof P=="function"?(this.#m=P,this.#s=[]):(this.#m=void 0,this.#s=void 0),this.#v=!!this.#g,this.#h=!!this.#m,this.noDisposeOnSet=!!$,this.noUpdateTTL=!!K,this.noDeleteOnFetchRejection=!!ie,this.allowStaleOnFetchRejection=!!pe,this.allowStaleOnFetchAbort=!!_e,this.ignoreFetchAbort=!!F,this.maxEntrySize!==0){if(this.#c!==0&&!n(this.#c))throw new TypeError("maxSize must be a positive integer if specified");if(!n(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#W()}if(this.allowStale=!!S,this.noDeleteOnStaleGet=!!fe,this.updateAgeOnGet=!!I,this.updateAgeOnHas=!!T,this.ttlResolution=n(m)||m===0?m:1,this.ttlAutopurge=!!w,this.ttl=E||0,this.ttl){if(!n(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#N()}if(this.#l===0&&this.ttl===0&&this.#c===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#c){let O="LRU_CACHE_UNBOUNDED";i(O)&&(o.add(O),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,cs))}}getRemainingTTL(g){return this.#i.has(g)?1/0:0}#N(){let g=new f(this.#l),b=new f(this.#l);this.#d=g,this.#w=b,this.#j=(w,I,T=c.now())=>{if(b[w]=I!==0?T:0,g[w]=I,I!==0&&this.ttlAutopurge){let S=setTimeout(()=>{this.#p(w)&&this.#A(this.#r[w],"expire")},I+1);S.unref&&S.unref()}},this.#T=w=>{b[w]=g[w]!==0?c.now():0},this.#k=(w,I)=>{if(g[I]){let T=g[I],S=b[I];if(!T||!S)return;w.ttl=T,w.start=S,w.now=E||m();let k=w.now-S;w.remainingTTL=T-k}};let E=0,m=()=>{let w=c.now();if(this.ttlResolution>0){E=w;let I=setTimeout(()=>E=0,this.ttlResolution);I.unref&&I.unref()}return w};this.getRemainingTTL=w=>{let I=this.#i.get(w);if(I===void 0)return 0;let T=g[I],S=b[I];if(!T||!S)return 1/0;let k=(E||m())-S;return T-k},this.#p=w=>{let I=b[w],T=g[w];return!!T&&!!I&&(E||m())-I>T}}#T=()=>{};#k=()=>{};#j=()=>{};#p=()=>!1;#W(){let g=new f(this.#l);this.#b=0,this.#_=g,this.#C=b=>{this.#b-=g[b],g[b]=0},this.#L=(b,E,m,w)=>{if(this.#t(E))return 0;if(!n(m))if(w){if(typeof w!="function")throw new TypeError("sizeCalculation must be a function");if(m=w(E,b),!n(m))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return m},this.#x=(b,E,m)=>{if(g[b]=E,this.#c){let w=this.#c-g[b];for(;this.#b>w;)this.#M(!0)}this.#b+=g[b],m&&(m.entrySize=E,m.totalCalculatedSize=this.#b)}}#C=g=>{};#x=(g,b,E)=>{};#L=(g,b,E,m)=>{if(E||m)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:g=this.allowStale}={}){if(this.#n)for(let b=this.#o;!(!this.#U(b)||((g||!this.#p(b))&&(yield b),b===this.#a));)b=this.#f[b]}*#S({allowStale:g=this.allowStale}={}){if(this.#n)for(let b=this.#a;!(!this.#U(b)||((g||!this.#p(b))&&(yield b),b===this.#o));)b=this.#u[b]}#U(g){return g!==void 0&&this.#i.get(this.#r[g])===g}*entries(){for(let g of this.#E())this.#e[g]!==void 0&&this.#r[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#r[g],this.#e[g]])}*rentries(){for(let g of this.#S())this.#e[g]!==void 0&&this.#r[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#r[g],this.#e[g]])}*keys(){for(let g of this.#E()){let b=this.#r[g];b!==void 0&&!this.#t(this.#e[g])&&(yield b)}}*rkeys(){for(let g of this.#S()){let b=this.#r[g];b!==void 0&&!this.#t(this.#e[g])&&(yield b)}}*values(){for(let g of this.#E())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}*rvalues(){for(let g of this.#S())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(g,b={}){for(let E of this.#E()){let m=this.#e[E],w=this.#t(m)?m.__staleWhileFetching:m;if(w!==void 0&&g(w,this.#r[E],this))return this.get(this.#r[E],b)}}forEach(g,b=this){for(let E of this.#E()){let m=this.#e[E],w=this.#t(m)?m.__staleWhileFetching:m;w!==void 0&&g.call(b,w,this.#r[E],this)}}rforEach(g,b=this){for(let E of this.#S()){let m=this.#e[E],w=this.#t(m)?m.__staleWhileFetching:m;w!==void 0&&g.call(b,w,this.#r[E],this)}}purgeStale(){let g=!1;for(let b of this.#S({allowStale:!0}))this.#p(b)&&(this.#A(this.#r[b],"expire"),g=!0);return g}info(g){let b=this.#i.get(g);if(b===void 0)return;let E=this.#e[b],m=this.#t(E)?E.__staleWhileFetching:E;if(m===void 0)return;let w={value:m};if(this.#d&&this.#w){let I=this.#d[b],T=this.#w[b];if(I&&T){let S=I-(c.now()-T);w.ttl=S,w.start=Date.now()}}return this.#_&&(w.size=this.#_[b]),w}dump(){let g=[];for(let b of this.#E({allowStale:!0})){let E=this.#r[b],m=this.#e[b],w=this.#t(m)?m.__staleWhileFetching:m;if(w===void 0||E===void 0)continue;let I={value:w};if(this.#d&&this.#w){I.ttl=this.#d[b];let T=c.now()-this.#w[b];I.start=Math.floor(Date.now()-T)}this.#_&&(I.size=this.#_[b]),g.unshift([E,I])}return g}load(g){this.clear();for(let[b,E]of g){if(E.start){let m=Date.now()-E.start;E.start=c.now()-m}this.set(b,E.value,E)}}set(g,b,E={}){if(b===void 0)return this.delete(g),this;let{ttl:m=this.ttl,start:w,noDisposeOnSet:I=this.noDisposeOnSet,sizeCalculation:T=this.sizeCalculation,status:S}=E,{noUpdateTTL:k=this.noUpdateTTL}=E,P=this.#L(g,b,E.size||0,T);if(this.maxEntrySize&&P>this.maxEntrySize)return S&&(S.set="miss",S.maxEntrySizeExceeded=!0),this.#A(g,"set"),this;let $=this.#n===0?void 0:this.#i.get(g);if($===void 0)$=this.#n===0?this.#o:this.#y.length!==0?this.#y.pop():this.#n===this.#l?this.#M(!1):this.#n,this.#r[$]=g,this.#e[$]=b,this.#i.set(g,$),this.#u[this.#o]=$,this.#f[$]=this.#o,this.#o=$,this.#n++,this.#x($,P,S),S&&(S.set="add"),k=!1;else{this.#O($);let K=this.#e[$];if(b!==K){if(this.#I&&this.#t(K)){K.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:ae}=K;ae!==void 0&&!I&&(this.#v&&this.#g?.(ae,g,"set"),this.#h&&this.#s?.push([ae,g,"set"]))}else I||(this.#v&&this.#g?.(K,g,"set"),this.#h&&this.#s?.push([K,g,"set"]));if(this.#C($),this.#x($,P,S),this.#e[$]=b,S){S.set="replace";let ae=K&&this.#t(K)?K.__staleWhileFetching:K;ae!==void 0&&(S.oldValue=ae)}}else S&&(S.set="update")}if(m!==0&&!this.#d&&this.#N(),this.#d&&(k||this.#j($,m,w),S&&this.#k(S,$)),!I&&this.#h&&this.#s){let K=this.#s,ae;for(;ae=K?.shift();)this.#m?.(...ae)}return this}pop(){try{for(;this.#n;){let g=this.#e[this.#a];if(this.#M(!0),this.#t(g)){if(g.__staleWhileFetching)return g.__staleWhileFetching}else if(g!==void 0)return g}}finally{if(this.#h&&this.#s){let g=this.#s,b;for(;b=g?.shift();)this.#m?.(...b)}}}#M(g){let b=this.#a,E=this.#r[b],m=this.#e[b];return this.#I&&this.#t(m)?m.__abortController.abort(new Error("evicted")):(this.#v||this.#h)&&(this.#v&&this.#g?.(m,E,"evict"),this.#h&&this.#s?.push([m,E,"evict"])),this.#C(b),g&&(this.#r[b]=void 0,this.#e[b]=void 0,this.#y.push(b)),this.#n===1?(this.#a=this.#o=0,this.#y.length=0):this.#a=this.#u[b],this.#i.delete(E),this.#n--,b}has(g,b={}){let{updateAgeOnHas:E=this.updateAgeOnHas,status:m}=b,w=this.#i.get(g);if(w!==void 0){let I=this.#e[w];if(this.#t(I)&&I.__staleWhileFetching===void 0)return!1;if(this.#p(w))m&&(m.has="stale",this.#k(m,w));else return E&&this.#T(w),m&&(m.has="hit",this.#k(m,w)),!0}else m&&(m.has="miss");return!1}peek(g,b={}){let{allowStale:E=this.allowStale}=b,m=this.#i.get(g);if(m===void 0||!E&&this.#p(m))return;let w=this.#e[m];return this.#t(w)?w.__staleWhileFetching:w}#B(g,b,E,m){let w=b===void 0?void 0:this.#e[b];if(this.#t(w))return w;let I=new t,{signal:T}=E;T?.addEventListener("abort",()=>I.abort(T.reason),{signal:I.signal});let S={signal:I.signal,options:E,context:m},k=(V,G=!1)=>{let{aborted:U}=I.signal,ie=E.ignoreFetchAbort&&V!==void 0;if(E.status&&(U&&!G?(E.status.fetchAborted=!0,E.status.fetchError=I.signal.reason,ie&&(E.status.fetchAbortIgnored=!0)):E.status.fetchResolved=!0),U&&!ie&&!G)return $(I.signal.reason);let fe=ae;return this.#e[b]===ae&&(V===void 0?fe.__staleWhileFetching?this.#e[b]=fe.__staleWhileFetching:this.#A(g,"fetch"):(E.status&&(E.status.fetchUpdated=!0),this.set(g,V,S.options))),V},P=V=>(E.status&&(E.status.fetchRejected=!0,E.status.fetchError=V),$(V)),$=V=>{let{aborted:G}=I.signal,U=G&&E.allowStaleOnFetchAbort,ie=U||E.allowStaleOnFetchRejection,fe=ie||E.noDeleteOnFetchRejection,pe=ae;if(this.#e[b]===ae&&(!fe||pe.__staleWhileFetching===void 0?this.#A(g,"fetch"):U||(this.#e[b]=pe.__staleWhileFetching)),ie)return E.status&&pe.__staleWhileFetching!==void 0&&(E.status.returnedStale=!0),pe.__staleWhileFetching;if(pe.__returned===pe)throw V},K=(V,G)=>{let U=this.#R?.(g,w,S);U&&U instanceof Promise&&U.then(ie=>V(ie===void 0?void 0:ie),G),I.signal.addEventListener("abort",()=>{(!E.ignoreFetchAbort||E.allowStaleOnFetchAbort)&&(V(void 0),E.allowStaleOnFetchAbort&&(V=ie=>k(ie,!0)))})};E.status&&(E.status.fetchDispatched=!0);let ae=new Promise(K).then(k,P),N=Object.assign(ae,{__abortController:I,__staleWhileFetching:w,__returned:void 0});return b===void 0?(this.set(g,N,Ft($e({},S.options),{status:void 0})),b=this.#i.get(g)):this.#e[b]=N,N}#t(g){if(!this.#I)return!1;let b=g;return!!b&&b instanceof Promise&&b.hasOwnProperty("__staleWhileFetching")&&b.__abortController instanceof t}fetch(E){return xe(this,arguments,function*(g,b={}){let{allowStale:m=this.allowStale,updateAgeOnGet:w=this.updateAgeOnGet,noDeleteOnStaleGet:I=this.noDeleteOnStaleGet,ttl:T=this.ttl,noDisposeOnSet:S=this.noDisposeOnSet,size:k=0,sizeCalculation:P=this.sizeCalculation,noUpdateTTL:$=this.noUpdateTTL,noDeleteOnFetchRejection:K=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:ae=this.allowStaleOnFetchRejection,ignoreFetchAbort:N=this.ignoreFetchAbort,allowStaleOnFetchAbort:V=this.allowStaleOnFetchAbort,context:G,forceRefresh:U=!1,status:ie,signal:fe}=b;if(!this.#I)return ie&&(ie.fetch="get"),this.get(g,{allowStale:m,updateAgeOnGet:w,noDeleteOnStaleGet:I,status:ie});let pe={allowStale:m,updateAgeOnGet:w,noDeleteOnStaleGet:I,ttl:T,noDisposeOnSet:S,size:k,sizeCalculation:P,noUpdateTTL:$,noDeleteOnFetchRejection:K,allowStaleOnFetchRejection:ae,allowStaleOnFetchAbort:V,ignoreFetchAbort:N,status:ie,signal:fe},_e=this.#i.get(g);if(_e===void 0){ie&&(ie.fetch="miss");let F=this.#B(g,_e,pe,G);return F.__returned=F}else{let F=this.#e[_e];if(this.#t(F)){let ye=m&&F.__staleWhileFetching!==void 0;return ie&&(ie.fetch="inflight",ye&&(ie.returnedStale=!0)),ye?F.__staleWhileFetching:F.__returned=F}let he=this.#p(_e);if(!U&&!he)return ie&&(ie.fetch="hit"),this.#O(_e),w&&this.#T(_e),ie&&this.#k(ie,_e),F;let O=this.#B(g,_e,pe,G),ue=O.__staleWhileFetching!==void 0&&m;return ie&&(ie.fetch=he?"stale":"refresh",ue&&he&&(ie.returnedStale=!0)),ue?O.__staleWhileFetching:O.__returned=O}})}forceFetch(E){return xe(this,arguments,function*(g,b={}){let m=yield this.fetch(g,b);if(m===void 0)throw new Error("fetch() returned undefined");return m})}memo(g,b={}){let E=this.#P;if(!E)throw new Error("no memoMethod provided to constructor");let k=b,{context:m,forceRefresh:w}=k,I=Mn(k,["context","forceRefresh"]),T=this.get(g,I);if(!w&&T!==void 0)return T;let S=E(g,T,{options:I,context:m});return this.set(g,S,I),S}get(g,b={}){let{allowStale:E=this.allowStale,updateAgeOnGet:m=this.updateAgeOnGet,noDeleteOnStaleGet:w=this.noDeleteOnStaleGet,status:I}=b,T=this.#i.get(g);if(T!==void 0){let S=this.#e[T],k=this.#t(S);return I&&this.#k(I,T),this.#p(T)?(I&&(I.get="stale"),k?(I&&E&&S.__staleWhileFetching!==void 0&&(I.returnedStale=!0),E?S.__staleWhileFetching:void 0):(w||this.#A(g,"expire"),I&&E&&(I.returnedStale=!0),E?S:void 0)):(I&&(I.get="hit"),k?S.__staleWhileFetching:(this.#O(T),m&&this.#T(T),S))}else I&&(I.get="miss")}#D(g,b){this.#f[b]=g,this.#u[g]=b}#O(g){g!==this.#o&&(g===this.#a?this.#a=this.#u[g]:this.#D(this.#f[g],this.#u[g]),this.#D(this.#o,g),this.#o=g)}delete(g){return this.#A(g,"delete")}#A(g,b){let E=!1;if(this.#n!==0){let m=this.#i.get(g);if(m!==void 0)if(E=!0,this.#n===1)this.#F(b);else{this.#C(m);let w=this.#e[m];if(this.#t(w)?w.__abortController.abort(new Error("deleted")):(this.#v||this.#h)&&(this.#v&&this.#g?.(w,g,b),this.#h&&this.#s?.push([w,g,b])),this.#i.delete(g),this.#r[m]=void 0,this.#e[m]=void 0,m===this.#o)this.#o=this.#f[m];else if(m===this.#a)this.#a=this.#u[m];else{let I=this.#f[m];this.#u[I]=this.#u[m];let T=this.#u[m];this.#f[T]=this.#f[m]}this.#n--,this.#y.push(m)}}if(this.#h&&this.#s?.length){let m=this.#s,w;for(;w=m?.shift();)this.#m?.(...w)}return E}clear(){return this.#F("delete")}#F(g){for(let b of this.#S({allowStale:!0})){let E=this.#e[b];if(this.#t(E))E.__abortController.abort(new Error("deleted"));else{let m=this.#r[b];this.#v&&this.#g?.(E,m,g),this.#h&&this.#s?.push([E,m,g])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#d&&this.#w&&(this.#d.fill(0),this.#w.fill(0)),this.#_&&this.#_.fill(0),this.#a=0,this.#o=0,this.#y.length=0,this.#b=0,this.#n=0,this.#h&&this.#s){let b=this.#s,E;for(;E=b?.shift();)this.#m?.(...E)}}};s.LRUCache=p}),bt=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.ContainerIterator=s.Container=s.Base=void 0;var c=class{constructor(h=0){this.iteratorType=h}equals(h){return this.o===h.o}};s.ContainerIterator=c;var o=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};s.Base=o;var a=class extends o{};s.Container=a}),yl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=bt(),o=class extends c.Base{constructor(h=[]){super(),this.S=[];let t=this;h.forEach(function(e){t.push(e)})}clear(){this.i=0,this.S=[]}push(h){return this.S.push(h),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},a=o;s.default=a}),_l=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=bt(),o=class extends c.Base{constructor(h=[]){super(),this.j=0,this.q=[];let t=this;h.forEach(function(e){t.push(e)})}clear(){this.q=[],this.i=this.j=0}push(h){let t=this.q.length;if(this.j/t>.5&&this.j+this.i>=t&&t>4096){let e=this.i;for(let i=0;i<e;++i)this.q[i]=this.q[this.j+i];this.j=0,this.q[this.i]=h}else this.q[this.j+this.i]=h;return++this.i}pop(){if(this.i===0)return;let h=this.q[this.j++];return this.i-=1,h}front(){if(this.i!==0)return this.q[this.j]}},a=o;s.default=a}),wl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=bt(),o=class extends c.Base{constructor(h=[],t=function(i,r){return i>r?-1:i<r?1:0},e=!0){if(super(),this.v=t,Array.isArray(h))this.C=e?[...h]:h;else{this.C=[];let r=this;h.forEach(function(n){r.C.push(n)})}this.i=this.C.length;let i=this.i>>1;for(let r=this.i-1>>1;r>=0;--r)this.k(r,i)}m(h){let t=this.C[h];for(;h>0;){let e=h-1>>1,i=this.C[e];if(this.v(i,t)<=0)break;this.C[h]=i,h=e}this.C[h]=t}k(h,t){let e=this.C[h];for(;h<t;){let i=h<<1|1,r=i+1,n=this.C[i];if(r<this.i&&this.v(n,this.C[r])>0&&(i=r,n=this.C[r]),this.v(n,e)>=0)break;this.C[h]=n,h=i}this.C[h]=e}clear(){this.i=0,this.C.length=0}push(h){this.C.push(h),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let h=this.C[0],t=this.C.pop();return this.i-=1,this.i&&(this.C[0]=t,this.k(0,this.i>>1)),h}top(){return this.C[0]}find(h){return this.C.indexOf(h)>=0}remove(h){let t=this.C.indexOf(h);return t<0?!1:(t===0?this.pop():t===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(t,1,this.C.pop()),this.i-=1,this.m(t),this.k(t,this.i>>1)),!0)}updateItem(h){let t=this.C.indexOf(h);return t<0?!1:(this.m(t),this.k(t,this.i>>1),!0)}toArray(){return[...this.C]}},a=o;s.default=a}),Sn=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=bt(),o=class extends c.Container{},a=o;s.default=a}),yt=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.throwIteratorAccessError=c;function c(){throw new RangeError("Iterator access denied!")}}),fs=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.RandomIterator=void 0;var c=bt(),o=yt(),a=class extends c.ContainerIterator{constructor(h,t){super(t),this.o=h,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,o.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,o.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,o.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,o.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(h){this.container.setElementByPos(this.o,h)}};s.RandomIterator=a}),vl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=a(Sn()),o=fs();function a(i){return i&&i.t?i:{default:i}}var h=class ds extends o.RandomIterator{constructor(r,n,l){super(r,l),this.container=n}copy(){return new ds(this.o,this.container,this.iteratorType)}},t=class extends c.default{constructor(i=[],r=!0){if(super(),Array.isArray(i))this.J=r?[...i]:i,this.i=i.length;else{this.J=[];let n=this;i.forEach(function(l){n.pushBack(l)})}}clear(){this.i=0,this.J.length=0}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;return this.J[i]}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;return this.J.splice(i,1),this.i-=1,this.i}eraseElementByValue(i){let r=0;for(let n=0;n<this.i;++n)this.J[n]!==i&&(this.J[r++]=this.J[n]);return this.i=this.J.length=r,this.i}eraseElementByIterator(i){let r=i.o;return i=i.next(),this.eraseElementByPos(r),i}pushBack(i){return this.J.push(i),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(i,r){if(i<0||i>this.i-1)throw new RangeError;this.J[i]=r}insert(i,r,n=1){if(i<0||i>this.i)throw new RangeError;return this.J.splice(i,0,...new Array(n).fill(r)),this.i+=n,this.i}find(i){for(let r=0;r<this.i;++r)if(this.J[r]===i)return new h(r,this);return this.end()}reverse(){this.J.reverse()}unique(){let i=1;for(let r=1;r<this.i;++r)this.J[r]!==this.J[r-1]&&(this.J[i++]=this.J[r]);return this.i=this.J.length=i,this.i}sort(i){this.J.sort(i)}forEach(i){for(let r=0;r<this.i;++r)i(this.J[r],r,this)}[Symbol.iterator](){return(function*(){yield*_t(this.J)}).bind(this)()}},e=t;s.default=e}),El=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(Sn()),o=bt(),a=yt();function h(r){return r&&r.t?r:{default:r}}var t=class ps extends o.ContainerIterator{constructor(n,l,f,d){super(d),this.o=n,this.h=l,this.container=f,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l}set pointer(n){this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l=n}copy(){return new ps(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(r=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let n=this;r.forEach(function(l){n.pushBack(l)})}V(r){let{L:n,B:l}=r;n.B=l,l.L=n,r===this.p&&(this.p=l),r===this._&&(this._=n),this.i-=1}G(r,n){let l=n.B,f={l:r,L:n,B:l};n.B=f,l.L=f,n===this.h&&(this.p=f),l===this.h&&(this._=f),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new t(this.p,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this._,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return n.l}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return this.V(n),this.i}eraseElementByValue(r){let n=this.p;for(;n!==this.h;)n.l===r&&this.V(n),n=n.B;return this.i}eraseElementByIterator(r){let n=r.o;return n===this.h&&(0,a.throwIteratorAccessError)(),r=r.next(),this.V(n),r}pushBack(r){return this.G(r,this._),this.i}popBack(){if(this.i===0)return;let r=this._.l;return this.V(this._),r}pushFront(r){return this.G(r,this.h),this.i}popFront(){if(this.i===0)return;let r=this.p.l;return this.V(this.p),r}setElementByPos(r,n){if(r<0||r>this.i-1)throw new RangeError;let l=this.p;for(;r--;)l=l.B;l.l=n}insert(r,n,l=1){if(r<0||r>this.i)throw new RangeError;if(l<=0)return this.i;if(r===0)for(;l--;)this.pushFront(n);else if(r===this.i)for(;l--;)this.pushBack(n);else{let f=this.p;for(let p=1;p<r;++p)f=f.B;let d=f.B;for(this.i+=l;l--;)f.B={l:n,L:f},f.B.L=f,f=f.B;f.B=d,d.L=f}return this.i}find(r){let n=this.p;for(;n!==this.h;){if(n.l===r)return new t(n,this.h,this);n=n.B}return this.end()}reverse(){if(this.i<=1)return;let r=this.p,n=this._,l=0;for(;l<<1<this.i;){let f=r.l;r.l=n.l,n.l=f,r=r.B,n=n.L,l+=1}}unique(){if(this.i<=1)return this.i;let r=this.p;for(;r!==this.h;){let n=r;for(;n.B!==this.h&&n.l===n.B.l;)n=n.B,this.i-=1;r.B=n.B,r.B.L=r,r=r.B}return this.i}sort(r){if(this.i<=1)return;let n=[];this.forEach(function(f){n.push(f)}),n.sort(r);let l=this.p;n.forEach(function(f){l.l=f,l=l.B})}merge(r){let n=this;if(this.i===0)r.forEach(function(l){n.pushBack(l)});else{let l=this.p;r.forEach(function(f){for(;l!==n.h&&l.l<=f;)l=l.B;n.G(f,l.L)})}return this.i}forEach(r){let n=this.p,l=0;for(;n!==this.h;)r(n.l,l++,this),n=n.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let r=this.p;for(;r!==this.h;)yield r.l,r=r.B}).bind(this)()}},i=e;s.default=i}),Sl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=a(Sn()),o=fs();function a(i){return i&&i.t?i:{default:i}}var h=class gs extends o.RandomIterator{constructor(r,n,l){super(r,l),this.container=n}copy(){return new gs(this.o,this.container,this.iteratorType)}},t=class extends c.default{constructor(i=[],r=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let n=(()=>{if(typeof i.length=="number")return i.length;if(typeof i.size=="number")return i.size;if(typeof i.size=="function")return i.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=r,this.P=Math.max(Math.ceil(n/this.F),1);for(let d=0;d<this.P;++d)this.A.push(new Array(this.F));let l=Math.ceil(n/this.F);this.j=this.R=(this.P>>1)-(l>>1),this.D=this.N=this.F-n%this.F>>1;let f=this;i.forEach(function(d){f.pushBack(d)})}T(){let i=[],r=Math.max(this.P>>1,1);for(let n=0;n<r;++n)i[n]=new Array(this.F);for(let n=this.j;n<this.P;++n)i[i.length]=this.A[n];for(let n=0;n<this.R;++n)i[i.length]=this.A[n];i[i.length]=[...this.A[this.R]],this.j=r,this.R=i.length-1;for(let n=0;n<r;++n)i[i.length]=new Array(this.F);this.A=i,this.P=i.length}O(i){let r=this.D+i+1,n=r%this.F,l=n-1,f=this.j+(r-n)/this.F;return n===0&&(f-=1),f%=this.P,l<0&&(l+=this.F),{curNodeBucketIndex:f,curNodePointerIndex:l}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(i){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=i,this.i}popBack(){if(this.i===0)return;let i=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,i}pushFront(i){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=i,this.i}popFront(){if(this.i===0)return;let i=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,i}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(i);return this.A[r][n]}setElementByPos(i,r){if(i<0||i>this.i-1)throw new RangeError;let{curNodeBucketIndex:n,curNodePointerIndex:l}=this.O(i);this.A[n][l]=r}insert(i,r,n=1){if(i<0||i>this.i)throw new RangeError;if(i===0)for(;n--;)this.pushFront(r);else if(i===this.i)for(;n--;)this.pushBack(r);else{let l=[];for(let f=i;f<this.i;++f)l.push(this.getElementByPos(f));this.cut(i-1);for(let f=0;f<n;++f)this.pushBack(r);for(let f=0;f<l.length;++f)this.pushBack(l[f])}return this.i}cut(i){if(i<0)return this.clear(),0;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(i);return this.R=r,this.N=n,this.i=i+1,this.i}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;if(i===0)this.popFront();else if(i===this.i-1)this.popBack();else{let r=[];for(let l=i+1;l<this.i;++l)r.push(this.getElementByPos(l));this.cut(i),this.popBack();let n=this;r.forEach(function(l){n.pushBack(l)})}return this.i}eraseElementByValue(i){if(this.i===0)return 0;let r=[];for(let l=0;l<this.i;++l){let f=this.getElementByPos(l);f!==i&&r.push(f)}let n=r.length;for(let l=0;l<n;++l)this.setElementByPos(l,r[l]);return this.cut(n-1)}eraseElementByIterator(i){let r=i.o;return this.eraseElementByPos(r),i=i.next(),i}find(i){for(let r=0;r<this.i;++r)if(this.getElementByPos(r)===i)return new h(r,this);return this.end()}reverse(){let i=0,r=this.i-1;for(;i<r;){let n=this.getElementByPos(i);this.setElementByPos(i,this.getElementByPos(r)),this.setElementByPos(r,n),i+=1,r-=1}}unique(){if(this.i<=1)return this.i;let i=1,r=this.getElementByPos(0);for(let n=1;n<this.i;++n){let l=this.getElementByPos(n);l!==r&&(r=l,this.setElementByPos(i++,l))}for(;this.i>i;)this.popBack();return this.i}sort(i){let r=[];for(let n=0;n<this.i;++n)r.push(this.getElementByPos(n));r.sort(i);for(let n=0;n<this.i;++n)this.setElementByPos(n,r[n])}shrinkToFit(){if(this.i===0)return;let i=[];this.forEach(function(r){i.push(r)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let r=0;r<this.P;++r)this.A.push(new Array(this.F));for(let r=0;r<i.length;++r)this.pushBack(i[r])}forEach(i){for(let r=0;r<this.i;++r)i(this.getElementByPos(r),r,this)}[Symbol.iterator](){return(function*(){for(let i=0;i<this.i;++i)yield this.getElementByPos(i)}).bind(this)()}},e=t;s.default=e}),Al=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.TreeNodeEnableIndex=s.TreeNode=void 0;var c=class{constructor(a,h){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=a,this.l=h}L(){let a=this;if(a.ee===1&&a.tt.tt===a)a=a.W;else if(a.U)for(a=a.U;a.W;)a=a.W;else{let h=a.tt;for(;h.U===a;)a=h,h=a.tt;a=h}return a}B(){let a=this;if(a.W){for(a=a.W;a.U;)a=a.U;return a}else{let h=a.tt;for(;h.W===a;)a=h,h=a.tt;return a.W!==h?h:a}}te(){let a=this.tt,h=this.W,t=h.U;return a.tt===this?a.tt=h:a.U===this?a.U=h:a.W=h,h.tt=a,h.U=this,this.tt=h,this.W=t,t&&(t.tt=this),h}se(){let a=this.tt,h=this.U,t=h.W;return a.tt===this?a.tt=h:a.U===this?a.U=h:a.W=h,h.tt=a,h.W=this,this.tt=h,this.U=t,t&&(t.tt=this),h}};s.TreeNode=c;var o=class extends c{constructor(){super(...arguments),this.rt=1}te(){let a=super.te();return this.ie(),a.ie(),a}se(){let a=super.se();return this.ie(),a.ie(),a}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};s.TreeNodeEnableIndex=o}),ms=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=Al(),o=bt(),a=yt(),h=class extends o.Container{constructor(e=function(r,n){return r<n?-1:r>n?1:0},i=!1){super(),this.Y=void 0,this.v=e,i?(this.re=c.TreeNodeEnableIndex,this.M=function(r,n,l){let f=this.ne(r,n,l);if(f){let d=f.tt;for(;d!==this.h;)d.rt+=1,d=d.tt;let p=this.he(f);if(p){let{parentNode:y,grandParent:g,curNode:b}=p;y.ie(),g.ie(),b.ie()}}return this.i},this.V=function(r){let n=this.fe(r);for(;n!==this.h;)n.rt-=1,n=n.tt}):(this.re=c.TreeNode,this.M=function(r,n,l){let f=this.ne(r,n,l);return f&&this.he(f),this.i},this.V=this.fe),this.h=new this.re}X(e,i){let r=this.h;for(;e;){let n=this.v(e.u,i);if(n<0)e=e.W;else if(n>0)r=e,e=e.U;else return e}return r}Z(e,i){let r=this.h;for(;e;)this.v(e.u,i)<=0?e=e.W:(r=e,e=e.U);return r}$(e,i){let r=this.h;for(;e;){let n=this.v(e.u,i);if(n<0)r=e,e=e.W;else if(n>0)e=e.U;else return e}return r}rr(e,i){let r=this.h;for(;e;)this.v(e.u,i)<0?(r=e,e=e.W):e=e.U;return r}ue(e){for(;;){let i=e.tt;if(i===this.h)return;if(e.ee===1){e.ee=0;return}if(e===i.U){let r=i.W;if(r.ee===1)r.ee=0,i.ee=1,i===this.Y?this.Y=i.te():i.te();else if(r.W&&r.W.ee===1){r.ee=i.ee,i.ee=0,r.W.ee=0,i===this.Y?this.Y=i.te():i.te();return}else r.U&&r.U.ee===1?(r.ee=1,r.U.ee=0,r.se()):(r.ee=1,e=i)}else{let r=i.U;if(r.ee===1)r.ee=0,i.ee=1,i===this.Y?this.Y=i.se():i.se();else if(r.U&&r.U.ee===1){r.ee=i.ee,i.ee=0,r.U.ee=0,i===this.Y?this.Y=i.se():i.se();return}else r.W&&r.W.ee===1?(r.ee=1,r.W.ee=0,r.te()):(r.ee=1,e=i)}}}fe(e){if(this.i===1)return this.clear(),this.h;let i=e;for(;i.U||i.W;){if(i.W)for(i=i.W;i.U;)i=i.U;else i=i.U;[e.u,i.u]=[i.u,e.u],[e.l,i.l]=[i.l,e.l],e=i}this.h.U===i?this.h.U=i.tt:this.h.W===i&&(this.h.W=i.tt),this.ue(i);let r=i.tt;return i===r.U?r.U=void 0:r.W=void 0,this.i-=1,this.Y.ee=0,r}oe(e,i){return e===void 0?!1:this.oe(e.U,i)||i(e)?!0:this.oe(e.W,i)}he(e){for(;;){let i=e.tt;if(i.ee===0)return;let r=i.tt;if(i===r.U){let n=r.W;if(n&&n.ee===1){if(n.ee=i.ee=0,r===this.Y)return;r.ee=1,e=r;continue}else if(e===i.W){if(e.ee=0,e.U&&(e.U.tt=i),e.W&&(e.W.tt=r),i.W=e.U,r.U=e.W,e.U=i,e.W=r,r===this.Y)this.Y=e,this.h.tt=e;else{let l=r.tt;l.U===r?l.U=e:l.W=e}return e.tt=r.tt,i.tt=e,r.tt=e,r.ee=1,{parentNode:i,grandParent:r,curNode:e}}else i.ee=0,r===this.Y?this.Y=r.se():r.se(),r.ee=1}else{let n=r.U;if(n&&n.ee===1){if(n.ee=i.ee=0,r===this.Y)return;r.ee=1,e=r;continue}else if(e===i.U){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=i),r.W=e.U,i.U=e.W,e.U=r,e.W=i,r===this.Y)this.Y=e,this.h.tt=e;else{let l=r.tt;l.U===r?l.U=e:l.W=e}return e.tt=r.tt,i.tt=e,r.tt=e,r.ee=1,{parentNode:i,grandParent:r,curNode:e}}else i.ee=0,r===this.Y?this.Y=r.te():r.te(),r.ee=1}return}}ne(e,i,r){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,i),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let n,l=this.h.U,f=this.v(l.u,e);if(f===0){l.l=i;return}else if(f>0)l.U=new this.re(e,i),l.U.tt=l,n=l.U,this.h.U=n;else{let d=this.h.W,p=this.v(d.u,e);if(p===0){d.l=i;return}else if(p<0)d.W=new this.re(e,i),d.W.tt=d,n=d.W,this.h.W=n;else{if(r!==void 0){let y=r.o;if(y!==this.h){let g=this.v(y.u,e);if(g===0){y.l=i;return}else if(g>0){let b=y.L(),E=this.v(b.u,e);if(E===0){b.l=i;return}else E<0&&(n=new this.re(e,i),b.W===void 0?(b.W=n,n.tt=b):(y.U=n,n.tt=y))}}}if(n===void 0)for(n=this.Y;;){let y=this.v(n.u,e);if(y>0){if(n.U===void 0){n.U=new this.re(e,i),n.U.tt=n,n=n.U;break}n=n.U}else if(y<0){if(n.W===void 0){n.W=new this.re(e,i),n.W.tt=n,n=n.W;break}n=n.W}else{n.l=i;return}}}}return this.i+=1,n}I(e,i){for(;e;){let r=this.v(e.u,i);if(r<0)e=e.W;else if(r>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,i){let r=e.o;if(r===this.h&&(0,a.throwIteratorAccessError)(),this.i===1)return r.u=i,!0;if(r===this.h.U)return this.v(r.B().u,i)>0?(r.u=i,!0):!1;if(r===this.h.W)return this.v(r.L().u,i)<0?(r.u=i,!0):!1;let n=r.L().u;if(this.v(n,i)>=0)return!1;let l=r.B().u;return this.v(l,i)<=0?!1:(r.u=i,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=0,r=this;return this.oe(this.Y,function(n){return e===i?(r.V(n),!0):(i+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let i=this.I(this.Y,e);return i===this.h?!1:(this.V(i),!0)}eraseElementByIterator(e){let i=e.o;i===this.h&&(0,a.throwIteratorAccessError)();let r=i.W===void 0;return e.iteratorType===0?r&&e.next():(!r||i.U===void 0)&&e.next(),this.V(i),e}forEach(e){let i=0;for(let r of this)e(r,i++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i,r=0;for(let n of this){if(r===e){i=n;break}r+=1}return i}getHeight(){if(this.i===0)return 0;let e=function(i){return i?Math.max(e(i.U),e(i.W))+1:0};return e(this.Y)}},t=h;s.default=t}),bs=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=bt(),o=yt(),a=class extends c.ContainerIterator{constructor(t,e,i){super(i),this.o=t,this.h=e,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,o.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let t=this.o,e=this.h.tt;if(t===this.h)return e?e.rt-1:0;let i=0;for(t.U&&(i+=t.U.rt);t!==e;){let r=t.tt;t===r.W&&(i+=1,r.U&&(i+=r.U.rt)),t=r}return i}},h=a;s.default=h}),kl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(ms()),o=h(bs()),a=yt();function h(r){return r&&r.t?r:{default:r}}var t=class ys extends o.default{constructor(n,l,f,d){super(n,l,d),this.container=f}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.u}copy(){return new ys(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(r=[],n,l){super(n,l);let f=this;r.forEach(function(d){f.insert(d)})}*K(r){r!==void 0&&(yield*_t(this.K(r.U)),yield r.u,yield*_t(this.K(r.W)))}begin(){return new t(this.h.U||this.h,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this.h.W||this.h,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(r,n){return this.M(r,void 0,n)}find(r){let n=this.I(this.Y,r);return new t(n,this.h,this)}lowerBound(r){let n=this.X(this.Y,r);return new t(n,this.h,this)}upperBound(r){let n=this.Z(this.Y,r);return new t(n,this.h,this)}reverseLowerBound(r){let n=this.$(this.Y,r);return new t(n,this.h,this)}reverseUpperBound(r){let n=this.rr(this.Y,r);return new t(n,this.h,this)}union(r){let n=this;return r.forEach(function(l){n.insert(l)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},i=e;s.default=i}),Il=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=h(ms()),o=h(bs()),a=yt();function h(r){return r&&r.t?r:{default:r}}var t=class _s extends o.default{constructor(n,l,f,d){super(n,l,d),this.container=f}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let n=this;return new Proxy([],{get(l,f){if(f==="0")return n.o.u;if(f==="1")return n.o.l},set(l,f,d){if(f!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new _s(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.default{constructor(r=[],n,l){super(n,l);let f=this;r.forEach(function(d){f.setElement(d[0],d[1])})}*K(r){r!==void 0&&(yield*_t(this.K(r.U)),yield[r.u,r.l],yield*_t(this.K(r.W)))}begin(){return new t(this.h.U||this.h,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this.h.W||this.h,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){if(this.i===0)return;let r=this.h.U;return[r.u,r.l]}back(){if(this.i===0)return;let r=this.h.W;return[r.u,r.l]}lowerBound(r){let n=this.X(this.Y,r);return new t(n,this.h,this)}upperBound(r){let n=this.Z(this.Y,r);return new t(n,this.h,this)}reverseLowerBound(r){let n=this.$(this.Y,r);return new t(n,this.h,this)}reverseUpperBound(r){let n=this.rr(this.Y,r);return new t(n,this.h,this)}setElement(r,n,l){return this.M(r,n,l)}find(r){let n=this.I(this.Y,r);return new t(n,this.h,this)}getElementByKey(r){return this.I(this.Y,r).l}union(r){let n=this;return r.forEach(function(l){n.setElement(l[0],l[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},i=e;s.default=i}),ws=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=c;function c(o){let a=typeof o;return a==="object"&&o!==null||a==="function"}}),vs=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.HashContainerIterator=s.HashContainer=void 0;var c=bt(),o=h(ws()),a=yt();function h(i){return i&&i.t?i:{default:i}}var t=class extends c.ContainerIterator{constructor(i,r,n){super(n),this.o=i,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}};s.HashContainerIterator=t;var e=class extends c.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(i){let{L:r,B:n}=i;r.B=n,n.L=r,i===this.p&&(this.p=n),i===this._&&(this._=r),this.i-=1}M(i,r,n){n===void 0&&(n=(0,o.default)(i));let l;if(n){let f=i[this.HASH_TAG];if(f!==void 0)return this.H[f].l=r,this.i;Object.defineProperty(i,this.HASH_TAG,{value:this.H.length,configurable:!0}),l={u:i,l:r,L:this._,B:this.h},this.H.push(l)}else{let f=this.g[i];if(f)return f.l=r,this.i;l={u:i,l:r,L:this._,B:this.h},this.g[i]=l}return this.i===0?(this.p=l,this.h.B=l):this._.B=l,this._=l,this.h.L=l,++this.i}I(i,r){if(r===void 0&&(r=(0,o.default)(i)),r){let n=i[this.HASH_TAG];return n===void 0?this.h:this.H[n]}else return this.g[i]||this.h}clear(){let i=this.HASH_TAG;this.H.forEach(function(r){delete r.u[i]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(i,r){let n;if(r===void 0&&(r=(0,o.default)(i)),r){let l=i[this.HASH_TAG];if(l===void 0)return!1;delete i[this.HASH_TAG],n=this.H[l],delete this.H[l]}else{if(n=this.g[i],n===void 0)return!1;delete this.g[i]}return this.V(n),!0}eraseElementByIterator(i){let r=i.o;return r===this.h&&(0,a.throwIteratorAccessError)(),this.V(r),i.next()}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let r=this.p;for(;i--;)r=r.B;return this.V(r),this.i}};s.HashContainer=e}),Tl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=vs(),o=yt(),a=class Es extends c.HashContainerIterator{constructor(i,r,n,l){super(i,r,l),this.container=n}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.u}copy(){return new Es(this.o,this.h,this.container,this.iteratorType)}},h=class extends c.HashContainer{constructor(e=[]){super();let i=this;e.forEach(function(r){i.insert(r)})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,i){return this.M(e,void 0,i)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;return i.u}find(e,i){let r=this.I(e,i);return new a(r,this.h,this)}forEach(e){let i=0,r=this.p;for(;r!==this.h;)e(r.u,i++,this),r=r.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}).bind(this)()}},t=h;s.default=t}),Cl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),s.default=void 0;var c=vs(),o=h(ws()),a=yt();function h(r){return r&&r.t?r:{default:r}}var t=class Ss extends c.HashContainerIterator{constructor(n,l,f,d){super(n,l,d),this.container=f}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let n=this;return new Proxy([],{get(l,f){if(f==="0")return n.o.u;if(f==="1")return n.o.l},set(l,f,d){if(f!=="1")throw new TypeError("props must be 1");return n.o.l=d,!0}})}copy(){return new Ss(this.o,this.h,this.container,this.iteratorType)}},e=class extends c.HashContainer{constructor(r=[]){super();let n=this;r.forEach(function(l){n.setElement(l[0],l[1])})}begin(){return new t(this.p,this.h,this)}end(){return new t(this.h,this.h,this)}rBegin(){return new t(this._,this.h,this,1)}rEnd(){return new t(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(r,n,l){return this.M(r,n,l)}getElementByKey(r,n){if(n===void 0&&(n=(0,o.default)(r)),n){let f=r[this.HASH_TAG];return f!==void 0?this.H[f].l:void 0}let l=this.g[r];return l?l.l:void 0}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let n=this.p;for(;r--;)n=n.B;return[n.u,n.l]}find(r,n){let l=this.I(r,n);return new t(l,this.h,this)}forEach(r){let n=0,l=this.p;for(;l!==this.h;)r([l.u,l.l],n++,this),l=l.B}[Symbol.iterator](){return(function*(){let r=this.p;for(;r!==this.h;)yield[r.u,r.l],r=r.B}).bind(this)()}},i=e;s.default=i}),Ol=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"t",{value:!0}),Object.defineProperty(s,"Deque",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(s,"HashMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"HashSet",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(s,"LinkList",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(s,"OrderedMap",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(s,"OrderedSet",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(s,"PriorityQueue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"Queue",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"Stack",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(s,"Vector",{enumerable:!0,get:function(){return h.default}});var c=f(yl()),o=f(_l()),a=f(wl()),h=f(vl()),t=f(El()),e=f(Sl()),i=f(kl()),r=f(Il()),n=f(Tl()),l=f(Cl());function f(d){return d&&d.t?d:{default:d}}}),Rl=de((s,c)=>{"use strict";ne(),se(),oe();var o=Ol().OrderedSet,a=gt()("number-allocator:trace"),h=gt()("number-allocator:error");function t(i,r){this.low=i,this.high=r}t.prototype.equals=function(i){return this.low===i.low&&this.high===i.high},t.prototype.compare=function(i){return this.low<i.low&&this.high<i.low?-1:i.low<this.low&&i.high<this.low?1:0};function e(i,r){if(!(this instanceof e))return new e(i,r);this.min=i,this.max=r,this.ss=new o([],(n,l)=>n.compare(l)),a("Create"),this.clear()}e.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},e.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;let i=this.ss.begin(),r=i.pointer.low,n=i.pointer.high,l=r;return l+1<=n?this.ss.updateKeyByIterator(i,new t(r+1,n)):this.ss.eraseElementByPos(0),a("alloc():"+l),l},e.prototype.use=function(i){let r=new t(i,i),n=this.ss.lowerBound(r);if(!n.equals(this.ss.end())){let l=n.pointer.low,f=n.pointer.high;return n.pointer.equals(r)?(this.ss.eraseElementByIterator(n),a("use():"+i),!0):l>i?!1:l===i?(this.ss.updateKeyByIterator(n,new t(l+1,f)),a("use():"+i),!0):f===i?(this.ss.updateKeyByIterator(n,new t(l,f-1)),a("use():"+i),!0):(this.ss.updateKeyByIterator(n,new t(i+1,f)),this.ss.insert(new t(l,i-1)),a("use():"+i),!0)}return a("use():failed"),!1},e.prototype.free=function(i){if(i<this.min||i>this.max){h("free():"+i+" is out of range");return}let r=new t(i,i),n=this.ss.upperBound(r);if(n.equals(this.ss.end())){if(n.equals(this.ss.begin())){this.ss.insert(r);return}n.pre();let l=n.pointer.high;n.pointer.high+1===i?this.ss.updateKeyByIterator(n,new t(l,i)):this.ss.insert(r)}else if(n.equals(this.ss.begin()))if(i+1===n.pointer.low){let l=n.pointer.high;this.ss.updateKeyByIterator(n,new t(i,l))}else this.ss.insert(r);else{let l=n.pointer.low,f=n.pointer.high;n.pre();let d=n.pointer.low;n.pointer.high+1===i?i+1===l?(this.ss.eraseElementByIterator(n),this.ss.updateKeyByIterator(n,new t(d,f))):this.ss.updateKeyByIterator(n,new t(d,i)):i+1===l?(this.ss.eraseElementByIterator(n.next()),this.ss.insert(new t(i,f))):this.ss.insert(r)}a("free():"+i)},e.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new t(this.min,this.max))},e.prototype.intervalCount=function(){return this.ss.size()},e.prototype.dump=function(){console.log("length:"+this.ss.size());for(let i of this.ss)console.log(i)},c.exports=e}),As=de((s,c)=>{ne(),se(),oe();var o=Rl();c.exports.NumberAllocator=o}),Pl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=bl(),o=As(),a=class{constructor(h){h>0&&(this.aliasToTopic=new c.LRUCache({max:h}),this.topicToAlias={},this.numberAllocator=new o.NumberAllocator(1,h),this.max=h,this.length=0)}put(h,t){if(t===0||t>this.max)return!1;let e=this.aliasToTopic.get(t);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(t,h),this.topicToAlias[h]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(h){return this.aliasToTopic.get(h)}getAliasByTopic(h){let t=this.topicToAlias[h];return typeof t<"u"&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};s.default=a}),xl=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});var o=Br(),a=c(Pl()),h=Qt(),t=(e,i)=>{e.log("_handleConnack");let{options:r}=e,n=r.protocolVersion===5?i.reasonCode:i.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,i.properties){if(i.properties.topicAliasMaximum){if(i.properties.topicAliasMaximum>65535){e.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}i.properties.topicAliasMaximum>0&&(e.topicAliasSend=new a.default(i.properties.topicAliasMaximum))}i.properties.serverKeepAlive&&r.keepalive&&(r.keepalive=i.properties.serverKeepAlive),i.properties.maximumPacketSize&&(r.properties||(r.properties={}),r.properties.maximumPacketSize=i.properties.maximumPacketSize)}if(n===0)e.reconnecting=!1,e._onConnect(i);else if(n>0){let l=new h.ErrorWithReasonCode(`Connection refused: ${o.ReasonCodes[n]}`,n);e.emit("error",l),e.options.reconnectOnConnackError&&e._cleanUp(!0)}};s.default=t}),Ml=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(o,a,h)=>{o.log("handling pubrel packet");let t=typeof h<"u"?h:o.noop,{messageId:e}=a,i={cmd:"pubcomp",messageId:e};o.incomingStore.get(a,(r,n)=>{r?o._sendPacket(i,t):(o.emit("message",n.topic,n.payload,n),o.handleMessage(n,l=>{if(l)return t(l);o.incomingStore.del(n,o.noop),o._sendPacket(i,t)}))})};s.default=c}),Bl=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(s,"__esModule",{value:!0});var o=c(pl()),a=c(ml()),h=c(xl()),t=c(Br()),e=c(Ml()),i=(r,n,l)=>{let{options:f}=r;if(f.protocolVersion===5&&f.properties&&f.properties.maximumPacketSize&&f.properties.maximumPacketSize<n.length)return r.emit("error",new Error(`exceeding packets size ${n.cmd}`)),r.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),r;switch(r.log("_handlePacket :: emitting packetreceive"),r.emit("packetreceive",n),n.cmd){case"publish":(0,o.default)(r,n,l);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":r.reschedulePing(),(0,t.default)(r,n),l();break;case"pubrel":r.reschedulePing(),(0,e.default)(r,n,l);break;case"connack":(0,h.default)(r,n),l();break;case"auth":r.reschedulePing(),(0,a.default)(r,n),l();break;case"pingresp":r.log("_handlePacket :: received pingresp"),r.reschedulePing(!0),l();break;case"disconnect":r.emit("disconnect",n),l();break;default:r.log("_handlePacket :: unknown command"),l();break}};s.default=i}),Nl=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0}),s.TypedEventEmitter=void 0;var o=c((Lt(),Re(At))),a=Qt(),h=class{};s.TypedEventEmitter=h,(0,a.applyMixin)(h,o.default)}),Nr=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.isReactNativeBrowser=s.isWebWorker=void 0;var c=()=>{var t;return typeof window<"u"?typeof navigator<"u"&&((t=navigator.userAgent)===null||t===void 0?void 0:t.toLowerCase().indexOf(" electron/"))>-1&&ke!=null&&ke.versions?!Object.prototype.hasOwnProperty.call(ke.versions,"electron"):typeof window.document<"u":!1},o=()=>{var t,e;return!!(typeof self=="object"&&!((e=(t=self?.constructor)===null||t===void 0?void 0:t.name)===null||e===void 0)&&e.includes("WorkerGlobalScope"))},a=()=>typeof navigator<"u"&&navigator.product==="ReactNative",h=c()||o()||a();s.isWebWorker=o(),s.isReactNativeBrowser=a(),s.default=h}),jl=de((s,c)=>{ne(),se(),oe(),function(o,a){typeof s=="object"&&typeof c<"u"?a(s):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.fastUniqueNumbers={}))}(s,function(o){"use strict";var a=function(p){return function(y){var g=p(y);return y.add(g),g}},h=function(p){return function(y,g){return p.set(y,g),g}},t=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,e=536870912,i=e*2,r=function(p,y){return function(g){var b=y.get(g),E=b===void 0?g.size:b<i?b+1:0;if(!g.has(E))return p(g,E);if(g.size<e){for(;g.has(E);)E=Math.floor(Math.random()*i);return p(g,E)}if(g.size>t)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;g.has(E);)E=Math.floor(Math.random()*t);return p(g,E)}},n=new WeakMap,l=h(n),f=r(l,n),d=a(f);o.addUniqueNumber=d,o.generateUniqueNumber=f})}),Ll=de((s,c)=>{ne(),se(),oe(),function(o,a){typeof s=="object"&&typeof c<"u"?a(s,jl()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimersBroker={},o.fastUniqueNumbers))}(s,function(o,a){"use strict";var h=function(i){return i.method!==void 0&&i.method==="call"},t=function(i){return i.error===null&&typeof i.id=="number"},e=function(i){var r=new Map([[0,function(){}]]),n=new Map([[0,function(){}]]),l=new Map,f=new Worker(i);f.addEventListener("message",function(b){var E=b.data;if(h(E)){var m=E.params,w=m.timerId,I=m.timerType;if(I==="interval"){var T=r.get(w);if(typeof T=="number"){var S=l.get(T);if(S===void 0||S.timerId!==w||S.timerType!==I)throw new Error("The timer is in an undefined state.")}else if(typeof T<"u")T();else throw new Error("The timer is in an undefined state.")}else if(I==="timeout"){var k=n.get(w);if(typeof k=="number"){var P=l.get(k);if(P===void 0||P.timerId!==w||P.timerType!==I)throw new Error("The timer is in an undefined state.")}else if(typeof k<"u")k(),n.delete(w);else throw new Error("The timer is in an undefined state.")}}else if(t(E)){var $=E.id,K=l.get($);if(K===void 0)throw new Error("The timer is in an undefined state.");var ae=K.timerId,N=K.timerType;l.delete($),N==="interval"?r.delete(ae):n.delete(ae)}else{var V=E.error.message;throw new Error(V)}});var d=function(b){var E=a.generateUniqueNumber(l);l.set(E,{timerId:b,timerType:"interval"}),r.set(b,E),f.postMessage({id:E,method:"clear",params:{timerId:b,timerType:"interval"}})},p=function(b){var E=a.generateUniqueNumber(l);l.set(E,{timerId:b,timerType:"timeout"}),n.set(b,E),f.postMessage({id:E,method:"clear",params:{timerId:b,timerType:"timeout"}})},y=function(b){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=a.generateUniqueNumber(r);return r.set(m,function(){b(),typeof r.get(m)=="function"&&f.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:m,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:m,timerType:"interval"}}),m},g=function(b){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=a.generateUniqueNumber(n);return n.set(m,b),f.postMessage({id:null,method:"set",params:{delay:E,now:performance.now(),timerId:m,timerType:"timeout"}}),m};return{clearInterval:d,clearTimeout:p,setInterval:y,setTimeout:g}};o.load=e})}),Ul=de((s,c)=>{ne(),se(),oe(),function(o,a){typeof s=="object"&&typeof c<"u"?a(s,Ll()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],a):(o=typeof globalThis<"u"?globalThis:o||self,a(o.workerTimers={},o.workerTimersBroker))}(s,function(o,a){"use strict";var h=function(f,d){var p=null;return function(){if(p!==null)return p;var y=new Blob([d],{type:"application/javascript; charset=utf-8"}),g=URL.createObjectURL(y);return p=f(g),setTimeout(function(){return URL.revokeObjectURL(g)}),p}},t=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,e=h(a.load,t),i=function(f){return e().clearInterval(f)},r=function(f){return e().clearTimeout(f)},n=function(){var f;return(f=e()).setInterval.apply(f,arguments)},l=function(){var f;return(f=e()).setTimeout.apply(f,arguments)};o.clearInterval=i,o.clearTimeout=r,o.setInterval=n,o.setTimeout=l})}),Dl=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(n,l,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(l,f);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(n,d,p)}:function(n,l,f,d){d===void 0&&(d=f),n[d]=l[f]}),o=s&&s.__setModuleDefault||(Object.create?function(n,l){Object.defineProperty(n,"default",{enumerable:!0,value:l})}:function(n,l){n.default=l}),a=s&&s.__importStar||function(){var n=function(l){return n=Object.getOwnPropertyNames||function(f){var d=[];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[d.length]=p);return d},n(l)};return function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var d=n(l),p=0;p<d.length;p++)d[p]!=="default"&&c(f,l,d[p]);return o(f,l),f}}();Object.defineProperty(s,"__esModule",{value:!0});var h=a(Nr()),t=Ul(),e={set:t.setInterval,clear:t.clearInterval},i={set:(n,l)=>setInterval(n,l),clear:n=>clearInterval(n)},r=n=>{switch(n){case"native":return i;case"worker":return e;case"auto":default:return h.default&&!h.isWebWorker&&!h.isReactNativeBrowser?e:i}};s.default=r}),ks=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0});var o=c(Dl()),a=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(h,t){this.destroyed=!1,this.client=h,this.timer=typeof t=="object"&&"set"in t&&"clear"in t?t:(0,o.default)(t),this.setKeepalive(h.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(h){if(h*=1e3,isNaN(h)||h<=0||h>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${h}`);this._keepalive=h,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${h}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let h=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+h,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};s.default=a}),ln=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(T,S,k,P){P===void 0&&(P=k);var $=Object.getOwnPropertyDescriptor(S,k);(!$||("get"in $?!S.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return S[k]}}),Object.defineProperty(T,P,$)}:function(T,S,k,P){P===void 0&&(P=k),T[P]=S[k]}),o=s&&s.__setModuleDefault||(Object.create?function(T,S){Object.defineProperty(T,"default",{enumerable:!0,value:S})}:function(T,S){T.default=S}),a=s&&s.__importStar||function(){var T=function(S){return T=Object.getOwnPropertyNames||function(k){var P=[];for(var $ in k)Object.prototype.hasOwnProperty.call(k,$)&&(P[P.length]=$);return P},T(S)};return function(S){if(S&&S.__esModule)return S;var k={};if(S!=null)for(var P=T(S),$=0;$<P.length;$++)P[$]!=="default"&&c(k,S,P[$]);return o(k,S),k}}(),h=s&&s.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(s,"__esModule",{value:!0});var t=h(Qa()),e=h(hl()),i=h(as()),r=Dt(),n=h(fl()),l=a(dl()),f=h(gt()),d=h(ls()),p=h(Bl()),y=Qt(),g=Nl(),b=h(ks()),E=a(Nr()),m=globalThis.setImmediate||((...T)=>{let S=T.shift();(0,y.nextTick)(()=>{S(...T)})}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},I=class un extends g.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(S,k){super(),this.options=k||{};for(let P in w)typeof this.options[P]>"u"?this.options[P]=w[P]:this.options[P]=k[P];this.log=this.options.log||(0,f.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",un.VERSION),E.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",E.default?"browser":"node"),this.log("MqttClient :: options.protocol",k.protocol),this.log("MqttClient :: options.protocolVersion",k.protocolVersion),this.log("MqttClient :: options.username",k.username),this.log("MqttClient :: options.keepalive",k.keepalive),this.log("MqttClient :: options.reconnectPeriod",k.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",k.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",k.properties?k.properties.topicAliasMaximum:void 0),this.options.clientId=typeof k.clientId=="string"?k.clientId:un.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=k.protocolVersion===5&&k.customHandleAcks?k.customHandleAcks:(...P)=>{P[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=S,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new i.default:this.options.messageIdProvider,this.outgoingStore=k.outgoingStore||new d.default,this.incomingStore=k.incomingStore||new d.default,this.queueQoSZero=k.queueQoSZero===void 0?!0:k.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,k.properties&&k.properties.topicAliasMaximum>0&&(k.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new t.default(k.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:P}=this,$=()=>{let K=P.shift();this.log("deliver :: entry %o",K);let ae=null;if(!K){this._resubscribe();return}ae=K.packet,this.log("deliver :: call _sendPacket for %o",ae);let N=!0;ae.messageId&&ae.messageId!==0&&(this.messageIdProvider.register(ae.messageId)||(N=!1)),N?this._sendPacket(ae,V=>{K.cb&&K.cb(V),$()}):(this.log("messageId: %d has already used. The message is skipped and removed.",ae.messageId),$())};this.log("connect :: sending queued packets"),$()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(S,k){k()}handleMessage(S,k){k()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var S;let k=new r.Writable,P=e.default.parser(this.options),$=null,K=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),P.on("packet",U=>{this.log("parser :: on packet push to packets array."),K.push(U)});let ae=()=>{this.log("work :: getting next packet in queue");let U=K.shift();if(U)this.log("work :: packet pulled from queue"),(0,p.default)(this,U,N);else{this.log("work :: no packets in queue");let ie=$;$=null,this.log("work :: done flag is %s",!!ie),ie&&ie()}},N=()=>{if(K.length)(0,y.nextTick)(ae);else{let U=$;$=null,U()}};k._write=(U,ie,fe)=>{$=fe,this.log("writable stream :: parsing buffer"),P.parse(U),ae()};let V=U=>{this.log("streamErrorHandler :: error",U.message),U.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",U)):this.noop(U)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(k),this.stream.on("error",V),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let G={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(G.will=Object.assign(Object.assign({},this.options.will),{payload:(S=this.options.will)===null||S===void 0?void 0:S.payload})),this.topicAliasRecv&&(G.properties||(G.properties={}),this.topicAliasRecv&&(G.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(G),P.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let U=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(U)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(S,k,P,$){this.log("publish :: message `%s` to topic `%s`",k,S);let{options:K}=this;typeof P=="function"&&($=P,P=null),P=P||{},P=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),P);let{qos:ae,retain:N,dup:V,properties:G,cbStorePut:U}=P;if(this._checkDisconnecting($))return this;let ie=()=>{let fe=0;if((ae===1||ae===2)&&(fe=this._nextId(),fe===null))return this.log("No messageId left"),!1;let pe={cmd:"publish",topic:S,payload:k,qos:ae,retain:N,messageId:fe,dup:V};switch(K.protocolVersion===5&&(pe.properties=G),this.log("publish :: qos",ae),ae){case 1:case 2:this.outgoing[pe.messageId]={volatile:!1,cb:$||this.noop},this.log("MqttClient:publish: packet cmd: %s",pe.cmd),this._sendPacket(pe,void 0,U);break;default:this.log("MqttClient:publish: packet cmd: %s",pe.cmd),this._sendPacket(pe,$,U);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ie())&&this._storeProcessingQueue.push({invoke:ie,cbStorePut:P.cbStorePut,callback:$}),this}publishAsync(S,k,P){return new Promise(($,K)=>{this.publish(S,k,P,(ae,N)=>{ae?K(ae):$(N)})})}subscribe(S,k,P){let $=this.options.protocolVersion;typeof k=="function"&&(P=k),P=P||this.noop;let K=!1,ae=[];typeof S=="string"?(S=[S],ae=S):Array.isArray(S)?ae=S:typeof S=="object"&&(K=S.resubscribe,delete S.resubscribe,ae=Object.keys(S));let N=l.validateTopics(ae);if(N!==null)return m(P,new Error(`Invalid topic ${N}`)),this;if(this._checkDisconnecting(P))return this.log("subscribe: discconecting true"),this;let V={qos:0};$===5&&(V.nl=!1,V.rap=!1,V.rh=0),k=Object.assign(Object.assign({},V),k);let G=k.properties,U=[],ie=(_e,F)=>{if(F=F||k,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,_e)||this._resubscribeTopics[_e].qos<F.qos||K){let he={topic:_e,qos:F.qos};$===5&&(he.nl=F.nl,he.rap=F.rap,he.rh=F.rh,he.properties=G),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",he.topic,he.qos),U.push(he)}};if(Array.isArray(S)?S.forEach(_e=>{this.log("subscribe: array topic %s",_e),ie(_e)}):Object.keys(S).forEach(_e=>{this.log("subscribe: object topic %s, %o",_e,S[_e]),ie(_e,S[_e])}),!U.length)return P(null,[]),this;let fe=(_e,F)=>{let he={cmd:"subscribe",subscriptions:_e,messageId:F};if(G&&(he.properties=G),this.options.resubscribe){this.log("subscribe :: resubscribe true");let ue=[];_e.forEach(ye=>{if(this.options.reconnectPeriod>0){let J={qos:ye.qos};$===5&&(J.nl=ye.nl||!1,J.rap=ye.rap||!1,J.rh=ye.rh||0,J.properties=ye.properties),this._resubscribeTopics[ye.topic]=J,ue.push(ye.topic)}}),this.messageIdToTopic[he.messageId]=ue}let O=new Promise((ue,ye)=>{this.outgoing[he.messageId]={volatile:!0,cb(J,ve){if(!J){let{granted:H}=ve;for(let x=0;x<H.length;x+=1)_e[x].qos=H[x]}J?ye(new y.ErrorWithSubackPacket(J.message,ve)):ue(ve)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(he),O},pe=()=>{var _e;let F=(_e=this.options.subscribeBatchSize)!==null&&_e!==void 0?_e:U.length,he=[];for(let O=0;O<U.length;O+=F){let ue=U.slice(O,O+F),ye=this._nextId();if(ye===null)return this.log("No messageId left"),!1;he.push(fe(ue,ye))}return Promise.all(he).then(O=>{P(null,U,O.at(-1))}).catch(O=>{P(O,U,O.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!pe())&&this._storeProcessingQueue.push({invoke:pe,callback:P}),this}subscribeAsync(S,k){return new Promise((P,$)=>{this.subscribe(S,k,(K,ae)=>{K?$(K):P(ae)})})}unsubscribe(S,k,P){typeof S=="string"&&(S=[S]),typeof k=="function"&&(P=k),P=P||this.noop;let $=l.validateTopics(S);if($!==null)return m(P,new Error(`Invalid topic ${$}`)),this;if(this._checkDisconnecting(P))return this;let K=()=>{let ae=this._nextId();if(ae===null)return this.log("No messageId left"),!1;let N={cmd:"unsubscribe",messageId:ae,unsubscriptions:[]};return typeof S=="string"?N.unsubscriptions=[S]:Array.isArray(S)&&(N.unsubscriptions=S),this.options.resubscribe&&N.unsubscriptions.forEach(V=>{delete this._resubscribeTopics[V]}),typeof k=="object"&&k.properties&&(N.properties=k.properties),this.outgoing[N.messageId]={volatile:!0,cb:P},this.log("unsubscribe: call _sendPacket"),this._sendPacket(N),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:P}),this}unsubscribeAsync(S,k){return new Promise((P,$)=>{this.unsubscribe(S,k,(K,ae)=>{K?$(K):P(ae)})})}end(S,k,P){this.log("end :: (%s)",this.options.clientId),(S==null||typeof S!="boolean")&&(P=P||k,k=S,S=!1),typeof k!="object"&&(P=P||k,k=null),this.log("end :: cb? %s",!!P),(!P||typeof P!="function")&&(P=this.noop);let $=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(ae=>{this.outgoingStore.close(N=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),P){let V=ae||N;this.log("end :: closeStores: invoking callback with args"),P(V)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},K=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,S),this._cleanUp(S,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,y.nextTick)($)},k)};return this.disconnecting?(P(),this):(this._clearReconnect(),this.disconnecting=!0,!S&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,K,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),K()),this)}endAsync(S,k){return new Promise((P,$)=>{this.end(S,k,K=>{K?$(K):P()})})}removeOutgoingMessage(S){if(this.outgoing[S]){let{cb:k}=this.outgoing[S];this._removeOutgoingAndStoreMessage(S,()=>{k(new Error("Message removed"))})}return this}reconnect(S){this.log("client reconnect");let k=()=>{S?(this.options.incomingStore=S.incomingStore,this.options.outgoingStore=S.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new d.default,this.outgoingStore=this.options.outgoingStore||new d.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=k:k(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(S=>{this.outgoing[S].volatile&&typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(S=>{typeof this.outgoing[S].cb=="function"&&(this.outgoing[S].cb(new Error("Connection closed")),delete this.outgoing[S])}))}_removeTopicAliasAndRecoverTopicName(S){let k;S.properties&&(k=S.properties.topicAlias);let P=S.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",k,P),P.length===0){if(typeof k>"u")return new Error("Unregistered Topic Alias");if(P=this.topicAliasSend.getTopicByAlias(k),typeof P>"u")return new Error("Unregistered Topic Alias");S.topic=P}k&&delete S.properties.topicAlias}_checkDisconnecting(S){return this.disconnecting&&(S&&S!==this.noop?S(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(S,k,P={}){if(k&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",k)),this.log("_cleanUp :: forced? %s",S),S)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let $=Object.assign({cmd:"disconnect"},P);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket($,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),m(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),k&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",k),k())}_storeAndSend(S,k,P){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",S.cmd);let $=S,K;if($.cmd==="publish"&&($=(0,n.default)(S),K=this._removeTopicAliasAndRecoverTopicName($),K))return k&&k(K);this.outgoingStore.put($,ae=>{if(ae)return k&&k(ae);P(),this._writePacket(S,k)})}_applyTopicAlias(S){if(this.options.protocolVersion===5&&S.cmd==="publish"){let k;S.properties&&(k=S.properties.topicAlias);let P=S.topic.toString();if(this.topicAliasSend)if(k){if(P.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",P,k),!this.topicAliasSend.put(P,k)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,k),new Error("Sending Topic Alias out of range")}else P.length!==0&&(this.options.autoAssignTopicAlias?(k=this.topicAliasSend.getAliasByTopic(P),k?(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:k}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",P,k)):(k=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(P,k),S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:k}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",P,k))):this.options.autoUseTopicAlias&&(k=this.topicAliasSend.getAliasByTopic(P),k&&(S.topic="",S.properties=Object.assign(Object.assign({},S.properties),{topicAlias:k}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",P,k))));else if(k)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,k),new Error("Sending Topic Alias out of range")}}_noop(S){this.log("noop ::",S)}_writePacket(S,k){this.log("_writePacket :: packet: %O",S),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",S),this.log("_writePacket :: writing to stream");let P=e.default.writeToStream(S,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",P),!P&&k&&k!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",k)):k&&(this.log("_writePacket :: invoking cb"),k())}_sendPacket(S,k,P,$){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),P=P||this.noop,k=k||this.noop;let K=this._applyTopicAlias(S);if(K){k(K);return}if(!this.connected){if(S.cmd==="auth"){this._writePacket(S,k);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(S,k,P);return}if($){this._writePacket(S,k);return}switch(S.cmd){case"publish":break;case"pubrel":this._storeAndSend(S,k,P);return;default:this._writePacket(S,k);return}switch(S.qos){case 2:case 1:this._storeAndSend(S,k,P);break;case 0:default:this._writePacket(S,k);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(S,k,P){this.log("_storePacket :: packet: %o",S),this.log("_storePacket :: cb? %s",!!k),P=P||this.noop;let $=S;if($.cmd==="publish"){$=(0,n.default)(S);let ae=this._removeTopicAliasAndRecoverTopicName($);if(ae)return k&&k(ae)}let K=$.qos||0;K===0&&this.queueQoSZero||$.cmd!=="publish"?this.queue.push({packet:$,cb:k}):K>0?(k=this.outgoing[$.messageId]?this.outgoing[$.messageId].cb:null,this.outgoingStore.put($,ae=>{if(ae)return k&&k(ae);P()})):k&&k(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new b.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(S=!1){this.keepaliveManager&&this.options.keepalive&&(S||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let S=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&S.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let k=0;k<S.length;k++){let P={};P[S[k]]=this._resubscribeTopics[S[k]],P.resubscribe=!0,this.subscribe(P,{properties:P[S[k]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(S){if(this.disconnected){this.emit("connect",S);return}this.connackPacket=S,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let k=()=>{let P=this.outgoingStore.createStream(),$=()=>{P.destroy(),P=null,this._flushStoreProcessingQueue(),K()},K=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",$),P.on("error",N=>{K(),this._flushStoreProcessingQueue(),this.removeListener("close",$),this.emit("error",N)});let ae=()=>{if(!P)return;let N=P.read(1),V;if(!N){P.once("readable",ae);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[N.messageId]){ae();return}!this.disconnecting&&!this.reconnectTimer?(V=this.outgoing[N.messageId]?this.outgoing[N.messageId].cb:null,this.outgoing[N.messageId]={volatile:!1,cb(G,U){V&&V(G,U),ae()}},this._packetIdsDuringStoreProcessing[N.messageId]=!0,this.messageIdProvider.register(N.messageId)?this._sendPacket(N,void 0,void 0,!0):this.log("messageId: %d has already used.",N.messageId)):P.destroy&&P.destroy()};P.on("end",()=>{let N=!0;for(let V in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[V]){N=!1;break}this.removeListener("close",$),N?(K(),this._invokeAllStoreProcessingQueue(),this.emit("connect",S)):k()}),ae()};k()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let S=this._storeProcessingQueue[0];if(S&&S.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let S of this._storeProcessingQueue)S.cbStorePut&&S.cbStorePut(new Error("Connection closed")),S.callback&&S.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(S,k){delete this.outgoing[S],this.outgoingStore.del({messageId:S},(P,$)=>{k(P,$),this.messageIdProvider.deallocate(S),this._invokeStoreProcessingQueue()})}};I.VERSION=y.MQTTJS_VERSION,s.default=I}),Fl=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=As(),o=class{constructor(){this.numberAllocator=new c.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(a){return this.numberAllocator.use(a)}deallocate(a){this.numberAllocator.free(a)}clear(){this.numberAllocator.clear()}};s.default=o});function Ot(s){throw new RangeError(Ts[s])}function lo(s,c){let o=s.split("@"),a="";o.length>1&&(a=o[0]+"@",s=o[1]);let h=function(t,e){let i=[],r=t.length;for(;r--;)i[r]=e(t[r]);return i}((s=s.replace(Is,".")).split("."),c).join(".");return a+h}function uo(s){let c=[],o=0,a=s.length;for(;o<a;){let h=s.charCodeAt(o++);if(h>=55296&&h<=56319&&o<a){let t=s.charCodeAt(o++);(64512&t)==56320?c.push(((1023&h)<<10)+(1023&t)+65536):(c.push(h),o--)}else c.push(h)}return c}var ho,co,Is,Ts,et,br,Qr,Gr,Kr,Yr,St,Wl=ze(()=>{ne(),se(),oe(),ho=/^xn--/,co=/[^\0-\x7E]/,Is=/[\x2E\u3002\uFF0E\uFF61]/g,Ts={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},et=Math.floor,br=String.fromCharCode,Qr=function(s,c){return s+22+75*(s<26)-((c!=0)<<5)},Gr=function(s,c,o){let a=0;for(s=o?et(s/700):s>>1,s+=et(s/c);s>455;a+=36)s=et(s/35);return et(a+36*s/(s+38))},Kr=function(s){let c=[],o=s.length,a=0,h=128,t=72,e=s.lastIndexOf("-");e<0&&(e=0);for(let r=0;r<e;++r)s.charCodeAt(r)>=128&&Ot("not-basic"),c.push(s.charCodeAt(r));for(let r=e>0?e+1:0;r<o;){let n=a;for(let f=1,d=36;;d+=36){r>=o&&Ot("invalid-input");let p=(i=s.charCodeAt(r++))-48<10?i-22:i-65<26?i-65:i-97<26?i-97:36;(p>=36||p>et((2147483647-a)/f))&&Ot("overflow"),a+=p*f;let y=d<=t?1:d>=t+26?26:d-t;if(p<y)break;let g=36-y;f>et(2147483647/g)&&Ot("overflow"),f*=g}let l=c.length+1;t=Gr(a-n,l,n==0),et(a/l)>2147483647-h&&Ot("overflow"),h+=et(a/l),a%=l,c.splice(a++,0,h)}var i;return String.fromCodePoint(...c)},Yr=function(s){let c=[],o=(s=uo(s)).length,a=128,h=0,t=72;for(let r of s)r<128&&c.push(br(r));let e=c.length,i=e;for(e&&c.push("-");i<o;){let r=2147483647;for(let l of s)l>=a&&l<r&&(r=l);let n=i+1;r-a>et((2147483647-h)/n)&&Ot("overflow"),h+=(r-a)*n,a=r;for(let l of s)if(l<a&&++h>2147483647&&Ot("overflow"),l==a){let f=h;for(let d=36;;d+=36){let p=d<=t?1:d>=t+26?26:d-t;if(f<p)break;let y=f-p,g=36-p;c.push(br(Qr(p+y%g,0))),f=et(y/g)}c.push(br(Qr(f,0))),t=Gr(h,n,i==e),h=0,++i}++h,++a}return c.join("")},St={version:"2.1.0",ucs2:{decode:uo,encode:s=>String.fromCodePoint(...s)},decode:Kr,encode:Yr,toASCII:function(s){return lo(s,function(c){return co.test(c)?"xn--"+Yr(c):c})},toUnicode:function(s){return lo(s,function(c){return ho.test(c)?Kr(c.slice(4).toLowerCase()):c})}},St.decode,St.encode,St.toASCII,St.toUnicode,St.ucs2,St.version});function ql(s,c){return Object.prototype.hasOwnProperty.call(s,c)}var fo,$t,po,it,$l=ze(()=>{ne(),se(),oe(),fo=function(s,c,o,a){c=c||"&",o=o||"=";var h={};if(typeof s!="string"||s.length===0)return h;var t=/\+/g;s=s.split(c);var e=1e3;a&&typeof a.maxKeys=="number"&&(e=a.maxKeys);var i=s.length;e>0&&i>e&&(i=e);for(var r=0;r<i;++r){var n,l,f,d,p=s[r].replace(t,"%20"),y=p.indexOf(o);y>=0?(n=p.substr(0,y),l=p.substr(y+1)):(n=p,l=""),f=decodeURIComponent(n),d=decodeURIComponent(l),ql(h,f)?Array.isArray(h[f])?h[f].push(d):h[f]=[h[f],d]:h[f]=d}return h},$t=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}},po=function(s,c,o,a){return c=c||"&",o=o||"=",s===null&&(s=void 0),typeof s=="object"?Object.keys(s).map(function(h){var t=encodeURIComponent($t(h))+o;return Array.isArray(s[h])?s[h].map(function(e){return t+encodeURIComponent($t(e))}).join(c):t+encodeURIComponent($t(s[h]))}).join(c):a?encodeURIComponent($t(a))+o+encodeURIComponent($t(s)):""},it={},it.decode=it.parse=fo,it.encode=it.stringify=po,it.decode,it.encode,it.parse,it.stringify});function hn(){throw new Error("setTimeout has not been defined")}function cn(){throw new Error("clearTimeout has not been defined")}function Cs(s){if(ct===setTimeout)return setTimeout(s,0);if((ct===hn||!ct)&&setTimeout)return ct=setTimeout,setTimeout(s,0);try{return ct(s,0)}catch{try{return ct.call(null,s,0)}catch{return ct.call(this||Nt,s,0)}}}function Hl(){jt&&Mt&&(jt=!1,Mt.length?ot=Mt.concat(ot):ur=-1,ot.length&&Os())}function Os(){if(!jt){var s=Cs(Hl);jt=!0;for(var c=ot.length;c;){for(Mt=ot,ot=[];++ur<c;)Mt&&Mt[ur].run();ur=-1,c=ot.length}Mt=null,jt=!1,function(o){if(ft===clearTimeout)return clearTimeout(o);if((ft===cn||!ft)&&clearTimeout)return ft=clearTimeout,clearTimeout(o);try{ft(o)}catch{try{return ft.call(null,o)}catch{return ft.call(this||Nt,o)}}}(s)}}function go(s,c){(this||Nt).fun=s,(this||Nt).array=c}function lt(){}var mo,ct,ft,Nt,Ue,Mt,ot,jt,ur,Ne,Vl=ze(()=>{ne(),se(),oe(),Nt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Ue=mo={},function(){try{ct=typeof setTimeout=="function"?setTimeout:hn}catch{ct=hn}try{ft=typeof clearTimeout=="function"?clearTimeout:cn}catch{ft=cn}}(),ot=[],jt=!1,ur=-1,Ue.nextTick=function(s){var c=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)c[o-1]=arguments[o];ot.push(new go(s,c)),ot.length!==1||jt||Cs(Os)},go.prototype.run=function(){(this||Nt).fun.apply(null,(this||Nt).array)},Ue.title="browser",Ue.browser=!0,Ue.env={},Ue.argv=[],Ue.version="",Ue.versions={},Ue.on=lt,Ue.addListener=lt,Ue.once=lt,Ue.off=lt,Ue.removeListener=lt,Ue.removeAllListeners=lt,Ue.emit=lt,Ue.prependListener=lt,Ue.prependOnceListener=lt,Ue.listeners=function(s){return[]},Ue.binding=function(s){throw new Error("process.binding is not supported")},Ue.cwd=function(){return"/"},Ue.chdir=function(s){throw new Error("process.chdir is not supported")},Ue.umask=function(){return 0},Ne=mo,Ne.addListener,Ne.argv,Ne.binding,Ne.browser,Ne.chdir,Ne.cwd,Ne.emit,Ne.env,Ne.listeners,Ne.nextTick,Ne.off,Ne.on,Ne.once,Ne.prependListener,Ne.prependOnceListener,Ne.removeAllListeners,Ne.removeListener,Ne.title,Ne.umask,Ne.version,Ne.versions});function zl(){if(fn)return kr;fn=!0;var s=kr={},c,o;function a(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=a}catch{c=a}try{typeof clearTimeout=="function"?o=clearTimeout:o=h}catch{o=h}})();function t(g){if(c===setTimeout)return setTimeout(g,0);if((c===a||!c)&&setTimeout)return c=setTimeout,setTimeout(g,0);try{return c(g,0)}catch{try{return c.call(null,g,0)}catch{return c.call(this||Pt,g,0)}}}function e(g){if(o===clearTimeout)return clearTimeout(g);if((o===h||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(g);try{return o(g)}catch{try{return o.call(null,g)}catch{return o.call(this||Pt,g)}}}var i=[],r=!1,n,l=-1;function f(){!r||!n||(r=!1,n.length?i=n.concat(i):l=-1,i.length&&d())}function d(){if(!r){var g=t(f);r=!0;for(var b=i.length;b;){for(n=i,i=[];++l<b;)n&&n[l].run();l=-1,b=i.length}n=null,r=!1,e(g)}}s.nextTick=function(g){var b=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)b[E-1]=arguments[E];i.push(new p(g,b)),i.length===1&&!r&&t(d)};function p(g,b){(this||Pt).fun=g,(this||Pt).array=b}p.prototype.run=function(){(this||Pt).fun.apply(null,(this||Pt).array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function y(){}return s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(g){return[]},s.binding=function(g){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(g){throw new Error("process.chdir is not supported")},s.umask=function(){return 0},kr}var kr,fn,Pt,Me,Rs=ze(()=>{ne(),se(),oe(),kr={},fn=!1,Pt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Me=zl(),Me.platform="browser",Me.addListener,Me.argv,Me.binding,Me.browser,Me.chdir,Me.cwd,Me.emit,Me.env,Me.listeners,Me.nextTick,Me.off,Me.on,Me.once,Me.prependListener,Me.prependOnceListener,Me.removeAllListeners,Me.removeListener,Me.title,Me.umask,Me.version,Me.versions});function Ql(){if(dn)return Ir;dn=!0;var s=Me;function c(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function o(t,e){for(var i="",r=0,n=-1,l=0,f,d=0;d<=t.length;++d){if(d<t.length)f=t.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(n===d-1||l===1))if(n!==d-1&&l===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var p=i.lastIndexOf("/");if(p!==i.length-1){p===-1?(i="",r=0):(i=i.slice(0,p),r=i.length-1-i.lastIndexOf("/")),n=d,l=0;continue}}else if(i.length===2||i.length===1){i="",r=0,n=d,l=0;continue}}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+t.slice(n+1,d):i=t.slice(n+1,d),r=d-n-1;n=d,l=0}else f===46&&l!==-1?++l:l=-1}return i}function a(t,e){var i=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+r:i+t+r:r}var h={resolve:function(){for(var t="",e=!1,i,r=arguments.length-1;r>=-1&&!e;r--){var n;r>=0?n=arguments[r]:(i===void 0&&(i=s.cwd()),n=i),c(n),n.length!==0&&(t=n+"/"+t,e=n.charCodeAt(0)===47)}return t=o(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(c(t),t.length===0)return".";var e=t.charCodeAt(0)===47,i=t.charCodeAt(t.length-1)===47;return t=o(t,!e),t.length===0&&!e&&(t="."),t.length>0&&i&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return c(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];c(i),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":h.normalize(t)},relative:function(t,e){if(c(t),c(e),t===e||(t=h.resolve(t),e=h.resolve(e),t===e))return"";for(var i=1;i<t.length&&t.charCodeAt(i)===47;++i);for(var r=t.length,n=r-i,l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var f=e.length,d=f-l,p=n<d?n:d,y=-1,g=0;g<=p;++g){if(g===p){if(d>p){if(e.charCodeAt(l+g)===47)return e.slice(l+g+1);if(g===0)return e.slice(l+g)}else n>p&&(t.charCodeAt(i+g)===47?y=g:g===0&&(y=0));break}var b=t.charCodeAt(i+g),E=e.charCodeAt(l+g);if(b!==E)break;b===47&&(y=g)}var m="";for(g=i+y+1;g<=r;++g)(g===r||t.charCodeAt(g)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+e.slice(l+y):(l+=y,e.charCodeAt(l)===47&&++l,e.slice(l))},_makeLong:function(t){return t},dirname:function(t){if(c(t),t.length===0)return".";for(var e=t.charCodeAt(0),i=e===47,r=-1,n=!0,l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!n){r=l;break}}else n=!1;return r===-1?i?"/":".":i&&r===1?"//":t.slice(0,r)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');c(t);var i=0,r=-1,n=!0,l;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var f=e.length-1,d=-1;for(l=t.length-1;l>=0;--l){var p=t.charCodeAt(l);if(p===47){if(!n){i=l+1;break}}else d===-1&&(n=!1,d=l+1),f>=0&&(p===e.charCodeAt(f)?--f===-1&&(r=l):(f=-1,r=d))}return i===r?r=d:r===-1&&(r=t.length),t.slice(i,r)}else{for(l=t.length-1;l>=0;--l)if(t.charCodeAt(l)===47){if(!n){i=l+1;break}}else r===-1&&(n=!1,r=l+1);return r===-1?"":t.slice(i,r)}},extname:function(t){c(t);for(var e=-1,i=0,r=-1,n=!0,l=0,f=t.length-1;f>=0;--f){var d=t.charCodeAt(f);if(d===47){if(!n){i=f+1;break}continue}r===-1&&(n=!1,r=f+1),d===46?e===-1?e=f:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||r===-1||l===0||l===1&&e===r-1&&e===i+1?"":t.slice(e,r)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return a("/",t)},parse:function(t){c(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var i=t.charCodeAt(0),r=i===47,n;r?(e.root="/",n=1):n=0;for(var l=-1,f=0,d=-1,p=!0,y=t.length-1,g=0;y>=n;--y){if(i=t.charCodeAt(y),i===47){if(!p){f=y+1;break}continue}d===-1&&(p=!1,d=y+1),i===46?l===-1?l=y:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||d===-1||g===0||g===1&&l===d-1&&l===f+1?d!==-1&&(f===0&&r?e.base=e.name=t.slice(1,d):e.base=e.name=t.slice(f,d)):(f===0&&r?(e.name=t.slice(1,l),e.base=t.slice(1,d)):(e.name=t.slice(f,l),e.base=t.slice(f,d)),e.ext=t.slice(l,d)),f>0?e.dir=t.slice(0,f-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,Ir=h,Ir}var Ir,dn,pn,Gl=ze(()=>{ne(),se(),oe(),Rs(),Ir={},dn=!1,pn=Ql()}),Ps={};Vt(Ps,{URL:()=>Ks,Url:()=>Hs,default:()=>Ce,fileURLToPath:()=>xs,format:()=>Vs,parse:()=>Gs,pathToFileURL:()=>Ms,resolve:()=>zs,resolveObject:()=>Qs});function Ze(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function nr(s,c,o){if(s&&tt.isObject(s)&&s instanceof Ze)return s;var a=new Ze;return a.parse(s,c,o),a}function Kl(){if(gn)return Tr;gn=!0;var s=Ne;function c(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function o(t,e){for(var i="",r=0,n=-1,l=0,f,d=0;d<=t.length;++d){if(d<t.length)f=t.charCodeAt(d);else{if(f===47)break;f=47}if(f===47){if(!(n===d-1||l===1))if(n!==d-1&&l===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var p=i.lastIndexOf("/");if(p!==i.length-1){p===-1?(i="",r=0):(i=i.slice(0,p),r=i.length-1-i.lastIndexOf("/")),n=d,l=0;continue}}else if(i.length===2||i.length===1){i="",r=0,n=d,l=0;continue}}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+="/"+t.slice(n+1,d):i=t.slice(n+1,d),r=d-n-1;n=d,l=0}else f===46&&l!==-1?++l:l=-1}return i}function a(t,e){var i=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+r:i+t+r:r}var h={resolve:function(){for(var t="",e=!1,i,r=arguments.length-1;r>=-1&&!e;r--){var n;r>=0?n=arguments[r]:(i===void 0&&(i=s.cwd()),n=i),c(n),n.length!==0&&(t=n+"/"+t,e=n.charCodeAt(0)===47)}return t=o(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(c(t),t.length===0)return".";var e=t.charCodeAt(0)===47,i=t.charCodeAt(t.length-1)===47;return t=o(t,!e),t.length===0&&!e&&(t="."),t.length>0&&i&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return c(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var i=arguments[e];c(i),i.length>0&&(t===void 0?t=i:t+="/"+i)}return t===void 0?".":h.normalize(t)},relative:function(t,e){if(c(t),c(e),t===e||(t=h.resolve(t),e=h.resolve(e),t===e))return"";for(var i=1;i<t.length&&t.charCodeAt(i)===47;++i);for(var r=t.length,n=r-i,l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var f=e.length,d=f-l,p=n<d?n:d,y=-1,g=0;g<=p;++g){if(g===p){if(d>p){if(e.charCodeAt(l+g)===47)return e.slice(l+g+1);if(g===0)return e.slice(l+g)}else n>p&&(t.charCodeAt(i+g)===47?y=g:g===0&&(y=0));break}var b=t.charCodeAt(i+g),E=e.charCodeAt(l+g);if(b!==E)break;b===47&&(y=g)}var m="";for(g=i+y+1;g<=r;++g)(g===r||t.charCodeAt(g)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+e.slice(l+y):(l+=y,e.charCodeAt(l)===47&&++l,e.slice(l))},_makeLong:function(t){return t},dirname:function(t){if(c(t),t.length===0)return".";for(var e=t.charCodeAt(0),i=e===47,r=-1,n=!0,l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!n){r=l;break}}else n=!1;return r===-1?i?"/":".":i&&r===1?"//":t.slice(0,r)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');c(t);var i=0,r=-1,n=!0,l;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var f=e.length-1,d=-1;for(l=t.length-1;l>=0;--l){var p=t.charCodeAt(l);if(p===47){if(!n){i=l+1;break}}else d===-1&&(n=!1,d=l+1),f>=0&&(p===e.charCodeAt(f)?--f===-1&&(r=l):(f=-1,r=d))}return i===r?r=d:r===-1&&(r=t.length),t.slice(i,r)}else{for(l=t.length-1;l>=0;--l)if(t.charCodeAt(l)===47){if(!n){i=l+1;break}}else r===-1&&(n=!1,r=l+1);return r===-1?"":t.slice(i,r)}},extname:function(t){c(t);for(var e=-1,i=0,r=-1,n=!0,l=0,f=t.length-1;f>=0;--f){var d=t.charCodeAt(f);if(d===47){if(!n){i=f+1;break}continue}r===-1&&(n=!1,r=f+1),d===46?e===-1?e=f:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||r===-1||l===0||l===1&&e===r-1&&e===i+1?"":t.slice(e,r)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return a("/",t)},parse:function(t){c(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var i=t.charCodeAt(0),r=i===47,n;r?(e.root="/",n=1):n=0;for(var l=-1,f=0,d=-1,p=!0,y=t.length-1,g=0;y>=n;--y){if(i=t.charCodeAt(y),i===47){if(!p){f=y+1;break}continue}d===-1&&(p=!1,d=y+1),i===46?l===-1?l=y:g!==1&&(g=1):l!==-1&&(g=-1)}return l===-1||d===-1||g===0||g===1&&l===d-1&&l===f+1?d!==-1&&(f===0&&r?e.base=e.name=t.slice(1,d):e.base=e.name=t.slice(f,d)):(f===0&&r?(e.name=t.slice(1,l),e.base=t.slice(1,d)):(e.name=t.slice(f,l),e.base=t.slice(f,d)),e.ext=t.slice(l,d)),f>0?e.dir=t.slice(0,f-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,Tr=h,Tr}function Yl(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Or?Jl(s):Xl(s)}function Jl(s){let c=s.hostname,o=s.pathname;for(let a=0;a<o.length;a++)if(o[a]==="%"){let h=o.codePointAt(a+2)||32;if(o[a+1]==="2"&&h===102||o[a+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(Us,"\\"),o=decodeURIComponent(o),c!=="")return`\\\\${c}${o}`;{let a=o.codePointAt(1)|32,h=o[2];if(a<js||a>Ls||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function Xl(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let c=s.pathname;for(let o=0;o<c.length;o++)if(c[o]==="%"){let a=c.codePointAt(o+2)||32;if(c[o+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function Zl(s){let c=mn.resolve(s),o=s.charCodeAt(s.length-1);(o===Ns||Or&&o===Bs)&&c[c.length-1]!==mn.sep&&(c+="/");let a=new URL("file://");return c.includes("%")&&(c=c.replace(Ds,"%25")),!Or&&c.includes("\\")&&(c=c.replace(Fs,"%5C")),c.includes(`
`)&&(c=c.replace(Ws,"%0A")),c.includes("\r")&&(c=c.replace(qs,"%0D")),c.includes("	")&&(c=c.replace($s,"%09")),a.pathname=c,a}function xs(s){if(typeof s=="string")s=new URL(s);else if(!(s instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(s.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Rr?eu(s):tu(s)}function eu(s){let c=s.hostname,o=s.pathname;for(let a=0;a<o.length;a++)if(o[a]==="%"){let h=o.codePointAt(a+2)||32;if(o[a+1]==="2"&&h===102||o[a+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(o=o.replace(ea,"\\"),o=decodeURIComponent(o),c!=="")return`\\\\${c}${o}`;{let a=o.codePointAt(1)|32,h=o[2];if(a<Xs||a>Zs||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return o.slice(1)}}function tu(s){if(s.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let c=s.pathname;for(let o=0;o<c.length;o++)if(c[o]==="%"){let a=c.codePointAt(o+2)||32;if(c[o+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function Ms(s){let c=pn.resolve(s),o=s.charCodeAt(s.length-1);(o===Js||Rr&&o===Ys)&&c[c.length-1]!==pn.sep&&(c+="/");let a=new URL("file://");return c.includes("%")&&(c=c.replace(ta,"%25")),!Rr&&c.includes("\\")&&(c=c.replace(ra,"%5C")),c.includes(`
`)&&(c=c.replace(ia,"%0A")),c.includes("\r")&&(c=c.replace(na,"%0D")),c.includes("	")&&(c=c.replace(oa,"%09")),a.pathname=c,a}var Ce,bo,tt,yo,_o,wo,vo,yr,Jr,Xr,Zr,Eo,So,_r,Rt,wr,Tr,gn,mn,Ao,Bs,Ns,js,Ls,Or,Us,Ds,Fs,Ws,qs,$s,ko,Hs,Vs,zs,Qs,Gs,Ks,Ys,Js,Xs,Zs,Rr,ea,ta,ra,ia,na,oa,ru=ze(()=>{ne(),se(),oe(),Wl(),$l(),Vl(),Gl(),Rs(),Ce={},bo=St,tt={isString:function(s){return typeof s=="string"},isObject:function(s){return typeof s=="object"&&s!==null},isNull:function(s){return s===null},isNullOrUndefined:function(s){return s==null}},Ce.parse=nr,Ce.resolve=function(s,c){return nr(s,!1,!0).resolve(c)},Ce.resolveObject=function(s,c){return s?nr(s,!1,!0).resolveObject(c):c},Ce.format=function(s){return tt.isString(s)&&(s=nr(s)),s instanceof Ze?s.format():Ze.prototype.format.call(s)},Ce.Url=Ze,yo=/^([a-z0-9.+-]+:)/i,_o=/:[0-9]*$/,wo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,vo=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),yr=["'"].concat(vo),Jr=["%","/","?",";","#"].concat(yr),Xr=["/","?","#"],Zr=/^[+a-z0-9A-Z_-]{0,63}$/,Eo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,So={javascript:!0,"javascript:":!0},_r={javascript:!0,"javascript:":!0},Rt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wr=it,Ze.prototype.parse=function(s,c,o){if(!tt.isString(s))throw new TypeError("Parameter 'url' must be a string, not "+typeof s);var a=s.indexOf("?"),h=a!==-1&&a<s.indexOf("#")?"?":"#",t=s.split(h);t[0]=t[0].replace(/\\/g,"/");var e=s=t.join(h);if(e=e.trim(),!o&&s.split("#").length===1){var i=wo.exec(e);if(i)return this.path=e,this.href=e,this.pathname=i[1],i[2]?(this.search=i[2],this.query=c?wr.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this}var r=yo.exec(e);if(r){var n=(r=r[0]).toLowerCase();this.protocol=n,e=e.substr(r.length)}if(o||r||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=e.substr(0,2)==="//";!l||r&&_r[r]||(e=e.substr(2),this.slashes=!0)}if(!_r[r]&&(l||r&&!Rt[r])){for(var f,d,p=-1,y=0;y<Xr.length;y++)(g=e.indexOf(Xr[y]))!==-1&&(p===-1||g<p)&&(p=g);for((d=p===-1?e.lastIndexOf("@"):e.lastIndexOf("@",p))!==-1&&(f=e.slice(0,d),e=e.slice(d+1),this.auth=decodeURIComponent(f)),p=-1,y=0;y<Jr.length;y++){var g;(g=e.indexOf(Jr[y]))!==-1&&(p===-1||g<p)&&(p=g)}p===-1&&(p=e.length),this.host=e.slice(0,p),e=e.slice(p),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var E=this.hostname.split(/\./),m=(y=0,E.length);y<m;y++){var w=E[y];if(w&&!w.match(Zr)){for(var I="",T=0,S=w.length;T<S;T++)w.charCodeAt(T)>127?I+="x":I+=w[T];if(!I.match(Zr)){var k=E.slice(0,y),P=E.slice(y+1),$=w.match(Eo);$&&(k.push($[1]),P.unshift($[2])),P.length&&(e="/"+P.join(".")+e),this.hostname=k.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=bo.toASCII(this.hostname));var K=this.port?":"+this.port:"",ae=this.hostname||"";this.host=ae+K,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),e[0]!=="/"&&(e="/"+e))}if(!So[n])for(y=0,m=yr.length;y<m;y++){var N=yr[y];if(e.indexOf(N)!==-1){var V=encodeURIComponent(N);V===N&&(V=escape(N)),e=e.split(N).join(V)}}var G=e.indexOf("#");G!==-1&&(this.hash=e.substr(G),e=e.slice(0,G));var U=e.indexOf("?");if(U!==-1?(this.search=e.substr(U),this.query=e.substr(U+1),c&&(this.query=wr.parse(this.query)),e=e.slice(0,U)):c&&(this.search="",this.query={}),e&&(this.pathname=e),Rt[n]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){K=this.pathname||"";var ie=this.search||"";this.path=K+ie}return this.href=this.format(),this},Ze.prototype.format=function(){var s=this.auth||"";s&&(s=(s=encodeURIComponent(s)).replace(/%3A/i,":"),s+="@");var c=this.protocol||"",o=this.pathname||"",a=this.hash||"",h=!1,t="";this.host?h=s+this.host:this.hostname&&(h=s+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&tt.isObject(this.query)&&Object.keys(this.query).length&&(t=wr.stringify(this.query));var e=this.search||t&&"?"+t||"";return c&&c.substr(-1)!==":"&&(c+=":"),this.slashes||(!c||Rt[c])&&h!==!1?(h="//"+(h||""),o&&o.charAt(0)!=="/"&&(o="/"+o)):h||(h=""),a&&a.charAt(0)!=="#"&&(a="#"+a),e&&e.charAt(0)!=="?"&&(e="?"+e),c+h+(o=o.replace(/[?#]/g,function(i){return encodeURIComponent(i)}))+(e=e.replace("#","%23"))+a},Ze.prototype.resolve=function(s){return this.resolveObject(nr(s,!1,!0)).format()},Ze.prototype.resolveObject=function(s){if(tt.isString(s)){var c=new Ze;c.parse(s,!1,!0),s=c}for(var o=new Ze,a=Object.keys(this),h=0;h<a.length;h++){var t=a[h];o[t]=this[t]}if(o.hash=s.hash,s.href==="")return o.href=o.format(),o;if(s.slashes&&!s.protocol){for(var e=Object.keys(s),i=0;i<e.length;i++){var r=e[i];r!=="protocol"&&(o[r]=s[r])}return Rt[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(s.protocol&&s.protocol!==o.protocol){if(!Rt[s.protocol]){for(var n=Object.keys(s),l=0;l<n.length;l++){var f=n[l];o[f]=s[f]}return o.href=o.format(),o}if(o.protocol=s.protocol,s.host||_r[s.protocol])o.pathname=s.pathname;else{for(var d=(s.pathname||"").split("/");d.length&&!(s.host=d.shift()););s.host||(s.host=""),s.hostname||(s.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),o.pathname=d.join("/")}if(o.search=s.search,o.query=s.query,o.host=s.host||"",o.auth=s.auth,o.hostname=s.hostname||s.host,o.port=s.port,o.pathname||o.search){var p=o.pathname||"",y=o.search||"";o.path=p+y}return o.slashes=o.slashes||s.slashes,o.href=o.format(),o}var g=o.pathname&&o.pathname.charAt(0)==="/",b=s.host||s.pathname&&s.pathname.charAt(0)==="/",E=b||g||o.host&&s.pathname,m=E,w=o.pathname&&o.pathname.split("/")||[],I=(d=s.pathname&&s.pathname.split("/")||[],o.protocol&&!Rt[o.protocol]);if(I&&(o.hostname="",o.port=null,o.host&&(w[0]===""?w[0]=o.host:w.unshift(o.host)),o.host="",s.protocol&&(s.hostname=null,s.port=null,s.host&&(d[0]===""?d[0]=s.host:d.unshift(s.host)),s.host=null),E=E&&(d[0]===""||w[0]==="")),b)o.host=s.host||s.host===""?s.host:o.host,o.hostname=s.hostname||s.hostname===""?s.hostname:o.hostname,o.search=s.search,o.query=s.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),o.search=s.search,o.query=s.query;else if(!tt.isNullOrUndefined(s.search))return I&&(o.hostname=o.host=w.shift(),($=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=$.shift(),o.host=o.hostname=$.shift())),o.search=s.search,o.query=s.query,tt.isNull(o.pathname)&&tt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!w.length)return o.pathname=null,o.search?o.path="/"+o.search:o.path=null,o.href=o.format(),o;for(var T=w.slice(-1)[0],S=(o.host||s.host||w.length>1)&&(T==="."||T==="..")||T==="",k=0,P=w.length;P>=0;P--)(T=w[P])==="."?w.splice(P,1):T===".."?(w.splice(P,1),k++):k&&(w.splice(P,1),k--);if(!E&&!m)for(;k--;k)w.unshift("..");!E||w[0]===""||w[0]&&w[0].charAt(0)==="/"||w.unshift(""),S&&w.join("/").substr(-1)!=="/"&&w.push("");var $,K=w[0]===""||w[0]&&w[0].charAt(0)==="/";return I&&(o.hostname=o.host=K?"":w.length?w.shift():"",($=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=$.shift(),o.host=o.hostname=$.shift())),(E=E||o.host&&w.length)&&!K&&w.unshift(""),w.length?o.pathname=w.join("/"):(o.pathname=null,o.path=null),tt.isNull(o.pathname)&&tt.isNull(o.search)||(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=s.auth||o.auth,o.slashes=o.slashes||s.slashes,o.href=o.format(),o},Ze.prototype.parseHost=function(){var s=this.host,c=_o.exec(s);c&&((c=c[0])!==":"&&(this.port=c.substr(1)),s=s.substr(0,s.length-c.length)),s&&(this.hostname=s)},Ce.Url,Ce.format,Ce.resolve,Ce.resolveObject,Tr={},gn=!1,mn=Kl(),Ao=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ce.URL=typeof URL<"u"?URL:null,Ce.pathToFileURL=Zl,Ce.fileURLToPath=Yl,Ce.Url,Ce.format,Ce.resolve,Ce.resolveObject,Ce.URL,Bs=92,Ns=47,js=97,Ls=122,Or=Ao==="win32",Us=/\//g,Ds=/%/g,Fs=/\\/g,Ws=/\n/g,qs=/\r/g,$s=/\t/g,ko=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ce.URL=typeof URL<"u"?URL:null,Ce.pathToFileURL=Ms,Ce.fileURLToPath=xs,Hs=Ce.Url,Vs=Ce.format,zs=Ce.resolve,Qs=Ce.resolveObject,Gs=Ce.parse,Ks=Ce.URL,Ys=92,Js=47,Xs=97,Zs=122,Rr=ko==="win32",ea=/\//g,ta=/%/g,ra=/\\/g,ia=/\n/g,na=/\r/g,oa=/\t/g}),iu=de((s,c)=>{"use strict";ne(),se(),oe(),c.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),An=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0}),s.BufferedDuplex=void 0,s.writev=a;var c=Dt(),o=(Fe(),Re(De));function a(t,e){let i=new Array(t.length);for(let r=0;r<t.length;r++)typeof t[r].chunk=="string"?i[r]=o.Buffer.from(t[r].chunk,"utf8"):i[r]=t[r].chunk;this._write(o.Buffer.concat(i),"binary",e)}var h=class extends c.Duplex{constructor(t,e,i){super({objectMode:!0}),this.proxy=e,this.socket=i,this.writeQueue=[],t.objectMode||(this._writev=a.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",r=>{!this.destroyed&&this.readable&&this.push(r)})}_read(t){this.proxy.read(t)}_write(t,e,i){this.isSocketOpen?this.writeToProxy(t,e,i):this.writeQueue.push({chunk:t,encoding:e,cb:i})}_final(t){this.writeQueue=[],this.proxy.end(t)}_destroy(t,e){this.writeQueue=[],this.proxy.destroy(),e(t)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(t,e,i){this.proxy.write(t,e)===!1?this.proxy.once("drain",i):i()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:t,encoding:e,cb:i}=this.writeQueue.shift();this.writeToProxy(t,e,i)}}};s.BufferedDuplex=h}),vr=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(s,"__esModule",{value:!0}),s.streamBuilder=s.browserStreamBuilder=void 0;var o=(Fe(),Re(De)),a=c(iu()),h=c(gt()),t=Dt(),e=c(Nr()),i=An(),r=(0,h.default)("mqttjs:ws"),n=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function l(E,m){let w=`${E.protocol}://${E.hostname}:${E.port}${E.path}`;return typeof E.transformWsUrl=="function"&&(w=E.transformWsUrl(w,E,m)),w}function f(E){let m=E;return E.port||(E.protocol==="wss"?m.port=443:m.port=80),E.path||(m.path="/"),E.wsOptions||(m.wsOptions={}),!e.default&&!E.forceNativeWebSocket&&E.protocol==="wss"&&n.forEach(w=>{Object.prototype.hasOwnProperty.call(E,w)&&!Object.prototype.hasOwnProperty.call(E.wsOptions,w)&&(m.wsOptions[w]=E[w])}),m}function d(E){let m=f(E);if(m.hostname||(m.hostname=m.host),!m.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let w=new URL(document.URL);m.hostname=w.hostname,m.port||(m.port=Number(w.port))}return m.objectMode===void 0&&(m.objectMode=!(m.binary===!0||m.binary===void 0)),m}function p(E,m,w){r("createWebSocket"),r(`protocol: ${w.protocolId} ${w.protocolVersion}`);let I=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt";r(`creating new Websocket for url: ${m} and protocol: ${I}`);let T;return w.createWebsocket?T=w.createWebsocket(m,[I],w):T=new a.default(m,[I],w.wsOptions),T}function y(E,m){let w=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt",I=l(m,E),T;return m.createWebsocket?T=m.createWebsocket(I,[w],m):T=new WebSocket(I,[w]),T.binaryType="arraybuffer",T}var g=(E,m)=>{r("streamBuilder");let w=f(m);w.hostname=w.hostname||w.host||"localhost";let I=l(w,E),T=p(E,I,w),S=a.default.createWebSocketStream(T,w.wsOptions);return S.url=I,T.on("close",()=>{S.destroy()}),S};s.streamBuilder=g;var b=(E,m)=>{r("browserStreamBuilder");let w,I=d(m).browserBufferSize||1024*512,T=m.browserBufferTimeout||1e3,S=!m.objectMode,k=y(E,m),P=K(m,U,ie);m.objectMode||(P._writev=i.writev.bind(P)),P.on("close",()=>{k.close()});let $=typeof k.addEventListener<"u";k.readyState===k.OPEN?(w=P,w.socket=k):(w=new i.BufferedDuplex(m,P,k),$?k.addEventListener("open",ae):k.onopen=ae),$?(k.addEventListener("close",N),k.addEventListener("error",V),k.addEventListener("message",G)):(k.onclose=N,k.onerror=V,k.onmessage=G);function K(fe,pe,_e){let F=new t.Transform({objectMode:fe.objectMode});return F._write=pe,F._flush=_e,F}function ae(){r("WebSocket onOpen"),w instanceof i.BufferedDuplex&&w.socketReady()}function N(fe){r("WebSocket onClose",fe),w.end(),w.destroy()}function V(fe){r("WebSocket onError",fe);let pe=new Error("WebSocket error");pe.event=fe,w.destroy(pe)}function G(fe){return xe(this,null,function*(){if(!P||P.destroyed||!P.readable)return;let{data:pe}=fe;pe instanceof ArrayBuffer?pe=o.Buffer.from(pe):pe instanceof Blob?pe=o.Buffer.from(yield new Response(pe).arrayBuffer()):pe=o.Buffer.from(pe,"utf8"),P.push(pe)})}function U(fe,pe,_e){if(k.bufferedAmount>I){setTimeout(U,T,fe,pe,_e);return}S&&typeof fe=="string"&&(fe=o.Buffer.from(fe,"utf8"));try{k.send(fe)}catch(F){return _e(F)}_e()}function ie(fe){k.close(),fe()}return w};s.browserStreamBuilder=b}),kn={};Vt(kn,{Server:()=>Be,Socket:()=>Be,Stream:()=>Be,_createServerHandle:()=>Be,_normalizeArgs:()=>Be,_setSimultaneousAccepts:()=>Be,connect:()=>Be,createConnection:()=>Be,createServer:()=>Be,default:()=>sa,isIP:()=>Be,isIPv4:()=>Be,isIPv6:()=>Be});function Be(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var sa,aa=ze(()=>{ne(),se(),oe(),sa={_createServerHandle:Be,_normalizeArgs:Be,_setSimultaneousAccepts:Be,connect:Be,createConnection:Be,createServer:Be,isIP:Be,isIPv4:Be,isIPv6:Be,Server:Be,Socket:Be,Stream:Be}}),la=de((s,c)=>{ne(),se(),oe(),c.exports={}}),Io=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(s,"__esModule",{value:!0});var o=c((aa(),Re(kn))),a=c(gt()),h=c(la()),t=(0,a.default)("mqttjs:tcp"),e=(i,r)=>{if(r.port=r.port||1883,r.hostname=r.hostname||r.host||"localhost",r.socksProxy)return(0,h.default)(r.hostname,r.port,r.socksProxy,{timeout:r.socksTimeout});let{port:n,path:l}=r,f=r.hostname;return t("port %d and host %s",n,f),o.default.createConnection({port:n,host:f,path:l})};s.default=e}),ua={};Vt(ua,{default:()=>ha});var ha,nu=ze(()=>{ne(),se(),oe(),ha={}}),To=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__rest||function(l,f){var d={};for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&f.indexOf(p)<0&&(d[p]=l[p]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,p=Object.getOwnPropertySymbols(l);y<p.length;y++)f.indexOf(p[y])<0&&Object.prototype.propertyIsEnumerable.call(l,p[y])&&(d[p[y]]=l[p[y]]);return d},o=s&&s.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(s,"__esModule",{value:!0});var a=o((nu(),Re(ua))),h=o((aa(),Re(kn))),t=o(gt()),e=o(la()),i=(0,t.default)("mqttjs:tls");function r(l){let{host:f,port:d,socksProxy:p}=l,y=c(l,["host","port","socksProxy"]);return a.default.connect(p?Object.assign(Object.assign({},y),{socket:(0,e.default)(f,d,p,{timeout:l.socksTimeout})}):l)}var n=(l,f)=>{f.port=f.port||8883,f.host=f.hostname||f.host||"localhost",h.default.isIP(f.host)===0&&(f.servername=f.host),f.rejectUnauthorized=f.rejectUnauthorized!==!1,delete f.path,i("port %d host %s rejectUnauthorized %b",f.port,f.host,f.rejectUnauthorized);let d=r(f);d.on("secureConnect",()=>{f.rejectUnauthorized&&!d.authorized?d.emit("error",new Error("TLS not authorized")):d.removeListener("error",p)});function p(y){f.rejectUnauthorized&&l.emit("error",y),d.end()}return d.on("error",p),d};s.default=n}),Co=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(Fe(),Re(De)),o=Dt(),a=An(),h,t,e;function i(){let d=new o.Transform;return d._write=(p,y,g)=>{h.send({data:p.buffer,success(){g()},fail(b){g(new Error(b))}})},d._flush=p=>{h.close({success(){p()}})},d}function r(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function n(d,p){let y=d.protocol==="wxs"?"wss":"ws",g=`${y}://${d.hostname}${d.path}`;return d.port&&d.port!==80&&d.port!==443&&(g=`${y}://${d.hostname}:${d.port}${d.path}`),typeof d.transformWsUrl=="function"&&(g=d.transformWsUrl(g,d,p)),g}function l(){h.onOpen(()=>{e.socketReady()}),h.onMessage(d=>{let{data:p}=d;p instanceof ArrayBuffer?p=c.Buffer.from(p):p=c.Buffer.from(p,"utf8"),t.push(p)}),h.onClose(()=>{e.emit("close"),e.end(),e.destroy()}),h.onError(d=>{let p=new Error(d.errMsg);e.destroy(p)})}var f=(d,p)=>{if(p.hostname=p.hostname||p.host,!p.hostname)throw new Error("Could not determine host. Specify host manually.");let y=p.protocolId==="MQIsdp"&&p.protocolVersion===3?"mqttv3.1":"mqtt";r(p);let g=n(p,d);h=wx.connectSocket({url:g,protocols:[y]}),t=i(),e=new a.BufferedDuplex(p,t,h),e._destroy=(E,m)=>{h.close({success(){m&&m(E)}})};let b=e.destroy;return e.destroy=(E,m)=>(e.destroy=b,setTimeout(()=>{h.close({fail(){e._destroy(E,m)}})},0),e),l(),e};s.default=f}),Oo=de(s=>{"use strict";ne(),se(),oe(),Object.defineProperty(s,"__esModule",{value:!0});var c=(Fe(),Re(De)),o=Dt(),a=An(),h,t,e,i=!1;function r(){let p=new o.Transform;return p._write=(y,g,b)=>{h.sendSocketMessage({data:y.buffer,success(){b()},fail(){b(new Error)}})},p._flush=y=>{h.closeSocket({success(){y()}})},p}function n(p){p.hostname||(p.hostname="localhost"),p.path||(p.path="/"),p.wsOptions||(p.wsOptions={})}function l(p,y){let g=p.protocol==="alis"?"wss":"ws",b=`${g}://${p.hostname}${p.path}`;return p.port&&p.port!==80&&p.port!==443&&(b=`${g}://${p.hostname}:${p.port}${p.path}`),typeof p.transformWsUrl=="function"&&(b=p.transformWsUrl(b,p,y)),b}function f(){i||(i=!0,h.onSocketOpen(()=>{e.socketReady()}),h.onSocketMessage(p=>{if(typeof p.data=="string"){let y=c.Buffer.from(p.data,"base64");t.push(y)}else{let y=new FileReader;y.addEventListener("load",()=>{let g=y.result;g instanceof ArrayBuffer?g=c.Buffer.from(g):g=c.Buffer.from(g,"utf8"),t.push(g)}),y.readAsArrayBuffer(p.data)}}),h.onSocketClose(()=>{e.end(),e.destroy()}),h.onSocketError(p=>{e.destroy(p)}))}var d=(p,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let g=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";n(y);let b=l(y,p);return h=y.my,h.connectSocket({url:b,protocols:g}),t=r(),e=new a.BufferedDuplex(y,t,h),f(),e};s.default=d}),ou=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0}),s.connectAsync=l;var o=c(gt()),a=c((ru(),Re(Ps))),h=c(ln()),t=c(Nr());typeof ke?.nextTick!="function"&&(ke.nextTick=setImmediate);var e=(0,o.default)("mqttjs"),i=null;function r(f){let d;f.auth&&(d=f.auth.match(/^(.+):(.+)$/),d?(f.username=d[1],f.password=d[2]):f.username=f.auth)}function n(f,d){var p,y,g;if(e("connecting to an MQTT broker..."),typeof f=="object"&&!d&&(d=f,f=""),d=d||{},f&&typeof f=="string"){let m=a.default.parse(f,!0),w={};if(m.port!=null&&(w.port=Number(m.port)),w.host=m.hostname,w.query=m.query,w.auth=m.auth,w.protocol=m.protocol,w.path=m.path,d=Object.assign(Object.assign({},w),d),!d.protocol)throw new Error("Missing protocol");d.protocol=d.protocol.replace(/:$/,"")}if(d.unixSocket=d.unixSocket||((p=d.protocol)===null||p===void 0?void 0:p.includes("+unix")),d.unixSocket?d.protocol=d.protocol.replace("+unix",""):!(!((y=d.protocol)===null||y===void 0)&&y.startsWith("ws"))&&!(!((g=d.protocol)===null||g===void 0)&&g.startsWith("wx"))&&delete d.path,r(d),d.query&&typeof d.query.clientId=="string"&&(d.clientId=d.query.clientId),t.default||d.unixSocket?d.socksProxy=void 0:d.socksProxy===void 0&&typeof ke<"u"&&(d.socksProxy=ke.env.MQTTJS_SOCKS_PROXY),d.cert&&d.key)if(d.protocol){if(["mqtts","wss","wxs","alis"].indexOf(d.protocol)===-1)switch(d.protocol){case"mqtt":d.protocol="mqtts";break;case"ws":d.protocol="wss";break;case"wx":d.protocol="wxs";break;case"ali":d.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${d.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(i||(i={},!t.default&&!d.forceNativeWebSocket?(i.ws=vr().streamBuilder,i.wss=vr().streamBuilder,i.mqtt=Io().default,i.tcp=Io().default,i.ssl=To().default,i.tls=i.ssl,i.mqtts=To().default):(i.ws=vr().browserStreamBuilder,i.wss=vr().browserStreamBuilder,i.wx=Co().default,i.wxs=Co().default,i.ali=Oo().default,i.alis=Oo().default)),!i[d.protocol]){let m=["mqtts","wss"].indexOf(d.protocol)!==-1;d.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((w,I)=>m&&I%2===0?!1:typeof i[w]=="function")[0]}if(d.clean===!1&&!d.clientId)throw new Error("Missing clientId for unclean clients");d.protocol&&(d.defaultProtocol=d.protocol);function b(m){return d.servers&&((!m._reconnectCount||m._reconnectCount===d.servers.length)&&(m._reconnectCount=0),d.host=d.servers[m._reconnectCount].host,d.port=d.servers[m._reconnectCount].port,d.protocol=d.servers[m._reconnectCount].protocol?d.servers[m._reconnectCount].protocol:d.defaultProtocol,d.hostname=d.host,m._reconnectCount++),e("calling streambuilder for",d.protocol),i[d.protocol](m,d)}let E=new h.default(b,d);return E.on("error",()=>{}),E}function l(f,d,p=!0){return new Promise((y,g)=>{let b=n(f,d),E={connect:w=>{m(),y(b)},end:()=>{m(),y(b)},error:w=>{m(),b.end(),g(w)}};p===!1&&(E.close=()=>{E.error(new Error("Couldn't connect to server"))});function m(){Object.keys(E).forEach(w=>{b.off(w,E[w])})}Object.keys(E).forEach(w=>{b.on(w,E[w])})})}s.default=n}),Ro=de(s=>{"use strict";ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(p,y,g,b){b===void 0&&(b=g);var E=Object.getOwnPropertyDescriptor(y,g);(!E||("get"in E?!y.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return y[g]}}),Object.defineProperty(p,b,E)}:function(p,y,g,b){b===void 0&&(b=g),p[b]=y[g]}),o=s&&s.__setModuleDefault||(Object.create?function(p,y){Object.defineProperty(p,"default",{enumerable:!0,value:y})}:function(p,y){p.default=y}),a=s&&s.__importStar||function(){var p=function(y){return p=Object.getOwnPropertyNames||function(g){var b=[];for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(b[b.length]=E);return b},p(y)};return function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var b=p(y),E=0;E<b.length;E++)b[E]!=="default"&&c(g,y,b[E]);return o(g,y),g}}(),h=s&&s.__exportStar||function(p,y){for(var g in p)g!=="default"&&!Object.prototype.hasOwnProperty.call(y,g)&&c(y,p,g)},t=s&&s.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(s,"__esModule",{value:!0}),s.ReasonCodes=s.KeepaliveManager=s.UniqueMessageIdProvider=s.DefaultMessageIdProvider=s.Store=s.MqttClient=s.connectAsync=s.connect=s.Client=void 0;var e=t(ln());s.MqttClient=e.default;var i=t(as());s.DefaultMessageIdProvider=i.default;var r=t(Fl());s.UniqueMessageIdProvider=r.default;var n=t(ls());s.Store=n.default;var l=a(ou());s.connect=l.default,Object.defineProperty(s,"connectAsync",{enumerable:!0,get:function(){return l.connectAsync}});var f=t(ks());s.KeepaliveManager=f.default,s.Client=e.default,h(ln(),s),h(Qt(),s);var d=Br();Object.defineProperty(s,"ReasonCodes",{enumerable:!0,get:function(){return d.ReasonCodes}})}),su=de(s=>{ne(),se(),oe();var c=s&&s.__createBinding||(Object.create?function(e,i,r,n){n===void 0&&(n=r);var l=Object.getOwnPropertyDescriptor(i,r);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[r]}}),Object.defineProperty(e,n,l)}:function(e,i,r,n){n===void 0&&(n=r),e[n]=i[r]}),o=s&&s.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),a=s&&s.__importStar||function(){var e=function(i){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[n.length]=l);return n},e(i)};return function(i){if(i&&i.__esModule)return i;var r={};if(i!=null)for(var n=e(i),l=0;l<n.length;l++)n[l]!=="default"&&c(r,i,n[l]);return o(r,i),r}}(),h=s&&s.__exportStar||function(e,i){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(i,r)&&c(i,e,r)};Object.defineProperty(s,"__esModule",{value:!0});var t=a(Ro());s.default=t,h(Ro(),s)}),ca=su();var jr=class s{client;constructor(){this.client=ca.connect("ws://test.mosquitto.org:8080"),this.setupListeners()}setupListeners(){this.client.on("connect",()=>{console.log("\u2705 MQTT conectado"),this.client.subscribe("datos/brayan/publica",c=>{c||console.log("\u{1F4E1} Suscrito a datos/brayan/publica")})}),this.client.on("message",(c,o)=>{console.log(`\u{1F4E5} Mensaje recibido en ${c}:`,o.toString())}),this.client.on("error",c=>{console.error("\u274C Error MQTT:",c)})}getClient(){return this.client}publish(c,o){this.client.publish(c,o)}subscribe(c){this.client.subscribe(c)}static \u0275fac=function(o){return new(o||s)};static \u0275prov=Bn({token:s,factory:s.\u0275fac,providedIn:"root"})};var fa=class s{constructor(c){this.mqttService=c}value=0;thresholds={"-40":{color:"#7a96f1ff"},15:{color:"#2196f3"},35:{color:"#ffc107"},60:{color:"#f44336"}};ngOnInit(){this.mqttService.getClient().on("message",(c,o)=>{let a=JSON.parse(o.toString());a&&a.temperatura!==void 0&&(this.value=a.temperatura)})}static \u0275fac=function(o){return new(o||s)(Kt(jr))};static \u0275cmp=fr({type:s,selectors:[["app-dashboard"]],decls:1,vars:12,consts:[[3,"size","value","min","max","thick","label","append","type","cap","animate","duration","thresholds"]],template:function(o,a){o&1&&gr(0,"ngx-gauge",0),o&2&&Ve("size",400)("value",a.value)("min",-40)("max",80)("thick",20)("label","Temperatura")("append","\xB0C")("type","arch")("cap","round")("animate",!0)("duration",800)("thresholds",a.thresholds)},dependencies:[eo,Zn],encapsulation:2})};export{fa as Dashboard};
